"use strict";(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[495],{14917:(e,t,a)=>{a.d(t,{A:()=>x});var r=a(22555),s=a(65043),n=a(37988),d=a(43315),l=a(47012),c=a(28858),i=a(87498),o=a(70579);const x=e=>{let{companyId:t,employeeId:a,employeeName:x,isCompanyView:g=!1}=e;const[m,u]=(0,s.useState)("month"),[h,p]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[k,v]=(0,s.useState)([]),[j,w]=(0,s.useState)(!1),[f,N]=(0,s.useState)([]),[D,S]=(0,s.useState)(null),[_,C]=(0,s.useState)(!1);(0,s.useEffect)(()=>{g&&M(),A()},[m,g]),(0,s.useEffect)(()=>{h&&y&&z()},[h,y,D,_]);const M=async()=>{try{const e=await c.hrService.getEmployees(t);N(e),e.length>0&&S(e[0].id)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed zamestnancov:",e)}},A=()=>{const e=new Date;let t,a;switch(m){case"week":t=new Date(e),t.setDate(e.getDate()-e.getDay()+1),a=new Date(e);break;case"month":default:t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0);break;case"year":t=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),11,31);break;case"custom":return}const r=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r)};p(r(t)),b(r(a))},z=async()=>{if(h&&y){w(!0);try{if(_){const e=(await Promise.all(f.map(async e=>{try{return(await c.hrService.getAttendance(t,e.id,h,y)).map(t=>(0,r.A)((0,r.A)({},t),{},{employee_name:"".concat(e.first_name," ").concat(e.last_name)}))}catch(a){return console.error("Chyba pri na\u010d\xedtan\xed doch\xe1dzky pre zamestnanca ".concat(e.id,":"),a),[]}}))).flat();v(e)}else{const r=a||D;if(!r)return;try{const e=await c.hrService.checkAttendanceDuplicates(t,r,h,y);e.duplicates&&e.duplicates.length>0&&console.warn("N\xe1jden\xe9 duplicitn\xe9 z\xe1znamy doch\xe1dzky:",e.duplicates)}catch(e){console.error("Chyba pri kontrole duplicitn\xfdch z\xe1znamov:",e)}const s=await c.hrService.getAttendance(t,r,h,y);v(s)}}catch(e){console.error("Chyba pri na\u010d\xedtan\xed doch\xe1dzky:",e)}finally{w(!1)}}},W=e=>{if(!e)return"-";try{if(e.match(/^\d{2}:\d{2}$/))return e;const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleTimeString("sk-SK",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(t){return console.error("Chyba pri form\xe1tovan\xed \u010dasu:",e,t),"-"}},[H,I]=(0,s.useState)(null);return(0,s.useEffect)(()=>{const e=async()=>{const e=await(async()=>{if(!k.length)return null;let e,t,a,r;if(_){e=await i.I.calculateWorkingDays(h,y);const s=k.filter(e=>"absent"===e.status).length;t=s,a=e-s,r=k.filter(e=>"late"===e.status).length}else{e=await i.I.calculateWorkingDays(h,y);const s=new Set(k.filter(e=>"present"===e.status).map(e=>e.date)),n=new Set(k.filter(e=>"late"===e.status).map(e=>e.date)),d=new Set;s.forEach(e=>d.add(e)),n.forEach(e=>d.add(e)),t=d.size,a=Math.max(0,e-t),r=n.size}const s=k.reduce((e,t)=>e+(t.total_hours||0),0),n=k.reduce((e,t)=>e+(t.break_minutes||0),0),d=e>0?s/e:0,l=e>0?Math.min(100,t/e*100):0;return console.log("Attendance Overview Debug:",{attendanceLength:k.length,totalHours:s,totalBreakMinutes:n,presentDays:t,absentDays:a,totalDays:e,attendanceRate:l,averageHours:d,uniqueDates:_?"N/A":new Set(k.map(e=>e.date)).size,presentDates:_?"N/A":new Set(k.filter(e=>"present"===e.status).map(e=>e.date)).size,lateDates:_?"N/A":new Set(k.filter(e=>"late"===e.status).map(e=>e.date)).size}),{totalDays:e,presentDays:t,absentDays:a,lateDays:r,totalHours:s,totalBreakMinutes:n,averageHours:d,attendanceRate:l,uniqueEmployees:_?new Set(k.map(e=>e.employee_name)).size:1}})();I(e)};k.length>0?e():I(null)},[k,_,h,y,f.length]),(0,o.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:[(0,o.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"Preh\u013ead doch\xe1dzky"}),x&&(0,o.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:x})]}),(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-4 lg:mt-0",children:[(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)(n.A,{className:"w-5 h-5 text-gray-400"}),(0,o.jsx)("select",{value:m,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white text-sm",children:[{value:"week",label:"Tento t\xfd\u017ede\u0148"},{value:"month",label:"Tento mesiac"},{value:"year",label:"Tento rok"},{value:"custom",label:"Vlastn\xe9 obdobie"}].map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"custom"===m&&(0,o.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,o.jsx)("input",{type:"date",value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white text-sm"}),(0,o.jsx)("span",{className:"text-gray-500",children:"-"}),(0,o.jsx)("input",{type:"date",value:y,onChange:e=>b(e.target.value),className:"px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white text-sm"})]})]})]}),g&&f.length>0&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Zobrazenie doch\xe1dzky"}),(0,o.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"radio",name:"viewType",checked:!_,onChange:()=>C(!1),className:"mr-2"}),(0,o.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Individu\xe1lne"})]}),(0,o.jsxs)("label",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"radio",name:"viewType",checked:_,onChange:()=>C(!0),className:"mr-2"}),(0,o.jsx)("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"V\u0161etci zamestnanci"})]})]})]}),!_&&(0,o.jsx)("select",{value:D||"",onChange:e=>S(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:f.map(e=>(0,o.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id))})]}),H&&(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 ".concat(_?"lg:grid-cols-5":""," gap-4 mb-6"),children:[(0,o.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(d.A,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"\xda\u010das\u0165"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:[H.attendanceRate.toFixed(1),"%"]})]})]})}),(0,o.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(l.A,{className:"w-8 h-8 text-green-600 dark:text-green-400"}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Celkov\xe9 hodiny"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:(()=>{const e=H.totalHours,t=Math.floor(e),a=Math.round(60*(e-t));return"".concat(t,":").concat(a.toString().padStart(2,"0"))})()})]})]})}),(0,o.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(l.A,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Priemern\xe9 hodiny"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:(()=>{const e=H.averageHours,t=Math.floor(e),a=Math.round(60*(e-t));return"".concat(t,":").concat(a.toString().padStart(2,"0"))})()})]})]})}),(0,o.jsx)("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(l.A,{className:"w-8 h-8 text-purple-600 dark:text-purple-400"}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Prest\xe1vky"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:(()=>{const e=Math.round(H.totalBreakMinutes),t=Math.floor(e/60),a=e%60;return"".concat(t,":").concat(a.toString().padStart(2,"0"))})()})]})]})}),_&&(0,o.jsx)("div",{className:"bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(d.A,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:"Zamestnanci"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-indigo-900 dark:text-indigo-100",children:H.uniqueEmployees})]})]})})]}),H&&(0,o.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,o.jsxs)("div",{className:"text-center p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:H.totalDays}),(0,o.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:_?"Celkovo pracovn\xfdch dn\xed":"Celkovo dn\xed"})]}),(0,o.jsxs)("div",{className:"text-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,o.jsx)("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:H.presentDays}),(0,o.jsx)("p",{className:"text-sm text-green-600 dark:text-green-400",children:_?"Dni pracovn\xe9ho vo\u013ena":"Pr\xedtomn\xe9 dni"})]}),(0,o.jsxs)("div",{className:"text-center p-3 bg-red-50 dark:bg-red-900/20 rounded-lg",children:[(0,o.jsx)("p",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:H.absentDays}),(0,o.jsx)("p",{className:"text-sm text-red-600 dark:text-red-400",children:_?"Pr\xedtomn\xe9 dni":"Nepr\xedtomn\xe9 dni"})]}),(0,o.jsxs)("div",{className:"text-center p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[(0,o.jsx)("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:H.lateDays}),(0,o.jsx)("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:"Me\u0161kania"})]})]}),(0,o.jsx)("div",{className:"overflow-x-auto",children:(0,o.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,o.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,o.jsxs)("tr",{children:[_&&(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zamestnanec"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"D\xe1tum"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pr\xedchod"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Odchod"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Hodiny"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Prest\xe1vky"}),(0,o.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),(0,o.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:j?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:_?7:6,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"Na\u010d\xedtavam..."})}):0===k.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:_?7:6,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"\u017diadne z\xe1znamy doch\xe1dzky pre vybran\xe9 obdobie"})}):k.map(e=>{return(0,o.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[_&&(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.employee_name||"-"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(t=e.date,new Date(t).toLocaleDateString("sk-SK",{weekday:"short",day:"2-digit",month:"2-digit"}))}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.check_in?W(e.check_in):"-"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.check_out?W(e.check_out):"-"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.total_hours?(()=>{const t=e.total_hours,a=Math.floor(t),r=Math.round(60*(t-a));return"".concat(a,":").concat(r.toString().padStart(2,"0"))})():"-"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.break_minutes?(()=>{const t=e.break_minutes,a=Math.floor(t/60),r=t%60;return"".concat(a,":").concat(r.toString().padStart(2,"0"))})():"-"}),(0,o.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,o.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("present"===e.status?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"late"===e.status?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"),children:c.hrService.getAttendanceStatusLabel(e.status)})})]},e.id);var t})})]})})]})}},87498:(e,t,a)=>{a.d(t,{I:()=>s});var r=a(39304);class s{static async getWorkCalendar(e){return r.apiService.get("/hr/work-calendar/".concat(e))}static isWeekend(e){const t=e.getDay();return 0===t||6===t}static isHoliday(e,t){const a=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),n="".concat(a,"-").concat(r,"-").concat(s);return t.some(e=>e.date===n)}static async calculateWorkingDays(e,t){try{const a=new Date(e),r=new Date(t),s=a.getFullYear(),n=await this.getWorkCalendar(s);let d=0;const l=new Date(a);for(;l<=r;)this.isWeekend(l)||this.isHoliday(l,n.holidays)||d++,l.setDate(l.getDate()+1);return d}catch(a){return console.error("\u274c Chyba pri v\xfdpo\u010dte pracovn\xfdch dn\xed:",a),this.calculateBasicWorkingDays(e,t)}}static calculateBasicWorkingDays(e,t){if(!e||!t)return 0;const a=new Date(e),r=new Date(t);let s=0;const n=new Date(a);for(;n<=r;)this.isWeekend(n)||s++,n.setDate(n.getDate()+1);return s}static getHolidayName(e,t){const a=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),n="".concat(a,"-").concat(r,"-").concat(s),d=t.find(e=>e.date===n);return d?d.title:null}static getHolidaysInRange(e,t,a){const r=new Date(e),s=new Date(t);return a.filter(e=>{const t=new Date(e.date);return t>=r&&t<=s})}static formatDate(e){return e.toLocaleDateString("sk-SK",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}static getDayInfo(e,t){const a=this.isWeekend(e),r=this.isHoliday(e,t);return{isWorkingDay:!a&&!r,isWeekend:a,isHoliday:r,holidayName:r?this.getHolidayName(e,t):void 0}}}},91755:(e,t,a)=>{a.d(t,{A:()=>u});var r=a(22555),s=a(65043),n=a(77591),d=a(28858),l=a(87498),c=a(37988),i=a(58224),o=a(76365),x=a(70579);const g=e=>{let{value:t,onChange:a,min:r,max:n,placeholder:d="Vyberte d\xe1tum",className:g="",disabled:m=!1}=e;const[u,h]=(0,s.useState)(!1),[p,y]=(0,s.useState)(new Date),[b,k]=(0,s.useState)([]),[v,j]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{j(!0);try{const e=p.getFullYear(),t=await l.I.getWorkCalendar(e);k(t.holidays)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed sviatkov:",e),k([])}finally{j(!1)}})()},[p.getFullYear()]);const w=e=>{y(t=>{const a=new Date(t);return"prev"===e?a.setMonth(a.getMonth()-1):a.setMonth(a.getMonth()+1),a})},f=(()=>{const e=p.getFullYear(),a=p.getMonth(),s=new Date(e,a,1);new Date(e,a+1,0);let d=s.getDay();0===d&&(d=7),d-=1;const c=new Date(s);c.setDate(c.getDate()-d);const i=[],o=new Date(c);for(let x=0;x<42;x++){const e=l.I.getDayInfo(o,b);i.push({date:new Date(o),isCurrentMonth:o.getMonth()===a,isToday:o.toDateString()===(new Date).toDateString(),isSelected:t==="".concat(o.getFullYear(),"-").concat(String(o.getMonth()+1).padStart(2,"0"),"-").concat(String(o.getDate()).padStart(2,"0")),isWeekend:e.isWeekend,isHoliday:e.isHoliday,holidayName:e.holidayName||void 0,isDisabled:Boolean(r&&o<new Date(r)||n&&o>new Date(n))}),o.setDate(o.getDate()+1)}return i})();return(0,x.jsxs)("div",{className:"relative ".concat(g),children:[(0,x.jsxs)("div",{className:"relative",children:[(0,x.jsx)("input",{type:"text",value:t?new Date(t).toLocaleDateString("sk-SK"):"",placeholder:d,readOnly:!0,disabled:m,onClick:()=>!m&&h(!u),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"}),(0,x.jsx)(c.A,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"})]}),u&&(0,x.jsxs)("div",{className:"absolute top-full left-0 mt-1 bg-white dark:bg-dark-800 border border-gray-300 dark:border-dark-600 rounded-md shadow-lg z-50 min-w-[280px]",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-3 border-b border-gray-200 dark:border-dark-600",children:[(0,x.jsx)("button",{onClick:()=>w("prev"),className:"p-1 hover:bg-gray-100 dark:hover:bg-dark-700 rounded",children:(0,x.jsx)(i.A,{className:"h-5 w-5"})}),(0,x.jsx)("h3",{className:"text-sm font-medium text-gray-900 dark:text-white",children:p.toLocaleDateString("sk-SK",{month:"long",year:"numeric"})}),(0,x.jsx)("button",{onClick:()=>w("next"),className:"p-1 hover:bg-gray-100 dark:hover:bg-dark-700 rounded",children:(0,x.jsx)(o.A,{className:"h-5 w-5"})})]}),(0,x.jsx)("div",{className:"grid grid-cols-7 gap-px bg-gray-200 dark:bg-dark-600",children:["Po","Ut","St","\u0160t","Pi","So","Ne"].map(e=>(0,x.jsx)("div",{className:"bg-white dark:bg-dark-800 p-2 text-center text-xs font-medium text-gray-500 dark:text-gray-400",children:e},e))}),(0,x.jsx)("div",{className:"grid grid-cols-7 gap-px bg-gray-200 dark:bg-dark-600",children:f.map((e,t)=>{let r="bg-white dark:bg-dark-800",s="text-gray-900 dark:text-white",n="";return e.isSelected?(r="bg-blue-500",s="text-white"):e.isToday&&(n="border-2 border-blue-500"),e.isWeekend?(r=e.isSelected?"bg-green-500":"bg-green-50 dark:bg-green-900/20",s=e.isSelected?"text-white":"text-green-700 dark:text-green-300"):e.isHoliday&&(r=e.isSelected?"bg-red-500":"bg-red-50 dark:bg-red-900/20",s=e.isSelected?"text-white":"text-red-700 dark:text-red-300"),e.isDisabled&&(r="bg-gray-100 dark:bg-dark-700",s="text-gray-400 dark:text-gray-500"),(0,x.jsx)("button",{onClick:()=>!e.isDisabled&&(e=>{const t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),n="".concat(t,"-").concat(r,"-").concat(s);a(n),h(!1)})(e.date),disabled:e.isDisabled,className:"\n                    ".concat(r," ").concat(s," ").concat(n,"\n                    p-2 text-sm font-medium hover:bg-gray-100 dark:hover:bg-dark-700\n                    disabled:cursor-not-allowed disabled:opacity-50\n                    ").concat(e.isCurrentMonth?"":"opacity-30","\n                    relative\n                  "),title:e.holidayName?"Sviatok: ".concat(e.holidayName):e.isWeekend?"V\xedkend":void 0,children:e.date.getDate()},t)})}),(0,x.jsx)("div",{className:"p-3 border-t border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700",children:(0,x.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)("div",{className:"w-3 h-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700"}),(0,x.jsx)("span",{children:"Sviatky"})]}),(0,x.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,x.jsx)("div",{className:"w-3 h-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700"}),(0,x.jsx)("span",{children:"V\xedkendy"})]})]}),v&&(0,x.jsx)("div",{className:"text-blue-600 dark:text-blue-400",children:"Na\u010d\xedtavam..."})]})})]}),u&&(0,x.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>h(!1)})]})},m=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r)},u=e=>{let{isOpen:t,onClose:a,leaveRequest:c,companyId:i,employeeId:o,employeeName:u,onSuccess:h}=e;const[p,y]=(0,s.useState)({leave_type:"vacation",start_date:"",end_date:"",total_days:"",reason:""}),[b,k]=(0,s.useState)(!1),v=!!c;(0,s.useEffect)(()=>{t&&y(c?{leave_type:c.leave_type,start_date:c.start_date,end_date:c.end_date,total_days:c.total_days.toString(),reason:c.reason||""}:{leave_type:"vacation",start_date:"",end_date:"",total_days:"",reason:""})},[t,c]);const j=async(e,t)=>{y(a=>{const s=(0,r.A)((0,r.A)({},a),{},{[e]:t});return s.start_date&&s.end_date&&(async(e,t)=>{try{return await l.I.calculateWorkingDays(e,t)}catch(a){return console.error("\u274c Chyba pri v\xfdpo\u010dte pracovn\xfdch dn\xed:",a),l.I.calculateBasicWorkingDays(e,t)}})(s.start_date,s.end_date).then(e=>{y(t=>(0,r.A)((0,r.A)({},t),{},{total_days:e.toString()}))}),s})},w=e=>{const{name:t,value:a}=e.target;"start_date"===t||"end_date"===t?j(t,a):y(e=>(0,r.A)((0,r.A)({},e),{},{[t]:a}))};return t?(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,x.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600",children:[(0,x.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:v?"Upravi\u0165 \u017eiados\u0165 o dovolenku":"Nov\xe1 \u017eiados\u0165 o dovolenku"}),(0,x.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,x.jsx)(n.A,{className:"w-6 h-6"})})]}),(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),k(!0);try{const e={employee_id:o,company_id:i,leave_type:p.leave_type,start_date:p.start_date,end_date:p.end_date,total_days:parseInt(p.total_days),status:"pending",reason:p.reason||void 0};v?alert("Edit\xe1cia dovoleniek zatia\u013e nie je implementovan\xe1"):await d.hrService.addLeaveRequest(e),h(),a()}catch(t){console.error("Chyba pri ukladan\xed \u017eiadosti o dovolenku:",t),alert("Chyba pri ukladan\xed \u017eiadosti o dovolenku")}finally{k(!1)}},className:"p-6 space-y-6",children:[(0,x.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,x.jsx)("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Zamestnanec"}),(0,x.jsx)("p",{className:"text-gray-900 dark:text-white",children:u})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Typ dovolenky *"}),(0,x.jsxs)("select",{name:"leave_type",value:p.leave_type,onChange:w,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[(0,x.jsx)("option",{value:"vacation",children:"Dovolenka"}),(0,x.jsx)("option",{value:"sick_leave",children:"PN"}),(0,x.jsx)("option",{value:"personal_leave",children:"Osobn\xe9 vo\u013eno"}),(0,x.jsx)("option",{value:"maternity_leave",children:"Matersk\xe1 dovolenka"}),(0,x.jsx)("option",{value:"paternity_leave",children:"Otcovsk\xe1 dovolenka"}),(0,x.jsx)("option",{value:"unpaid_leave",children:"Neplaten\xe9 vo\u013eno"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Po\u010det dn\xed *"}),(0,x.jsx)("input",{type:"number",name:"total_days",value:p.total_days,onChange:w,min:"1",required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"5"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Za\u010diatok dovolenky *"}),(0,x.jsx)(g,{value:p.start_date,onChange:e=>j("start_date",e),min:m(new Date),placeholder:"Vyberte d\xe1tum za\u010diatku",className:"w-full"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Koniec dovolenky *"}),(0,x.jsx)(g,{value:p.end_date,onChange:e=>j("end_date",e),min:p.start_date||m(new Date),placeholder:"Vyberte d\xe1tum konca",className:"w-full"})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"D\xf4vod"}),(0,x.jsx)("textarea",{name:"reason",value:p.reason,onChange:w,rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"Pop\xed\u0161te d\xf4vod \u017eiadosti o dovolenku..."})]}),p.start_date&&p.end_date&&(0,x.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,x.jsx)("h4",{className:"text-sm font-medium text-blue-800 dark:text-blue-200 mb-2",children:"Inform\xe1cie o dovolenke"}),(0,x.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:"Od:"}),(0,x.jsx)("span",{className:"ml-2 text-blue-900 dark:text-blue-100",children:new Date(p.start_date).toLocaleDateString("sk-SK")})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:"Do:"}),(0,x.jsx)("span",{className:"ml-2 text-blue-900 dark:text-blue-100",children:new Date(p.end_date).toLocaleDateString("sk-SK")})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:"Po\u010det dn\xed:"}),(0,x.jsxs)("span",{className:"ml-2 text-blue-900 dark:text-blue-100",children:[p.total_days," dn\xed"]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("span",{className:"text-blue-700 dark:text-blue-300",children:"Typ:"}),(0,x.jsx)("span",{className:"ml-2 text-blue-900 dark:text-blue-100",children:d.hrService.getLeaveTypeLabel(p.leave_type)})]})]})]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-dark-600",children:[(0,x.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-dark-700 rounded-md hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors",children:"Zru\u0161i\u0165"}),(0,x.jsx)("button",{type:"submit",disabled:b,className:"px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors disabled:opacity-50",children:b?"Uklad\xe1m...":v?"Upravi\u0165":"Odosla\u0165 \u017eiados\u0165"})]})]})]})}):null}}}]);
//# sourceMappingURL=495.4e7bbd93.chunk.js.map