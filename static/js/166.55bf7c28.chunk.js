(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[166],{7449:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(53986),s=o(65043);const r=["title","titleId"];function n(e,t){let{title:o,titleId:n}=e,i=(0,a.A)(e,r);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),o?s.createElement("title",{id:n},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const i=s.forwardRef(n)},15340:()=>{},18662:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(53986),s=o(65043);const r=["title","titleId"];function n(e,t){let{title:o,titleId:n}=e,i=(0,a.A)(e,r);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),o?s.createElement("title",{id:n},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const i=s.forwardRef(n)},18950:()=>{},21638:()=>{},29422:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(53986),s=o(65043);const r=["title","titleId"];function n(e,t){let{title:o,titleId:n}=e,i=(0,a.A)(e,r);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),o?s.createElement("title",{id:n},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const i=s.forwardRef(n)},43218:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(53986),s=o(65043);const r=["title","titleId"];function n(e,t){let{title:o,titleId:n}=e,i=(0,a.A)(e,r);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),o?s.createElement("title",{id:n},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const i=s.forwardRef(n)},47790:()=>{},51069:()=>{},62811:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(53986),s=o(65043);const r=["title","titleId"];function n(e,t){let{title:o,titleId:n}=e,i=(0,a.A)(e,r);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),o?s.createElement("title",{id:n},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const i=s.forwardRef(n)},64688:()=>{},66089:()=>{},73776:()=>{},77965:()=>{},78982:()=>{},79248:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(53986),s=o(65043);const r=["title","titleId"];function n(e,t){let{title:o,titleId:n}=e,i=(0,a.A)(e,r);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),o?s.createElement("title",{id:n},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const i=s.forwardRef(n)},79368:()=>{},79670:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(53986),s=o(65043);const r=["title","titleId"];function n(e,t){let{title:o,titleId:n}=e,i=(0,a.A)(e,r);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),o?s.createElement("title",{id:n},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const i=s.forwardRef(n)},79838:()=>{},85442:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(53986),s=o(65043);const r=["title","titleId"];function n(e,t){let{title:o,titleId:n}=e,i=(0,a.A)(e,r);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),o?s.createElement("title",{id:n},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const i=s.forwardRef(n)},89531:(e,t,o)=>{"use strict";o.d(t,{A:()=>i});var a=o(53986),s=o(65043);const r=["title","titleId"];function n(e,t){let{title:o,titleId:n}=e,i=(0,a.A)(e,r);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),o?s.createElement("title",{id:n},o):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const i=s.forwardRef(n)},90398:(e,t,o)=>{"use strict";o.d(t,{k:()=>i});var a=o(89874);const s="aw4ioyb0u4dbis4",r="ub03kukj9sx6fta",n="http://localhost:3000/dropbox-callback";const i=new class{constructor(){this.dbx=null,this.accessToken=null,console.log("DropboxService: Inicializujem..."),console.log("DropboxService: Environment premenn\xe9:",{appKey:s,appSecret:r?"***":"CH\xddBA",appSecretLength:r?15:0,redirectUri:n}),this.accessToken=localStorage.getItem("dropbox_access_token"),console.log("DropboxService: Token z localStorage:",this.accessToken?"existuje":"neexistuje"),this.accessToken?(this.initializeDropbox(this.accessToken),console.log("DropboxService: Dropbox klient inicializovan\xfd")):console.log("DropboxService: \u017diadny token, Dropbox klient nie je inicializovan\xfd")}initializeDropbox(e){this.dbx=new a.Dropbox({accessToken:e,fetch:window.fetch.bind(window)})}getAuthUrl(){localStorage.removeItem("dropbox_auth_state");const e=Math.random().toString(36).substring(7);localStorage.setItem("dropbox_auth_state",e),console.log("DropboxService.getAuthUrl - konfigur\xe1cia:",{appKey:s,redirectUri:n,state:e,timestamp:(new Date).toISOString()});const t="https://www.dropbox.com/oauth2/authorize?client_id=".concat(s,"&response_type=code&redirect_uri=").concat(encodeURIComponent(n),"&state=").concat(e,"&token_access_type=offline");return console.log("DropboxService.getAuthUrl - vygenerovan\xfd URL:",t),t}async handleAuthCallback(e,t){console.log("dropboxService.handleAuthCallback - za\u010diatok"),console.log("Parametre:",{code:e.substring(0,10)+"...",state:t});const o=localStorage.getItem("dropbox_auth_state");if(console.log("Ulo\u017een\xfd state:",o),console.log("State porovnanie:",{received:t,saved:o,match:t===o}),t!==o)throw console.error("State nezhoduje:",{received:t,saved:o}),console.error("V\u0161etky localStorage polo\u017eky:",{dropbox_auth_state:localStorage.getItem("dropbox_auth_state"),dropbox_access_token:localStorage.getItem("dropbox_access_token"),dropbox_refresh_token:localStorage.getItem("dropbox_refresh_token")}),new Error("Invalid state parameter");console.log("State kontrola \xfaspe\u0161n\xe1, pokra\u010dujem v spracovan\xed...");try{console.log("Posielam po\u017eiadavku na Dropbox API..."),console.log("DropboxService.handleAuthCallback - parametre pre API:",{code:e.substring(0,10)+"...",client_id:s,client_secret:r?"***":"CH\xddBA",redirect_uri:n});const t=new URLSearchParams({code:e,grant_type:"authorization_code",client_id:s,client_secret:r,redirect_uri:n});console.log("DropboxService.handleAuthCallback - request body:",t.toString());const o=await window.fetch("https://api.dropboxapi.com/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(console.log("Dropbox API response status:",o.status),!o.ok){const e=await o.text();throw console.error("Dropbox API error:",e),console.error("Dropbox API response headers:",Object.fromEntries(o.headers.entries())),new Error("Failed to exchange code for token: ".concat(e))}const a=await o.json();return console.log("Dropbox API \xfaspe\u0161n\xe1 odpove\u010f:",{access_token:a.access_token.substring(0,10)+"...",token_type:a.token_type,expires_in:a.expires_in}),this.accessToken=a.access_token,localStorage.setItem("dropbox_access_token",a.access_token),a.refresh_token&&localStorage.setItem("dropbox_refresh_token",a.refresh_token),localStorage.removeItem("dropbox_auth_state"),console.log("State vy\u010disten\xfd po \xfaspe\u0161nom spracovan\xed"),console.log("Tokeny ulo\u017een\xe9 do localStorage"),this.initializeDropbox(a.access_token),console.log("Dropbox klient inicializovan\xfd"),a}catch(a){throw console.error("Error during OAuth callback:",a),a}}isAuthenticated(){const e=localStorage.getItem("dropbox_access_token");e&&!this.accessToken&&(this.accessToken=e,this.initializeDropbox(e),console.log("DropboxService.isAuthenticated: Reinicializoval klienta z localStorage"));const t=null!==this.dbx&&null!==this.accessToken;return console.log("DropboxService.isAuthenticated:",{dbx:null!==this.dbx,accessToken:null!==this.accessToken,tokenFromStorage:e?"existuje":"neexistuje",result:t}),t}logout(){this.dbx=null,this.accessToken=null,localStorage.removeItem("dropbox_access_token"),localStorage.removeItem("dropbox_refresh_token"),localStorage.removeItem("dropbox_auth_state")}async getAccountInfo(){if(!this.dbx)throw new Error("Dropbox not initialized");try{if(console.log("DropboxService.getAccountInfo - vol\xe1m Dropbox API..."),!this.dbx.usersGetCurrentAccount)throw new Error("Dropbox client not properly initialized");if(!this.dbx.usersGetCurrentAccount)throw console.error("Dropbox client methods not available"),new Error("Dropbox client methods not available");const e=await this.dbx.usersGetCurrentAccount();return console.log("DropboxService.getAccountInfo - odpove\u010f:",e),e.result}catch(e){if(console.error("Error getting account info:",e),e instanceof Error&&(e.message.includes("fetch")||e.message.includes("Illegal invocation"))){console.log("DropboxService.getAccountInfo - probl\xe9m s fetch, reinicializujem klienta...");const e=localStorage.getItem("dropbox_access_token");if(e){this.initializeDropbox(e);const t=await this.dbx.usersGetCurrentAccount();return console.log("DropboxService.getAccountInfo - reinicializ\xe1cia \xfaspe\u0161n\xe1:",t),t.result}}throw e}}async listFiles(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;if(!this.dbx)throw new Error("Dropbox not initialized");try{console.log("=== DROPBOX SERVICE DEBUG ==="),console.log("DropboxService.listFiles - za\u010diatok"),console.log("DropboxService.listFiles - path:",e),console.log("DropboxService.listFiles - ico:",t),console.log("DropboxService.listFiles - this.dbx exists:",!!this.dbx);let o=e;if(t&&!e.startsWith("/Portal/Companies/")){const a=this.getCompanyFolderPath(t);o=a+(e?"/"+e:""),console.log("DropboxService.listFiles - companyFolder:",a)}console.log("DropboxService.listFiles - targetPath:",o),console.log("DropboxService.listFiles - vol\xe1m this.dbx.filesListFolder...");const a=await this.dbx.filesListFolder({path:o,limit:100});console.log("DropboxService.listFiles - response received");return a.result.entries.map(e=>({id:"deleted"===e[".tag"]?"":e.id||"",name:e.name,path_lower:e.path_lower||"",size:"file"===e[".tag"]&&e.size||0,server_modified:"file"===e[".tag"]&&e.server_modified||"",content_hash:"file"===e[".tag"]&&e.content_hash||"",tag:e[".tag"]}))}catch(o){throw console.error("DropboxService.listFiles - ERROR:",o),o instanceof Error&&(console.error("DropboxService.listFiles - error.message:",o.message),console.error("DropboxService.listFiles - error.stack:",o.stack)),o}}getCompanyFolderPath(e){const t=this.hashICO(e);return"/Portal/Companies/".concat(t)}hashICO(e){return e.replace(/\s/g,"").replace(/[^a-zA-Z0-9]/g,"")}async createCompanyFolder(e){if(!this.dbx)throw new Error("Dropbox not initialized");try{const t=this.getCompanyFolderPath(e);await this.dbx.filesCreateFolderV2({path:t,autorename:!1});return t}catch(t){throw console.error("Error creating company folder:",t),t}}async getCompanySharedLink(e){if(!this.dbx)throw new Error("Dropbox not initialized");try{const t=this.getCompanyFolderPath(e);return await this.getSharedLink(t)}catch(t){throw console.error("Error getting company shared link:",t),t}}async uploadFile(e,t,o,a){if(!this.dbx)throw new Error("Dropbox not initialized");try{const a=await e.arrayBuffer();let s=t+"/"+e.name;if(o&&!t.startsWith("/Portal/Companies/")){const a=this.getCompanyFolderPath(o);s=a+"/"+(t?t+"/":"")+e.name,console.log("DropboxService.uploadFile - companyFolder:",a)}console.log("DropboxService.uploadFile - fullPath:",s);const r=await this.dbx.filesUpload({path:s,contents:a,mode:{".tag":"overwrite"},autorename:!0,mute:!1});return console.log("DropboxService.uploadFile - upload response:",r),{id:r.result.id,name:r.result.name,path_lower:r.result.path_lower||"",size:r.result.size,server_modified:r.result.server_modified}}catch(s){throw console.error("Error uploading file:",s),s}}async downloadFile(e){if(!this.dbx)throw new Error("Dropbox not initialized");try{const t=(await this.dbx.filesDownload({path:e})).result.fileBlob;return new Blob([t],{type:t.type||"application/octet-stream"})}catch(t){throw console.error("Error downloading file:",t),t}}async deleteFile(e){if(!this.dbx)throw new Error("Dropbox not initialized");try{await this.dbx.filesDeleteV2({path:e})}catch(t){throw console.error("Error deleting file:",t),t}}async createFolder(e){if(!this.dbx)throw new Error("Dropbox not initialized");try{await this.dbx.filesCreateFolderV2({path:e,autorename:!0})}catch(t){throw console.error("Error creating folder:",t),t}}async getSharedLink(e){if(!this.dbx)throw new Error("Dropbox not initialized");try{return(await this.dbx.sharingCreateSharedLinkWithSettings({path:e,settings:{requested_visibility:{".tag":"public"},audience:{".tag":"public"},access:{".tag":"viewer"}}})).result.url}catch(t){throw console.error("Error creating shared link:",t),t}}async refreshAccessToken(){const e=localStorage.getItem("dropbox_refresh_token");if(!e)throw new Error("No refresh token available");try{const t=await window.fetch("https://api.dropboxapi.com/oauth2/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({grant_type:"refresh_token",refresh_token:e,client_id:s,client_secret:r})});if(!t.ok)throw new Error("Failed to refresh token");const o=await t.json();return this.accessToken=o.access_token,localStorage.setItem("dropbox_access_token",o.access_token),this.initializeDropbox(o.access_token),o.access_token}catch(t){throw console.error("Error refreshing token:",t),t}}async createSharedLink(e,t){if(!this.dbx)throw new Error("Dropbox not initialized");try{console.log("DropboxService.createSharedLink - vytv\xe1ram link pre:",e),console.log("DropboxService.createSharedLink - opr\xe1vnenia:",t);let o={".tag":"viewer"};(t.canEdit||t.canUpload||t.canDelete)&&(o={".tag":"editor"}),console.log("DropboxService.createSharedLink - access level:",o);const a=await this.dbx.sharingCreateSharedLinkWithSettings({path:e,settings:{requested_visibility:{".tag":"public"},audience:{".tag":"public"},access:o}});return console.log("DropboxService.createSharedLink - \xfaspe\u0161ne vytvoren\xfd link:",a.result.url),a.result.url}catch(o){if(console.error("Error creating shared link with permissions:",o),o instanceof Error&&(o.message.includes("shared_link_already_exists")||o.message.includes("409"))){console.log("Link u\u017e existuje (409), z\xedskavam existuj\xfaci link...");try{const t=await this.dbx.sharingListSharedLinks({path:e,direct_only:!1});if(t.result.links.length>0)return console.log("Na\u0161iel som existuj\xfaci link:",t.result.links[0].url),t.result.links[0].url}catch(a){console.error("Chyba pri z\xedskavan\xed existuj\xfaceho linku:",a)}}throw o}}async revokeSharedLink(e){if(!this.dbx)throw new Error("Dropbox not initialized");try{console.log("DropboxService.revokeSharedLink - odvol\xe1vam link:",e),await this.dbx.sharingRevokeSharedLink({url:e}),console.log("DropboxService.revokeSharedLink - link \xfaspe\u0161ne odvolan\xfd")}catch(t){if(console.error("Error revoking shared link:",t),t instanceof Error&&t.message.includes("not_found"))return void console.log("Link u\u017e neexistuje, pova\u017eujem za \xfaspe\u0161ne odvolan\xfd");throw t}}async getAllSharedLinks(){if(!this.dbx)throw new Error("Dropbox not initialized");try{console.log("DropboxService.getAllSharedLinks - z\xedskavam v\u0161etky zdie\u013eate\u013en\xe9 linky...");const e=await this.dbx.sharingListSharedLinks({path:"/Portal/Companies",direct_only:!1});return console.log("DropboxService.getAllSharedLinks - na\u010d\xedtan\xe9 linky:",e.result.links),e.result.links}catch(e){throw console.error("Error getting shared links:",e),e}}async checkFolderExists(e){if(!this.dbx)throw new Error("Dropbox not initialized");try{console.log("DropboxService.checkFolderExists - kontrolujem zlo\u017eku:",e);const t=await this.dbx.filesGetMetadata({path:e});return console.log("DropboxService.checkFolderExists - zlo\u017eka existuje:",t),"folder"===t.result[".tag"]}catch(t){return console.log("DropboxService.checkFolderExists - zlo\u017eka neexistuje:",t),!1}}}},90786:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>j});var a=o(65043),s=o(85442),r=o(58799),n=o(26238),i=o(29422),l=o(77591),c=o(7449),d=o(89531),h=o(22555),m=o(14129),x=o(43218),p=o(18662),u=o(79670),g=o(79248),b=o(62811),v=o(90398),f=o(70579);const y=e=>{var t,o,s,r;let{company:n,initialPermissions:i,onClose:c,onSave:d}=e;const[m,x]=(0,a.useState)({canView:null===(t=null===i||void 0===i?void 0:i.canView)||void 0===t||t,canEdit:null!==(o=null===i||void 0===i?void 0:i.canEdit)&&void 0!==o&&o,canUpload:null===(s=null===i||void 0===i?void 0:i.canUpload)||void 0===s||s,canDelete:null!==(r=null===i||void 0===i?void 0:i.canDelete)&&void 0!==r&&r});return(0,f.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,f.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,f.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:[i?"\xdaprava opr\xe1vnen\xed pre":"Nastavenie zdie\u013eania pre"," ",n.name]}),(0,f.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-gray-600",children:(0,f.jsx)(l.A,{className:"h-6 w-6"})})]}),(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-sm text-gray-700",children:"Zobrazi\u0165 s\xfabory"}),(0,f.jsx)("input",{type:"checkbox",checked:m.canView,onChange:e=>x(t=>(0,h.A)((0,h.A)({},t),{},{canView:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-sm text-gray-700",children:"Upravi\u0165 s\xfabory"}),(0,f.jsx)("input",{type:"checkbox",checked:m.canEdit,onChange:e=>x(t=>(0,h.A)((0,h.A)({},t),{},{canEdit:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-sm text-gray-700",children:"Nahra\u0165 s\xfabory"}),(0,f.jsx)("input",{type:"checkbox",checked:m.canUpload,onChange:e=>x(t=>(0,h.A)((0,h.A)({},t),{},{canUpload:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]}),(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsx)("span",{className:"text-sm text-gray-700",children:"Vymaza\u0165 s\xfabory"}),(0,f.jsx)("input",{type:"checkbox",checked:m.canDelete,onChange:e=>x(t=>(0,h.A)((0,h.A)({},t),{},{canDelete:e.target.checked})),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})]})]}),(0,f.jsxs)("div",{className:"flex items-center justify-end space-x-3 mt-6",children:[(0,f.jsx)("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Zru\u0161i\u0165"}),(0,f.jsx)("button",{onClick:()=>{d(m)},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:i?"Aktualizova\u0165 opr\xe1vnenia":"Ulo\u017ei\u0165 nastavenia"})]})]})})},k=e=>{let{companies:t,userEmail:o}=e;const[s,c]=(0,a.useState)([]),[d,k]=(0,a.useState)(!0),[w,j]=(0,a.useState)(null),[N,S]=(0,a.useState)(!1),[A,D]=(0,a.useState)(null),[_,C]=(0,a.useState)(!1),[E,z]=(0,a.useState)(null),[I,L]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{console.log("DropboxAdminPanel: Inicializujem autentifik\xe1ciu...");const e=v.k.isAuthenticated();if(console.log("DropboxAdminPanel: isAuthenticated =",e),C(e),e)try{console.log("DropboxAdminPanel: Na\u010d\xedtavam account info...");const e=await v.k.getAccountInfo();z(e),console.log("DropboxAdminPanel: Account info na\u010d\xedtan\xe9:",e)}catch(t){console.error("Error loading account info:",t);try{console.log("DropboxAdminPanel: Sk\xfa\u0161am obnovi\u0165 token..."),await v.k.refreshAccessToken();const e=await v.k.getAccountInfo();z(e)}catch(o){console.error("Error refreshing token:",o),F()}}})()},[]),(0,a.useEffect)(()=>{if("true"===new URLSearchParams(window.location.search).get("from_callback")){console.log("DropboxAdminPanel: Detekoval som n\xe1vrat z callback, kontrolujem autentifik\xe1ciu...");v.k.isAuthenticated()&&(console.log("DropboxAdminPanel: Zistil som, \u017ee som prihl\xe1sen\xfd po n\xe1vrate z callback"),C(!0),v.k.getAccountInfo().then(e=>{z(e)}).catch(e=>{console.error("Error loading account info after callback:",e)}));const e=window.location.pathname;window.history.replaceState({},"",e)}},[]),(0,a.useEffect)(()=>{_&&t.length>0&&(console.log("DropboxAdminPanel: Na\u010d\xedtavam share settings pre",t.length,"firiem"),O())},[t,_]),(0,a.useEffect)(()=>{console.log("DropboxAdminPanel: Stav zmenen\xfd:",{isAuthenticated:_,companiesCount:t.length,shareSettingsCount:s.length})},[_,t.length,s.length]);const P=()=>{localStorage.removeItem("dropbox_access_token"),localStorage.removeItem("dropbox_refresh_token"),localStorage.removeItem("dropbox_auth_state"),console.log("Vy\u010disten\xe9 star\xe9 tokeny a state");const e=v.k.getAuthUrl();console.log("Presmerov\xe1vam na Dropbox OAuth..."),window.location.href=e},F=()=>{v.k.logout(),C(!1),z(null),c([])},O=async()=>{if(_){k(!0);try{if(!t||0===t.length)return console.log("loadShareSettings: \u017diadne firmy na na\u010d\xedtanie"),void c([]);console.log("loadShareSettings: Na\u010d\xedtavam nastavenia pre",t.length,"firiem");try{const e=await fetch("http://localhost:5000/api/dropbox/admin/all-settings"),o=await e.json();if(o.success&&o.settings){console.log("loadShareSettings: Na\u010d\xedtan\xe9 nastavenia z datab\xe1zy:",o.settings);const e=t.map(e=>{const t=o.settings.find(t=>t.companyId===e.id),a="/Portal/Companies/".concat(v.k.hashICO(e.ico));return t?{companyId:e.id,companyEmail:e.owner_email,companyName:e.name,companyICO:e.ico,isShared:t.isShared,permissions:t.permissions,folderPath:t.folderPath||a,shareLink:t.shareLink}:{companyId:e.id,companyEmail:e.owner_email,companyName:e.name,companyICO:e.ico,isShared:!1,permissions:{canView:!0,canEdit:!1,canUpload:!0,canDelete:!1},folderPath:a}});return c(e),void console.log("loadShareSettings: Nastavenia \xfaspe\u0161ne na\u010d\xedtan\xe9 z datab\xe1zy")}}catch(e){console.log("loadShareSettings: Chyba pri na\u010d\xedtan\xed z datab\xe1zy, pou\u017e\xedvam fallback:",e)}const s=[];for(const e of t){const t="/Portal/Companies/".concat(v.k.hashICO(e.ico));try{const a=await v.k.checkFolderExists(t);let r,n={canView:!0,canEdit:!1,canUpload:!0,canDelete:!1};if(a)try{console.log("H\u013ead\xe1m existuj\xfaci link pre ".concat(e.name," v ceste:"),t);const o=await v.k.getAllSharedLinks();console.log("Na\u0161iel som ".concat(o.length," existuj\xfacich linkov:"),o);const a=o.find(e=>(console.log("Porovn\xe1vam:",{linkPath:e.path_lower,targetPath:t.toLowerCase(),match:e.path_lower===t.toLowerCase()}),e.path_lower===t.toLowerCase()));a?(r=a.url,console.log("Na\u0161iel som existuj\xfaci link pre ".concat(e.name,":"),r)):console.log("Nena\u0161iel som existuj\xfaci link pre ".concat(e.name))}catch(o){console.log("Nepodarilo sa z\xedska\u0165 link pre ".concat(e.name,":"),o)}s.push({companyId:e.id,companyEmail:e.owner_email,companyName:e.name,companyICO:e.ico,isShared:a,permissions:n,shareLink:r,folderPath:t})}catch(a){console.log("Zlo\u017eka pre ".concat(e.name," neexistuje:"),a),s.push({companyId:e.id,companyEmail:e.owner_email,companyName:e.name,companyICO:e.ico,isShared:!1,permissions:{canView:!0,canEdit:!1,canUpload:!0,canDelete:!1},folderPath:t})}}c(s),console.log("loadShareSettings: Nastavenia \xfaspe\u0161ne na\u010d\xedtan\xe9 (fallback)")}catch(a){console.error("Chyba pri na\u010d\xedtan\xed Dropbox nastaven\xed:",a)}finally{k(!1)}}else console.log("loadShareSettings: Nie som prihl\xe1sen\xfd, ignorujem")},T=e=>e?(0,f.jsx)(i.A,{className:"h-4 w-4 text-green-500"}):(0,f.jsx)(l.A,{className:"h-4 w-4 text-red-500"});return _?d||!t||0===t.length?(0,f.jsxs)("div",{className:"text-center py-12",children:[(0,f.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,f.jsx)("p",{className:"mt-4 text-gray-600",children:d?"Na\u010d\xedtavam Dropbox nastavenia...":"Na\u010d\xedtavam zoznam firiem..."}),t&&0!==t.length?null:(0,f.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:t?"\u017diadne firmy neboli n\xe1jden\xe9":"\u010cak\xe1m na na\u010d\xedtanie firiem..."})]}):(0,f.jsxs)("div",{className:"space-y-6",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Dropbox zdie\u013eania pre firmy"}),(0,f.jsx)("p",{className:"text-sm text-gray-600",children:"Spravujte pr\xedstupy k Dropbox zlo\u017ek\xe1m pre jednotliv\xe9 firmy"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsx)(r.A,{className:"h-6 w-6 text-blue-500"}),(0,f.jsx)("span",{className:"text-sm text-gray-600",children:"Admin Dropbox spr\xe1va"}),E&&(0,f.jsxs)("div",{className:"text-xs text-gray-500 ml-2",children:["(",E.name.display_name,")"]}),(0,f.jsx)("button",{onClick:F,className:"text-sm text-red-600 hover:text-red-700 ml-2",children:"Odhl\xe1si\u0165"})]})]}),(0,f.jsx)("div",{className:"space-y-4",children:s.map(e=>(0,f.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[(0,f.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,f.jsxs)("div",{className:"flex-1",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[(0,f.jsx)(n.A,{className:"h-5 w-5 text-gray-400"}),(0,f.jsx)("h4",{className:"text-lg font-semibold text-gray-900",children:e.companyName}),e.isShared&&(0,f.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium",children:"Zdie\u013ean\xe9"})]}),(0,f.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,f.jsx)(m.A,{className:"h-4 w-4 inline mr-1"}),e.companyEmail]}),(0,f.jsxs)("p",{className:"text-sm text-gray-500",children:[(0,f.jsx)(x.A,{className:"h-4 w-4 inline mr-1"}),e.folderPath]})]}),(0,f.jsx)("div",{className:"flex items-center space-x-2",children:e.isShared?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("button",{onClick:()=>(async e=>{D(e),S(!0),L(null)})(t.find(t=>t.id===e.companyId)),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 flex items-center",children:[(0,f.jsx)(u.A,{className:"h-4 w-4 mr-1"}),"Upravi\u0165 zdie\u013eanie"]}),(0,f.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Naozaj chcete odobra\u0165 pr\xedstup k Dropbox zlo\u017eke?"))try{const o=s.find(t=>t.companyId===e);if(o&&o.shareLink){await v.k.revokeSharedLink(o.shareLink);try{const e=await fetch("http://localhost:5000/api/dropbox/admin/save-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyId:o.companyId,companyEmail:o.companyEmail,folderPath:o.folderPath,shareLink:null,permissions:o.permissions})}),t=await e.json();t.success?console.log("Nastavenia \xfaspe\u0161ne aktualizovan\xe9 v datab\xe1ze"):console.error("Chyba pri aktualiz\xe1cii datab\xe1zy:",t.error)}catch(t){console.error("Chyba pri aktualiz\xe1cii datab\xe1zy:",t)}c(t=>t.map(t=>t.companyId===e?(0,h.A)((0,h.A)({},t),{},{isShared:!1,shareLink:void 0}):t)),alert("Pr\xedstup bol \xfaspe\u0161ne odobran\xfd!")}}catch(o){console.error("Chyba pri odoberan\xed pr\xedstupu:",o),alert("Chyba pri odoberan\xed pr\xedstupu")}})(e.companyId),className:"px-3 py-1 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 flex items-center",children:[(0,f.jsx)(g.A,{className:"h-4 w-4 mr-1"}),"Odobra\u0165"]})]}):(0,f.jsxs)("button",{onClick:()=>(async e=>{if(_)try{const o=await v.k.createCompanyFolder(e.ico),a={canView:!0,canEdit:!1,canUpload:!0,canDelete:!1},s=await v.k.createSharedLink(o,a);try{const t=await fetch("http://localhost:5000/api/dropbox/admin/save-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyId:e.id,companyEmail:e.owner_email,companyICO:e.ico,folderPath:o,shareLink:s,permissions:a})}),r=await t.json();r.success?console.log("Nastavenia \xfaspe\u0161ne ulo\u017een\xe9 do datab\xe1zy"):console.error("Chyba pri ukladan\xed do datab\xe1zy:",r.error)}catch(t){console.error("Chyba pri ukladan\xed do datab\xe1zy:",t)}c(t=>t.map(t=>t.companyId===e.id?(0,h.A)((0,h.A)({},t),{},{isShared:!0,folderPath:o,shareLink:s,permissions:a}):t)),alert("Zlo\u017eka pre firmu ".concat(e.name," bola \xfaspe\u0161ne vytvoren\xe1 a zdie\u013ean\xe1!"))}catch(o){console.error("Chyba pri vytv\xe1ran\xed zlo\u017eky:",o),alert("Chyba pri vytv\xe1ran\xed zlo\u017eky")}else alert("Najprv sa mus\xedte prihl\xe1si\u0165 do Dropbox")})(t.find(t=>t.id===e.companyId)),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 flex items-center",children:[(0,f.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Vytvori\u0165 a zdie\u013ea\u0165 zlo\u017eku"]})})]}),e.isShared&&(0,f.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,f.jsx)("h5",{className:"text-sm font-medium text-gray-700",children:"Opr\xe1vnenia:"}),(0,f.jsxs)("button",{onClick:()=>(async(e,t)=>{D(e),S(!0),L(t)})(t.find(t=>t.id===e.companyId),e.permissions),className:"text-xs text-blue-600 hover:text-blue-700 flex items-center",children:[(0,f.jsx)(b.A,{className:"h-3 w-3 mr-1"}),"Upravi\u0165 opr\xe1vnenia"]})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[T(e.permissions.canView),(0,f.jsx)("span",{className:"text-sm text-gray-600",children:"Zobrazi\u0165"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[T(e.permissions.canEdit),(0,f.jsx)("span",{className:"text-sm text-gray-600",children:"Upravi\u0165"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[T(e.permissions.canUpload),(0,f.jsx)("span",{className:"text-sm text-gray-600",children:"Nahra\u0165"})]}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[T(e.permissions.canDelete),(0,f.jsx)("span",{className:"text-sm text-gray-600",children:"Vymaza\u0165"})]})]}),e.isShared&&e.shareLink&&(0,f.jsxs)("div",{className:"mt-3 p-3 bg-blue-50 rounded-md",children:[(0,f.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:"Zdie\u013eate\u013en\xfd link:"}),(0,f.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,f.jsx)("input",{type:"text",value:e.shareLink,readOnly:!0,className:"flex-1 text-xs bg-white border border-gray-300 rounded px-2 py-1"}),(0,f.jsx)("button",{onClick:()=>navigator.clipboard.writeText(e.shareLink),className:"text-blue-600 hover:text-blue-700 text-xs",children:"Kop\xedrova\u0165"})]})]})]})]},e.companyId))}),N&&A&&(0,f.jsx)(y,{company:A,initialPermissions:I,onClose:()=>{S(!1),D(null),L(null)},onSave:async e=>{if(A)try{const a="/Portal/Companies/".concat(v.k.hashICO(A.ico)),r=s.find(e=>e.companyId===A.id);if(r&&r.shareLink)try{console.log("Odvol\xe1vam existuj\xfaci zdie\u013eate\u013en\xfd link:",r.shareLink),await v.k.revokeSharedLink(r.shareLink),console.log("Existuj\xfaci zdie\u013eate\u013en\xfd link odvolan\xfd")}catch(t){console.log("Link u\u017e neexistuje alebo sa ned\xe1 odvola\u0165:",t)}else console.log("\u017diadny existuj\xfaci link na odvolanie");const n=await v.k.createSharedLink(a,e);try{const t=await fetch("http://localhost:5000/api/dropbox/admin/save-settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyId:A.id,companyEmail:A.owner_email,folderPath:a,shareLink:n,permissions:e})}),o=await t.json();o.success?console.log("Nastavenia \xfaspe\u0161ne ulo\u017een\xe9 do datab\xe1zy"):console.error("Chyba pri ukladan\xed do datab\xe1zy:",o.error)}catch(o){console.error("Chyba pri ukladan\xed do datab\xe1zy:",o)}c(t=>t.map(t=>t.companyId===A.id?(0,h.A)((0,h.A)({},t),{},{isShared:!0,shareLink:n,permissions:e,folderPath:a}):t)),S(!1),D(null),L(null);const i=I?"Opr\xe1vnenia pre firmu ".concat(A.name," boli \xfaspe\u0161ne aktualizovan\xe9!"):"Zdie\u013eanie pre firmu ".concat(A.name," bolo \xfaspe\u0161ne nastaven\xe9!");alert(i)}catch(a){console.error("Chyba pri nastavovan\xed zdie\u013eania:",a),alert("Chyba pri nastavovan\xed zdie\u013eania")}}})]}):(0,f.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,f.jsxs)("div",{className:"text-center",children:[(0,f.jsx)(r.A,{className:"mx-auto h-12 w-12 text-blue-500 mb-4"}),(0,f.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Pripojte sa k Dropbox"}),(0,f.jsx)("p",{className:"text-gray-600 mb-4",children:"Pre spr\xe1vu Dropbox zdie\u013ean\xed sa mus\xedte najprv prihl\xe1si\u0165 do v\xe1\u0161ho Dropbox \xfa\u010dtu."}),(0,f.jsxs)("button",{onClick:P,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,f.jsx)(r.A,{className:"h-5 w-5 mr-2"}),"Pripoji\u0165 Dropbox"]})]})})};var w=o(39304);const j=e=>{let{onBack:t}=e;const[o,h]=(0,a.useState)([]),[m,x]=(0,a.useState)(!0),[p,u]=(0,a.useState)(""),[g,b]=(0,a.useState)(null),[v,y]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{x(!0);const e=await w.apiService.getAllCompaniesForAdmin();h(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed firiem:",e)}finally{x(!1)}})()},[]);const j=o.filter(e=>{var t;return e.name.toLowerCase().includes(p.toLowerCase())||e.ico.toLowerCase().includes(p.toLowerCase())||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(p.toLowerCase()))}),N={total:o.length,shared:o.filter(e=>e.hasDropbox).length,notShared:o.filter(e=>!e.hasDropbox).length};return(0,f.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,f.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,f.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,f.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,f.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,f.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,f.jsx)(s.A,{className:"h-5 w-5 mr-2"}),"Sp\xe4\u0165 do Dashboardu"]}),(0,f.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(r.A,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,f.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dropbox spr\xe1va"})]})]})})})}),(0,f.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,f.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,f.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(n.A,{className:"h-8 w-8 text-blue-500"}),(0,f.jsxs)("div",{className:"ml-3",children:[(0,f.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Celkovo firiem"}),(0,f.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.total})]})]})}),(0,f.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(i.A,{className:"h-8 w-8 text-green-500"}),(0,f.jsxs)("div",{className:"ml-3",children:[(0,f.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Zdie\u013ean\xe9"}),(0,f.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.shared})]})]})}),(0,f.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(l.A,{className:"h-8 w-8 text-red-500"}),(0,f.jsxs)("div",{className:"ml-3",children:[(0,f.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Nezdie\u013ean\xe9"}),(0,f.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N.notShared})]})]})})]}),(0,f.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,f.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,f.jsxs)("div",{className:"flex justify-between items-center",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Zoznam firiem"}),(0,f.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Vyberte firmu pre spr\xe1vu Dropbox nastaven\xed"})]}),(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,f.jsx)(c.A,{className:"h-5 w-5 text-gray-400"})}),(0,f.jsx)("input",{type:"text",placeholder:"Vyh\u013eada\u0165 firmu...",value:p,onChange:e=>u(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})}),(0,f.jsx)("div",{className:"p-6",children:m?(0,f.jsxs)("div",{className:"text-center py-12",children:[(0,f.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,f.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam firmy..."})]}):j.length>0?(0,f.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(e=>(0,f.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow border border-gray-200 cursor-pointer",onClick:()=>(e=>{b(e),y(!0)})(e),children:[(0,f.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,f.jsxs)("div",{className:"flex-1",children:[(0,f.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),(0,f.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(n.A,{className:"h-4 w-4 mr-2"}),(0,f.jsxs)("span",{children:["I\u010cO: ",e.ico]})]}),(0,f.jsx)("div",{className:"flex items-center",children:(0,f.jsxs)("span",{children:["Email: ",e.email||e.owner_email]})})]})]}),(0,f.jsx)("div",{className:"flex flex-col items-end space-y-2",children:e.hasDropbox?(0,f.jsxs)("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full flex items-center",children:[(0,f.jsx)(i.A,{className:"h-3 w-3 mr-1"}),"Zdie\u013ean\xe9"]}):(0,f.jsxs)("span",{className:"bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full flex items-center",children:[(0,f.jsx)(l.A,{className:"h-3 w-3 mr-1"}),"Nezdie\u013ean\xe9"]})})]}),(0,f.jsx)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:(0,f.jsxs)("div",{className:"flex items-center text-blue-600 hover:text-blue-700 text-sm font-medium",children:[(0,f.jsx)(d.A,{className:"h-4 w-4 mr-1"}),"Spr\xe1va Dropbox"]})})]},e.id))}):(0,f.jsxs)("div",{className:"text-center py-12",children:[(0,f.jsx)(r.A,{className:"mx-auto h-16 w-16 text-gray-400"}),(0,f.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:p?"\u017diadne firmy nen\xe1jden\xe9":"\u017diadne firmy"}),(0,f.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:p?"Sk\xfaste zmeni\u0165 vyh\u013ead\xe1vac\xed v\xfdraz.":"Zatia\u013e neboli vytvoren\xe9 \u017eiadne firmy."})]})})]})]}),v&&g&&(0,f.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,f.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,f.jsxs)("div",{className:"flex items-center",children:[(0,f.jsx)(r.A,{className:"h-6 w-6 text-blue-500 mr-3"}),(0,f.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:["Dropbox spr\xe1va - ",g.name]})]}),(0,f.jsx)("button",{onClick:()=>{y(!1),b(null)},className:"text-gray-400 hover:text-gray-600",children:(0,f.jsx)(l.A,{className:"h-6 w-6"})})]}),(0,f.jsx)("div",{className:"overflow-y-auto max-h-[calc(90vh-120px)]",children:(0,f.jsx)(k,{companies:g?[g]:[],userEmail:"admin@portal.sk"})})]})})]})}},92668:()=>{}}]);
//# sourceMappingURL=166.55bf7c28.chunk.js.map