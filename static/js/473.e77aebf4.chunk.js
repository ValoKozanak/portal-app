"use strict";(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[473],{18299:(e,t,a)=>{a.d(t,{B:()=>o});var n=a(22555),s=a(39304);const o=new class{async getSettings(e){return await s.apiService.get("/accounting/settings/".concat(e))}async saveSettings(e,t){return await s.apiService.post("/accounting/settings/".concat(e),t)}async getPermissions(e,t){return await s.apiService.get("/accounting/permissions/".concat(e,"/").concat(t))}async savePermissions(e,t){return await s.apiService.post("/accounting/permissions/".concat(e),t)}async getAllPermissions(e){return await s.apiService.get("/accounting/permissions/".concat(e))}async getIssuedInvoices(e,t){const a=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,n]=e;void 0!==n&&a.append(t,n.toString())});return await s.apiService.get("/accounting/issued-invoices/".concat(e,"?").concat(a))}async createIssuedInvoice(e,t){return await s.apiService.post("/accounting/issued-invoices/".concat(e),t)}async getIssuedInvoiceById(e){return await s.apiService.get("/accounting/issued-invoices/detail/".concat(e))}async getReceivedInvoices(e,t){const a=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,n]=e;void 0!==n&&a.append(t,n.toString())});return await s.apiService.get("/accounting/received-invoices/".concat(e,"?").concat(a))}async getReceivedInvoiceById(e){return await s.apiService.get("/accounting/received-invoices/detail/".concat(e))}async getPudSummary(e){return await s.apiService.get("/accounting/pud-summary/".concat(e))}async getFinancialAnalysis(e,t,a){let n="/accounting/financial-analysis/".concat(e);const o=new URLSearchParams;t&&o.append("dateFrom",t),a&&o.append("dateTo",a),o.toString()&&(n+="?".concat(o.toString()));return await s.apiService.get(n)}async getStats(e,t){const a=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,n]=e;void 0!==n&&a.append(t,n.toString())});return await s.apiService.get("/accounting/stats/".concat(e,"?").concat(a))}formatCurrency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";return new Intl.NumberFormat("sk-SK",{style:"currency",currency:t}).format(e)}formatDate(e){return new Date(e).toLocaleDateString("sk-SK")}getStatusBadge(e){return{draft:{text:"Koncept",color:"bg-gray-100 text-gray-800"},sent:{text:"Odoslan\xe1",color:"bg-blue-100 text-blue-800"},paid:{text:"Zaplaten\xe1",color:"bg-green-100 text-green-800"},overdue:{text:"Po splatnosti",color:"bg-red-100 text-red-800"},cancelled:{text:"Zru\u0161en\xe1",color:"bg-yellow-100 text-yellow-800"},received:{text:"Prijat\xe1",color:"bg-gray-100 text-gray-800"},approved:{text:"Schv\xe1len\xe1",color:"bg-blue-100 text-blue-800"},disputed:{text:"Sporn\xe1",color:"bg-orange-100 text-orange-800"}}[e]||{text:e,color:"bg-gray-100 text-gray-800"}}getTypeBadge(e){return{income:{text:"Pr\xedjem",color:"bg-green-100 text-green-800"},expense:{text:"V\xfddavok",color:"bg-red-100 text-red-800"}}[e]||{text:e,color:"bg-gray-100 text-gray-800"}}async testPohodaConnection(e,t){return await s.apiService.post("/accounting/test-pohoda-connection",(0,n.A)({companyId:e},t))}async testPohodaInvoices(e,t){return await s.apiService.post("/accounting/test-pohoda-invoices",(0,n.A)({companyId:e},t))}async syncPohodaInvoices(e,t,a){return await s.apiService.post("/accounting/sync-pohoda-invoices/".concat(e),{dateFrom:t,dateTo:a})}async uploadPohodaXml(e,t){const a=new FormData;a.append("xmlFile",t);const n=await fetch("http://localhost:5000/api/accounting/upload-pohoda-xml/".concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:a});if(!n.ok)throw new Error("Chyba pri nahr\xe1van\xed XML s\xfaboru");return await n.json()}async exportPohodaXml(e,t,a){const n=await fetch("http://localhost:5000/api/accounting/export-pohoda-xml/".concat(e,"?dateFrom=").concat(t||"","&dateTo=").concat(a||""),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!n.ok)throw new Error("Chyba pri exporte XML s\xfaboru");return await n.blob()}async refreshInvoicesFromMdb(e){const t=await fetch("http://localhost:5000/api/accounting/refresh-invoices/".concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri obnoven\xed fakt\xfar z MDB");return await t.json()}async refreshReceivedInvoicesFromMdb(e){const t=await fetch("http://localhost:5000/api/accounting/refresh-received-invoices/".concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri obnoven\xed prijat\xfdch fakt\xfar z MDB");return await t.json()}async importInvoicesFromMdb(e){const t=await fetch("http://localhost:5000/api/accounting/import-invoices/".concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri importe fakt\xfar z MDB");return await t.json()}async deleteIssuedInvoice(e){return await s.apiService.delete("/accounting/issued-invoices/".concat(e))}async deleteReceivedInvoice(e){return await s.apiService.delete("/accounting/received-invoices/".concat(e))}async deleteBankTransaction(e){return await s.apiService.delete("/accounting/bank-transactions/".concat(e))}async deleteCashTransaction(e){return await s.apiService.delete("/accounting/cash-transactions/".concat(e))}async getDirectory(e){const t=await fetch("http://localhost:5000/api/accounting/directory/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri na\u010d\xedtan\xed adres\xe1ra");return await t.json()}async getVatReturns(e,t){const a=t||(new Date).getFullYear(),n=await fetch("http://localhost:5000/api/accounting/vat-returns/".concat(e,"?year=").concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!n.ok)throw new Error("Chyba pri na\u010d\xedtan\xed DPH podan\xed");return await n.json()}async getBankAccounts(e){console.log("\ud83c\udfe6 Vol\xe1m bankov\xfd endpoint pre companyId:",e);const t=await fetch("http://localhost:5000/api/accounting/bank-accounts/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(console.log("\ud83c\udfe6 Bankov\xfd endpoint response status:",t.status),!t.ok)throw new Error("Chyba pri na\u010d\xedtan\xed bankov\xfdch \xfa\u010dtov");const a=await t.json();return console.log("\ud83c\udfe6 Bankov\xfd endpoint response data:",a),a}async getCashAccounts(e){const t=await fetch("http://localhost:5000/api/accounting/cash-accounts/".concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri na\u010d\xedtan\xed poklad\u0148ov\xfdch \xfa\u010dtov");return await t.json()}async getBankTransactions(e,t){console.log("\ud83c\udfe6 Vol\xe1m bankov\xfd transak\u010dn\xfd endpoint pre companyId:",e,"accountNumber:",t);const a=await fetch("http://localhost:5000/api/accounting/bank-transactions/".concat(e,"/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(console.log("\ud83c\udfe6 Bankov\xfd transak\u010dn\xfd endpoint response status:",a.status),!a.ok)throw new Error("Chyba pri na\u010d\xedtan\xed bankov\xfdch transakci\xed");const n=await a.json();return console.log("\ud83c\udfe6 Bankov\xfd transak\u010dn\xfd endpoint response data:",n),n}async getCashTransactions(e,t){console.log("\ud83d\udcb0 Vol\xe1m poklad\u0148ov\xfd transak\u010dn\xfd endpoint pre companyId:",e,"accountNumber:",t);const a=await fetch("http://localhost:5000/api/accounting/cash-transactions/".concat(e,"/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(console.log("\ud83d\udcb0 Poklad\u0148ov\xfd transak\u010dn\xfd endpoint response status:",a.status),!a.ok)throw new Error("Chyba pri na\u010d\xedtan\xed poklad\u0148ov\xfdch transakci\xed");const n=await a.json();return console.log("\ud83d\udcb0 Poklad\u0148ov\xfd transak\u010dn\xfd endpoint response data:",n),n}}},22013:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(53986),s=a(65043);const o=["title","titleId"];function r(e,t){let{title:a,titleId:r}=e,c=(0,n.A)(e,o);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},c),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"}))}const c=s.forwardRef(r)},24538:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(53986),s=a(65043);const o=["title","titleId"];function r(e,t){let{title:a,titleId:r}=e,c=(0,n.A)(e,o);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},c),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const c=s.forwardRef(r)},26473:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var n=a(65043),s=a(85442),o=a(22013),r=a(24538),c=a(77098),i=a(37504),l=a(18299),d=a(39304),m=a(22555),u=a(77591),h=a(29422),p=a(39399),x=a(70579);const g=e=>{var t;let{companyId:a}=e;const[s,o]=(0,n.useState)(null),[r,c]=(0,n.useState)(!1),[i,d]=(0,n.useState)(!1),[m,u]=(0,n.useState)(null),[h,p]=(0,n.useState)(""),[g,b]=(0,n.useState)("");return(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,x.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"POHODA XML Import/Export"}),(0,x.jsxs)("div",{className:"space-y-6",children:[(0,x.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,x.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Import fakt\xfar z POHODA XML"}),(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"xml-file-input",className:"block text-sm font-medium text-gray-700 mb-1",children:"Vyberte XML s\xfabor z POHODA"}),(0,x.jsx)("input",{id:"xml-file-input",type:"file",accept:".xml",onChange:e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];!a||"application/xml"!==a.type&&"text/xml"!==a.type?alert("Pros\xedm vyberte XML s\xfabor"):(o(a),u(null))},className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-medium file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),(0,x.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Podporovan\xe9 s\xfa len XML s\xfabory exportovan\xe9 z POHODA"})]}),s&&(0,x.jsx)("div",{className:"bg-blue-50 p-3 rounded-md",children:(0,x.jsxs)("p",{className:"text-sm text-blue-700",children:[(0,x.jsx)("strong",{children:"Vybran\xfd s\xfabor:"})," ",s.name," (",(s.size/1024).toFixed(1)," KB)"]})}),(0,x.jsx)("button",{onClick:async()=>{if(s){c(!0),u(null);try{const e=await l.B.uploadPohodaXml(a,s);u({success:e.success,message:e.message||"Upload dokon\u010den\xfd",details:e.data}),o(null);const t=document.getElementById("xml-file-input");t&&(t.value="")}catch(e){console.error("Chyba pri upload:",e),u({success:!1,message:"Chyba pri nahr\xe1van\xed XML s\xfaboru"})}finally{c(!1)}}else alert("Pros\xedm vyberte XML s\xfabor")},disabled:!s||r,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:r?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Nahr\xe1vam..."]}):"Nahra\u0165 XML s\xfabor"})]}),m&&(0,x.jsxs)("div",{className:"mt-4 p-3 rounded-md ".concat(m.success?"bg-green-50 text-green-700":"bg-red-50 text-red-700"),children:[(0,x.jsx)("p",{className:"text-sm font-medium",children:m.message}),m.details&&(0,x.jsxs)("div",{className:"mt-2 text-xs",children:[(0,x.jsxs)("p",{children:["Importovan\xe9: ",m.details.imported]}),(0,x.jsxs)("p",{children:["Chyby: ",(null===(t=m.details.errors)||void 0===t?void 0:t.length)||0]}),m.details.errors&&m.details.errors.length>0&&(0,x.jsx)("ul",{className:"mt-1 list-disc list-inside",children:m.details.errors.map((e,t)=>(0,x.jsx)("li",{children:e},t))})]})]})]}),(0,x.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,x.jsx)("h4",{className:"text-md font-medium text-gray-700 mb-3",children:"Export fakt\xfar do POHODA XML"}),(0,x.jsxs)("div",{className:"space-y-3",children:[(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"date-from",className:"block text-sm font-medium text-gray-700 mb-1",children:"D\xe1tum od"}),(0,x.jsx)("input",{id:"date-from",type:"date",value:h,onChange:e=>p(e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"date-to",className:"block text-sm font-medium text-gray-700 mb-1",children:"D\xe1tum do"}),(0,x.jsx)("input",{id:"date-to",type:"date",value:g,onChange:e=>b(e.target.value),className:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,x.jsx)("p",{className:"text-sm text-gray-500",children:"Ak nevyberiete d\xe1tumy, exportuj\xfa sa v\u0161etky fakt\xfary"}),(0,x.jsx)("button",{onClick:async()=>{d(!0);try{const e=await l.B.exportPohodaXml(a,h,g),t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="pohoda_invoices_".concat(a,"_").concat((new Date).toISOString().split("T")[0],".xml"),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(t),document.body.removeChild(n)}catch(e){console.error("Chyba pri exporte:",e),alert("Chyba pri exporte XML s\xfaboru")}finally{d(!1)}},disabled:i,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:i?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Exportujem..."]}):"Exportova\u0165 do XML"})]})]}),(0,x.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[(0,x.jsx)("h4",{className:"text-md font-medium text-yellow-800 mb-2",children:"Ako to funguje"}),(0,x.jsxs)("div",{className:"text-sm text-yellow-700 space-y-1",children:[(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Import:"})," Exportujte fakt\xfary z POHODA do XML s\xfaboru a nahrajte ich tu"]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Export:"})," Stiahnite fakt\xfary v POHODA XML form\xe1te pre import do POHODA"]}),(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Kompatibilita:"})," Funguje s demo aj plnou verziou POHODA"]})]})]})]})]})},b=e=>{let{isOpen:t,onClose:a,companyId:s,settings:o,onSave:r}=e;const[c,i]=(0,n.useState)({pohoda_enabled:!1,pohoda_url:"",pohoda_username:"",pohoda_password:"",pohoda_ico:"",pohoda_year:"",auto_sync:!1,sync_frequency:"daily"}),[d,b]=(0,n.useState)(!1),[y,f]=(0,n.useState)(null);(0,n.useEffect)(()=>{o&&i({pohoda_enabled:o.pohoda_enabled||!1,pohoda_url:o.pohoda_url||"",pohoda_username:o.pohoda_username||"",pohoda_password:o.pohoda_password||"",pohoda_ico:o.pohoda_ico||"",pohoda_year:o.pohoda_year||"",auto_sync:o.auto_sync||!1,sync_frequency:o.sync_frequency||"daily"})},[o]);const v=e=>{const{name:t,value:a,type:n}=e.target,s=e.target.checked;i(e=>(0,m.A)((0,m.A)({},e),{},{[t]:"checkbox"===n?s:a}))},j=()=>c.pohoda_url&&c.pohoda_username&&c.pohoda_password&&c.pohoda_ico&&c.pohoda_year;return t?(0,x.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,x.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Nastavenia POHODA integr\xe1cie"}),(0,x.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,x.jsx)(u.A,{className:"h-6 w-6"})})]}),(0,x.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),b(!0);try{await r({pohoda_enabled:c.pohoda_enabled,pohoda_url:c.pohoda_url,pohoda_username:c.pohoda_username,pohoda_password:c.pohoda_password,pohoda_ico:c.pohoda_ico,pohoda_year:c.pohoda_year,auto_sync:c.auto_sync,sync_frequency:c.sync_frequency}),a()}catch(t){console.error("Chyba pri ukladan\xed nastaven\xed:",t)}finally{b(!1)}},className:"p-6 space-y-6",children:[(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Z\xe1kladn\xe9 nastavenia"}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"pohoda_enabled",name:"pohoda_enabled",checked:c.pohoda_enabled,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,x.jsx)("label",{htmlFor:"pohoda_enabled",className:"ml-2 block text-sm text-gray-900",children:"Povoli\u0165 POHODA integr\xe1ciu"})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"pohoda_url",className:"block text-sm font-medium text-gray-700",children:"POHODA mServer URL *"}),(0,x.jsx)("input",{type:"url",id:"pohoda_url",name:"pohoda_url",value:c.pohoda_url,onChange:v,placeholder:"http://localhost:8080",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:c.pohoda_enabled})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"pohoda_username",className:"block text-sm font-medium text-gray-700",children:"Pou\u017e\xedvate\u013esk\xe9 meno *"}),(0,x.jsx)("input",{type:"text",id:"pohoda_username",name:"pohoda_username",value:c.pohoda_username,onChange:v,placeholder:"admin",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:c.pohoda_enabled})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"pohoda_password",className:"block text-sm font-medium text-gray-700",children:"Heslo *"}),(0,x.jsx)("input",{type:"password",id:"pohoda_password",name:"pohoda_password",value:c.pohoda_password,onChange:v,placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:c.pohoda_enabled})]})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"pohoda_ico",className:"block text-sm font-medium text-gray-700",children:"I\u010cO firmy v POHODA *"}),(0,x.jsx)("input",{type:"text",id:"pohoda_ico",name:"pohoda_ico",value:c.pohoda_ico,onChange:v,placeholder:"12345678",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:c.pohoda_enabled})]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"pohoda_year",className:"block text-sm font-medium text-gray-700",children:"Rok firmy v POHODA (I\u010cO_ROK) *"}),(0,x.jsx)("input",{type:"text",id:"pohoda_year",name:"pohoda_year",value:c.pohoda_year,onChange:v,placeholder:"2024",className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:c.pohoda_enabled}),(0,x.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Ak m\xe1te viacero firiem s rovnak\xfdm I\u010cO, zadajte rok (napr. 2024 pre I\u010cO_2024)"})]})]}),(0,x.jsxs)("div",{className:"mt-6 border-t pt-6",children:[(0,x.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"POHODA Nastavenia - mServer"}),!c.pohoda_enabled&&(0,x.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4",children:(0,x.jsx)("p",{className:"text-sm text-gray-600",children:"Pre pou\u017eitie mServer integr\xe1cie najprv povolte POHODA integr\xe1ciu vy\u0161\u0161ie."})}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,x.jsx)("h4",{className:"text-md font-medium text-blue-800 mb-2",children:"Testovanie mServer spojenia"}),(0,x.jsx)("p",{className:"text-sm text-blue-700 mb-3",children:"Testujte pripojenie k POHODA mServer pre automatick\xfa synchroniz\xe1ciu fakt\xfar."}),(0,x.jsxs)("div",{className:"space-y-2",children:[(0,x.jsx)("button",{type:"button",onClick:async()=>{b(!0),f(null);try{const e=await fetch("/api/accounting/test-pohoda-connection",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({companyId:s,pohoda_url:c.pohoda_url,pohoda_username:c.pohoda_username,pohoda_password:c.pohoda_password,pohoda_ico:c.pohoda_ico,pohoda_year:c.pohoda_year})}),t=await e.json();t.success?f({success:!0,message:"Spojenie s POHODA mServer je \xfaspe\u0161n\xe9!"}):f({success:!1,message:t.error||"Nepodarilo sa pripoji\u0165 k POHODA mServer"})}catch(e){f({success:!1,message:"Chyba pri testovan\xed spojenia"})}finally{b(!1)}},disabled:!c.pohoda_enabled||!j(),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Testujem..."]}):"Testova\u0165 spojenie"}),(0,x.jsx)("button",{type:"button",onClick:async()=>{b(!0),f(null);try{const e=await l.B.testPohodaInvoices(s,{pohoda_url:c.pohoda_url,pohoda_username:c.pohoda_username,pohoda_password:c.pohoda_password,pohoda_ico:c.pohoda_ico,pohoda_year:c.pohoda_year});f({success:e.success,message:e.message||(e.success?"Fakt\xfary \xfaspe\u0161ne na\u010d\xedtan\xe9":"Chyba pri na\u010d\xedtan\xed fakt\xfar")})}catch(e){console.error("Chyba pri testovan\xed fakt\xfar:",e),f({success:!1,message:"Chyba pri testovan\xed fakt\xfar"})}finally{b(!1)}},disabled:!c.pohoda_enabled||!j(),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Testujem fakt\xfary..."]}):"Testova\u0165 fakt\xfary"}),(0,x.jsx)("button",{type:"button",onClick:async()=>{b(!0),f(null);try{const e=await l.B.syncPohodaInvoices(s);f({success:e.success,message:e.message||(e.success?"Synchroniz\xe1cia \xfaspe\u0161n\xe1":"Chyba pri synchroniz\xe1cii")})}catch(e){console.error("Chyba pri synchroniz\xe1cii:",e),f({success:!1,message:"Chyba pri synchroniz\xe1cii fakt\xfar"})}finally{b(!1)}},disabled:!c.pohoda_enabled||!j(),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Synchronizujem..."]}):"Synchronizova\u0165 fakt\xfary"})]}),y&&(0,x.jsxs)("div",{className:"flex items-center p-3 rounded-md mt-3 ".concat(y.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"),children:[y.success?(0,x.jsx)(h.A,{className:"h-5 w-5 text-green-400 mr-2"}):(0,x.jsx)(p.A,{className:"h-5 w-5 text-red-400 mr-2"}),(0,x.jsx)("span",{className:"text-sm ".concat(y.success?"text-green-800":"text-red-800"),children:y.message})]})]}),c.pohoda_enabled&&(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsx)("h4",{className:"text-md font-medium text-gray-700",children:"Automatick\xe1 synchroniz\xe1cia"}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("input",{type:"checkbox",id:"auto_sync",name:"auto_sync",checked:c.auto_sync,onChange:v,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,x.jsx)("label",{htmlFor:"auto_sync",className:"ml-2 block text-sm text-gray-900",children:"Automatick\xe1 synchroniz\xe1cia"})]}),c.auto_sync&&(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{htmlFor:"sync_frequency",className:"block text-sm font-medium text-gray-700",children:"Frekvencia synchroniz\xe1cie"}),(0,x.jsxs)("select",{id:"sync_frequency",name:"sync_frequency",value:c.sync_frequency,onChange:v,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:[(0,x.jsx)("option",{value:"hourly",children:"Ka\u017ed\xfa hodinu"}),(0,x.jsx)("option",{value:"daily",children:"Denne"}),(0,x.jsx)("option",{value:"weekly",children:"T\xfd\u017edenne"}),(0,x.jsx)("option",{value:"manual",children:"Manu\xe1lne"})]})]})]})]})]}),(0,x.jsxs)("div",{className:"mt-6 border-t pt-6",children:[(0,x.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"POHODA Nastavenia - XML"}),(0,x.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[(0,x.jsx)("h4",{className:"text-md font-medium text-yellow-800 mb-2",children:"XML Import/Export"}),(0,x.jsx)("p",{className:"text-sm text-yellow-700",children:"Manu\xe1lny import/export fakt\xfar cez XML s\xfabory. Funguje s demo aj plnou verziou POHODA."})]}),(0,x.jsx)(g,{companyId:s})]}),(0,x.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,x.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Zru\u0161i\u0165"}),(0,x.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?"Uklad\xe1m...":"Ulo\u017ei\u0165 nastavenia"})]})]})]})}):null},y=e=>{let{onBack:t}=e;const[a,m]=(0,n.useState)([]),[u,h]=(0,n.useState)(null),[p,g]=(0,n.useState)(null),[y,f]=(0,n.useState)([]),[v,j]=(0,n.useState)(!1),[w,k]=(0,n.useState)(!1);(0,n.useEffect)(()=>{N()},[]);const N=async()=>{try{const e=await d.apiService.getAllCompanies();m(e),e.length>0&&h(e[0].id)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed firiem:",e)}},_=async e=>{try{const[t,a]=await Promise.all([l.B.getSettings(e),l.B.getAllPermissions(e)]);g(t),f(a)}catch(t){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t firmy:",t)}};(0,n.useEffect)(()=>{u&&_(u)},[u]);const S=e=>l.B.formatDate(e);return(0,x.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,x.jsx)("div",{className:"bg-white shadow",children:(0,x.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,x.jsx)("div",{className:"flex justify-between h-16",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("button",{onClick:t,className:"mr-4 p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100",children:(0,x.jsx)(s.A,{className:"h-6 w-6"})}),(0,x.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"POHODA mServer Nastavenia"})]})})})}),(0,x.jsxs)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[(0,x.jsxs)("div",{className:"mb-6",children:[(0,x.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vyberte firmu"}),(0,x.jsx)("select",{value:u||"",onChange:e=>h(Number(e.target.value)),className:"block w-full max-w-xs rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:a.map(e=>(0,x.jsx)("option",{value:e.id,children:e.name},e.id))})]}),u&&(0,x.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,x.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,x.jsx)(o.A,{className:"h-5 w-5 mr-2 text-indigo-600"}),"POHODA mServer Nastavenia"]}),(0,x.jsx)("button",{onClick:()=>j(!0),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Upravi\u0165"})]})}),(0,x.jsx)("div",{className:"p-6",children:p?(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Stav integr\xe1cie"}),(0,x.jsxs)("div",{className:"flex items-center",children:[p.pohoda_enabled?(0,x.jsx)(r.A,{className:"h-5 w-5 text-green-500 mr-2"}):(0,x.jsx)(c.A,{className:"h-5 w-5 text-red-500 mr-2"}),(0,x.jsx)("span",{className:"text-sm ".concat(p.pohoda_enabled?"text-green-600":"text-red-600"),children:p.pohoda_enabled?"Akt\xedvna":"Neakt\xedvna"})]})]}),p.pohoda_enabled&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"I\u010cO firmy v POHODA"}),(0,x.jsx)("span",{className:"text-sm text-gray-900",children:p.pohoda_ico||"-"})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Rok firmy v POHODA"}),(0,x.jsx)("span",{className:"text-sm text-gray-900",children:p.pohoda_year||"-"})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Automatick\xe1 synchroniz\xe1cia"}),(0,x.jsx)("span",{className:"text-sm text-gray-900",children:p.auto_sync?"Zapnut\xe1":"Vypnut\xe1"})]}),(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Frekvencia synchroniz\xe1cie"}),(0,x.jsxs)("span",{className:"text-sm text-gray-900",children:["hourly"===p.sync_frequency&&"Ka\u017ed\xfa hodinu","daily"===p.sync_frequency&&"Denne","weekly"===p.sync_frequency&&"T\xfd\u017edenne","manual"===p.sync_frequency&&"Manu\xe1lne"]})]}),p.last_sync&&(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Posledn\xe1 synchroniz\xe1cia"}),(0,x.jsx)("span",{className:"text-sm text-gray-900",children:S(p.last_sync)})]})]})]}):(0,x.jsx)("p",{className:"text-gray-500 text-center py-4",children:"\u017diadne nastavenia POHODA"})})]}),(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,x.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,x.jsx)(i.A,{className:"h-5 w-5 mr-2 text-blue-600"}),"Pr\xe1va pre \xfa\u010dtovn\xedctvo"]}),(0,x.jsx)("button",{onClick:()=>k(!0),className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Prida\u0165 pr\xe1va"})]})}),(0,x.jsx)("div",{className:"p-6",children:y.length>0?(0,x.jsx)("div",{className:"space-y-3",children:y.map(e=>(0,x.jsxs)("div",{className:"border rounded-md p-3",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,x.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.user_email}),(0,x.jsx)("span",{className:"text-xs text-gray-500",children:e.granted_at?S(e.granted_at):"-"})]}),(0,x.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.can_view_invoices&&(0,x.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:"Zobrazi\u0165 fakt\xfary"}),e.can_create_invoices&&(0,x.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Vytvori\u0165 fakt\xfary"}),e.can_edit_invoices&&(0,x.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Upravi\u0165 fakt\xfary"}),e.can_view_bank&&(0,x.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800",children:"Zobrazi\u0165 banku"}),e.can_edit_bank&&(0,x.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:"Upravi\u0165 banku"}),e.can_view_cash&&(0,x.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-pink-100 text-pink-800",children:"Zobrazi\u0165 poklad\u0148u"}),e.can_edit_cash&&(0,x.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Upravi\u0165 poklad\u0148u"}),e.can_manage_settings&&(0,x.jsx)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Spravova\u0165 nastavenia"})]})]},e.id))}):(0,x.jsx)("p",{className:"text-gray-500 text-center py-4",children:"\u017diadne pr\xe1va pre \xfa\u010dtovn\xedctvo"})})]})]}),v&&p&&(0,x.jsx)(b,{isOpen:v,onClose:()=>j(!1),companyId:u,settings:p,onSave:async e=>{try{await l.B.saveSettings(u,e),await _(u),j(!1)}catch(t){console.error("Chyba pri ukladan\xed POHODA nastaven\xed:",t)}}})]})]})}},29422:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(53986),s=a(65043);const o=["title","titleId"];function r(e,t){let{title:a,titleId:r}=e,c=(0,n.A)(e,o);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},c),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const c=s.forwardRef(r)},37504:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(53986),s=a(65043);const o=["title","titleId"];function r(e,t){let{title:a,titleId:r}=e,c=(0,n.A)(e,o);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},c),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const c=s.forwardRef(r)},77098:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(53986),s=a(65043);const o=["title","titleId"];function r(e,t){let{title:a,titleId:r}=e,c=(0,n.A)(e,o);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},c),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const c=s.forwardRef(r)},85442:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(53986),s=a(65043);const o=["title","titleId"];function r(e,t){let{title:a,titleId:r}=e,c=(0,n.A)(e,o);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},c),a?s.createElement("title",{id:r},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const c=s.forwardRef(r)}}]);
//# sourceMappingURL=473.e77aebf4.chunk.js.map