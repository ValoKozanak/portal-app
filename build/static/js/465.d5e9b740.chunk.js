"use strict";(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[465],{4111:(e,t,s)=>{s.d(t,{A:()=>n});var a=s(9950),r=s(15536),l=s(44414);const n=e=>{let{isOpen:t,onClose:n,file:i}=e;const[o,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)("");(0,a.useEffect)(()=>{t&&i&&u()},[t,i]);const u=async()=>{if(i){m(!0),h("");try{const{apiService:e}=await Promise.resolve().then(s.bind(s,50237)),t=await e.downloadFile(i.id),a=window.URL.createObjectURL(t);c(a)}catch(e){h("Nepodarilo sa na\u010d\xedta\u0165 n\xe1h\u013ead s\xfaboru"),console.error("Chyba pri na\u010d\xedtan\xed n\xe1h\u013eadu:",e)}finally{m(!1)}}},p=async()=>{if(i)try{const{apiService:e}=await Promise.resolve().then(s.bind(s,50237)),t=await e.downloadFile(i.id),a=window.URL.createObjectURL(t);window.open(a,"_blank")}catch(e){console.error("Chyba pri otv\xe1ran\xed s\xfaboru:",e),alert("Nepodarilo sa otvori\u0165 s\xfabor")}},g=async()=>{if(i)try{const{apiService:e}=await Promise.resolve().then(s.bind(s,50237)),t=await e.downloadFile(i.id),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=i.original_name,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}catch(e){console.error("Chyba pri s\u0165ahovan\xed s\xfaboru:",e),alert("Nepodarilo sa stiahnu\u0165 s\xfabor")}},v=null===i||void 0===i?void 0:i.file_type.includes("image"),b=null===i||void 0===i?void 0:i.file_type.includes("pdf"),f=(null===i||void 0===i?void 0:i.file_type.includes("text"))||(null===i||void 0===i?void 0:i.file_type.includes("document"));return t&&i?(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-[95vw] h-[95vh] flex flex-col",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:i.original_name}),(0,l.jsx)("span",{className:"text-sm text-gray-500",children:i.file_size>1048576?"".concat((i.file_size/1048576).toFixed(1)," MB"):"".concat((i.file_size/1024).toFixed(1)," KB")})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("button",{onClick:p,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",title:"Otvori\u0165 v novom okne",children:"Otvori\u0165"}),(0,l.jsx)("button",{onClick:g,className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",title:"Stiahnu\u0165 s\xfabor",children:"Stiahnu\u0165"}),(0,l.jsx)("button",{onClick:n,className:"p-1 text-gray-400 hover:text-gray-600",children:(0,l.jsx)(r.A,{className:"h-6 w-6"})})]})]}),(0,l.jsx)("div",{className:"flex-1 overflow-hidden",children:d?(0,l.jsxs)("div",{className:"flex items-center justify-center h-full",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,l.jsx)("span",{className:"ml-3 text-gray-600",children:"Na\u010d\xedtavam n\xe1h\u013ead..."})]}):x?(0,l.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-red-500 text-lg mb-2",children:"\u26a0\ufe0f"}),(0,l.jsx)("p",{className:"text-gray-600",children:x}),(0,l.jsxs)("div",{className:"mt-4 space-x-2",children:[(0,l.jsx)("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Otvori\u0165 v novom okne"}),(0,l.jsx)("button",{onClick:g,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Stiahnu\u0165 s\xfabor"})]})]})}):(0,l.jsxs)("div",{className:"h-full overflow-auto",children:[v&&o&&(0,l.jsx)("div",{className:"flex items-center justify-center h-full p-4",children:(0,l.jsx)("img",{src:o,alt:i.original_name,className:"max-w-full max-h-full object-contain"})}),b&&o&&(0,l.jsx)("div",{className:"h-full",children:(0,l.jsx)("iframe",{src:o,className:"w-full h-full border-0",title:i.original_name})}),f&&(0,l.jsx)("div",{className:"h-full p-4",children:(0,l.jsxs)("pre",{className:"whitespace-pre-wrap text-sm text-gray-800 bg-gray-50 p-4 rounded border h-full overflow-auto",children:["Simulovan\xfd textov\xfd s\xfabor: ",i.original_name,"Tento s\xfabor bol vytvoren\xfd v simulovanom prostred\xed. D\xe1tum vytvorenia: ",new Date(i.created_at).toLocaleDateString("sk-SK"),"Ve\u013ekos\u0165: ",i.file_size," bajtov Kateg\xf3ria: ",i.file_type,"Obsah s\xfaboru: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."]})}),!v&&!b&&!f&&(0,l.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-gray-500 text-lg mb-2",children:"\ud83d\udcc4"}),(0,l.jsx)("p",{className:"text-gray-600",children:"N\xe1h\u013ead nie je dostupn\xfd pre tento typ s\xfaboru"}),(0,l.jsxs)("div",{className:"mt-4 space-x-2",children:[(0,l.jsx)("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Otvori\u0165 v novom okne"}),(0,l.jsx)("button",{onClick:g,className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Stiahnu\u0165 s\xfabor"})]})]})})]})})]})}):null}},14185:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const i=r.forwardRef(n)},16467:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const i=r.forwardRef(n)},21946:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const i=r.forwardRef(n)},39818:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const i=r.forwardRef(n)},41435:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const i=r.forwardRef(n)},46536:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const i=r.forwardRef(n)},50201:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const i=r.forwardRef(n)},52941:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const i=r.forwardRef(n)},57491:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const i=r.forwardRef(n)},74465:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(9950),r=s(22896),l=s(14185),n=s(52941),i=s(82777),o=s(46536),c=s(41435),d=s(39818),m=s(57491),x=s(16467),h=s(64112),u=s(75520),p=s(4111),g=s(50237),v=s(44414);const b=e=>{let{onBack:t}=e;const[s,b]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[j,w]=(0,a.useState)(""),[N,k]=(0,a.useState)("all"),[A,C]=(0,a.useState)(!1),[L,S]=(0,a.useState)(null),[E,O]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(async()=>{try{y(!0);const e=await g.apiService.getAllFiles();b(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed s\xfaborov:",e)}finally{y(!1)}})()},[]);const _=s.filter(e=>{const t=e.original_name.toLowerCase().includes(j.toLowerCase())||e.category.toLowerCase().includes(j.toLowerCase())||e.uploaded_by.toLowerCase().includes(j.toLowerCase()),s="all"===N||e.category===N;return t&&s}),z=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},B={total:s.length,documents:s.filter(e=>"documents"===e.category).length,invoices:s.filter(e=>"invoices"===e.category).length,contracts:s.filter(e=>"contracts"===e.category).length,other:s.filter(e=>!["documents","invoices","contracts"].includes(e.category)).length},M=["all",...Array.from(new Set(s.map(e=>e.category)))];return(0,v.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,v.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,v.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,v.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,v.jsx)(l.A,{className:"h-5 w-5 mr-2"}),"Sp\xe4\u0165 do Dashboardu"]}),(0,v.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(i.A,{className:"h-8 w-8 text-yellow-500 mr-3"}),(0,v.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Spr\xe1va s\xfaborov"})]})]}),(0,v.jsxs)("button",{onClick:()=>C(!0),className:"bg-yellow-600 text-white px-4 py-2 rounded-md hover:bg-yellow-700 flex items-center transition-colors",children:[(0,v.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Nahra\u0165 s\xfabor"]})]})})}),(0,v.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,v.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(i.A,{className:"h-8 w-8 text-blue-500"}),(0,v.jsxs)("div",{className:"ml-3",children:[(0,v.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Celkovo"}),(0,v.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:B.total})]})]})}),(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(c.A,{className:"h-8 w-8 text-green-500"}),(0,v.jsxs)("div",{className:"ml-3",children:[(0,v.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Dokumenty"}),(0,v.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:B.documents})]})]})}),(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(c.A,{className:"h-8 w-8 text-purple-500"}),(0,v.jsxs)("div",{className:"ml-3",children:[(0,v.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Fakt\xfary"}),(0,v.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:B.invoices})]})]})}),(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(c.A,{className:"h-8 w-8 text-orange-500"}),(0,v.jsxs)("div",{className:"ml-3",children:[(0,v.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Zmluvy"}),(0,v.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:B.contracts})]})]})}),(0,v.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(c.A,{className:"h-8 w-8 text-gray-500"}),(0,v.jsxs)("div",{className:"ml-3",children:[(0,v.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Ostatn\xe9"}),(0,v.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:B.other})]})]})})]}),(0,v.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,v.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,v.jsxs)("div",{className:"flex justify-between items-center",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Zoznam s\xfaborov"}),(0,v.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Celkovo ",_.length," s\xfaborov z ",s.length]})]}),(0,v.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,v.jsx)("select",{value:N,onChange:e=>k(e.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm rounded-md",children:M.map(e=>(0,v.jsx)("option",{value:e,children:"all"===e?"V\u0161etky kateg\xf3rie":e},e))}),(0,v.jsxs)("div",{className:"relative",children:[(0,v.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,v.jsx)(d.A,{className:"h-5 w-5 text-gray-400"})}),(0,v.jsx)("input",{type:"text",placeholder:"Vyh\u013eada\u0165 s\xfabor...",value:j,onChange:e=>w(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-yellow-500 focus:border-yellow-500 sm:text-sm"})]})]})]})}),(0,v.jsx)("div",{className:"p-6",children:f?(0,v.jsxs)("div",{className:"text-center py-12",children:[(0,v.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-600 mx-auto"}),(0,v.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam s\xfabory..."})]}):_.length>0?(0,v.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(e=>{return(0,v.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 hover:shadow-md transition-shadow border border-gray-200",children:[(0,v.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,v.jsxs)("div",{className:"flex-1",children:[(0,v.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-1 truncate",children:e.original_name}),(0,v.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(c.A,{className:"h-4 w-4 mr-2"}),(0,v.jsx)("span",{className:"capitalize",children:e.category})]}),(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(h.A,{className:"h-4 w-4 mr-2"}),(0,v.jsx)("span",{children:e.uploaded_by})]}),(0,v.jsxs)("div",{className:"flex items-center",children:[(0,v.jsx)(n.A,{className:"h-4 w-4 mr-2"}),(0,v.jsx)("span",{children:(t=e.created_at,new Date(t).toLocaleDateString("sk-SK",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),(0,v.jsx)("div",{className:"text-xs text-gray-500",children:z(e.file_size)})]})]})}),(0,v.jsx)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:(0,v.jsxs)("div",{className:"flex space-x-2",children:[(0,v.jsxs)("button",{onClick:()=>(e=>{S(e),O(!0)})(e),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center",children:[(0,v.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"N\xe1h\u013ead"]}),(0,v.jsxs)("button",{onClick:()=>(async e=>{try{const t=await g.apiService.downloadFile(e.id),s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=e.original_name,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(s),document.body.removeChild(a)}catch(t){console.error("Chyba pri s\u0165ahovan\xed s\xfaboru:",t),alert("Chyba pri s\u0165ahovan\xed s\xfaboru")}})(e),className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center",children:[(0,v.jsx)(r.A,{className:"h-4 w-4 mr-1"}),"Stiahnu\u0165"]}),(0,v.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Naozaj chcete vymaza\u0165 tento s\xfabor?"))try{await g.apiService.deleteFile(e),b(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Chyba pri mazan\xed s\xfaboru:",t),alert("Chyba pri mazan\xed s\xfaboru")}})(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium flex items-center",children:[(0,v.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"Vymaza\u0165"]})]})})]},e.id);var t})}):(0,v.jsxs)("div",{className:"text-center py-12",children:[(0,v.jsx)(i.A,{className:"mx-auto h-16 w-16 text-gray-400"}),(0,v.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:j||"all"!==N?"\u017diadne s\xfabory nen\xe1jden\xe9":"\u017diadne s\xfabory"}),(0,v.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:j||"all"!==N?"Sk\xfaste zmeni\u0165 vyh\u013ead\xe1vac\xed v\xfdraz alebo filter.":"Zatia\u013e neboli nahran\xe9 \u017eiadne s\xfabory."}),!j&&"all"===N&&(0,v.jsxs)("button",{onClick:()=>C(!0),className:"mt-4 bg-yellow-600 text-white px-6 py-3 rounded-md hover:bg-yellow-700 flex items-center mx-auto",children:[(0,v.jsx)(m.A,{className:"h-5 w-5 mr-2"}),"Nahra\u0165 prv\xfd s\xfabor"]})]})})]})]}),(0,v.jsx)(u.A,{isOpen:A,onClose:()=>C(!1),onFileUpload:e=>{b(t=>[e,...t])},companyId:0}),(0,v.jsx)(p.A,{isOpen:E,onClose:()=>{O(!1),S(null)},file:L})]})}},75520:(e,t,s)=>{s.d(t,{A:()=>u});var a=s(22555),r=s(9950),l=s(50237),n=s(99632),i=s(81518),o=s(82777),c=s(21946),d=s(50201),m=s(16467),x=s(15536),h=s(44414);const u=e=>{let{isOpen:t,onClose:s,companyId:u,companies:p=[],onFileUpload:g,userRole:v="company"}=e;const[b,f]=(0,r.useState)([]),[y,j]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[k,A]=(0,r.useState)(""),[C,L]=(0,r.useState)(u||0);(0,r.useEffect)(()=>{"company"===v&&u&&L(u)},[v,u]);const[S,E]=(0,r.useState)(!1),[O,_]=(0,r.useState)({}),[z,B]=(0,r.useState)({}),M=[{id:"documents",name:"Dokumenty",icon:o.A},{id:"invoices",name:"Fakt\xfary",icon:c.A},{id:"contracts",name:"Zmluvy",icon:o.A},{id:"reports",name:"Spr\xe1vy",icon:o.A},{id:"images",name:"Obr\xe1zky",icon:d.A},{id:"archives",name:"Arch\xedvy",icon:n.A},{id:"other",name:"Ostatn\xe9",icon:c.A}],I=["application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","image/jpeg","image/png","image/gif","application/zip","application/x-rar-compressed"],R=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]};return t?(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Nahra\u0165 s\xfabory"}),(0,h.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,h.jsx)(x.A,{className:"h-6 w-6"})})]}),(0,h.jsxs)("div",{className:"p-6 space-y-6",children:["company"!==v&&(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Firma *"}),(0,h.jsxs)("select",{value:C,onChange:e=>L(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[(0,h.jsx)("option",{value:"",children:"Vyberte firmu"}),p.map(e=>(0,h.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),"company"===v&&u&&(0,h.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,h.jsx)("p",{className:"text-sm text-blue-800",children:(0,h.jsx)("strong",{children:"S\xfabory sa nahr\xe1vaj\xfa pre va\u0161u firmu"})})}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Typ s\xfaboru *"}),(0,h.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",required:!0,children:[(0,h.jsx)("option",{value:"",children:"Vyberte typ s\xfaboru"}),M.map(e=>(0,h.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,h.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,h.jsx)(i.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,h.jsxs)("div",{className:"mt-4",children:[(0,h.jsxs)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[(0,h.jsx)("span",{className:"text-primary-600 hover:text-primary-700 font-medium",children:"Kliknite pre v\xfdber s\xfaborov"}),(0,h.jsx)("span",{className:"text-gray-500",children:" alebo ich sem presu\u0148te"})]}),(0,h.jsx)("input",{id:"file-upload",type:"file",multiple:!0,onChange:e=>{if(e.target.files){const t=Array.from(e.target.files).filter(e=>e.size>10485760?(B(t=>(0,a.A)((0,a.A)({},t),{},{[e.name]:"S\xfabor je pr\xedli\u0161 ve\u013ek\xfd (max. 10MB)"})),!1):!!I.includes(e.type)||(B(t=>(0,a.A)((0,a.A)({},t),{},{[e.name]:"Nepodporovan\xfd typ s\xfaboru"})),!1));f(e=>[...e,...t])}},className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.zip,.rar"})]}),(0,h.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"PDF, DOC, XLS, obr\xe1zky, arch\xedvy (max. 10MB na s\xfabor)"})]}),b.length>0&&(0,h.jsxs)("div",{children:[(0,h.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Vybran\xe9 s\xfabory (",b.length,")"]}),(0,h.jsx)("div",{className:"space-y-2",children:b.map((e,t)=>{const s=(r=e.type).startsWith("image/")?d.A:r.includes("pdf")?o.A:r.includes("zip")||r.includes("rar")?n.A:c.A;var r;const l=O[e.name],i=z[e.name];return(0,h.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)(s,{className:"h-5 w-5 text-gray-400"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,h.jsx)("p",{className:"text-xs text-gray-500",children:R(e.size)}),i&&(0,h.jsx)("p",{className:"text-xs text-red-600",children:i}),l&&(0,h.jsxs)("div",{className:"mt-1",children:[(0,h.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,h.jsx)("div",{className:"bg-primary-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(l.percentage,"%")}})}),(0,h.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[l.percentage,"% (",R(l.loaded)," / ",R(l.total),")"]})]})]})]}),(0,h.jsx)("button",{onClick:()=>(e=>{const t=b[e];f(t=>t.filter((t,s)=>s!==e)),B(e=>{const s=(0,a.A)({},e);return delete s[t.name],s}),_(e=>{const s=(0,a.A)({},e);return delete s[t.name],s})})(t),className:"text-red-500 hover:text-red-700",children:(0,h.jsx)(m.A,{className:"h-4 w-4"})})]},t)})})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Popis (volite\u013en\xe9)"}),(0,h.jsx)("textarea",{value:w,onChange:e=>N(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"Kr\xe1tky popis s\xfaborov..."})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tagy (volite\u013en\xe9)"}),(0,h.jsx)("input",{type:"text",value:k,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",placeholder:"d\xf4le\u017eit\xe9, urgent, 2024 (oddelen\xe9 \u010diarkami)"})]}),(0,h.jsxs)("div",{className:"flex space-x-3",children:[(0,h.jsx)("button",{type:"button",onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Zru\u0161i\u0165"}),(0,h.jsx)("button",{onClick:async()=>{if(0!==b.length)if(C)if(y){E(!0),B({});try{for(const t of b){_(e=>(0,a.A)((0,a.A)({},e),{},{[t.name]:{loaded:0,total:t.size,percentage:0}}));try{const e=await l.apiService.uploadFile(t,C,"user@portal.sk",y);g(e)}catch(e){B(s=>(0,a.A)((0,a.A)({},s),{},{[t.name]:e instanceof Error?e.message:"Nezn\xe1ma chyba"}))}}}finally{E(!1),f([]),N(""),A(""),_({})}}else alert("Vyberte typ s\xfaboru");else alert("Vyberte firmu, pre ktor\xfa nahr\xe1vate s\xfabory");else alert("Vyberte aspo\u0148 jeden s\xfabor na nahranie")},disabled:0===b.length||S||!C,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:S?"Nahr\xe1vam...":"Nahra\u0165 ".concat(b.length," s\xfaborov")})]})]})]})}):null}},81518:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const i=r.forwardRef(n)},99632:(e,t,s)=>{s.d(t,{A:()=>i});var a=s(53986),r=s(9950);const l=["title","titleId"];function n(e,t){let{title:s,titleId:n}=e,i=(0,a.A)(e,l);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),s?r.createElement("title",{id:n},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const i=r.forwardRef(n)}}]);