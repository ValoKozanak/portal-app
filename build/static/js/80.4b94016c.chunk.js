"use strict";(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[80],{5317:(e,t,s)=>{s.d(t,{A:()=>o});var a=s(9950),r=s(2599),n=s(64725),i=s(15536),l=s(44414);const o=e=>{let{isOpen:t,onClose:s,onAssign:o,companies:c,accountants:d}=e;const[m,x]=(0,a.useState)(null),[u,h]=(0,a.useState)([]),[p,g]=(0,a.useState)(""),[y,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&(x(null),h([]),g(""))},[t]);const f=c.filter(e=>e.name.toLowerCase().includes(p.toLowerCase())||e.ico.includes(p)||e.owner_email.toLowerCase().includes(p.toLowerCase()));return t?(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto mx-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Prida\u0165 \xfa\u010dtovn\xedkov k firme"}),(0,l.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)(i.A,{className:"h-6 w-6"})})]}),(0,l.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m&&0!==u.length){v(!0);try{await o(m,u),s()}catch(t){console.error("Chyba pri priraden\xed firmy:",t)}finally{v(!1)}}},className:"p-6 space-y-6",children:[(0,l.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,l.jsxs)("p",{className:"text-sm text-blue-800",children:["\ud83d\udca1 ",(0,l.jsx)("strong",{children:"Many-to-Many vz\u0165ah:"})," \xda\u010dtovn\xedk m\xf4\u017ee ma\u0165 viacero firiem a firma m\xf4\u017ee ma\u0165 viacero \xfa\u010dtovn\xedkov"]})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vyberte \xfa\u010dtovn\xedkov *"}),(0,l.jsx)("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:d.map(e=>(0,l.jsxs)("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,l.jsx)("input",{type:"checkbox",value:e.email,checked:u.includes(e.email),onChange:t=>{t.target.checked?h(t=>[...t,e.email]):h(t=>t.filter(t=>t!==e.email))},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]},e.id))}),u.length>0&&(0,l.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Vybran\xed \xfa\u010dtovn\xedci: ",u.length]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vyberte firmu na priradenie"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("input",{type:"text",placeholder:"H\u013eada\u0165 firmy...",value:p,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,l.jsx)(r.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),(0,l.jsx)("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-md",children:f.length>0?(0,l.jsx)("div",{className:"divide-y divide-gray-200",children:f.map(e=>(0,l.jsx)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors ".concat(m===e.id?"bg-primary-50 border-l-4 border-primary-500":""),onClick:()=>x(e.id),children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,l.jsx)("input",{type:"radio",name:"selectedCompany",value:e.id,checked:m===e.id,onChange:()=>x(e.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["I\u010cO: ",e.ico," | OR: ",e.business_registry||"N/A"]}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Vlastn\xedk: ",e.owner_email]}),e.assignedToAccountants&&e.assignedToAccountants.length>0&&(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)("p",{className:"text-sm text-green-600 font-medium",children:["U\u017e priraden\xed \xfa\u010dtovn\xedci: ",e.assignedToAccountants.length]}),(0,l.jsx)("p",{className:"text-xs text-gray-500",children:e.assignedToAccountants.join(", ")})]})]})]})}),m===e.id&&(0,l.jsx)(n.A,{className:"h-5 w-5 text-primary-600"})]})},e.id))}):(0,l.jsxs)("div",{className:"p-8 text-center",children:[(0,l.jsx)(r.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,l.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:p?"\u017diadne firmy nen\xe1jden\xe9":"\u017diadne firmy na port\xe1li"}),(0,l.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:p?"Sk\xfaste zmeni\u0165 vyh\u013ead\xe1vac\xed v\xfdraz":"Na port\xe1li nie s\xfa \u017eiadne firmy na priradenie"})]})}),m&&(0,l.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,l.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Vybran\xe1 firma:"}),(()=>{const e=c.find(e=>e.id===m);return e?(0,l.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,l.jsx)("p",{children:(0,l.jsx)("strong",{children:e.name})}),(0,l.jsxs)("p",{children:["I\u010cO: ",e.ico," | OR: ",e.business_registry||"N/A"]}),(0,l.jsxs)("p",{children:["Vlastn\xedk: ",e.owner_email]})]}):null})()]}),(0,l.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,l.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Zru\u0161i\u0165"}),(0,l.jsx)("button",{type:"submit",disabled:!m||0===u.length||y,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Prira\u010fujem...":"Prida\u0165 \xfa\u010dtovn\xedkov (".concat(u.length,")")})]})]})]})}):null}},14185:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(53986),r=s(9950);const n=["title","titleId"];function i(e,t){let{title:s,titleId:i}=e,l=(0,a.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const l=r.forwardRef(i)},19530:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(53986),r=s(9950);const n=["title","titleId"];function i(e,t){let{title:s,titleId:i}=e,l=(0,a.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const l=r.forwardRef(i)},21699:(e,t,s)=>{s.r(t),s.d(t,{default:()=>f});var a=s(22555),r=s(9950),n=s(14185),i=s(2599),l=s(64112),o=s(64725),c=s(15536),d=s(39818),m=s(37619),x=s(90045),u=s(19530),h=s(44414);const p=e=>{let{isOpen:t,onClose:s,onSave:n,company:o}=e;const[d,u]=(0,r.useState)({ico:"",name:"",address:"",business_registry:"",vat_id:"",tax_id:"",authorized_person:"",contact_email:"",contact_phone:""}),[p,g]=(0,r.useState)({}),[y,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&o&&(u({ico:o.ico,name:o.name,address:o.address,business_registry:o.business_registry||"",vat_id:o.vat_id||"",tax_id:o.tax_id||"",authorized_person:o.authorized_person,contact_email:o.contact_email||"",contact_phone:o.contact_phone||""}),g({}))},[t,o]);const f=e=>{const{name:t,value:s}=e.target;u(e=>(0,a.A)((0,a.A)({},e),{},{[t]:s})),p[t]&&g(e=>(0,a.A)((0,a.A)({},e),{},{[t]:""}))};return t&&o?(0,h.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,h.jsx)("div",{className:"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,h.jsx)(i.A,{className:"h-5 w-5 text-primary-600"})}),(0,h.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Upravi\u0165 firmu"})]}),(0,h.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600",children:(0,h.jsx)(c.A,{className:"h-6 w-6"})})]}),(0,h.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o&&(()=>{const e={};return d.ico.trim()?/^\d{8}$/.test(d.ico)||(e.ico="I\u010cO mus\xed ma\u0165 presne 8 \u010d\xedslic"):e.ico="I\u010cO je povinn\xe9",d.name.trim()||(e.name="N\xe1zov firmy je povinn\xfd"),d.address.trim()||(e.address="Adresa je povinn\xe1"),d.authorized_person.trim()||(e.authorized_person="Osoba opr\xe1vnen\xe1 kona\u0165 je povinn\xe1"),d.contact_email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.contact_email)&&(e.contact_email="Neplatn\xfd form\xe1t emailu"),d.contact_phone&&!/^\+?[\d\s\-()]+$/.test(d.contact_phone)&&(e.contact_phone="Neplatn\xfd form\xe1t telef\xf3nu"),d.tax_id&&!/^\d{10}$/.test(d.tax_id)&&(e.tax_id="DI\u010c mus\xed ma\u0165 presne 10 \u010d\xedslic"),g(e),0===Object.keys(e).length})()){v(!0);try{await n(o.id,d),s()}catch(t){console.error("Chyba pri ulo\u017een\xed firmy:",t)}finally{v(!1)}}},className:"p-6 space-y-6",children:[(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"ico",className:"block text-sm font-medium text-gray-700 mb-2",children:"I\u010cO *"}),(0,h.jsx)("input",{type:"text",id:"ico",name:"ico",value:d.ico,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(p.ico?"border-red-300":"border-gray-300"),placeholder:"12345678",maxLength:8}),p.ico&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.ico})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"N\xe1zov firmy *"}),(0,h.jsx)("input",{type:"text",id:"name",name:"name",value:d.name,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(p.name?"border-red-300":"border-gray-300"),placeholder:"N\xe1zov firmy s.r.o."}),p.name&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.name})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresa *"}),(0,h.jsx)("textarea",{id:"address",name:"address",value:d.address,onChange:f,rows:2,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(p.address?"border-red-300":"border-gray-300"),placeholder:"Hlavn\xe1 123, 81101 Bratislava"}),p.address&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.address})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"business_registry",className:"block text-sm font-medium text-gray-700 mb-2",children:"\u010c\xedslo obchodn\xe9ho registra"}),(0,h.jsx)("input",{type:"text",id:"business_registry",name:"business_registry",value:d.business_registry,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"12345/A"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"vat_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"I\u010c DPH"}),(0,h.jsx)("input",{type:"text",id:"vat_id",name:"vat_id",value:d.vat_id,onChange:f,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"SK1234567890"})]})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"tax_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"DI\u010c"}),(0,h.jsx)("input",{type:"text",id:"tax_id",name:"tax_id",value:d.tax_id,onChange:f,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(p.tax_id?"border-red-300":"border-gray-300"),placeholder:"1234567890",maxLength:10}),p.tax_id&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.tax_id})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"authorized_person",className:"block text-sm font-medium text-gray-700 mb-2",children:"Osoba opr\xe1vnen\xe1 kona\u0165 v mene firmy *"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("input",{type:"text",id:"authorized_person",name:"authorized_person",value:d.authorized_person,onChange:f,className:"w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(p.authorized_person?"border-red-300":"border-gray-300"),placeholder:"Ing. J\xe1n Nov\xe1k"}),(0,h.jsx)(l.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),p.authorized_person&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.authorized_person})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"contact_email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kontaktn\xfd email"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("input",{type:"email",id:"contact_email",name:"contact_email",value:d.contact_email,onChange:f,className:"w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(p.contact_email?"border-red-300":"border-gray-300"),placeholder:"info@firma.sk"}),(0,h.jsx)(m.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),p.contact_email&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.contact_email})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)("label",{htmlFor:"contact_phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Kontaktn\xfd telef\xf3n"}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("input",{type:"tel",id:"contact_phone",name:"contact_phone",value:d.contact_phone,onChange:f,className:"w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(p.contact_phone?"border-red-300":"border-gray-300"),placeholder:"+421 2 123 456 78"}),(0,h.jsx)(x.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),p.contact_phone&&(0,h.jsx)("p",{className:"mt-1 text-sm text-red-600",children:p.contact_phone})]})]}),(0,h.jsxs)("div",{className:"bg-gray-50 rounded-md p-4",children:[(0,h.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Inform\xe1cie o firme"}),(0,h.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,h.jsxs)("p",{children:[(0,h.jsx)("span",{className:"font-medium",children:"ID:"})," ",o.id]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("span",{className:"font-medium",children:"Vlastn\xedk:"})," ",o.owner_email]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("span",{className:"font-medium",children:"Vytvoren\xe1:"})," ",new Date(o.created_at).toLocaleDateString("sk-SK")]}),(0,h.jsxs)("p",{children:[(0,h.jsx)("span",{className:"font-medium",children:"Priraden\xed \xfa\u010dtovn\xedci:"})," ",o.assignedToAccountants.length]}),o.assignedToAccountants.length>0&&(0,h.jsx)("div",{className:"mt-2",children:(0,h.jsx)("p",{className:"text-xs text-gray-500",children:o.assignedToAccountants.join(", ")})}),(0,h.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-200",children:(0,h.jsxs)("p",{className:"text-xs text-blue-600",children:["\ud83d\udca1 ",(0,h.jsx)("strong",{children:"Many-to-Many vz\u0165ah:"})," \xda\u010dtovn\xedk m\xf4\u017ee ma\u0165 viacero firiem a firma m\xf4\u017ee ma\u0165 viacero \xfa\u010dtovn\xedkov"]})})]})]}),(0,h.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,h.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Zru\u0161i\u0165"}),(0,h.jsx)("button",{type:"submit",disabled:y,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Uklad\xe1m...":"Ulo\u017ei\u0165 zmeny"})]})]})]})}):null};var g=s(5317),y=s(50237);const v=r.lazy(()=>Promise.all([s.e(601),s.e(652),s.e(930),s.e(423),s.e(432),s.e(341)]).then(s.bind(s,40423))),f=e=>{let{onBack:t}=e;const[s,f]=(0,r.useState)([]),[b,j]=(0,r.useState)([]),[N,w]=(0,r.useState)(!0),[k,_]=(0,r.useState)(!1),[A,C]=(0,r.useState)(""),[L,S]=(0,r.useState)(!1),[z,I]=(0,r.useState)(null),[O,E]=(0,r.useState)(null),[P,F]=(0,r.useState)(!1),[T,V]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{w(!0);const t=await y.apiService.getAllCompanies();console.log("V\u0161etky firmy z API:",t),console.log("Statusy firiem:",t.map(e=>({name:e.name,status:e.status})));const s=t.filter(e=>"active"===e.status||!e.status||null===e.status),a=t.filter(e=>"inactive"===e.status);console.log("Akt\xedvne firmy:",s),console.log("Neakt\xedvne firmy:",a),f(s),j(a);try{const e=await y.apiService.getAllAccountants();V(e)}catch(e){console.warn("Nepodarilo sa na\u010d\xedta\u0165 \xfa\u010dtovn\xedkov:",e),V([])}}catch(t){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t:",t)}finally{w(!1)}})()},[]);const D=s.filter(e=>{var t;return e.name.toLowerCase().includes(A.toLowerCase())||e.ico.toLowerCase().includes(A.toLowerCase())||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(A.toLowerCase()))||e.owner_email.toLowerCase().includes(A.toLowerCase())}),R=b.filter(e=>{var t;return e.name.toLowerCase().includes(A.toLowerCase())||e.ico.toLowerCase().includes(A.toLowerCase())||(null===(t=e.email)||void 0===t?void 0:t.toLowerCase().includes(A.toLowerCase()))||e.owner_email.toLowerCase().includes(A.toLowerCase())}),Z=()=>{E(null)};return O?(0,h.jsx)(r.Suspense,{fallback:(0,h.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:"Na\u010d\xedtavam..."}),children:(0,h.jsx)(v,{company:O,onClose:Z,userEmail:"admin@portal.sk",userRole:"admin"})}):(0,h.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,h.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,h.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,h.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,h.jsx)(n.A,{className:"h-5 w-5 mr-2"}),"Sp\xe4\u0165 do Dashboardu"]}),(0,h.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(i.A,{className:"h-8 w-8 text-purple-500 mr-3"}),(0,h.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Spr\xe1va firiem"})]})]}),(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsxs)("button",{onClick:()=>F(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors flex items-center",children:[(0,h.jsx)(l.A,{className:"h-4 w-4 mr-2"}),"Priradi\u0165 \xfa\u010dtovn\xedkov"]}),(0,h.jsx)("button",{onClick:()=>_(!k),className:"px-4 py-2 rounded-md flex items-center transition-colors ".concat(k?"bg-gray-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:k?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(o.A,{className:"h-4 w-4 mr-2"}),"Zobrazi\u0165 akt\xedvne"]}):(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(c.A,{className:"h-4 w-4 mr-2"}),"Zobrazi\u0165 neakt\xedvne"]})})]})]})})}),(0,h.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,h.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,h.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:k?"Neakt\xedvne firmy":"Akt\xedvne firmy"}),(0,h.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:k?"Celkovo ".concat(b.length," neakt\xedvnych firiem"):"Celkovo ".concat(s.length," akt\xedvnych firiem")})]}),(0,h.jsxs)("div",{className:"relative",children:[(0,h.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,h.jsx)(d.A,{className:"h-5 w-5 text-gray-400"})}),(0,h.jsx)("input",{type:"text",placeholder:"Vyh\u013eada\u0165 firmu...",value:A,onChange:e=>C(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-purple-500 focus:border-purple-500 sm:text-sm"})]})]})}),(0,h.jsx)("div",{className:"p-6",children:N?(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),(0,h.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam firmy..."})]}):(k?R:D).length>0?(0,h.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:(k?R:D).map(e=>{return(0,h.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow border border-gray-200 cursor-pointer",onClick:()=>(e=>{E(e)})(e),children:[(0,h.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,h.jsxs)("div",{className:"flex-1",children:[(0,h.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),(0,h.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(i.A,{className:"h-4 w-4 mr-2"}),(0,h.jsxs)("span",{children:["I\u010cO: ",e.ico]})]}),(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(m.A,{className:"h-4 w-4 mr-2"}),(0,h.jsx)("span",{children:e.email||e.owner_email})]}),e.contact_phone&&(0,h.jsxs)("div",{className:"flex items-center",children:[(0,h.jsx)(x.A,{className:"h-4 w-4 mr-2"}),(0,h.jsx)("span",{children:e.contact_phone})]}),(0,h.jsxs)("div",{className:"flex items-start",children:[(0,h.jsx)(l.A,{className:"h-4 w-4 mr-2 mt-0.5"}),(0,h.jsx)("span",{className:"text-xs",children:e.authorized_person})]}),e.assignedToAccountants&&e.assignedToAccountants.length>0&&(0,h.jsxs)("div",{className:"flex items-start",children:[(0,h.jsx)(l.A,{className:"h-4 w-4 mr-2 mt-0.5 text-green-600"}),(0,h.jsxs)("span",{className:"text-xs text-green-600",children:["\xda\u010dtovn\xedci: ",e.assignedToAccountants.length]})]})]})]}),(0,h.jsx)("div",{className:"flex flex-col items-end space-y-2",children:(t=e.status,(0,h.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800"}[t]),children:{active:"Akt\xedvna",inactive:"Neakt\xedvna"}[t]}))})]}),(0,h.jsx)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:(0,h.jsxs)("div",{className:"flex space-x-2",children:[(0,h.jsxs)("button",{onClick:e=>{e.stopPropagation(),F(!0)},className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center",children:[(0,h.jsx)(l.A,{className:"h-4 w-4 mr-1"}),"Priradi\u0165 \xfa\u010dtovn\xedkov"]}),(0,h.jsxs)("button",{onClick:t=>{t.stopPropagation(),(e=>{I(e),S(!0)})(e)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center",children:[(0,h.jsx)(u.A,{className:"h-4 w-4 mr-1"}),"Upravi\u0165"]}),"active"===e.status?(0,h.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{await y.apiService.deactivateCompany(e);const t=s.find(t=>t.id===e);t&&(f(t=>t.filter(t=>t.id!==e)),j(e=>[...e,(0,a.A)((0,a.A)({},t),{},{status:"inactive"})]))}catch(t){console.error("Chyba pri deaktiv\xe1cii firmy:",t),alert("Chyba pri deaktiv\xe1cii firmy")}})(e.id)},className:"text-orange-600 hover:text-orange-700 text-sm font-medium flex items-center",children:[(0,h.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"Deaktivova\u0165"]}):(0,h.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{try{await y.apiService.activateCompany(e);const t=b.find(t=>t.id===e);t&&(j(t=>t.filter(t=>t.id!==e)),f(e=>[...e,(0,a.A)((0,a.A)({},t),{},{status:"active"})]))}catch(t){console.error("Chyba pri aktiv\xe1cii firmy:",t),alert("Chyba pri aktiv\xe1cii firmy")}})(e.id)},className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center",children:[(0,h.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"Aktivova\u0165"]})]})})]},e.id);var t})}):(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)(i.A,{className:"mx-auto h-16 w-16 text-gray-400"}),(0,h.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:A?"\u017diadne firmy nen\xe1jden\xe9":k?"\u017diadne neakt\xedvne firmy":"\u017diadne akt\xedvne firmy"}),(0,h.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:A?"Sk\xfaste zmeni\u0165 vyh\u013ead\xe1vac\xed v\xfdraz.":k?"V\u0161etky firmy s\xfa akt\xedvne.":"Zatia\u013e neboli vytvoren\xe9 \u017eiadne firmy."})]})})]})}),(0,h.jsx)(p,{isOpen:L,onClose:()=>{S(!1),I(null)},onSave:(e,t)=>z&&(async(e,t)=>{try{await y.apiService.updateCompany(e,t),f(s=>s.map(s=>s.id===e?(0,a.A)((0,a.A)({},s),t):s)),j(s=>s.map(s=>s.id===e?(0,a.A)((0,a.A)({},s),t):s)),S(!1),I(null)}catch(s){console.error("Chyba pri aktualiz\xe1cii firmy:",s.message),alert("Chyba pri aktualiz\xe1cii firmy: ".concat(s.message))}})(z.id,t),company:z}),(0,h.jsx)(g.A,{isOpen:P,onClose:()=>F(!1),onAssign:async(e,t)=>{try{await y.apiService.assignAccountantsToCompany(e,t);const s=await y.apiService.getAllCompanies(),a=s.filter(e=>"active"===e.status),r=s.filter(e=>"inactive"===e.status);f(a),j(r)}catch(s){console.error("Chyba pri priraden\xed \xfa\u010dtovn\xedkov:",s),alert("Chyba pri priraden\xed \xfa\u010dtovn\xedkov")}},companies:[...s,...b],accountants:T})]})}},39818:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(53986),r=s(9950);const n=["title","titleId"];function i(e,t){let{title:s,titleId:i}=e,l=(0,a.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const l=r.forwardRef(i)},64725:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(53986),r=s(9950);const n=["title","titleId"];function i(e,t){let{title:s,titleId:i}=e,l=(0,a.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const l=r.forwardRef(i)},90045:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(53986),r=s(9950);const n=["title","titleId"];function i(e,t){let{title:s,titleId:i}=e,l=(0,a.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":i},l),s?r.createElement("title",{id:i},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const l=r.forwardRef(i)}}]);