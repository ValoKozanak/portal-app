"use strict";(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[60],{7449:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(53986),r=a(65043);const n=["title","titleId"];function l(e,s){let{title:a,titleId:l}=e,i=(0,t.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},i),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const i=r.forwardRef(l)},18662:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(53986),r=a(65043);const n=["title","titleId"];function l(e,s){let{title:a,titleId:l}=e,i=(0,t.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},i),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const i=r.forwardRef(l)},25060:(e,s,a)=>{a.r(s),a.d(s,{default:()=>E});var t=a(22555),r=a(65043),n=a(85442),l=a(25590),i=a(18662),o=a(7449),d=a(14129),c=a(38682),m=a(89850),x=a(62811),u=a(26238),p=a(79248),h=a(53986),y=a(77591),f=a(39304),g=a(70579);const b=["confirmPassword"],v=e=>{let{isOpen:s,onClose:a,onAddUser:n}=e;const[l,i]=(0,r.useState)({name:"",email:"",password:"",confirmPassword:"",role:"user",status:"active",phone:"",companyId:""}),[o,d]=(0,r.useState)([]),[c,m]=(0,r.useState)(!1),[x,u]=(0,r.useState)({});(0,r.useEffect)(()=>{s&&(async()=>{try{const e=await f.apiService.getAllCompanies();d(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed firiem:",e)}})()},[s]);const p=e=>{const{name:s,value:a}=e.target;i(e=>(0,t.A)((0,t.A)({},e),{},{[s]:a})),x[s]&&u(e=>(0,t.A)((0,t.A)({},e),{},{[s]:""}))},v=()=>{i({name:"",email:"",password:"",confirmPassword:"",role:"user",status:"active",phone:"",companyId:""}),u({}),a()};return s?(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center p-6 border-b",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Prida\u0165 nov\xe9ho pou\u017e\xedvate\u013ea"}),(0,g.jsx)("button",{onClick:v,className:"text-gray-400 hover:text-gray-600",children:(0,g.jsx)(y.A,{className:"h-6 w-6"})})]}),(0,g.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),(()=>{const e={};return l.name.trim()?l.name.trim().length<2&&(e.name="Meno mus\xed ma\u0165 aspo\u0148 2 znaky"):e.name="Meno je povinn\xe9",l.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(l.email)||(e.email="Neplatn\xfd form\xe1t emailu"):e.email="Email je povinn\xfd",l.password?l.password.length<6&&(e.password="Heslo mus\xed ma\u0165 aspo\u0148 6 znakov"):e.password="Heslo je povinn\xe9",l.password!==l.confirmPassword&&(e.confirmPassword="Hesl\xe1 sa nezhoduj\xfa"),l.phone&&!/^\+?[\d\s\-()]+$/.test(l.phone)&&(e.phone="Neplatn\xfd form\xe1t telef\xf3nu"),"employee"!==l.role||l.companyId||(e.companyId="Firma je povinn\xe1 pre zamestnancov"),u(e),0===Object.keys(e).length})()&&(m(!0),setTimeout(()=>{const{confirmPassword:e}=l,s=(0,h.A)(l,b);n(s),i({name:"",email:"",password:"",confirmPassword:"",role:"user",status:"active",phone:"",companyId:""}),u({}),m(!1),a()},1e3))},className:"p-6",children:[(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meno a priezvisko *"}),(0,g.jsx)("input",{type:"text",id:"name",name:"name",value:l.name,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ".concat(x.name?"border-red-300":"border-gray-300"),placeholder:"Zadajte meno a priezvisko"}),x.name&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.name})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,g.jsx)("input",{type:"email",id:"email",name:"email",value:l.email,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ".concat(x.email?"border-red-300":"border-gray-300"),placeholder:"pouzivatel@email.sk"}),x.email&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.email})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Heslo *"}),(0,g.jsx)("input",{type:"password",id:"password",name:"password",value:l.password,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ".concat(x.password?"border-red-300":"border-gray-300"),placeholder:"Minim\xe1lne 6 znakov"}),x.password&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.password})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Potvr\u010fte heslo *"}),(0,g.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:l.confirmPassword,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ".concat(x.confirmPassword?"border-red-300":"border-gray-300"),placeholder:"Zopakujte heslo"}),x.confirmPassword&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.confirmPassword})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Telef\xf3n"}),(0,g.jsx)("input",{type:"tel",id:"phone",name:"phone",value:l.phone,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ".concat(x.phone?"border-red-300":"border-gray-300"),placeholder:"+421 901 234 567"}),x.phone&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.phone})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rola"}),(0,g.jsxs)("select",{id:"role",name:"role",value:l.role,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,g.jsx)("option",{value:"user",children:"Pou\u017e\xedvate\u013e"}),(0,g.jsx)("option",{value:"accountant",children:"\xda\u010dtovn\xedk (Moder\xe1tor)"}),(0,g.jsx)("option",{value:"employee",children:"Zamestnanec"}),(0,g.jsx)("option",{value:"moderator",children:"Moder\xe1tor"}),(0,g.jsx)("option",{value:"admin",children:"Administr\xe1tor"})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,g.jsxs)("select",{id:"status",name:"status",value:l.status,onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[(0,g.jsx)("option",{value:"active",children:"Akt\xedvny"}),(0,g.jsx)("option",{value:"inactive",children:"Neakt\xedvny"})]})]}),"employee"===l.role&&(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"companyId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Firma *"}),(0,g.jsxs)("select",{id:"companyId",name:"companyId",value:l.companyId,onChange:p,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ".concat(x.companyId?"border-red-300":"border-gray-300"),children:[(0,g.jsx)("option",{value:"",children:"Vyberte firmu"}),o.map(e=>(0,g.jsx)("option",{value:e.id,children:e.name},e.id))]}),x.companyId&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:x.companyId})]})]}),(0,g.jsxs)("div",{className:"mt-6 flex space-x-3",children:[(0,g.jsx)("button",{type:"button",onClick:v,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Zru\u0161i\u0165"}),(0,g.jsx)("button",{type:"submit",disabled:c,className:"flex-1 bg-primary-600 text-white py-2 px-4 rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Prid\xe1vam...":"Prida\u0165 pou\u017e\xedvate\u013ea"})]})]})]})}):null};var j=a(38153);const w=["title","titleId"];function N(e,s){let{title:a,titleId:t}=e,n=(0,h.A)(e,w);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":t},n),a?r.createElement("title",{id:t},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const k=r.forwardRef(N),A=e=>{let{isOpen:s,onClose:a,onSave:n,user:l}=e;const[i,o]=(0,r.useState)({name:"",email:"",role:"user",status:"active",phone:""}),[x,u]=(0,r.useState)({newPassword:"",confirmPassword:""}),[p,h]=(0,r.useState)(!1),[b,v]=(0,r.useState)({}),[w,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&l&&(o({name:l.name,email:l.email,role:l.role,status:l.status,phone:l.phone||""}),u({newPassword:"",confirmPassword:""}),h(!1),v({}))},[s,l]);const A=e=>{const{name:s,value:a}=e.target;o(e=>(0,t.A)((0,t.A)({},e),{},{[s]:a})),b[s]&&v(e=>(0,t.A)((0,t.A)({},e),{},{[s]:""}))};return s&&l?(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,g.jsxs)("div",{className:"sticky top-0 bg-white flex items-center justify-between p-6 border-b border-gray-200 z-10",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("div",{className:"h-8 w-8 bg-primary-100 rounded-full flex items-center justify-center",children:(0,g.jsx)(d.A,{className:"h-5 w-5 text-primary-600"})}),(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Upravi\u0165 pou\u017e\xedvate\u013ea"})]}),(0,g.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,g.jsx)(y.A,{className:"h-6 w-6"})})]}),(0,g.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),l&&(()=>{const e={};return i.name.trim()||(e.name="Meno je povinn\xe9"),i.email.trim()?/\S+@\S+\.\S+/.test(i.email)||(e.email="Neplatn\xfd form\xe1t emailu"):e.email="Email je povinn\xfd",i.role||(e.role="Rola je povinn\xe1"),i.status||(e.status="Status je povinn\xfd"),i.phone&&!/^\+?[\d\s\-()]+$/.test(i.phone)&&(e.phone="Neplatn\xfd form\xe1t telef\xf3nu"),p&&(x.newPassword?x.newPassword.length<6&&(e.newPassword="Heslo mus\xed ma\u0165 aspo\u0148 6 znakov"):e.newPassword="Nov\xe9 heslo je povinn\xe9",x.newPassword!==x.confirmPassword&&(e.confirmPassword="Hesl\xe1 sa nezhoduj\xfa")),v(e),0===Object.keys(e).length})()){N(!0);try{await n(l.id,i),p&&x.newPassword&&await f.apiService.changeUserPassword(l.id,x.newPassword),a()}catch(s){console.error("Chyba pri ulo\u017een\xed pou\u017e\xedvate\u013ea:",s)}finally{N(!1)}}},className:"p-6 space-y-6",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Meno a priezvisko *"}),(0,g.jsx)("input",{type:"text",id:"name",name:"name",value:i.name,onChange:A,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(b.name?"border-red-300":"border-gray-300"),placeholder:"Zadajte meno a priezvisko"}),b.name&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.name})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("input",{type:"email",id:"email",name:"email",value:i.email,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(b.email?"border-red-300":"border-gray-300"),placeholder:"pouzivatel@email.sk"}),(0,g.jsx)(c.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),b.email&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.email})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-2",children:"Rola *"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsxs)("select",{id:"role",name:"role",value:i.role,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(b.role?"border-red-300":"border-gray-300"),children:[(0,g.jsx)("option",{value:"",children:"Vyberte rolu"}),(0,g.jsx)("option",{value:"user",children:"Pou\u017e\xedvate\u013e"}),(0,g.jsx)("option",{value:"accountant",children:"\xda\u010dtovn\xedk (Moder\xe1tor)"}),(0,g.jsx)("option",{value:"employee",children:"Zamestnanec"}),(0,g.jsx)("option",{value:"admin",children:"Administr\xe1tor"})]}),(0,g.jsx)(j.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),b.role&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.role})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Telef\xf3n"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("input",{type:"tel",id:"phone",name:"phone",value:i.phone,onChange:A,className:"w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(b.phone?"border-red-300":"border-gray-300"),placeholder:"+421 901 234 567"}),(0,g.jsx)(m.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),b.phone&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.phone})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),(0,g.jsxs)("select",{id:"status",name:"status",value:i.status,onChange:A,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(b.status?"border-red-300":"border-gray-300"),children:[(0,g.jsx)("option",{value:"",children:"Vyberte status"}),(0,g.jsx)("option",{value:"active",children:"Akt\xedvny"}),(0,g.jsx)("option",{value:"inactive",children:"Neakt\xedvny"}),(0,g.jsx)("option",{value:"suspended",children:"Pozastaven\xfd"})]}),b.status&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.status})]}),(0,g.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Zmena hesla"}),(0,g.jsx)("button",{type:"button",onClick:()=>h(!p),className:"text-sm text-primary-600 hover:text-primary-700",children:p?"Skry\u0165":"Zmeni\u0165 heslo"})]}),p&&(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Nov\xe9 heslo *"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("input",{type:"password",id:"newPassword",name:"newPassword",value:x.newPassword,onChange:e=>u(s=>(0,t.A)((0,t.A)({},s),{},{newPassword:e.target.value})),className:"w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(b.newPassword?"border-red-300":"border-gray-300"),placeholder:"Minim\xe1lne 6 znakov"}),(0,g.jsx)(k,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),b.newPassword&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.newPassword})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:"Potvr\u010fte nov\xe9 heslo *"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:x.confirmPassword,onChange:e=>u(s=>(0,t.A)((0,t.A)({},s),{},{confirmPassword:e.target.value})),className:"w-full pl-10 pr-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ".concat(b.confirmPassword?"border-red-300":"border-gray-300"),placeholder:"Zopakujte nov\xe9 heslo"}),(0,g.jsx)(k,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),b.confirmPassword&&(0,g.jsx)("p",{className:"mt-1 text-sm text-red-600",children:b.confirmPassword})]})]})]}),(0,g.jsxs)("div",{className:"bg-gray-50 rounded-md p-4",children:[(0,g.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-2",children:"Inform\xe1cie o pou\u017e\xedvate\u013eovi"}),(0,g.jsxs)("div",{className:"text-sm text-gray-600 space-y-1",children:[(0,g.jsxs)("p",{children:[(0,g.jsx)("span",{className:"font-medium",children:"ID:"})," ",l.id]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("span",{className:"font-medium",children:"Aktu\xe1lna rola:"})," ",l.role]}),(0,g.jsxs)("p",{children:[(0,g.jsx)("span",{className:"font-medium",children:"Aktu\xe1lny status:"})," ",l.status]})]})]}),(0,g.jsxs)("div",{className:"sticky bottom-0 bg-white flex justify-end space-x-3 pt-6 border-t border-gray-200 z-10",children:[(0,g.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Zru\u0161i\u0165"}),(0,g.jsx)("button",{type:"submit",disabled:w,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:w?"Uklad\xe1m...":"Ulo\u017ei\u0165 zmeny"})]})]})]})}):null};var C=a(64014),P=a(29422);const S=e=>{let{isOpen:s,onClose:a,onAssign:t,companies:n,employee:l}=e;const[i,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&(o(null),c(""))},[s]);const p=n.filter(e=>e.name.toLowerCase().includes(d.toLowerCase())||e.ico.includes(d)||e.owner_email.toLowerCase().includes(d.toLowerCase()));return s&&l?(0,g.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto mx-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,g.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Priradi\u0165 zamestnanca k firme"}),(0,g.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,g.jsx)(y.A,{className:"h-6 w-6"})})]}),(0,g.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),i&&l){x(!0);try{await t(l.id,i),a()}catch(s){console.error("Chyba pri priraden\xed zamestnanca k firme:",s)}finally{x(!1)}}},className:"p-6 space-y-6",children:[(0,g.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Zamestnanec:"}),(0,g.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,g.jsx)("p",{children:(0,g.jsx)("strong",{children:l.name})}),(0,g.jsxs)("p",{children:["Email: ",l.email]}),(0,g.jsxs)("p",{children:["Role: ",l.role]})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vyberte firmu na priradenie *"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("input",{type:"text",placeholder:"H\u013eada\u0165 firmy...",value:d,onChange:e=>c(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,g.jsx)(u.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),(0,g.jsx)("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-md",children:p.length>0?(0,g.jsx)("div",{className:"divide-y divide-gray-200",children:p.map(e=>(0,g.jsx)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors ".concat(i===e.id?"bg-primary-50 border-l-4 border-primary-500":""),onClick:()=>o(e.id),children:(0,g.jsxs)("div",{className:"flex items-center justify-between",children:[(0,g.jsx)("div",{className:"flex-1",children:(0,g.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,g.jsx)("input",{type:"radio",name:"selectedCompany",value:e.id,checked:i===e.id,onChange:()=>o(e.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,g.jsxs)("p",{className:"text-sm text-gray-600",children:["I\u010cO: ",e.ico," | OR: ",e.business_registry||"N/A"]}),(0,g.jsxs)("p",{className:"text-sm text-gray-600",children:["Vlastn\xedk: ",e.owner_email]}),(0,g.jsxs)("p",{className:"text-sm text-gray-600",children:["Adresa: ",e.address]})]})]})}),i===e.id&&(0,g.jsx)(P.A,{className:"h-5 w-5 text-primary-600"})]})},e.id))}):(0,g.jsxs)("div",{className:"p-8 text-center",children:[(0,g.jsx)(u.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,g.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:d?"\u017diadne firmy nen\xe1jden\xe9":"\u017diadne firmy na port\xe1li"}),(0,g.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:d?"Sk\xfaste zmeni\u0165 vyh\u013ead\xe1vac\xed v\xfdraz":"Na port\xe1li nie s\xfa \u017eiadne firmy na priradenie"})]})}),i&&(0,g.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:[(0,g.jsx)("h4",{className:"text-sm font-medium text-green-900 mb-2",children:"Vybran\xe1 firma:"}),(()=>{const e=n.find(e=>e.id===i);return e?(0,g.jsxs)("div",{className:"text-sm text-green-800",children:[(0,g.jsx)("p",{children:(0,g.jsx)("strong",{children:e.name})}),(0,g.jsxs)("p",{children:["I\u010cO: ",e.ico," | OR: ",e.business_registry||"N/A"]}),(0,g.jsxs)("p",{children:["Vlastn\xedk: ",e.owner_email]}),(0,g.jsxs)("p",{children:["Adresa: ",e.address]})]}):null})()]}),(0,g.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,g.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Zru\u0161i\u0165"}),(0,g.jsx)("button",{type:"submit",disabled:!i||m,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Prira\u010fujem...":"Priradi\u0165 zamestnanca k firme"})]})]})]})}):null},z=e=>{const s=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),t=String(e.getDate()).padStart(2,"0");return"".concat(s,"-").concat(a,"-").concat(t)},E=e=>{let{onBack:s}=e;const[h,y]=(0,r.useState)([]),[b,j]=(0,r.useState)(!0),[w,N]=(0,r.useState)(""),[k,P]=(0,r.useState)(!1),[E,L]=(0,r.useState)(!1),[I,_]=(0,r.useState)(!1),[Z,O]=(0,r.useState)(!1),[M,R]=(0,r.useState)(null),[F,H]=(0,r.useState)(null),[V,U]=(0,r.useState)(null),[D,B]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{try{j(!0);const[e,s]=await Promise.all([f.apiService.getAllUsers(),f.apiService.getAllCompanies()]),a=e.map(e=>(0,t.A)((0,t.A)({},e),{},{lastLogin:"Nikdy"}));y(a),B(s)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t:",e)}finally{j(!1)}})()},[]);const T=h.filter(e=>e.name.toLowerCase().includes(w.toLowerCase())||e.email.toLowerCase().includes(w.toLowerCase())||e.role.toLowerCase().includes(w.toLowerCase()));return(0,g.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,g.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,g.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,g.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,g.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,g.jsxs)("button",{onClick:s,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,g.jsx)(n.A,{className:"h-5 w-5 mr-2"}),"Sp\xe4\u0165 do Dashboardu"]}),(0,g.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)(l.A,{className:"h-8 w-8 text-blue-500 mr-3"}),(0,g.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Spr\xe1va pou\u017e\xedvate\u013eov"})]})]}),(0,g.jsxs)("button",{onClick:()=>P(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center transition-colors",children:[(0,g.jsx)(i.A,{className:"h-5 w-5 mr-2"}),"Prida\u0165 pou\u017e\xedvate\u013ea"]})]})})}),(0,g.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,g.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,g.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,g.jsxs)("div",{className:"flex justify-between items-center",children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Zoznam pou\u017e\xedvate\u013eov"}),(0,g.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Celkovo ",h.length," pou\u017e\xedvate\u013eov \u2022 ",h.filter(e=>"active"===e.status).length," akt\xedvnych"]})]}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,g.jsx)(o.A,{className:"h-5 w-5 text-gray-400"})}),(0,g.jsx)("input",{type:"text",placeholder:"Vyh\u013eada\u0165 pou\u017e\xedvate\u013ea...",value:w,onChange:e=>N(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]})]})}),(0,g.jsx)("div",{className:"p-6",children:b?(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,g.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam pou\u017e\xedvate\u013eov..."})]}):T.length>0?(0,g.jsx)("div",{className:"overflow-x-auto",children:(0,g.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,g.jsx)("thead",{className:"bg-gray-50",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Pou\u017e\xedvate\u013e"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,g.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Posledn\xe9 prihl\xe1senie"}),(0,g.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Akcie"})]})}),(0,g.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(e=>{return(0,g.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,g.jsxs)("div",{className:"flex items-center",children:[(0,g.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,g.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center",children:(0,g.jsx)(d.A,{className:"h-6 w-6 text-blue-600"})})}),(0,g.jsxs)("div",{className:"ml-4",children:[(0,g.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,g.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,g.jsx)(c.A,{className:"h-4 w-4 mr-1"}),e.email]}),e.phone&&(0,g.jsxs)("div",{className:"text-sm text-gray-500 flex items-center",children:[(0,g.jsx)(m.A,{className:"h-4 w-4 mr-1"}),e.phone]})]})]})}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(a=e.role,(0,g.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({admin:"bg-red-100 text-red-800",accountant:"bg-blue-100 text-blue-800",employee:"bg-purple-100 text-purple-800",user:"bg-green-100 text-green-800"}[a]||"bg-gray-100 text-gray-800"),children:{admin:"Admin",accountant:"\xda\u010dtovn\xedk",employee:"Zamestnanec",user:"Pou\u017e\xedvate\u013e"}[a]||a}))}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(s=e.status,(0,g.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"}[s]),children:{active:"Akt\xedvny",inactive:"Neakt\xedvny",pending:"\u010cakaj\xfaci"}[s]}))}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.lastLogin||"Nikdy"}),(0,g.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,g.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[(0,g.jsxs)("button",{onClick:()=>(e=>{R(e),L(!0)})(e),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[(0,g.jsx)(x.A,{className:"h-4 w-4 mr-1"}),"Upravi\u0165"]}),"accountant"===e.role&&(0,g.jsxs)("button",{onClick:()=>(e=>{H(e),_(!0)})(e),className:"text-green-600 hover:text-green-900 flex items-center",children:[(0,g.jsx)(l.A,{className:"h-4 w-4 mr-1"}),"Priradi\u0165 firmy"]}),"employee"===e.role&&(0,g.jsxs)("button",{onClick:()=>(e=>{U(e),O(!0)})(e),className:"text-purple-600 hover:text-purple-900 flex items-center",children:[(0,g.jsx)(u.A,{className:"h-4 w-4 mr-1"}),"Priradi\u0165 firmu"]}),(0,g.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Naozaj chcete vymaza\u0165 tohto pou\u017e\xedvate\u013ea?"))try{await f.apiService.deleteUser(e),y(s=>s.filter(s=>s.id!==e))}catch(s){console.error("Chyba pri mazan\xed pou\u017e\xedvate\u013ea:",s.message),alert("Chyba pri mazan\xed pou\u017e\xedvate\u013ea: ".concat(s.message))}})(e.id),className:"text-red-600 hover:text-red-900 flex items-center",children:[(0,g.jsx)(p.A,{className:"h-4 w-4 mr-1"}),"Vymaza\u0165"]})]})})]},e.id);var s,a})})]})}):(0,g.jsxs)("div",{className:"text-center py-12",children:[(0,g.jsx)(l.A,{className:"mx-auto h-16 w-16 text-gray-400"}),(0,g.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:w?"\u017diadni pou\u017e\xedvatelia nen\xe1jden\xed":"\u017diadni pou\u017e\xedvatelia"}),(0,g.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:w?"Sk\xfaste zmeni\u0165 vyh\u013ead\xe1vac\xed v\xfdraz.":"Za\u010dnite prid\xe1van\xedm prv\xe9ho pou\u017e\xedvate\u013ea."}),!w&&(0,g.jsxs)("button",{onClick:()=>P(!0),className:"mt-4 bg-blue-600 text-white px-6 py-3 rounded-md hover:bg-blue-700 flex items-center mx-auto",children:[(0,g.jsx)(i.A,{className:"h-5 w-5 mr-2"}),"Prida\u0165 prv\xe9ho pou\u017e\xedvate\u013ea"]})]})})]})}),(0,g.jsx)(v,{isOpen:k,onClose:()=>P(!1),onAddUser:async e=>{try{const t={id:(await f.apiService.createUser(e)).userId,name:e.name,email:e.email,role:e.role,status:e.status,phone:e.phone||"",lastLogin:"Nikdy"};if(y(e=>[...e,t]),"employee"===e.role&&e.companyId)try{const s=(await a.e(858).then(a.bind(a,28858))).hrService,t={company_id:parseInt(e.companyId),employee_id:"EMP".concat(Date.now()),first_name:e.name.split(" ")[0]||e.name,last_name:e.name.split(" ").slice(1).join(" ")||"",email:e.email,phone:e.phone||"",position:"Zamestnanec",department:"IT",hire_date:z(new Date),salary:2500,employment_type:"full_time",status:"active",manager_id:void 0};await s.addEmployee(t),console.log("\u2705 Zamestnanec \xfaspe\u0161ne pridan\xfd do HR syst\xe9mu")}catch(s){console.error("Chyba pri prid\xe1van\xed zamestnanca do HR syst\xe9mu:",s.message)}P(!1)}catch(t){console.error("Chyba pri vytv\xe1ran\xed pou\u017e\xedvate\u013ea:",t.message),alert("Chyba pri vytv\xe1ran\xed pou\u017e\xedvate\u013ea: ".concat(t.message))}}}),(0,g.jsx)(A,{isOpen:E,onClose:()=>{L(!1),R(null)},onSave:async(e,s)=>{try{await f.apiService.updateUser(e,s),y(a=>a.map(a=>a.id===e?(0,t.A)((0,t.A)({},a),s):a)),L(!1),R(null)}catch(a){console.error("Chyba pri aktualiz\xe1cii pou\u017e\xedvate\u013ea:",a.message),alert("Chyba pri aktualiz\xe1cii pou\u017e\xedvate\u013ea: ".concat(a.message))}},user:M}),(0,g.jsx)(C.A,{isOpen:I,onClose:()=>{_(!1),H(null)},companies:[],accountants:[],onAssign:()=>{_(!1),H(null)}}),(0,g.jsx)(S,{isOpen:Z,onClose:()=>{O(!1),U(null)},companies:D,employee:V,onAssign:async(e,s)=>{try{const r=(await a.e(858).then(a.bind(a,28858))).hrService,n=h.find(s=>s.id===e);if(!n)throw new Error("Zamestnanec nen\xe1jden\xfd");try{const e=await r.findEmployeeByEmail(n.email);await r.updateEmployeeCompany(e.id,s),console.log("\u2705 Zamestnanec \xfaspe\u0161ne presunut\xfd do novej firmy"),alert("Zamestnanec bol \xfaspe\u0161ne presunut\xfd do novej firmy!")}catch(t){if(!t.message.includes("Zamestnanec nen\xe1jden\xfd")&&!t.message.includes("404"))throw t;{const e={company_id:s,employee_id:"EMP".concat(Date.now()),first_name:n.name.split(" ")[0]||n.name,last_name:n.name.split(" ").slice(1).join(" ")||"",email:n.email,phone:n.phone||"",position:"Zamestnanec",department:"IT",hire_date:z(new Date),salary:2500,employment_type:"full_time",status:"active",manager_id:void 0};await r.addEmployee(e),console.log("\u2705 Zamestnanec \xfaspe\u0161ne vytvoren\xfd a priraden\xfd k firme"),alert("Zamestnanec bol \xfaspe\u0161ne vytvoren\xfd a priraden\xfd k firme!")}}}catch(r){console.error("Chyba pri priraden\xed zamestnanca k firme:",r.message),alert("Chyba pri priraden\xed zamestnanca k firme: ".concat(r.message))}}})]})}},29422:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(53986),r=a(65043);const n=["title","titleId"];function l(e,s){let{title:a,titleId:l}=e,i=(0,t.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},i),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const i=r.forwardRef(l)},62811:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(53986),r=a(65043);const n=["title","titleId"];function l(e,s){let{title:a,titleId:l}=e,i=(0,t.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},i),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const i=r.forwardRef(l)},64014:(e,s,a)=>{a.d(s,{A:()=>o});var t=a(65043),r=a(26238),n=a(29422),l=a(77591),i=a(70579);const o=e=>{let{isOpen:s,onClose:a,onAssign:o,companies:d,accountants:c}=e;const[m,x]=(0,t.useState)(null),[u,p]=(0,t.useState)([]),[h,y]=(0,t.useState)(""),[f,g]=(0,t.useState)(!1);(0,t.useEffect)(()=>{s&&(x(null),p([]),y(""))},[s]);const b=d.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())||e.ico.includes(h)||e.owner_email.toLowerCase().includes(h.toLowerCase()));return s?(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto mx-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Prida\u0165 \xfa\u010dtovn\xedkov k firme"}),(0,i.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600",children:(0,i.jsx)(l.A,{className:"h-6 w-6"})})]}),(0,i.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),m&&0!==u.length){g(!0);try{await o(m,u),a()}catch(s){console.error("Chyba pri priraden\xed firmy:",s)}finally{g(!1)}}},className:"p-6 space-y-6",children:[(0,i.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:(0,i.jsxs)("p",{className:"text-sm text-blue-800",children:["\ud83d\udca1 ",(0,i.jsx)("strong",{children:"Many-to-Many vz\u0165ah:"})," \xda\u010dtovn\xedk m\xf4\u017ee ma\u0165 viacero firiem a firma m\xf4\u017ee ma\u0165 viacero \xfa\u010dtovn\xedkov"]})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vyberte \xfa\u010dtovn\xedkov *"}),(0,i.jsx)("div",{className:"max-h-48 overflow-y-auto border border-gray-300 rounded-md p-2",children:c.map(e=>(0,i.jsxs)("label",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[(0,i.jsx)("input",{type:"checkbox",value:e.email,checked:u.includes(e.email),onChange:s=>{s.target.checked?p(s=>[...s,e.email]):p(s=>s.filter(s=>s!==e.email))},className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,i.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]})]},e.id))}),u.length>0&&(0,i.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Vybran\xed \xfa\u010dtovn\xedci: ",u.length]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vyberte firmu na priradenie"}),(0,i.jsxs)("div",{className:"relative",children:[(0,i.jsx)("input",{type:"text",placeholder:"H\u013eada\u0165 firmy...",value:h,onChange:e=>y(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500"}),(0,i.jsx)(r.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})]}),(0,i.jsx)("div",{className:"max-h-96 overflow-y-auto border border-gray-200 rounded-md",children:b.length>0?(0,i.jsx)("div",{className:"divide-y divide-gray-200",children:b.map(e=>(0,i.jsx)("div",{className:"p-4 cursor-pointer hover:bg-gray-50 transition-colors ".concat(m===e.id?"bg-primary-50 border-l-4 border-primary-500":""),onClick:()=>x(e.id),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("div",{className:"flex-1",children:(0,i.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,i.jsx)("input",{type:"radio",name:"selectedCompany",value:e.id,checked:m===e.id,onChange:()=>x(e.id),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["I\u010cO: ",e.ico," | OR: ",e.business_registry||"N/A"]}),(0,i.jsxs)("p",{className:"text-sm text-gray-600",children:["Vlastn\xedk: ",e.owner_email]}),e.assignedToAccountants&&e.assignedToAccountants.length>0&&(0,i.jsxs)("div",{className:"mt-2",children:[(0,i.jsxs)("p",{className:"text-sm text-green-600 font-medium",children:["U\u017e priraden\xed \xfa\u010dtovn\xedci: ",e.assignedToAccountants.length]}),(0,i.jsx)("p",{className:"text-xs text-gray-500",children:e.assignedToAccountants.join(", ")})]})]})]})}),m===e.id&&(0,i.jsx)(n.A,{className:"h-5 w-5 text-primary-600"})]})},e.id))}):(0,i.jsxs)("div",{className:"p-8 text-center",children:[(0,i.jsx)(r.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,i.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:h?"\u017diadne firmy nen\xe1jden\xe9":"\u017diadne firmy na port\xe1li"}),(0,i.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:h?"Sk\xfaste zmeni\u0165 vyh\u013ead\xe1vac\xed v\xfdraz":"Na port\xe1li nie s\xfa \u017eiadne firmy na priradenie"})]})}),m&&(0,i.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[(0,i.jsx)("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Vybran\xe1 firma:"}),(()=>{const e=d.find(e=>e.id===m);return e?(0,i.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,i.jsx)("p",{children:(0,i.jsx)("strong",{children:e.name})}),(0,i.jsxs)("p",{children:["I\u010cO: ",e.ico," | OR: ",e.business_registry||"N/A"]}),(0,i.jsxs)("p",{children:["Vlastn\xedk: ",e.owner_email]})]}):null})()]}),(0,i.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,i.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500",children:"Zru\u0161i\u0165"}),(0,i.jsx)("button",{type:"submit",disabled:!m||0===u.length||f,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Prira\u010fujem...":"Prida\u0165 \xfa\u010dtovn\xedkov (".concat(u.length,")")})]})]})]})}):null}},79248:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(53986),r=a(65043);const n=["title","titleId"];function l(e,s){let{title:a,titleId:l}=e,i=(0,t.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},i),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const i=r.forwardRef(l)},85442:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(53986),r=a(65043);const n=["title","titleId"];function l(e,s){let{title:a,titleId:l}=e,i=(0,t.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},i),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const i=r.forwardRef(l)},89850:(e,s,a)=>{a.d(s,{A:()=>i});var t=a(53986),r=a(65043);const n=["title","titleId"];function l(e,s){let{title:a,titleId:l}=e,i=(0,t.A)(e,n);return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":l},i),a?r.createElement("title",{id:l},a):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const i=r.forwardRef(l)}}]);
//# sourceMappingURL=60.92820ad9.chunk.js.map