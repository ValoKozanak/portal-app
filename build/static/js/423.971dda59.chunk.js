"use strict";(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[423],{2460:(e,t,a)=>{a.d(t,{B:()=>n});var r=a(22555),s=a(50237);const n=new class{async getSettings(e){return await s.apiService.get("/accounting/settings/".concat(e))}async saveSettings(e,t){return await s.apiService.post("/accounting/settings/".concat(e),t)}async getPermissions(e,t){return await s.apiService.get("/accounting/permissions/".concat(e,"/").concat(t))}async savePermissions(e,t){return await s.apiService.post("/accounting/permissions/".concat(e),t)}async getAllPermissions(e){return await s.apiService.get("/accounting/permissions/".concat(e))}async getIssuedInvoices(e,t){const a=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,r]=e;void 0!==r&&a.append(t,r.toString())});return await s.apiService.get("/accounting/issued-invoices/".concat(e,"?").concat(a))}async createIssuedInvoice(e,t){return await s.apiService.post("/accounting/issued-invoices/".concat(e),t)}async getIssuedInvoiceById(e){return await s.apiService.get("/accounting/issued-invoices/detail/".concat(e))}async getReceivedInvoices(e,t){const a=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,r]=e;void 0!==r&&a.append(t,r.toString())});return await s.apiService.get("/accounting/received-invoices/".concat(e,"?").concat(a))}async getReceivedInvoiceById(e){return await s.apiService.get("/accounting/received-invoices/detail/".concat(e))}async getPudSummary(e){return await s.apiService.get("/accounting/pud-summary/".concat(e))}async getFinancialAnalysis(e,t,a){let r="/accounting/financial-analysis/".concat(e);const n=new URLSearchParams;t&&n.append("dateFrom",t),a&&n.append("dateTo",a),n.toString()&&(r+="?".concat(n.toString()));return await s.apiService.get(r)}async getStats(e,t){const a=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,r]=e;void 0!==r&&a.append(t,r.toString())});return await s.apiService.get("/accounting/stats/".concat(e,"?").concat(a))}formatCurrency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";return new Intl.NumberFormat("sk-SK",{style:"currency",currency:t}).format(e)}formatDate(e){return new Date(e).toLocaleDateString("sk-SK")}getStatusBadge(e){return{draft:{text:"Koncept",color:"bg-gray-100 text-gray-800"},sent:{text:"Odoslan\xe1",color:"bg-blue-100 text-blue-800"},paid:{text:"Zaplaten\xe1",color:"bg-green-100 text-green-800"},overdue:{text:"Po splatnosti",color:"bg-red-100 text-red-800"},cancelled:{text:"Zru\u0161en\xe1",color:"bg-yellow-100 text-yellow-800"},received:{text:"Prijat\xe1",color:"bg-gray-100 text-gray-800"},approved:{text:"Schv\xe1len\xe1",color:"bg-blue-100 text-blue-800"},disputed:{text:"Sporn\xe1",color:"bg-orange-100 text-orange-800"}}[e]||{text:e,color:"bg-gray-100 text-gray-800"}}getTypeBadge(e){return{income:{text:"Pr\xedjem",color:"bg-green-100 text-green-800"},expense:{text:"V\xfddavok",color:"bg-red-100 text-red-800"}}[e]||{text:e,color:"bg-gray-100 text-gray-800"}}async testPohodaConnection(e,t){return await s.apiService.post("/accounting/test-pohoda-connection",(0,r.A)({companyId:e},t))}async testPohodaInvoices(e,t){return await s.apiService.post("/accounting/test-pohoda-invoices",(0,r.A)({companyId:e},t))}async syncPohodaInvoices(e,t,a){return await s.apiService.post("/accounting/sync-pohoda-invoices/".concat(e),{dateFrom:t,dateTo:a})}async uploadPohodaXml(e,t){const a=new FormData;a.append("xmlFile",t);const r=await fetch("".concat("https://api.client-portal.sk","/api/accounting/upload-pohoda-xml/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:a});if(!r.ok)throw new Error("Chyba pri nahr\xe1van\xed XML s\xfaboru");return await r.json()}async exportPohodaXml(e,t,a){const r=await fetch("".concat("https://api.client-portal.sk","/api/accounting/export-pohoda-xml/").concat(e,"?dateFrom=").concat(t||"","&dateTo=").concat(a||""),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!r.ok)throw new Error("Chyba pri exporte XML s\xfaboru");return await r.blob()}async refreshInvoicesFromMdb(e){return{success:!0,message:"Fakt\xfary sa na\u010d\xedtavaj\xfa priamo z MDB. Obnovenie nie je potrebn\xe9.",importedCount:0,totalCount:0}}async refreshReceivedInvoicesFromMdb(e){return{success:!0,message:"Prijat\xe9 fakt\xfary sa na\u010d\xedtavaj\xfa priamo z MDB. Obnovenie nie je potrebn\xe9.",importedCount:0,totalCount:0}}async importInvoicesFromMdb(e){const t=await fetch("".concat("https://api.client-portal.sk","/api/accounting/import-invoices/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri importe fakt\xfar z MDB");return await t.json()}async deleteIssuedInvoice(e){return await s.apiService.delete("/accounting/issued-invoices/".concat(e))}async deleteReceivedInvoice(e){return await s.apiService.delete("/accounting/received-invoices/".concat(e))}async deleteBankTransaction(e){return await s.apiService.delete("/accounting/bank-transactions/".concat(e))}async deleteCashTransaction(e){return await s.apiService.delete("/accounting/cash-transactions/".concat(e))}async getDirectory(e){const t=await fetch("".concat("https://api.client-portal.sk","/api/accounting/directory/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri na\u010d\xedtan\xed adres\xe1ra");return await t.json()}async getVatReturns(e,t){const a=t||(new Date).getFullYear(),r=await fetch("".concat("https://api.client-portal.sk","/api/accounting/vat-returns/").concat(e,"?year=").concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!r.ok)throw new Error("Chyba pri na\u010d\xedtan\xed DPH podan\xed");return await r.json()}async getBankAccounts(e){console.log("\ud83c\udfe6 Vol\xe1m bankov\xfd endpoint pre companyId:",e);const t=await fetch("".concat("https://api.client-portal.sk","/api/accounting/bank-accounts/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(console.log("\ud83c\udfe6 Bankov\xfd endpoint response status:",t.status),!t.ok)throw new Error("Chyba pri na\u010d\xedtan\xed bankov\xfdch \xfa\u010dtov");const a=await t.json();return console.log("\ud83c\udfe6 Bankov\xfd endpoint response data:",a),a}async getCashAccounts(e){const t=await fetch("".concat("https://api.client-portal.sk","/api/accounting/cash-accounts/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri na\u010d\xedtan\xed poklad\u0148ov\xfdch \xfa\u010dtov");return await t.json()}async getBankTransactions(e,t){console.log("\ud83c\udfe6 Vol\xe1m bankov\xfd transak\u010dn\xfd endpoint pre companyId:",e,"accountNumber:",t);const a=await fetch("".concat("https://api.client-portal.sk","/api/accounting/bank-transactions/").concat(e,"/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(console.log("\ud83c\udfe6 Bankov\xfd transak\u010dn\xfd endpoint response status:",a.status),!a.ok)throw new Error("Chyba pri na\u010d\xedtan\xed bankov\xfdch transakci\xed");const r=await a.json();return console.log("\ud83c\udfe6 Bankov\xfd transak\u010dn\xfd endpoint response data:",r),r}async getCashTransactions(e,t){console.log("\ud83d\udcb0 Vol\xe1m poklad\u0148ov\xfd transak\u010dn\xfd endpoint pre companyId:",e,"accountNumber:",t);const a=await fetch("".concat("https://api.client-portal.sk","/api/accounting/cash-transactions/").concat(e,"/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(console.log("\ud83d\udcb0 Poklad\u0148ov\xfd transak\u010dn\xfd endpoint response status:",a.status),!a.ok)throw new Error("Chyba pri na\u010d\xedtan\xed poklad\u0148ov\xfdch transakci\xed");const r=await a.json();return console.log("\ud83d\udcb0 Poklad\u0148ov\xfd transak\u010dn\xfd endpoint response data:",r),r}}},40423:(e,t,a)=>{a.r(t),a.d(t,{default:()=>xe});var r=a(22555),s=a(9950),n=a(28429),i=a(41435),d=a(7342),o=a(78010),l=a(37619),c=a(77081),m=a(52941),x=a(57491),u=a(64112),h=a(27387),g=a(11818),p=a(12340),y=a(82777),b=a(50201),k=a(99632),v=a(21946),f=a(16467),j=a(81518),w=a(39818),_=a(33695),N=a(46536),z=a(51965),S=a(75520),C=a(4111),A=a(44414);const D=e=>{let{files:t,onFileUpload:a,onFileDelete:r,onFileDownload:n,onFilePreview:i,companyId:d,loading:o=!1,userRole:l="company",onEmptyTrash:c}=e;const[m,x]=(0,s.useState)(""),[u,h]=(0,s.useState)("all"),[g,p]=(0,s.useState)(!1),[D,P]=(0,s.useState)("grid"),[F,I]=(0,s.useState)(new Set),[T,E]=(0,s.useState)(new Set),[M,R]=(0,s.useState)(null),[O,L]=(0,s.useState)(!1),Z=[{id:"all",name:"V\u0161etky s\xfabory"},{id:"documents",name:"Dokumenty"},{id:"invoices",name:"Fakt\xfary"},{id:"contracts",name:"Zmluvy"},{id:"reports",name:"Spr\xe1vy"},{id:"images",name:"Obr\xe1zky"},{id:"archives",name:"Arch\xedvy"},{id:"other",name:"Ostatn\xe9"}],B=t.filter(e=>{if(!e||!e.original_name)return!1;const t=e.original_name.toLowerCase().includes(m.toLowerCase()),a="all"===u||(e.category||"other")===u;return t&&a}),V=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},U=t.reduce((e,t)=>e+(t.file_size||0),0),K=Z.reduce((e,a)=>("all"===a.id?e[a.id]=t.length:e[a.id]=t.filter(e=>e&&(e.category||"other")===a.id).length,e),{});return console.log("Files:",t.length),console.log("Filtered files:",B.length),console.log("Selected category:",u),console.log("Files by category:",K),t.length>0&&console.log("Files with categories:",t.map(e=>({name:e.original_name,category:e.category}))),console.log("FileManager rendering with files:",t.length),(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Spr\xe1va s\xfaborov"}),(0,A.jsxs)("p",{className:"text-sm text-gray-500",children:[t.length," s\xfaborov \u2022 ",V(U)," celkovo"]})]}),(0,A.jsxs)("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:["admin"===l&&c&&(0,A.jsxs)("button",{onClick:()=>{window.confirm("Naozaj chcete vypr\xe1zdni\u0165 k\xf4\u0161? T\xe1to akcia je nevratn\xe1.")&&c()},className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 flex items-center",children:[(0,A.jsx)(f.A,{className:"h-4 w-4 mr-2"}),"Vypr\xe1zdni\u0165 k\xf4\u0161"]}),(0,A.jsxs)("button",{onClick:()=>p(!0),className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 flex items-center",children:[(0,A.jsx)(j.A,{className:"h-5 w-5 mr-2"}),"Nahra\u0165 s\xfabory"]})]})]}),(0,A.jsx)("div",{className:"bg-white rounded-lg shadow-md p-4",children:(0,A.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4",children:[(0,A.jsxs)("div",{className:"flex-1 relative",children:[(0,A.jsx)(w.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,A.jsx)("input",{type:"text",placeholder:"H\u013eada\u0165 s\xfabory...",value:m,onChange:e=>x(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),(0,A.jsxs)("div",{className:"relative",children:[(0,A.jsx)(_.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"}),(0,A.jsx)("select",{value:u,onChange:e=>h(e.target.value),className:"pl-10 pr-8 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:Z.map(e=>(0,A.jsxs)("option",{value:e.id,children:[e.name," (",K[e.id]||0,")"]},e.id))})]}),(0,A.jsxs)("div",{className:"flex border border-gray-300 rounded-md",children:[(0,A.jsx)("button",{onClick:()=>P("grid"),className:"px-3 py-2 text-sm font-medium ".concat("grid"===D?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"Grid"}),(0,A.jsx)("button",{onClick:()=>P("list"),className:"px-3 py-2 text-sm font-medium ".concat("list"===D?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:"List"})]})]})}),(console.log("Rendering files section, filteredFiles.length:",B.length),0===B.length?(0,A.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[(0,A.jsx)(v.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,A.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"\u017diadne s\xfabory"}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:m||"all"!==u?"Nena\u0161li sa \u017eiadne s\xfabory s vybran\xfdmi filtrami.":"Zatia\u013e neboli nahran\xe9 \u017eiadne s\xfabory."}),!m&&"all"===u&&(0,A.jsx)("button",{onClick:()=>p(!0),className:"mt-4 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700",children:"Nahra\u0165 prv\xfd s\xfabor"})]}):(0,A.jsx)("div",{className:"grid"===D?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:B.map(e=>{const t=(e.file_type,"images"===(a=e.category||"other")?b.A:"archives"===a?k.A:"documents"===a?y.A:v.A);var a;const s=F.has(e.id.toString()),i=T.has(e.id.toString());return(0,A.jsx)("div",{className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow ".concat("list"===D?"p-4":"p-6"),children:(0,A.jsxs)("div",{className:"list"===D?"flex items-center space-x-4":"text-center",children:[(0,A.jsx)("div",{className:"".concat("list"===D?"flex-shrink-0":"mb-4"),children:(0,A.jsx)(t,{className:"".concat("list"===D?"h-8 w-8":"h-12 w-12"," text-primary-600")})}),(0,A.jsxs)("div",{className:"flex-1 min-w-0 ".concat("list"===D?"":"mb-4"),children:[(0,A.jsx)("h3",{className:"font-medium text-gray-900 truncate ".concat("list"===D?"text-sm":"text-lg"),children:e.original_name||"Nezn\xe1my s\xfabor"}),(0,A.jsxs)("p",{className:"text-sm text-gray-500",children:[V(e.file_size||0)," \u2022 ",(o=e.created_at||(new Date).toISOString(),new Date(o).toLocaleDateString("sk-SK",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))]}),(0,A.jsx)("p",{className:"text-xs text-blue-600 font-medium",children:(d=e.category||"other",{documents:"Dokumenty",invoices:"Fakt\xfary",contracts:"Zmluvy",reports:"Spr\xe1vy",images:"Obr\xe1zky",archives:"Arch\xedvy",other:"Ostatn\xe9"}[d]||d)})]}),(0,A.jsxs)("div",{className:"flex space-x-2 ".concat("list"===D?"flex-shrink-0":"justify-center"),children:[(0,A.jsx)("button",{onClick:()=>(e=>{R(e),L(!0)})(e),className:"text-primary-600 hover:text-primary-700",title:"N\xe1h\u013ead",children:(0,A.jsx)(N.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{onClick:()=>(async e=>{I(t=>new Set(t).add(e.id.toString()));try{n&&n(e)}catch(t){console.error("Chyba pri s\u0165ahovan\xed s\xfaboru:",t),alert("Nepodarilo sa stiahnu\u0165 s\xfabor")}finally{I(t=>{const a=new Set(t);return a.delete(e.id.toString()),a})}})(e),disabled:s,className:"text-blue-600 hover:text-blue-700 ".concat(s?"opacity-50 cursor-not-allowed":""),title:s?"S\u0165ahujem...":"Stiahnu\u0165",children:(0,A.jsx)(z.A,{className:"h-5 w-5"})}),(0,A.jsx)("button",{onClick:()=>(async e=>{const t=e.original_name||"Nezn\xe1my s\xfabor";if(window.confirm('Naozaj chcete vymaza\u0165 s\xfabor "'.concat(t,'"?'))){E(t=>new Set(t).add(e.id.toString()));try{r(e.id)}catch(a){console.error("Chyba pri mazan\xed s\xfaboru:",a),alert("Nepodarilo sa vymaza\u0165 s\xfabor")}finally{E(t=>{const a=new Set(t);return a.delete(e.id.toString()),a})}}})(e),disabled:i,className:"text-red-600 hover:text-red-700 ".concat(i?"opacity-50 cursor-not-allowed":""),title:i?"Ma\u017eem...":"Vymaza\u0165",children:(0,A.jsx)(f.A,{className:"h-5 w-5"})})]})]})},e.id);var d,o})})),g&&(0,A.jsx)(S.A,{isOpen:g,onClose:()=>p(!1),companyId:d,onFileUpload:e=>{a&&a(e),p(!1)},userRole:l}),(0,A.jsx)(C.A,{isOpen:O,onClose:()=>{L(!1),R(null)},file:M})]})};var P=a(20418),F=a(45930),I=a(85754),T=a(40390),E=a(2765),M=a(75516),R=a(36923),O=a(25452),L=a(19530),Z=a(95641),B=a(7609),V=a(15536),U=a(92605),K=a(50237);const H=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r)},q=e=>{let{isOpen:t,onClose:a,employee:n,companyId:i,onSuccess:d}=e;const[o,l]=(0,s.useState)({first_name:"",last_name:"",email:"",phone:"",password:""}),[c,m]=(0,s.useState)(!1),x=!!n;(0,s.useEffect)(()=>{t&&l(n?{first_name:n.first_name,last_name:n.last_name,email:n.email,phone:n.phone||"",password:""}:{first_name:"",last_name:"",email:"",phone:"",password:""})},[t,n]);const u=e=>{const{name:t,value:a}=e.target;l(e=>(0,r.A)((0,r.A)({},e),{},{[t]:a}))};return t?(0,A.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600",children:[(0,A.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:x?"Upravi\u0165 z\xe1kladn\xe9 \xfadaje zamestnanca":"Prida\u0165 nov\xe9ho zamestnanca a vytvori\u0165 \xfa\u010det"}),(0,A.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,A.jsx)(V.A,{className:"w-6 h-6"})})]}),(0,A.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(!0);try{if(x){const e={first_name:o.first_name,last_name:o.last_name,email:o.email,phone:o.phone||void 0};await U.hrService.updateEmployee(n.id,e)}else{const e={company_id:i,employee_id:"EMP".concat(Date.now()),first_name:o.first_name,last_name:o.last_name,email:o.email,phone:o.phone||void 0,position:"Zamestnanec",hire_date:H(new Date),employment_type:"full_time",status:"active"};if(await U.hrService.addEmployee(e),o.password)try{console.log("\ud83d\udd27 Vytv\xe1ram pou\u017e\xedvate\u013esk\xfd \xfa\u010det pre zamestnanca:",o.email);const e={email:o.email,password:o.password,name:"".concat(o.first_name," ").concat(o.last_name),role:"employee",status:"active",phone:o.phone||void 0};console.log("\ud83d\udce4 Odosielam d\xe1ta:",e),await K.apiService.createUser(e),console.log("\u2705 Pou\u017e\xedvate\u013esk\xfd \xfa\u010det vytvoren\xfd \xfaspe\u0161ne")}catch(t){console.error("\u274c Chyba pri vytv\xe1ran\xed pou\u017e\xedvate\u013esk\xe9ho \xfa\u010dtu:",t);const e=t instanceof Error?t.message:"Nezn\xe1ma chyba";alert("Chyba pri vytv\xe1ran\xed pou\u017e\xedvate\u013esk\xe9ho \xfa\u010dtu: "+e)}else console.log("\u26a0\ufe0f Heslo nie je zadan\xe9, pou\u017e\xedvate\u013esk\xfd \xfa\u010det sa nevytvor\xed")}d(),a()}catch(t){console.error("Chyba pri ukladan\xed zamestnanca:",t),alert("Chyba pri ukladan\xed zamestnanca")}finally{m(!1)}},className:"p-6 space-y-6",children:[(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Z\xe1kladn\xe9 \xfadaje zamestnanca"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Meno *"}),(0,A.jsx)("input",{type:"text",name:"first_name",value:o.first_name,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"J\xe1n"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Priezvisko *"}),(0,A.jsx)("input",{type:"text",name:"last_name",value:o.last_name,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"Nov\xe1k"})]})]}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,A.jsx)("input",{type:"email",name:"email",value:o.email,onChange:u,required:!0,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"jan.novak@firma.sk"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Telef\xf3n"}),(0,A.jsx)("input",{type:"tel",name:"phone",value:o.phone,onChange:u,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"+421 901 234 567"})]})]}),!x&&(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Heslo pre prihl\xe1senie *"}),(0,A.jsx)("input",{type:"password",name:"password",value:o.password,onChange:u,required:!x,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"Zadajte heslo pre zamestnanca"}),(0,A.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:'Zamestnanec sa bude m\xf4c\u0165 prihl\xe1si\u0165 s t\xfdmto emailom a heslom. Person\xe1lne \xfadaje a pracovn\xe9 pomery sa bud\xfa dop\u013a\u0148a\u0165 v sekci\xe1ch "Karty zamestnancov" a "Pracovn\xe9 pomery".'})]})]}),(0,A.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-dark-600",children:[(0,A.jsx)("button",{type:"button",onClick:a,className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-dark-700 rounded-md hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors",children:"Zru\u0161i\u0165"}),(0,A.jsx)("button",{type:"submit",disabled:c,className:"px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors disabled:opacity-50",children:c?"Uklad\xe1m...":x?"Upravi\u0165":"Prida\u0165"})]})]})]})}):null};var Y=a(10329),G=a(14185),W=a(82695);const J=e=>{let{employee:t,employeeChanges:a,onApproveChange:r}=e;const s=e=>{const r=a.filter(a=>a.employee_id===t.id&&a.field_name===e&&"pending"===a.status);if(r.length>0){const e=r.reduce((e,t)=>t.id>e.id?t:e);return{status:"pending",reason:e.reason,changeId:e.id,newValue:e.new_value}}const s=a.filter(a=>a.employee_id===t.id&&a.field_name===e&&"approved"===a.status);if(s.length>0){const e=s.reduce((e,t)=>t.id>e.id?t:e);return{status:"approved",reason:e.reason,changeId:e.id,newValue:e.new_value}}return null};return(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Z\xe1kladn\xe9 \xfadaje"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,A.jsx)(X,{label:"Priezvisko",value:t.last_name,employeeId:t.id,fieldName:"last_name",changeStatus:s("last_name"),onApproveChange:r}),(0,A.jsx)(X,{label:"Meno",value:t.first_name,employeeId:t.id,fieldName:"first_name",changeStatus:s("first_name"),onApproveChange:r}),(0,A.jsx)(X,{label:"Rodn\xe9 priezvisko",value:t.birth_name||"-",employeeId:t.id,fieldName:"birth_name",changeStatus:s("birth_name"),onApproveChange:r}),(0,A.jsx)(X,{label:"Titul pred",value:t.title_before||"-",employeeId:t.id,fieldName:"title_before",changeStatus:s("title_before"),onApproveChange:r}),(0,A.jsx)(X,{label:"Titul za",value:t.title_after||"-",employeeId:t.id,fieldName:"title_after",changeStatus:s("title_after"),onApproveChange:r}),(0,A.jsx)(X,{label:"Pohlavie",value:t.gender||"-",employeeId:t.id,fieldName:"gender",changeStatus:s("gender"),onApproveChange:r}),(0,A.jsx)(X,{label:"D\xe1tum narodenia",value:t.birth_date?new Date(t.birth_date).toLocaleDateString("sk-SK"):"-",employeeId:t.id,fieldName:"birth_date",changeStatus:s("birth_date"),onApproveChange:r}),(0,A.jsx)(X,{label:"Rodn\xe9 \u010d\xedslo",value:t.birth_number||"-",employeeId:t.id,fieldName:"birth_number",changeStatus:s("birth_number"),onApproveChange:r}),(0,A.jsx)(X,{label:"Miesto narodenia",value:t.birth_place||"-",employeeId:t.id,fieldName:"birth_place",changeStatus:s("birth_place"),onApproveChange:r}),(0,A.jsx)(X,{label:"N\xe1rodnos\u0165",value:t.nationality||"-",employeeId:t.id,fieldName:"nationality",changeStatus:s("nationality"),onApproveChange:r}),(0,A.jsx)(X,{label:"\u0160t\xe1t ob\u010dianstvo",value:t.citizenship||"-",employeeId:t.id,fieldName:"citizenship",changeStatus:s("citizenship"),onApproveChange:r}),(0,A.jsx)(X,{label:"Vzdelanie",value:t.education||"-",employeeId:t.id,fieldName:"education",changeStatus:s("education"),onApproveChange:r}),(0,A.jsx)(X,{label:"Rodinn\xfd stav",value:t.marital_status||"-",employeeId:t.id,fieldName:"marital_status",changeStatus:s("marital_status"),onApproveChange:r}),(0,A.jsx)(X,{label:"Spolo\u010dn\xedk",value:t.is_partner?"\xc1no":"Nie"}),(0,A.jsx)(X,{label:"\u0160tatut\xe1r",value:t.is_statutory?"\xc1no":"Nie"})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Adresa trval\xe9ho pobytu"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,A.jsx)(X,{label:"Ulica",value:t.permanent_street||"-",employeeId:t.id,fieldName:"permanent_street",changeStatus:s("permanent_street"),onApproveChange:r}),(0,A.jsx)(X,{label:"\u010c\xedslo popisn\xe9",value:t.permanent_number||"-",employeeId:t.id,fieldName:"permanent_number",changeStatus:s("permanent_number"),onApproveChange:r}),(0,A.jsx)(X,{label:"Obec",value:t.permanent_city||"-",employeeId:t.id,fieldName:"permanent_city",changeStatus:s("permanent_city"),onApproveChange:r}),(0,A.jsx)(X,{label:"PS\u010c",value:t.permanent_zip||"-",employeeId:t.id,fieldName:"permanent_zip",changeStatus:s("permanent_zip"),onApproveChange:r}),(0,A.jsx)(X,{label:"\u0160t\xe1t",value:t.permanent_country||"-",employeeId:t.id,fieldName:"permanent_country",changeStatus:s("permanent_country"),onApproveChange:r})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Kontaktn\xe1 adresa"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,A.jsx)(X,{label:"Ulica",value:t.contact_street||"-",employeeId:t.id,fieldName:"contact_street",changeStatus:s("contact_street"),onApproveChange:r}),(0,A.jsx)(X,{label:"\u010c\xedslo popisn\xe9",value:t.contact_number||"-",employeeId:t.id,fieldName:"contact_number",changeStatus:s("contact_number"),onApproveChange:r}),(0,A.jsx)(X,{label:"Obec",value:t.contact_city||"-",employeeId:t.id,fieldName:"contact_city",changeStatus:s("contact_city"),onApproveChange:r}),(0,A.jsx)(X,{label:"PS\u010c",value:t.contact_zip||"-",employeeId:t.id,fieldName:"contact_zip",changeStatus:s("contact_zip"),onApproveChange:r}),(0,A.jsx)(X,{label:"\u0160t\xe1t",value:t.contact_country||"-",employeeId:t.id,fieldName:"contact_country",changeStatus:s("contact_country"),onApproveChange:r}),(0,A.jsx)(X,{label:"Telef\xf3n",value:t.phone||"-",employeeId:t.id,fieldName:"phone",changeStatus:s("phone"),onApproveChange:r}),(0,A.jsx)(X,{label:"E-mail",value:t.email})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Cudzineck\xe9 \xfadaje"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,A.jsx)(X,{label:"Cudzinec",value:t.is_foreigner?"\xc1no":"Nie"}),(0,A.jsx)(X,{label:"\u0160t\xe1t (cudzinec)",value:t.foreigner_country||"-"}),(0,A.jsx)(X,{label:"\u010c\xedslo povolenia k pobytu",value:t.residence_permit_number||"-"}),(0,A.jsx)(X,{label:"\u010c\xedslo soc. poist. v SR",value:t.social_insurance_sr||"-"}),(0,A.jsx)(X,{label:"\u010c\xedslo soc. poist. v zahrani\u010d\xed",value:t.social_insurance_foreign||"-"}),(0,A.jsx)(X,{label:"\u010c\xedslo zdrav. poist. v SR",value:t.health_insurance_sr||"-"}),(0,A.jsx)(X,{label:"Cudzinec bez trv. pobytu v SR",value:t.foreigner_without_permanent_residence?"\xc1no":"Nie"}),(0,A.jsx)(X,{label:"Identifika\u010dn\xe9 \u010d\xedslo na da\u0148ov\xe9 \xfa\u010dely",value:t.tax_identification_number||"-"})]})]})]})},X=e=>{let{label:t,value:a,employeeId:r,fieldName:s,changeStatus:n,onApproveChange:i}=e;return(0,A.jsxs)("div",{className:"relative",children:[(0,A.jsx)("dt",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:t}),(0,A.jsx)("dd",{className:"mt-1 text-sm text-gray-900 dark:text-white pr-8",children:n&&"pending"===n.status?n.newValue:a}),n&&(0,A.jsxs)("div",{className:"absolute top-0 right-0",children:["pending"===n.status&&(0,A.jsx)("button",{onClick:()=>null===i||void 0===i?void 0:i(n.changeId,r,s,n.newValue),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",title:"\ud83d\udd04 \u010cakaj\xfaca zmena od zamestnanca\n\n\ud83d\udcdd D\xf4vod: ".concat(n.reason,"\n\ud83c\udd95 Nov\xe1 hodnota: ").concat(n.newValue,"\n\nKliknite pre schv\xe1lenie zmeny."),children:(0,A.jsx)(L.A,{className:"w-4 h-4"})}),"approved"===n.status&&(0,A.jsx)("div",{className:"text-green-500 dark:text-green-400",title:"\u2705 Schv\xe1len\xe1 zmena\n\n\ud83d\udcdd D\xf4vod: ".concat(n.reason,"\n\ud83c\udd95 Nov\xe1 hodnota: ").concat(n.newValue,"\n\nZmena bola schv\xe1len\xe1 a aplikovan\xe1."),children:(0,A.jsx)(L.A,{className:"w-4 h-4"})})]})]})},$=e=>{let{userEmail:t,companyId:a,onBack:n,selectedEmployeeId:i}=e;const[d,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(null),[m,x]=(0,s.useState)(!0),[h,g]=(0,s.useState)(""),[p,b]=(0,s.useState)("personal"),[k,v]=(0,s.useState)(!1),[f,j]=(0,s.useState)([]);(0,s.useEffect)(()=>{w()},[a]),(0,s.useEffect)(()=>{if(i&&d.length>0){const e=d.find(e=>e.id===i);e&&c(e)}},[i,d]);const w=async()=>{try{x(!0);const e=await U.hrService.getEmployees(a);o(e);const t=await U.hrService.getCompanyChanges(a);j(t)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t:",e)}finally{x(!1)}},_=d.filter(e=>e.first_name.toLowerCase().includes(h.toLowerCase())||e.last_name.toLowerCase().includes(h.toLowerCase())||e.email.toLowerCase().includes(h.toLowerCase())||e.employee_id.toLowerCase().includes(h.toLowerCase()));return m?(0,A.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,A.jsx)(B.A,{size:"lg",text:"Na\u010d\xedtavam karty zamestnancov..."})}):(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsx)("div",{className:"flex items-center justify-between",children:(0,A.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,A.jsxs)("button",{onClick:n,className:"flex items-center text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[(0,A.jsx)(G.A,{className:"h-5 w-5 mr-2"}),"Sp\xe4\u0165 na Dashboard"]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Karty zamestnancov"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Detailn\xe9 person\xe1lne \xfadaje zamestnancov"})]})]})}),(0,A.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,A.jsxs)("div",{className:"flex",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,A.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Person\xe1lne \xfadaje zamestnancov"}),(0,A.jsxs)("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:[(0,A.jsx)("p",{children:'Tu dop\u013a\u0148ate detailn\xe9 person\xe1lne \xfadaje pre zamestnancov, ktor\xed u\u017e maj\xfa vytvoren\xfd \xfa\u010det v sekcii "Zamestnanci".'}),(0,A.jsx)("p",{children:'Pre pridanie nov\xe9ho zamestnanca pou\u017eite sekciu "Zamestnanci".'})]})]})]})}),(0,A.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Vyh\u013ead\xe1vanie zamestnancov"}),(0,A.jsx)("input",{type:"text",placeholder:"H\u013eada\u0165 zamestnancov...",value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})}),(0,A.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,A.jsx)("div",{className:"lg:col-span-1",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow",children:[(0,A.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-600",children:(0,A.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Zoznam zamestnancov"})}),(0,A.jsxs)("div",{className:"max-h-96 overflow-y-auto",children:[_.map(e=>(0,A.jsx)("div",{onClick:()=>c(e),className:"p-4 border-b border-gray-200 dark:border-dark-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-dark-700 ".concat((null===l||void 0===l?void 0:l.id)===e.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500":""),children:(0,A.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,A.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,A.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 dark:bg-dark-600 flex items-center justify-center",children:(0,A.jsx)(u.A,{className:"h-6 w-6 text-gray-600 dark:text-gray-400"})})}),(0,A.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,A.jsxs)("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:[e.first_name," ",e.last_name]}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e.position}),(0,A.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500 truncate",children:e.employee_id})]})]})},e.id)),0===_.length&&(0,A.jsxs)("div",{className:"text-center py-8",children:[(0,A.jsx)(u.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,A.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:h?"\u017diadni zamestnanci nen\xe1jden\xed":"\u017diadni zamestnanci"})]})]})]})}),(0,A.jsx)("div",{className:"lg:col-span-2",children:l?(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow",children:[(0,A.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-600",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:[l.first_name," ",l.last_name]}),(0,A.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[l.position," \u2022 ",l.employee_id]})]}),(0,A.jsxs)("div",{className:"flex space-x-2",children:[(0,A.jsxs)("button",{onClick:()=>v(!0),className:"flex items-center px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:[(0,A.jsx)(L.A,{className:"h-4 w-4 mr-1"}),"Upravi\u0165"]}),(0,A.jsxs)("button",{onClick:()=>b("personal"),className:"px-3 py-1 text-sm font-medium rounded-md ".concat("personal"===p?"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300":"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:[(0,A.jsx)(y.A,{className:"h-4 w-4 inline mr-1"}),"Person\xe1lne"]})]})]})}),(0,A.jsx)("div",{className:"p-6",children:(0,A.jsx)(J,{employee:l,employeeChanges:f,onApproveChange:async(e,t,a,r)=>{try{await U.hrService.approveEmployeeChange(e,1),await U.hrService.updateEmployeeField(t,a,r),await w(),alert("Zmena bola \xfaspe\u0161ne schv\xe1len\xe1")}catch(s){console.error("Chyba pri schva\u013eovan\xed zmeny:",s),alert("Chyba pri schva\u013eovan\xed zmeny")}}})})]}):(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-12 text-center",children:[(0,A.jsx)(u.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,A.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"Vyberte zamestnanca"}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Kliknite na zamestnanca z \u013eav\xe9ho zoznamu pre zobrazenie jeho karty"})]})})]}),l&&(0,A.jsx)(W.A,{isOpen:k,onClose:()=>v(!1),onSave:e=>{if(!l)return;const t=(0,r.A)((0,r.A)({},l),e);(async()=>{try{await U.hrService.updateEmployee(l.id,t);const e=await U.hrService.getEmployees(a);o(e);const r=e.find(e=>e.id===l.id);r&&c(r),v(!1)}catch(e){console.error("Chyba pri aktualiz\xe1cii zamestnanca:",e)}})()},employee:l})]})},Q=e=>{let{isOpen:t,onClose:a,onSave:n,relation:i,employees:d,isEdit:o=!1}=e;const[l,c]=(0,s.useState)({employee_id:0,employee_first_name:"",employee_last_name:"",employee_email:"",birth_number:"",insurance_company:"V\u0161eobecn\xe1 zdravotn\xe1 pois\u0165ov\u0148a",insurance_number:"",workplace:"HS",center:"",work_start_date:"",work_end_date:void 0,position:"",position_name:"",employment_type:"full_time",employment_start_date:"",probation_end_date:void 0,fixed_term_contract:!1,departure_date:void 0,employment_termination_date:void 0,is_active:!0,salary:0,salary_after_departure:0,temporary_work_force:!1,irregular_income:!1,reduce_personal_evaluation:!1,agreed_weekly_hours:40,no_vacation_entitlement:!1,manual_vacation_adjustment:!1,permanent_child_care_from:void 0,permanent_child_care_to:void 0,agreed_work_days:5,agreed_work_days_partial:5,work_days_full_time:5,work_days_full_time_partial:5,vacation_increase:0,vacation_increase_partial:0,basic_annual_vacation_days:25,basic_annual_vacation_days_partial:25,vacation_partial:25,vacation_days:25,forfeited_vacation_days:0,forfeited_vacation_days_partial:0,vacation_reduction_days:0,vacation_reduction_days_partial:0,vacation_used:0,vacation_used_partial:0,overpaid_vacation_days:0,overpaid_vacation_days_2year:0,overpaid_vacation_days_3year:0,salary_type:"monthly",holidays_paid:"Priemerom",schedule:"Rovnomern\xfd",rate:0,vacation:25,personal_evaluation:0,bonus_percentage:0,bonus:0,life_insurance_company:"",life_insurance:0,varsym_life_insurance:"",specsym_life_insurance:"",risky_work:!1,advance:0,payment:0,advance_2:0,in_cash:0,account_number:"",bank_code:"",varsym_settlement:"",specsym_settlement:"",counted_years:0,counted_days:0,organization_notice:"",termination_reason:"",other_notice:"",np:!0,sp:!0,ip:!0,pvn:!0,pfp:!0,gp:!0,up:!0,prfs:!0,zp:!0,pension_company:"",varsym_pension:"",specsym_pension:"",pension_contribution:0,maximum:0,pension_contribution_percentage:0,identification_number:"",workplace_code:"",classification_code:"",oop_application_date:void 0,oop_termination_date:void 0,status:"active",attendance_mode:"manual",work_start_time:"08:00",work_end_time:"16:00",break_start_time:"12:00",break_end_time:"12:30",weekly_hours:40}),[m,x]=(0,s.useState)(!1),[u,h]=(0,s.useState)({});(0,s.useEffect)(()=>{i&&t?c(i):!o&&t&&c((0,r.A)((0,r.A)({},l),{},{id:void 0,employee_id:0,employee_first_name:"",employee_last_name:"",employee_email:"",position:"",position_name:"",salary:0,rate:0})),h({})},[i,t,o]);const g=e=>{const{name:t,value:a,type:s}=e.target;let n=a;if("checkbox"===s)n=e.target.checked;else if("number"===s)n=""===a?0:parseFloat(a);else if("salary"===t)n=a.replace(/[^\d.,]/g,"");else if("is_active"===t)n="true"===a;else if("employment_termination_date"===t&&a&&""!==a.trim())return void c(e=>(0,r.A)((0,r.A)({},e),{},{[t]:a,is_active:!1}));c(e=>(0,r.A)((0,r.A)({},e),{},{[t]:n})),u[t]&&h(e=>(0,r.A)((0,r.A)({},e),{},{[t]:""}))},p=()=>{c({employee_id:0,employee_first_name:"",employee_last_name:"",employee_email:"",birth_number:"",insurance_company:"V\u0161eobecn\xe1 zdravotn\xe1 pois\u0165ov\u0148a",insurance_number:"",workplace:"HS",center:"",work_start_date:"",work_end_date:void 0,position:"",position_name:"",employment_type:"full_time",employment_start_date:"",probation_end_date:void 0,fixed_term_contract:!1,departure_date:void 0,is_active:!0,salary:0,salary_after_departure:0,temporary_work_force:!1,irregular_income:!1,reduce_personal_evaluation:!1,agreed_weekly_hours:40,no_vacation_entitlement:!1,manual_vacation_adjustment:!1,permanent_child_care_from:void 0,permanent_child_care_to:void 0,agreed_work_days:5,agreed_work_days_partial:5,work_days_full_time:5,work_days_full_time_partial:5,vacation_increase:0,vacation_increase_partial:0,basic_annual_vacation_days:25,basic_annual_vacation_days_partial:25,vacation_partial:25,vacation_days:25,forfeited_vacation_days:0,forfeited_vacation_days_partial:0,vacation_reduction_days:0,vacation_reduction_days_partial:0,vacation_used:0,vacation_used_partial:0,overpaid_vacation_days:0,overpaid_vacation_days_2year:0,overpaid_vacation_days_3year:0,salary_type:"monthly",holidays_paid:"Priemerom",schedule:"Rovnomern\xfd",rate:0,vacation:25,personal_evaluation:0,bonus_percentage:0,bonus:0,life_insurance_company:"",life_insurance:0,varsym_life_insurance:"",specsym_life_insurance:"",risky_work:!1,advance:0,payment:0,advance_2:0,in_cash:0,account_number:"",bank_code:"",varsym_settlement:"",specsym_settlement:"",counted_years:0,counted_days:0,organization_notice:"",termination_reason:"",other_notice:"",np:!0,sp:!0,ip:!0,pvn:!0,pfp:!0,gp:!0,up:!0,prfs:!0,zp:!0,pension_company:"",varsym_pension:"",specsym_pension:"",pension_contribution:0,maximum:0,pension_contribution_percentage:0,identification_number:"",workplace_code:"",classification_code:"",oop_application_date:void 0,oop_termination_date:void 0,status:"active"}),h({}),a()};return t?(0,A.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto mx-4",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600",children:[(0,A.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:o?"Upravi\u0165 pracovn\xfd pomer":"Prida\u0165 pracovn\xfd pomer"}),(0,A.jsx)("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,A.jsx)(V.A,{className:"h-6 w-6"})})]}),(0,A.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),(()=>{const e={};return l.employee_id||(e.employee_id="Zamestnanec je povinn\xfd"),l.position.trim()||(e.position="Poz\xedcia je povinn\xe1"),l.employment_start_date||(e.employment_start_date="D\xe1tum za\u010diatku pracovn\xe9ho pomeru je povinn\xfd"),(!l.salary||""===l.salary.toString().trim()||parseFloat(l.salary.toString().replace(",","."))<=0)&&(e.salary="Mzda mus\xed by\u0165 v\xe4\u010d\u0161ia ako 0"),h(e),0===Object.keys(e).length})()){x(!0);try{n(l),a()}catch(t){console.error("Chyba pri ukladan\xed pracovn\xe9ho pomeru:",t)}finally{x(!1)}}},className:"p-6 space-y-6",children:[(0,A.jsxs)("div",{className:"border-b border-gray-200 dark:border-dark-600 pb-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Z\xe1kladn\xe9 inform\xe1cie"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"employee_id",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Zamestnanec *"}),(0,A.jsxs)("select",{id:"employee_id",name:"employee_id",value:l.employee_id,onChange:e=>(e=>{const t=d.find(t=>t.id===e);t&&c(a=>(0,r.A)((0,r.A)({},a),{},{employee_id:e,employee_first_name:t.first_name,employee_last_name:t.last_name,employee_email:t.email,birth_number:t.birth_number||""}))})(parseInt(e.target.value)),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(u.employee_id?"border-red-300":"border-gray-300 dark:border-dark-600"),children:[(0,A.jsx)("option",{value:"",children:"Vyberte zamestnanca"}),d.map(e=>(0,A.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name," (",e.email,")"]},e.id))]}),u.employee_id&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.employee_id})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"birth_number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rodn\xe9 \u010d\xedslo"}),(0,A.jsx)("input",{type:"text",id:"birth_number",name:"birth_number",value:l.birth_number,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Poz\xedcia *"}),(0,A.jsx)("input",{type:"text",id:"position",name:"position",value:l.position,onChange:g,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(u.position?"border-red-300":"border-gray-300 dark:border-dark-600")}),u.position&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.position})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"employment_type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Druh pracovn\xe9ho pomeru"}),(0,A.jsxs)("select",{id:"employment_type",name:"employment_type",value:l.employment_type,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[(0,A.jsx)("option",{value:"full_time",children:"Hlavn\xfd pracovn\xfd pomer"}),(0,A.jsx)("option",{value:"part_time",children:"\u010ciasto\u010dn\xfd \xfav\xe4zok"}),(0,A.jsx)("option",{value:"contract",children:"Dohoda o pracovnej \u010dinnosti"}),(0,A.jsx)("option",{value:"intern",children:"St\xe1\u017e"}),(0,A.jsx)("option",{value:"dohoda",children:"Dohoda"})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"employment_start_date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Za\u010diatok pracovn\xe9ho pomeru *"}),(0,A.jsx)("input",{type:"date",id:"employment_start_date",name:"employment_start_date",value:l.employment_start_date,onChange:g,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(u.employment_start_date?"border-red-300":"border-gray-300 dark:border-dark-600")}),u.employment_start_date&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.employment_start_date})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"employment_termination_date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ukon\u010denie pracovn\xe9ho pomeru"}),(0,A.jsx)("input",{type:"date",id:"employment_termination_date",name:"employment_termination_date",value:l.employment_termination_date||"",onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"is_active",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status pracovn\xe9ho pomeru"}),(0,A.jsxs)("select",{id:"is_active",name:"is_active",value:l.is_active?"true":"false",onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[(0,A.jsx)("option",{value:"true",children:"Akt\xedvny"}),(0,A.jsx)("option",{value:"false",children:"Neakt\xedvny (ukon\u010den\xfd)"})]}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Neakt\xedvny status sa automaticky nastav\xed pri zadan\xed d\xe1tumu ukon\u010denia"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"salary",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mzda (\u20ac) - nap\xed\u0161te sumu *"}),(0,A.jsx)("input",{type:"text",id:"salary",name:"salary",value:l.salary,onChange:g,placeholder:"Napr\xedklad: 2500",className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(u.salary?"border-red-300":"border-gray-300 dark:border-dark-600")}),u.salary&&(0,A.jsx)("p",{className:"mt-1 text-sm text-red-600",children:u.salary})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"salary_type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Druh mzdy"}),(0,A.jsxs)("select",{id:"salary_type",name:"salary_type",value:l.salary_type,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[(0,A.jsx)("option",{value:"monthly",children:"Mesa\u010dn\xe9"}),(0,A.jsx)("option",{value:"hourly",children:"Hodinov\xe1"}),(0,A.jsx)("option",{value:"task_based",children:"\xdakolov\xe1"})]})]})]})]}),(0,A.jsxs)("div",{className:"border-b border-gray-200 dark:border-dark-600 pb-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Mzdov\xe9 \xfadaje"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"rate",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Sadzba (\u20ac)"}),(0,A.jsx)("input",{type:"number",id:"rate",name:"rate",value:l.rate,onChange:g,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"personal_evaluation",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Osobn\xe9 ohodnotenie (\u20ac)"}),(0,A.jsx)("input",{type:"number",id:"personal_evaluation",name:"personal_evaluation",value:l.personal_evaluation,onChange:g,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"bonus_percentage",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pr\xe9mie (%)"}),(0,A.jsx)("input",{type:"number",id:"bonus_percentage",name:"bonus_percentage",value:l.bonus_percentage,onChange:g,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"agreed_weekly_hours",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Dohodnut\xfd t\xfd\u017edenn\xfd \xfav\xe4zok (hodiny)"}),(0,A.jsx)("input",{type:"number",id:"agreed_weekly_hours",name:"agreed_weekly_hours",value:l.agreed_weekly_hours,onChange:g,min:"0",step:"0.5",className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("input",{type:"checkbox",id:"temporary_work_force",name:"temporary_work_force",checked:l.temporary_work_force,onChange:g,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,A.jsx)("label",{htmlFor:"temporary_work_force",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Pren\xe1jom pracovnej sily"})]}),(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("input",{type:"checkbox",id:"irregular_income",name:"irregular_income",checked:l.irregular_income,onChange:g,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,A.jsx)("label",{htmlFor:"irregular_income",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Nepravideln\xfd pr\xedjem"})]}),(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("input",{type:"checkbox",id:"no_vacation_entitlement",name:"no_vacation_entitlement",checked:l.no_vacation_entitlement,onChange:g,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,A.jsx)("label",{htmlFor:"no_vacation_entitlement",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Bez n\xe1roku na dovolenku"})]})]})]}),(0,A.jsxs)("div",{className:"mt-8",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Doch\xe1dzkov\xe9 nastavenia"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"attendance_mode",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Re\u017eim doch\xe1dzky"}),(0,A.jsxs)("select",{id:"attendance_mode",name:"attendance_mode",value:l.attendance_mode,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[(0,A.jsx)("option",{value:"manual",children:"Manu\xe1lne - zamestnanec ozna\u010duje doch\xe1dzku"}),(0,A.jsx)("option",{value:"automatic",children:"Automaticky - syst\xe9m po\u010d\xedta doch\xe1dzku pod\u013ea nastaven\xed"})]})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"weekly_hours",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"T\xfd\u017edenn\xfd \xfav\xe4zok (hodiny)"}),(0,A.jsx)("input",{type:"number",id:"weekly_hours",name:"weekly_hours",value:l.weekly_hours,onChange:g,min:"0",step:"0.5",className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"work_start_time",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Za\u010diatok pracovn\xe9ho \u010dasu"}),(0,A.jsx)("input",{type:"time",id:"work_start_time",name:"work_start_time",value:l.work_start_time,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"work_end_time",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Koniec pracovn\xe9ho \u010dasu"}),(0,A.jsx)("input",{type:"time",id:"work_end_time",name:"work_end_time",value:l.work_end_time,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"break_start_time",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Za\u010diatok prest\xe1vky"}),(0,A.jsx)("input",{type:"time",id:"break_start_time",name:"break_start_time",value:l.break_start_time,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{htmlFor:"break_end_time",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Koniec prest\xe1vky"}),(0,A.jsx)("input",{type:"time",id:"break_end_time",name:"break_end_time",value:l.break_end_time,onChange:g,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]}),"automatic"===l.attendance_mode&&(0,A.jsx)("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:(0,A.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:["\ud83d\udca1 ",(0,A.jsx)("strong",{children:"Automatick\xfd re\u017eim:"})," Syst\xe9m automaticky vytvor\xed doch\xe1dzku pre tohto zamestnanca na z\xe1klade nastaven\xfdch pracovn\xfdch hod\xedn. Zamestnanec nebude musie\u0165 manu\xe1lne ozna\u010dova\u0165 doch\xe1dzku."]})}),"manual"===l.attendance_mode&&(0,A.jsx)("div",{className:"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:(0,A.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:["\ud83d\udca1 ",(0,A.jsx)("strong",{children:"Manu\xe1lny re\u017eim:"})," Zamestnanec bude musie\u0165 manu\xe1lne ozna\u010dova\u0165 doch\xe1dzku cez AttendanceTracker. Firma m\xf4\u017ee upravi\u0165 doch\xe1dzku v pr\xedpade potreby."]})})]}),(0,A.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-dark-600",children:[(0,A.jsx)("button",{type:"button",onClick:p,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Zru\u0161i\u0165"}),(0,A.jsx)("button",{type:"submit",disabled:m,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Uklad\xe1m...":o?"Ulo\u017ei\u0165 zmeny":"Prida\u0165 pracovn\xfd pomer"})]})]})]})}):null},ee=e=>{let{companyId:t,userEmail:a,onBack:r}=e;const[n,i]=(0,s.useState)(!0),[d,o]=(0,s.useState)([]),[l,c]=(0,s.useState)([]),[m,u]=(0,s.useState)(""),[h,g]=(0,s.useState)(!1),[p,y]=(0,s.useState)(!1),[b,k]=(0,s.useState)(null);(0,s.useEffect)(()=>{v()},[t]);const v=async()=>{try{i(!0);const e=await U.hrService.getEmployees(t);c(e);const a=await U.hrService.getEmploymentRelations(t);o(a)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t:",e)}finally{i(!1)}},j=d.filter(e=>{var t,a,r;return(null===(t=e.first_name)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(a=e.last_name)||void 0===a?void 0:a.toLowerCase().includes(m.toLowerCase()))||(null===(r=e.position)||void 0===r?void 0:r.toLowerCase().includes(m.toLowerCase()))}),_=async e=>{try{p&&b&&b.id?await U.hrService.updateEmploymentRelation(b.id,{position:e.position,employment_type:"dohoda"===e.employment_type?"contract":e.employment_type,employment_start_date:e.employment_start_date,employment_end_date:e.employment_termination_date,salary:e.salary,weekly_hours:e.agreed_weekly_hours,attendance_mode:e.attendance_mode,work_start_time:e.work_start_time,work_end_time:e.work_end_time,break_start_time:e.break_start_time,break_end_time:e.break_end_time,is_active:e.is_active}):await U.hrService.addEmploymentRelation({employee_id:e.employee_id,company_id:t,position:e.position,employment_type:"dohoda"===e.employment_type?"contract":e.employment_type,employment_start_date:e.employment_start_date,employment_end_date:e.employment_termination_date,salary:e.salary,weekly_hours:e.agreed_weekly_hours,attendance_mode:e.attendance_mode,work_start_time:e.work_start_time,work_end_time:e.work_end_time,break_start_time:e.break_start_time,break_end_time:e.break_end_time,is_active:e.is_active}),await v()}catch(a){console.error("Chyba pri ukladan\xed pracovn\xe9ho pomeru:",a),alert("Chyba pri ukladan\xed pracovn\xe9ho pomeru")}},N=e=>{const t={active:{color:"bg-green-100 text-green-800",label:"Akt\xedvny"},inactive:{color:"bg-gray-100 text-gray-800",label:"Neakt\xedvny"},terminated:{color:"bg-red-100 text-red-800",label:"Ukon\u010den\xfd"}},a=t[e]||t.inactive;return(0,A.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(a.color),children:a.label})};return n?(0,A.jsx)(B.A,{}):(0,A.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-dark-900",children:(0,A.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,A.jsxs)("button",{onClick:r,className:"flex items-center text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white",children:[(0,A.jsx)(G.A,{className:"w-5 h-5 mr-2"}),"Sp\xe4\u0165"]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Pracovn\xe9 pomery"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Spr\xe1va pracovn\xfdch pomerov zamestnancov"})]})]}),(0,A.jsxs)("button",{onClick:()=>{g(!0)},className:"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors flex items-center",children:[(0,A.jsx)(x.A,{className:"w-5 h-5 mr-2"}),"Prida\u0165 pracovn\xfd pomer"]})]}),(0,A.jsx)("div",{className:"mb-6",children:(0,A.jsxs)("div",{className:"relative",children:[(0,A.jsx)(w.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,A.jsx)("input",{type:"text",placeholder:"H\u013eada\u0165 zamestnanca alebo poz\xedciu...",value:m,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 shadow rounded-lg overflow-hidden",children:[(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,A.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zamestnanec"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Poz\xedcia"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Typ"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Za\u010diatok"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Ukon\u010denie"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mzda"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"T\xfd\u017edenn\xe9 hodiny"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Doch\xe1dzka"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pracovn\xfd \u010das"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Akcie"})]})}),(0,A.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:j.map(e=>{return(0,A.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.first_name," ",e.last_name]}),(0,A.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.position}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(t=e.employment_type,{full_time:"Pln\xfd \xfav\xe4zok",part_time:"\u010ciasto\u010dn\xfd \xfav\xe4zok",contract:"Dohoda",intern:"St\xe1\u017e"}[t]||t)}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.employment_start_date?new Date(e.employment_start_date).toLocaleDateString("sk-SK"):"-"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.employment_termination_date?new Date(e.employment_termination_date).toLocaleDateString("sk-SK"):"-"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.salary?"".concat(e.salary," \u20ac"):"-"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.weekly_hours?"".concat(e.weekly_hours," hod\xedn"):"-"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"automatic"===e.attendance_mode?"Automatick\xe1":"manual"===e.attendance_mode?"Manu\xe1lna":"-"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.work_start_time&&e.work_end_time?"".concat(e.work_start_time," - ").concat(e.work_end_time):"-"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:N(e.employment_termination_date&&new Date(e.employment_termination_date)<=new Date?"terminated":e.is_active?"active":"inactive")}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,A.jsxs)("div",{className:"flex space-x-2",children:[(0,A.jsx)("button",{onClick:()=>(e=>{k(e),y(!0)})(e),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300",children:(0,A.jsx)(L.A,{className:"w-4 h-4"})}),(0,A.jsx)("button",{onClick:()=>e.id&&(e=>{if(window.confirm("Naozaj chcete vymaza\u0165 tento pracovn\xfd pomer?"))try{o(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Chyba pri vymazan\xed pracovn\xe9ho pomeru:",t)}})(e.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300",children:(0,A.jsx)(f.A,{className:"w-4 h-4"})})]})})]},e.id);var t})})]})}),0===j.length&&(0,A.jsx)("div",{className:"text-center py-8",children:(0,A.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:m?"\u017diadne v\xfdsledky pre vyh\u013ead\xe1vanie":"\u017diadne pracovn\xe9 pomery"})})]}),h&&(0,A.jsx)(Q,{isOpen:h,onClose:()=>g(!1),onSave:_,employees:l,isEdit:!1}),p&&b&&(0,A.jsx)(Q,{isOpen:p,onClose:()=>y(!1),onSave:_,relation:b,employees:l,isEdit:!0})]})})};var te=a(59318),ae=a(50259);const re=e=>{let{companyId:t,onBack:a}=e;const[r,n]=(0,s.useState)(!1),[i,d]=(0,s.useState)(!1),[o,l]=(0,s.useState)([]),[c,x]=(0,s.useState)([]),[u,h]=(0,s.useState)("month"),[g,p]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[k,v]=(0,s.useState)(""),[f,j]=(0,s.useState)([]),[w,_]=(0,s.useState)(!1);(0,s.useEffect)(()=>{N(),z()},[t]),(0,s.useEffect)(()=>{z()},[u]);const N=async()=>{n(!0);try{const e=await U.hrService.getEmployeesWithAutomaticAttendance(t);l(e),x(t=>o.length===e.length&&o.every((t,a)=>{var r;return t.id===(null===(r=e[a])||void 0===r?void 0:r.id)})?t:[])}catch(e){console.error("Chyba pri na\u010d\xedtan\xed zamestnancov:",e)}finally{n(!1)}},z=()=>{const e=new Date;let t,a;switch(u){case"month":default:t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0);break;case"year":t=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),11,31);break;case"custom":return void v("")}const r=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r)},s=new Date(e);s.setHours(0,0,0,0),s.setDate(s.getDate()-1);const n=new Date(a);n.setHours(0,0,0,0),n.getTime()>s.getTime()?(a=new Date(s),v("Koncov\xfd d\xe1tum bol upraven\xfd na v\u010deraj\u0161\xed de\u0148, aby sa vyhli dne\u0161ku/future.")):v(""),p(r(t)),b(r(a))},S=e=>{x(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},C=e=>e.substring(0,5);return r?(0,A.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,A.jsx)(B.A,{size:"lg",text:"Na\u010d\xedtavam zamestnancov..."})}):(0,A.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,A.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("button",{onClick:()=>a?a():window.history.back(),className:"mr-4 p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,A.jsx)(G.A,{className:"w-6 h-6"})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Automatick\xe9 prepo\u010d\xedtanie doch\xe1dzky"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"Prepo\u010d\xedtaj doch\xe1dzku na z\xe1klade nastaven\xfdch pracovn\xfdch hod\xedn"}),(0,A.jsx)("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:(0,A.jsxs)("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:[(0,A.jsx)("strong",{children:"D\xf4le\u017eit\xe9:"})," Automatick\xfd v\xfdpo\u010det doch\xe1dzky m\xf4\u017ee prebehn\xfa\u0165 len za dni ",(0,A.jsx)("strong",{children:"pred aktu\xe1lnym d\u0148om"}),". Syst\xe9m automaticky zoh\u013eadn\xed dovolenky, PN, dni pracovn\xe9ho vo\u013ena a sviatky."]})}),(0,A.jsxs)("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[(0,A.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 mb-3",children:[(0,A.jsx)("strong",{children:"Pozor:"})," Ak m\xe1te doch\xe1dzku za bud\xface dni, m\xf4\u017eete ju vy\u010disti\u0165 pomocou tla\u010didla ni\u017e\u0161ie."]}),(0,A.jsx)("button",{onClick:async()=>{if(window.confirm("Naozaj chcete vy\u010disti\u0165 v\u0161etku doch\xe1dzku za bud\xface dni? T\xe1to akcia sa ned\xe1 vr\xe1ti\u0165 sp\xe4\u0165."))try{const e=await fetch("/api/hr/attendance/cleanup-future",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({companyId:t})}),a=await e.json();e.ok?(alert("Vy\u010distenie dokon\u010den\xe9. Odstr\xe1nen\xfdch ".concat(a.deletedCount," z\xe1znamov.")),window.location.reload()):alert("Chyba: ".concat(a.error))}catch(e){console.error("Chyba pri vy\u010disten\xed doch\xe1dzky:",e),alert("Chyba pri vy\u010disten\xed doch\xe1dzky. Sk\xfaste to znova.")}},className:"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Vy\u010disti\u0165 bud\xface doch\xe1dzky"})]}),(0,A.jsx)("div",{className:"mt-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:(0,A.jsxs)("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:[(0,A.jsx)("strong",{children:"Pozn\xe1mka:"}),' Ak m\xe1te existuj\xface doch\xe1dzky za v\xedkendy alebo sviatky, m\xf4\u017eete ich vy\u010disti\u0165 pomocou tla\u010didla "Vy\u010disti\u0165 doch\xe1dzku za v\xedkendy a sviatky".']})})]})]})}),(0,A.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,A.jsx)("div",{className:"lg:col-span-2",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Zamestnanci s automatickou doch\xe1dzkou"}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:'Kliknite na zamestnanca pre v\xfdber alebo pou\u017eite "Ozna\u010di\u0165 v\u0161etk\xfdch"'})]}),(0,A.jsx)("button",{onClick:()=>{c.length===o.length?x([]):x(o.map(e=>e.id))},className:"text-sm text-blue-600 dark:text-blue-400 hover:underline",children:c.length===o.length?"Odzna\u010di\u0165 v\u0161etk\xfdch":"Ozna\u010di\u0165 v\u0161etk\xfdch"})]}),0===o.length?(0,A.jsxs)("div",{className:"text-center py-8",children:[(0,A.jsx)(ae.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,A.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"\u017diadni zamestnanci s automatickou doch\xe1dzkou"}),(0,A.jsx)("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-2",children:'Zamestnanci musia ma\u0165 nastaven\xfd re\u017eim "Automatick\xe1 doch\xe1dzka" v pracovn\xfdch pomeroch'})]}):(0,A.jsx)("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:o.map((e,t)=>(0,A.jsx)("div",{className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat(c.includes(e.id)?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-dark-600 hover:border-gray-300 dark:hover:border-dark-500"),onClick:()=>S(e.id),children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("input",{type:"checkbox",checked:c.includes(e.id),onChange:()=>S(e.id),className:"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,A.jsxs)("div",{children:[(0,A.jsxs)("p",{className:"font-medium ".concat(c.includes(e.id)?"text-blue-900 dark:text-blue-100":"text-gray-900 dark:text-white"),children:[e.first_name," ",e.last_name]}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.position})]})]}),(0,A.jsxs)("div",{className:"text-right text-sm text-gray-500 dark:text-gray-400",children:[(0,A.jsxs)("p",{children:[C(e.work_start_time)," - ",C(e.work_end_time)]}),(0,A.jsxs)("p",{children:[e.weekly_hours,"h/t\xfd\u017ede\u0148"]})]})]})},"".concat(e.id,"-").concat(t)))})]})}),(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Obdobie prepo\u010d\xedtania"}),(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Typ obdobia"}),(0,A.jsx)("select",{value:u,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[{value:"month",label:"Tento mesiac"},{value:"year",label:"Tento rok"},{value:"custom",label:"Vlastn\xe9 obdobie"}].map(e=>(0,A.jsx)("option",{value:e.value,children:e.label},e.value))})]}),"custom"===u&&(0,A.jsxs)("div",{className:"space-y-3",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Od d\xe1tumu"}),(0,A.jsx)("input",{type:"date",value:g,onChange:e=>p(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Do d\xe1tumu"}),(0,A.jsx)("input",{type:"date",value:y,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]}),(0,A.jsxs)("div",{className:"bg-gray-50 dark:bg-dark-700 p-3 rounded-md",children:[(0,A.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,A.jsx)("strong",{children:"Obdobie:"})," ",g," a\u017e ",y]}),k&&(0,A.jsx)("p",{className:"text-xs mt-1 text-yellow-700 dark:text-yellow-300",children:k})]})]})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Akcie"}),(0,A.jsxs)("div",{className:"space-y-3",children:[(0,A.jsx)("button",{onClick:async()=>{if(0===c.length)return void alert("Vyberte aspo\u0148 jedn\xe9ho zamestnanca");if(!g||!y)return void alert("Vyberte obdobie");if(window.confirm("Naozaj chcete prepo\u010d\xedta\u0165 doch\xe1dzku pre ".concat(c.length," zamestnancov ")+"za obdobie ".concat(g," a\u017e ").concat(y,"?\n\n")+"T\xe1to akcia prep\xed\u0161e existuj\xface z\xe1znamy doch\xe1dzky!")){d(!0),_(!1),j([]);try{const e=await U.hrService.processAutomaticAttendance(t,c,g,y);j(e.results||[]),_(!0)}catch(r){var e,a;console.error("Chyba pri spracovan\xed doch\xe1dzky:",r),null!==(e=r.response)&&void 0!==e&&null!==(a=e.data)&&void 0!==a&&a.error?alert("Chyba: ".concat(r.response.data.error)):alert("Chyba pri spracovan\xed doch\xe1dzky")}finally{d(!1)}}},disabled:i||0===c.length,className:"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:i?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(B.A,{size:"sm",className:"mr-2"}),"Spracov\xe1vam..."]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(R.A,{className:"w-5 h-5 mr-2"}),"Prepo\u010d\xedta\u0165 doch\xe1dzku"]})}),(0,A.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(0,A.jsxs)("p",{children:["\u2705 Vybran\xfdch: ",c.length," zamestnancov"]}),0===c.length&&(0,A.jsx)("p",{className:"text-orange-600 dark:text-orange-400",children:"\u26a0\ufe0f Vyberte aspo\u0148 jedn\xe9ho zamestnanca"}),(0,A.jsx)("p",{children:"\u26a0\ufe0f T\xe1to akcia prep\xed\u0161e existuj\xface z\xe1znamy"})]})]})]})]})]}),w&&(0,A.jsxs)("div",{className:"mt-6 bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"V\xfdsledky spracovania"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,A.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)(E.A,{className:"w-8 h-8 text-green-600 dark:text-green-400"}),(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"\xdaspe\u0161ne"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:Array.isArray(f)?f.filter(e=>e.success&&!e.skipped).length:0})]})]})}),(0,A.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)(M.A,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"}),(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Presko\u010den\xe9"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:f.filter(e=>e.skipped).length})]})]})}),(0,A.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)(M.A,{className:"w-8 h-8 text-red-600 dark:text-red-400"}),(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-red-600 dark:text-red-400",children:"Chyby"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:Array.isArray(f)?f.filter(e=>!e.success&&!e.skipped).length:0})]})]})}),(0,A.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)(m.A,{className:"w-8 h-8 text-blue-600 dark:text-blue-400"}),(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Celkom"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:f.length})]})]})})]}),f.length>0&&(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,A.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zamestnanec"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"D\xe1tum"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Spr\xe1va"})]})}),(0,A.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:f.map((e,t)=>{var a,r;return(0,A.jsxs)("tr",{children:[(0,A.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[null===(a=o.find(t=>t.id===e.employee_id))||void 0===a?void 0:a.first_name," ",null===(r=o.find(t=>t.id===e.employee_id))||void 0===r?void 0:r.last_name]}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.date}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat(e.success?e.skipped?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"),children:e.success?e.skipped?"Presko\u010den\xe9":e.status||"\xdaspech":"Chyba"})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.success?e.note||"Doch\xe1dzka vytvoren\xe1":e.error})]},t)})})]})})]})]})},se=e=>{let{isOpen:t,onClose:a,companyId:r,onSuccess:n}=e;const[i,d]=(0,s.useState)([]),[o,l]=(0,s.useState)(!1),[c,m]=(0,s.useState)(null),[x,u]=(0,s.useState)(""),[h,g]=(0,s.useState)("present"),[p,y]=(0,s.useState)("08:00"),[b,k]=(0,s.useState)("16:00"),[v,f]=(0,s.useState)(30),[j,w]=(0,s.useState)(""),[_,N]=(0,s.useState)(!1);(0,s.useEffect)(()=>{t&&z()},[t,r]);const z=async()=>{try{l(!0);const e=await U.hrService.getEmployeesWithMissingAttendance(r);d(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed zamestnancov:",e)}finally{l(!1)}};return t?(0,A.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600",children:[(0,A.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Zaznamena\u0165 doch\xe1dzku"}),(0,A.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,A.jsx)(V.A,{className:"w-6 h-6"})})]}),(0,A.jsx)("div",{className:"p-6",children:o?(0,A.jsxs)("div",{className:"text-center py-8",children:[(0,A.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,A.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Na\u010d\xedtavam zamestnancov..."})]}):0===i.length?(0,A.jsxs)("div",{className:"text-center py-8",children:[(0,A.jsx)(M.A,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"V\u0161etci zamestnanci maj\xfa zaznamenan\xfa doch\xe1dzku"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-400",children:"V\u0161etci zamestnanci s manu\xe1lnou doch\xe1dzkou maj\xfa dnes zaznamenan\xfa doch\xe1dzku."})]}):(0,A.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Zamestnanci bez doch\xe1dzky"}),(0,A.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:i.map(e=>(0,A.jsx)("div",{onClick:()=>(e=>{if(m(e),e.missing_dates.length>0&&u(e.missing_dates[0]),e.work_start_time&&y(e.work_start_time),e.work_end_time&&k(e.work_end_time),e.break_start_time&&e.break_end_time){const t=new Date("2000-01-01T".concat(e.break_start_time)),a=new Date("2000-01-01T".concat(e.break_end_time)),r=Math.round((a.getTime()-t.getTime())/6e4);f(r)}})(e),className:"p-4 border rounded-lg cursor-pointer transition-colors ".concat((null===c||void 0===c?void 0:c.id)===e.id?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-gray-200 dark:border-dark-600 hover:border-gray-300 dark:hover:border-dark-500"),children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("h4",{className:"font-medium text-gray-900 dark:text-white",children:[e.first_name," ",e.last_name]}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.position}),(0,A.jsx)("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:e.email})]}),(0,A.jsx)("div",{className:"text-right",children:(0,A.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200",children:[(0,A.jsx)(R.A,{className:"w-3 h-3 mr-1"}),e.missing_dates.length," dn\xed"]})})]})},e.id))})]}),c&&(0,A.jsxs)("div",{children:[(0,A.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:["Zaznamena\u0165 doch\xe1dzku pre ",c.first_name," ",c.last_name]}),(0,A.jsxs)("div",{className:"space-y-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"D\xe1tum"}),(0,A.jsx)("select",{value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white",children:c.missing_dates.map(e=>(0,A.jsx)("option",{value:e,children:new Date(e).toLocaleDateString("sk-SK")},e))})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Typ doch\xe1dzky"}),(0,A.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white",children:[(0,A.jsx)("option",{value:"present",children:"Pr\xedtomn\xfd"}),(0,A.jsx)("option",{value:"absent",children:"Nepr\xedtomn\xfd"}),(0,A.jsx)("option",{value:"leave",children:"Dovolenka"}),(0,A.jsx)("option",{value:"sick_leave",children:"PN"})]})]}),"present"===h&&(0,A.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pr\xedchod"}),(0,A.jsx)("input",{type:"time",value:p,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Odchod"}),(0,A.jsx)("input",{type:"time",value:b,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white"})]})]}),"present"===h&&(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Prest\xe1vka (min\xfaty)"}),(0,A.jsx)("input",{type:"number",value:v,onChange:e=>f(parseInt(e.target.value)||0),min:"0",max:"480",className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white"})]}),(0,A.jsxs)("div",{children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pozn\xe1mka"}),(0,A.jsx)("textarea",{value:j,onChange:e=>w(e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white",placeholder:"Volite\u013en\xe1 pozn\xe1mka k doch\xe1dzke..."})]}),(0,A.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,A.jsx)("button",{onClick:async()=>{if(c&&x)try{N(!0);const e={employee_id:c.id,company_id:r,date:x,attendance_type:h,start_time:"present"===h?p:null,end_time:"present"===h?b:null,break_minutes:"present"===h?v:0,note:j,recorded_by:"hr_manager"};await U.hrService.recordAttendance(e),await z(),m(null),u(""),g("present"),y("08:00"),k("16:00"),f(30),w(""),n(),alert("Doch\xe1dzka bola \xfaspe\u0161ne zaznamenan\xe1")}catch(e){console.error("Chyba pri zaznamen\xe1van\xed doch\xe1dzky:",e),alert("Chyba pri zaznamen\xe1van\xed doch\xe1dzky")}finally{N(!1)}else alert("Vyberte zamestnanca a d\xe1tum")},disabled:_,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:_?"Zaznamen\xe1vam...":"Zaznamena\u0165 doch\xe1dzku"}),(0,A.jsx)("button",{onClick:a,className:"px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-700",children:"Zru\u0161i\u0165"})]})]})]})]})})]})}):null},ne=e=>{if(!e)return"-";try{if(e.match(/^\d{2}:\d{2}$/))return e;const t=new Date(e);return isNaN(t.getTime())?"-":t.toLocaleTimeString("sk-SK",{hour:"2-digit",minute:"2-digit",hour12:!1})}catch(t){return console.error("Chyba pri form\xe1tovan\xed \u010dasu:",e,t),"-"}},ie=e=>{let{companyId:t}=e;const[a,n]=(0,s.useState)(!0),[i,d]=(0,s.useState)([]),[o,l]=(0,s.useState)([]),[u,h]=(0,s.useState)(null),[p,b]=(0,s.useState)([]),[k,v]=(0,s.useState)([]),[f,j]=(0,s.useState)([]),[w,_]=(0,s.useState)([]),[N,z]=(0,s.useState)(new Date),[S,C]=(0,s.useState)(!1),[D,P]=(0,s.useState)("overview"),[F,I]=(0,s.useState)(!1),[T,V]=(0,s.useState)(null),[K,H]=(0,s.useState)("all"),[G,W]=(0,s.useState)(""),[J,X]=(0,s.useState)(new Set),[Q,ae]=(0,s.useState)(!1),[ie,de]=(0,s.useState)(null),[oe,le]=(0,s.useState)(!1),[ce,me]=(0,s.useState)("overview"),xe=(0,s.useCallback)(async()=>{try{var e;n(!0);const r=await U.hrService.getHRStats(t);console.log("HR Stats:",r),h(r);const s=await U.hrService.getEmployees(t);d(s);const i=await U.hrService.getLeaveRequests(t);console.log("V\u0161etky \u017eiadosti o dovolenku:",i),console.log("\u010cakaj\xface \u017eiadosti:",null===r||void 0===r||null===(e=r.leave_requests)||void 0===e?void 0:e.pending_leave_requests),console.log("Po\u010det v\u0161etk\xfdch \u017eiadost\xed:",i.length),l(i);const o=await U.hrService.getCompanyChanges(t);b(o);try{const e=await U.hrService.getPresentEmployeesToday(t);v(e)}catch(a){console.error("Chyba pri na\u010d\xedtan\xed pr\xedtomn\xfdch zamestnancov:",a),v([])}try{const e=await U.hrService.getAbsentEmployeesToday(t);j(e)}catch(a){console.error("Chyba pri na\u010d\xedtan\xed nepr\xedtomn\xfdch zamestnancov:",a),j([])}try{const e=await U.hrService.getEmployeesAttendanceStatus(t);_(e)}catch(a){console.error("Chyba pri na\u010d\xedtan\xed zamestnancov s doch\xe1dzkou:",a),_([])}}catch(a){console.error("Chyba pri na\u010d\xedtan\xed HR d\xe1t:",a)}finally{n(!1)}},[t]),ue=(0,s.useCallback)(async()=>{try{C(!0);const e=await U.hrService.getHRStats(t);h(e);const a=await U.hrService.getPresentEmployeesToday(t);v(a);const r=await U.hrService.getAbsentEmployeesToday(t);j(r),z(new Date)}catch(e){console.error("Chyba pri aktualiz\xe1cii doch\xe1dzkov\xfdch d\xe1t:",e)}finally{C(!1)}},[t]);(0,s.useEffect)(()=>{xe()},[xe]),(0,s.useEffect)(()=>{w&&w.length>=0&&(async()=>{try{const e=await U.hrService.getEmployeesWithAutomaticAttendance(t),a=new Date,r=new Date(a.getFullYear(),a.getMonth(),a.getDate()).toISOString().split("T")[0],s=60*a.getHours()+a.getMinutes(),n=e=>{if(!e)return null;const[t,a]=e.split(":");return 60*parseInt(t||"0",10)+parseInt(a||"0",10)};for(const i of e){const e=w.find(e=>e.id===i.id);if(e&&("present"===e.status_type||"late"===e.status_type||e.is_weekend||e.is_holiday))continue;const d=n(i.work_start_time),o=n(i.work_end_time);if(null==d||null==o)continue;if(s<d||s>o)continue;const l="auto_checked_in_".concat(i.id,"_").concat(r);if("true"===localStorage.getItem(l))continue;const c=await U.hrService.getAttendance(t,i.id,r,r);if(Array.isArray(c)&&c.length>0){localStorage.setItem(l,"true");continue}const m=String(a.getHours()).padStart(2,"0"),x=String(a.getMinutes()).padStart(2,"0");await U.hrService.recordAttendance({employee_id:i.id,company_id:t,date:r,attendance_type:"present",start_time:"".concat(m,":").concat(x,":00"),end_time:null,break_minutes:0,note:"Automatick\xfd pr\xedchod (v r\xe1mci pracovn\xfdch hod\xedn)",recorded_by:"system"}),localStorage.setItem(l,"true")}await ue()}catch(e){console.warn("Auto check-in skipped:",e)}})()},[t,w,ue]),(0,s.useEffect)(()=>{const e=setInterval(()=>{ue()},3e4);return()=>clearInterval(e)},[ue]);const he=()=>{V(null),I(!0)},ge=i.filter(e=>{const t="all"===K||e.status===K,a=G.trim().toLowerCase(),r=""===a||[e.first_name,e.last_name,e.email,e.position,e.employee_id].filter(Boolean).some(e=>String(e).toLowerCase().includes(a));return t&&r}),pe=()=>X(new Set(ge.map(e=>e.id))),ye=()=>X(new Set),be=async e=>{if(0!==J.size)try{await Promise.all(Array.from(J).map(t=>U.hrService.updateEmployee(t,{status:e}))),d(t=>t.map(t=>J.has(t.id)?(0,r.A)((0,r.A)({},t),{},{status:e}):t)),ye()}catch(t){console.error("Chyba pri hromadnej zmene statusu zamestnancov:",t),alert("Chyba pri hromadnej zmene statusu zamestnancov")}},ke=async()=>{if(0!==J.size&&window.confirm("Naozaj chcete vymaza\u0165 ".concat(J.size," vybran\xfdch zamestnancov?")))try{await Promise.all(Array.from(J).map(e=>U.hrService.deleteEmployee(e))),d(e=>e.filter(e=>!J.has(e.id))),ye()}catch(e){console.error("Chyba pri hromadnom mazan\xed zamestnancov:",e),alert("Chyba pri hromadnom mazan\xed zamestnancov")}},ve=()=>{const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(a,"-").concat(r)},fe=e=>{const t=p.filter(t=>t.employee_id===e&&"pending"===t.status);return t.length>0?{hasPendingChanges:!0,pendingCount:t.length,latestChange:t.reduce((e,t)=>t.id>e.id?t:e)}:{hasPendingChanges:!1,pendingCount:0,latestChange:null}},je=()=>p.filter(e=>"pending"===e.status).length>0,we=()=>new Set(p.filter(e=>"pending"===e.status).map(e=>e.employee_id)).size;if(a)return(0,A.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,A.jsx)(B.A,{size:"lg",text:"Na\u010d\xedtavam HR dashboard..."})});return(0,A.jsxs)("div",{className:"space-y-6",children:["automatic-attendance"!==ce&&(0,A.jsx)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"HR Dashboard"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Spr\xe1va \u013eudsk\xfdch zdrojov a doch\xe1dzky"})]})}),"automatic-attendance"!==ce&&(0,A.jsx)("nav",{className:"bg-white dark:bg-dark-800 shadow rounded-lg",children:(0,A.jsx)("div",{className:"px-4",children:(0,A.jsx)("div",{className:"flex space-x-8",children:[{id:"overview",name:"Preh\u013ead",icon:y.A},{id:"employees",name:"Zamestnanci",icon:c.A},{id:"attendance",name:"Doch\xe1dzka",icon:R.A},{id:"attendance-overview",name:"Preh\u013ead doch\xe1dzky",icon:g.A},{id:"leave",name:"Dovolenky",icon:m.A},{id:"employee-cards",name:"Karty zamestnancov",icon:y.A},{id:"employment-relations",name:"Pracovn\xe9 pomery",icon:Z.A}].map(e=>(0,A.jsxs)("button",{onClick:()=>P(e.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center ".concat(D===e.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600"),children:[(0,A.jsx)(e.icon,{className:"w-5 h-5 mr-2"}),e.name]},e.id))})})}),(0,A.jsx)("div",{className:"mt-6",children:"automatic-attendance"===ce?(0,A.jsx)(re,{companyId:t,onBack:()=>me("overview")}):(0,A.jsxs)(A.Fragment,{children:["overview"===D&&(0,A.jsxs)("div",{className:"space-y-6",children:["overview"===ce&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,A.jsx)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 ".concat(je()?"border-red-500 hover:shadow-lg cursor-pointer":"border-blue-500 hover:shadow-lg cursor-pointer"," transition-all duration-200"),title:je()?"\u26a0\ufe0f Pozor - \u010cakaj\xface zmeny \xfadajov\n\n".concat(we()," ").concat(1===we()?"zamestnanec m\xe1":"zamestnanci maj\xfa"," nepotvrden\xe9 zmeny \xfadajov.\n\nKliknite pre zobrazenie zoznamu zamestnancov."):"Celkov\xfd po\u010det zamestnancov vo firme. Kliknite pre zobrazenie zoznamu zamestnancov.",onClick:()=>P("employees"),children:(0,A.jsx)("div",{className:"flex items-center justify-between",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"p-2 rounded-lg ".concat(je()?"bg-red-100 dark:bg-red-900":"bg-blue-100 dark:bg-blue-900"),children:(0,A.jsx)(c.A,{className:"w-6 h-6 ".concat(je()?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400")})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Celkovo zamestnancov"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null===u||void 0===u?void 0:u.employees.total_employees)||0}),(0,A.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[(0,A.jsxs)("span",{children:["Akt\xedvnych: ",(null===u||void 0===u?void 0:u.employees.active_employees)||0]}),je()&&(0,A.jsxs)("span",{className:"text-red-600 dark:text-red-400 animate-pulse",style:{animationDuration:"0.5s"},children:["Zmena: ",we()]})]})]})]})})}),(0,A.jsx)("button",{onClick:()=>me("present-today"),className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-green-500 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left w-full",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:(0,A.jsx)(E.A,{className:"w-6 h-6 text-green-600 dark:text-green-400"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Pr\xedtomn\xed dnes"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:k.length}),(0,A.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Me\u0161kanie: ",k.filter(e=>"late"===e.status).length]}),(0,A.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,A.jsx)("button",{onClick:()=>P("leave"),className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-yellow-500 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left w-full",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:(0,A.jsx)(M.A,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"\u010cakaj\xface dovolenky"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(null===u||void 0===u?void 0:u.leave_requests.pending_leave_requests)||0}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Na schv\xe1lenie"}),(0,A.jsx)("p",{className:"text-xs text-yellow-600 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,A.jsx)("button",{onClick:()=>me("automatic-attendance"),className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-purple-500 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left w-full",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:(0,A.jsx)(R.A,{className:"w-6 h-6 text-purple-600 dark:text-purple-400"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Automatick\xe1 doch\xe1dzka"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"\u26a1"}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Prepo\u010d\xedta\u0165 doch\xe1dzku"})]})]})}),(0,A.jsx)("button",{onClick:()=>me("absent-today"),className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-orange-500 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left w-full",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg",children:(0,A.jsx)(M.A,{className:"w-6 h-6 text-orange-600 dark:text-orange-400"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Nepr\xedtomn\xed dnes"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:f.length}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Dovolenka, PN, Absencia"}),(0,A.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Kliknite pre zobrazenie"})]})]})})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"R\xfdchle akcie"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,A.jsxs)("button",{onClick:he,className:"flex items-center justify-center p-4 border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[(0,A.jsx)(O.A,{className:"w-6 h-6 text-gray-400 mr-2"}),(0,A.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Prida\u0165 zamestnanca"})]}),(0,A.jsxs)("button",{onClick:()=>le(!0),className:"flex items-center justify-center p-4 border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[(0,A.jsx)(R.A,{className:"w-6 h-6 text-gray-400 mr-2"}),(0,A.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"Zaznamena\u0165 doch\xe1dzku"})]}),(0,A.jsxs)("button",{onClick:()=>me("select-employee-for-leave"),className:"flex items-center justify-center p-4 border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors",children:[(0,A.jsx)(m.A,{className:"w-6 h-6 text-gray-400 mr-2"}),(0,A.jsx)("span",{className:"text-gray-600 dark:text-gray-300",children:"\u017diados\u0165 o dovolenku"})]})]})]}),(0,A.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Najnov\u0161\xed zamestnanci"}),(0,A.jsx)("div",{className:"space-y-3",children:i.slice(0,5).map(e=>(0,A.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:[e.first_name," ",e.last_name]}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.position})]}),(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("active"===e.status?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200"),children:U.hrService.getStatusLabel(e.status)})]},e.id))})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"\u010cakaj\xface dovolenky"}),(0,A.jsxs)("div",{className:"space-y-3",children:[o.slice(0,5).map(e=>(0,A.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("p",{className:"font-medium text-gray-900 dark:text-white",children:[e.first_name," ",e.last_name]}),(0,A.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[U.hrService.getLeaveTypeLabel(e.leave_type)," \u2022 ",e.total_days," dn\xed"]})]}),(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200",children:"\u010cak\xe1"})]},e.id)),0===o.length&&(0,A.jsx)("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"\u017diadne \u010dakaj\xface \u017eiadosti o dovolenku"})]})]})]})]}),"present-today"===ce&&(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Pr\xedtomn\xed zamestnanci dnes"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Zamestnanci, ktor\xed s\xfa dnes v pr\xe1ci"})]}),(0,A.jsxs)("div",{className:"flex space-x-2",children:[(0,A.jsxs)("button",{onClick:ue,className:"px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/40 flex items-center",children:[(0,A.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Aktualizova\u0165"]}),(0,A.jsx)("button",{onClick:()=>me("overview"),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600",children:"Sp\xe4\u0165 na preh\u013ead"})]})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden",children:[(0,A.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-600",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Pr\xedtomn\xed dnes (",k.length,")"]}),(0,A.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[S&&(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,A.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,A.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,A.jsx)("span",{children:"Aktualizuje sa..."})]}),(0,A.jsxs)("span",{children:["Posledn\xe1 aktualiz\xe1cia: ",N.toLocaleTimeString("sk-SK")]})]})]})}),(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,A.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zamestnanec"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Poz\xedcia"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pr\xedchod"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),(0,A.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:k.length>0?k.map(e=>(0,A.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.first_name," ",e.last_name]}),(0,A.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.position}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.check_in?new Date(e.check_in).toLocaleTimeString("sk-SK",{hour:"2-digit",minute:"2-digit"}):"N/A"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("late"===e.status?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200"),children:"late"===e.status?"Me\u0161kanie":"Pr\xedtomn\xfd"})})]},e.id)):(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"\u017diadni pr\xedtomn\xed zamestnanci dnes"})})})]})})]})]}),"absent-today"===ce&&(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Nepr\xedtomn\xed zamestnanci dnes"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Zamestnanci na dovolenke, PN, absencii alebo in\xfdch d\xf4vodoch"})]}),(0,A.jsxs)("div",{className:"flex space-x-2",children:[(0,A.jsxs)("button",{onClick:ue,className:"px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/40 flex items-center",children:[(0,A.jsx)("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,A.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Aktualizova\u0165"]}),(0,A.jsx)("button",{onClick:()=>me("overview"),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600",children:"Sp\xe4\u0165 na preh\u013ead"})]})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden",children:[(0,A.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-600",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:["Nepr\xedtomn\xed dnes (",f.length,")"]}),(0,A.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[S&&(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,A.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,A.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,A.jsx)("span",{children:"Aktualizuje sa..."})]}),(0,A.jsxs)("span",{children:["Posledn\xe1 aktualiz\xe1cia: ",N.toLocaleTimeString("sk-SK")]})]})]})}),(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,A.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zamestnanec"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Poz\xedcia"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"D\xf4vod"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Obdobie"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),(0,A.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:f.length>0?f.map(e=>(0,A.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.first_name," ",e.last_name]}),(0,A.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.position}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.reason}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.period||"N/A"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("Dovolenka"===e.reason?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":"PN"===e.reason?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":"Pracovn\xfd pokoj"===e.reason?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200":"Absencia"===e.reason?"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200":"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200"),children:e.reason})})]},e.id)):(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"\u017diadni nepr\xedtomn\xed zamestnanci dnes"})})})]})})]})]})]}),"employees"===D&&(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex justify-between items-center",children:[(0,A.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Zamestnanci"}),(0,A.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,A.jsxs)("div",{className:"hidden md:flex items-center space-x-1",children:[(0,A.jsxs)("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Vybran\xe9: ",J.size]}),(0,A.jsx)("button",{onClick:pe,className:"px-3 py-2 text-sm border border-gray-300 dark:border-dark-600 rounded-md bg-white dark:bg-dark-700 hover:bg-gray-50 dark:hover:bg-dark-600",children:"Vybra\u0165 zobrazen\xe9"}),(0,A.jsx)("button",{onClick:ye,className:"px-3 py-2 text-sm border border-gray-300 dark:border-dark-600 rounded-md bg-white dark:bg-dark-700 hover:bg-gray-50 dark:hover:bg-dark-600",children:"Zru\u0161i\u0165 v\xfdber"}),(0,A.jsx)("button",{onClick:()=>be("active"),disabled:0===J.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===J.size?"bg-green-100 text-green-300 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"Akt\xedvny"}),(0,A.jsx)("button",{onClick:()=>be("inactive"),disabled:0===J.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===J.size?"bg-gray-100 text-gray-300 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"),children:"Neakt\xedvny"}),(0,A.jsx)("button",{onClick:()=>be("terminated"),disabled:0===J.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===J.size?"bg-red-100 text-red-300 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"),children:"Ukon\u010den\xfd"}),(0,A.jsx)("button",{onClick:()=>be("on_leave"),disabled:0===J.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===J.size?"bg-yellow-100 text-yellow-300 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"),children:"Na dovolenke"}),(0,A.jsx)("button",{onClick:ke,disabled:0===J.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===J.size?"bg-red-100 text-red-300 cursor-not-allowed":"bg-red-700 text-white hover:bg-red-800"),children:"Vymaza\u0165 vybran\xfdch"})]}),(0,A.jsxs)("button",{onClick:he,className:"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors flex items-center",children:[(0,A.jsx)(x.A,{className:"w-5 h-5 mr-2"}),"Prida\u0165 zamestnanca"]})]})]}),(0,A.jsx)("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:(0,A.jsxs)("div",{className:"flex",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,A.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Inform\xe1cia o spr\xe1ve zamestnancov"}),(0,A.jsxs)("div",{className:"mt-2 text-sm text-blue-700 dark:text-blue-300",children:[(0,A.jsxs)("p",{children:["\u2022 ",(0,A.jsx)("strong",{children:"Zamestnanci:"})," Tu prid\xe1vate z\xe1kladn\xe9 \xfadaje a vytv\xe1rate prihlasovacie \xfa\u010dty"]}),(0,A.jsxs)("p",{children:["\u2022 ",(0,A.jsx)("strong",{children:"Karty zamestnancov:"})," Tu dop\u013a\u0148ate detailn\xe9 person\xe1lne \xfadaje pre registrovan\xfdch zamestnancov"]}),(0,A.jsxs)("p",{children:["\u2022 ",(0,A.jsx)("strong",{children:"Pracovn\xe9 pomery:"})," Tu vytv\xe1rate pracovn\xe9 pomery pre vybran\xfdch zamestnancov"]})]})]})]})}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden",children:[(0,A.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-600 flex flex-col md:flex-row md:items-center md:justify-between",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,A.jsx)("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Filter:"}),(0,A.jsxs)("button",{onClick:()=>H("all"),className:"px-3 py-1 text-sm rounded-md ".concat("all"===K?"bg-blue-600 text-white":"bg-white dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-600 border border-gray-300 dark:border-dark-600"),children:["V\u0161etci (",i.length,")"]}),(0,A.jsxs)("button",{onClick:()=>H("active"),className:"px-3 py-1 text-sm rounded-md ".concat("active"===K?"bg-green-600 text-white":"bg-white dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-600 border border-gray-300 dark:border-dark-600"),children:["Akt\xedvni (",i.filter(e=>"active"===e.status).length,")"]}),(0,A.jsxs)("button",{onClick:()=>H("inactive"),className:"px-3 py-1 text-sm rounded-md ".concat("inactive"===K?"bg-gray-600 text-white":"bg-white dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-600 border border-gray-300 dark:border-dark-600"),children:["Neakt\xedvni (",i.filter(e=>"inactive"===e.status).length,")"]}),(0,A.jsxs)("button",{onClick:()=>H("terminated"),className:"px-3 py-1 text-sm rounded-md ".concat("terminated"===K?"bg-red-600 text-white":"bg-white dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-600 border border-gray-300 dark:border-dark-600"),children:["Ukon\u010den\xed (",i.filter(e=>"terminated"===e.status).length,")"]}),(0,A.jsxs)("button",{onClick:()=>H("on_leave"),className:"px-3 py-1 text-sm rounded-md ".concat("on_leave"===K?"bg-yellow-600 text-white":"bg-white dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-600 border border-gray-300 dark:border-dark-600"),children:["Na dovolenke (",i.filter(e=>"on_leave"===e.status).length,")"]})]}),(0,A.jsx)("div",{className:"mt-3 md:mt-0",children:(0,A.jsx)("input",{type:"text",value:G,onChange:e=>W(e.target.value),placeholder:"H\u013eada\u0165 meno, email, poz\xedciu, ID...",className:"w-full md:w-80 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md bg-white dark:bg-dark-700 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-1 focus:ring-blue-500"})})]}),(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,A.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3",children:(0,A.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",onChange:e=>{e.target.checked?pe():ye()}})}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zamestnanec"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Poz\xedcia"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Kontakt"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"D\xe1tum n\xe1stupu"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Typ doch\xe1dzky"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Akcie"})]})}),(0,A.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:ge.map(e=>(0,A.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:J.has(e.id),onChange:()=>{return t=e.id,void X(e=>{const a=new Set(e);return a.has(t)?a.delete(t):a.add(t),a});var t}})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.first_name," ",e.last_name]}),(0,A.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["ID: ",e.employee_id||"N/A"]})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.position||"N/A"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.email}),(0,A.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.phone||"Bez telef\xf3nu"})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.employment_start_date?new Date(e.employment_start_date).toLocaleDateString("sk-SK"):"N/A"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("automatic"===e.attendance_mode?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":"manual"===e.attendance_mode?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200"),children:"automatic"===e.attendance_mode?"Automatick\xe1":"manual"===e.attendance_mode?"Manu\xe1lna":"Nenastaven\xe9"})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("active"===e.status?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"inactive"===e.status?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"),children:U.hrService.getStatusLabel(e.status)})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,A.jsxs)("div",{className:"flex space-x-2",children:[(0,A.jsxs)("button",{onClick:()=>(e=>{V(e),I(!0)})(e),className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 flex items-center",title:"Upravi\u0165 z\xe1kladn\xe9 \xfadaje",children:[(0,A.jsx)(L.A,{className:"w-4 h-4 mr-1"}),"Upravi\u0165"]}),(0,A.jsx)("button",{onClick:()=>(async e=>{try{const a=ve(),r=new Date,s=String(r.getHours()).padStart(2,"0"),n=String(r.getMinutes()).padStart(2,"0"),i="".concat(s,":").concat(n,":00");await U.hrService.addAttendance({employee_id:e.id,company_id:t,date:a,check_in:"".concat(a,"T").concat(i),check_out:null,total_hours:0,break_minutes:0,status:"present",notes:"R\xfdchly pr\xedchod"}),await ue()}catch(a){console.error("Chyba pri r\xfdchlom pr\xedchode:",a),alert("Chyba pri r\xfdchlom pr\xedchode")}})(e),className:"text-green-600 hover:text-green-800 dark:text-green-400 dark:hover:text-green-300",title:"R\xfdchly pr\xedchod (teraz)",children:"Pr\xedchod"}),(0,A.jsx)("button",{onClick:()=>(async e=>{try{const a=ve(),r=await U.hrService.getAttendance(t,e.id,a,a),s=Array.isArray(r)?r[0]:null;if(!s||!s.check_in)return void alert("Najprv je potrebn\xe9 zaznamena\u0165 pr\xedchod.");const n=s.check_in,i=new Date,d=new Date(n),o=i.getTime()-d.getTime(),l=Math.max(0,o/36e5),c=0,m=Math.max(0,l-c/60),x=String(i.getHours()).padStart(2,"0"),u=String(i.getMinutes()).padStart(2,"0"),h="".concat(x,":").concat(u,":00");await U.hrService.addAttendance({employee_id:e.id,company_id:t,date:a,check_in:n,check_out:"".concat(a,"T").concat(h),total_hours:Math.round(100*m)/100,break_minutes:c,status:"present",notes:"R\xfdchly odchod"}),await ue()}catch(a){console.error("Chyba pri r\xfdchlom odchode:",a),alert("Chyba pri r\xfdchlom odchode")}})(e),className:"text-orange-600 hover:text-orange-800 dark:text-orange-400 dark:hover:text-orange-300",title:"R\xfdchly odchod (teraz)",children:"Odchod"}),(0,A.jsxs)("button",{onClick:()=>(e=>{V(e),P("employee-cards")})(e),className:"".concat(fe(e.id).hasPendingChanges?"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300"," flex items-center"),title:(()=>{const t=fe(e.id);var a,r;return t.hasPendingChanges?"\ud83d\udd04 Zamestnanec m\xe1 ".concat(t.pendingCount," \u010dakaj\xfacich zmien \xfadajov\n\n\ud83d\udcdd Posledn\xe1 zmena: ").concat(null===(a=t.latestChange)||void 0===a?void 0:a.field_name,"\n\ud83c\udd95 Nov\xe1 hodnota: ").concat(null===(r=t.latestChange)||void 0===r?void 0:r.new_value,"\n\nKliknite pre zobrazenie personal card a schv\xe1lenie zmien."):"Kliknite pre zobrazenie personal card"})(),children:[(0,A.jsx)(y.A,{className:"w-4 h-4 mr-1"}),"Personal Card"]})]})})]},e.id))})]})}),0===i.length&&(0,A.jsx)("div",{className:"text-center py-8",children:(0,A.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"\u017diadni zamestnanci"})})]})]}),"attendance"===D&&(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex justify-between items-center",children:[(0,A.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Doch\xe1dzka"}),(0,A.jsx)("button",{onClick:()=>le(!0),className:"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors",children:"Zaznamena\u0165 doch\xe1dzku"})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Doch\xe1dzka dnes"}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,A.jsx)("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)(E.A,{className:"w-8 h-8 text-green-600 dark:text-green-400"}),(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Pr\xedtomn\xed"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:k.length})]})]})}),(0,A.jsx)("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)(M.A,{className:"w-8 h-8 text-red-600 dark:text-red-400"}),(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Nepr\xedtomn\xed"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-red-900 dark:text-red-100",children:f.length})]})]})}),(0,A.jsx)("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)(R.A,{className:"w-8 h-8 text-yellow-600 dark:text-yellow-400"}),(0,A.jsxs)("div",{className:"ml-3",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Me\u0161kanie"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-yellow-900 dark:text-yellow-100",children:k.filter(e=>"late"===e.status).length})]})]})})]}),(0,A.jsxs)("div",{className:"mt-6",children:[(0,A.jsx)("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"V\u0161etci akt\xedvni zamestnanci dnes"}),(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,A.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zamestnanec"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Poz\xedcia"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Typ doch\xe1dzky"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status dnes"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Pr\xedchod"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Odchod"})]})}),(0,A.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:w.map(e=>(0,A.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"font-medium",children:[e.first_name," ",e.last_name]}),(0,A.jsx)("div",{className:"text-gray-500 dark:text-gray-400",children:e.email})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.position}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("automatic"===e.attendance_mode?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":"manual"===e.attendance_mode?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200"),children:"automatic"===e.attendance_mode?"Automatick\xe1":"manual"===e.attendance_mode?"Manu\xe1lna":"Nenastaven\xe9"})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("present"===e.status_type?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"late"===e.status_type?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"absent"===e.status_type?"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200":"leave"===e.status_type?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":"holiday"===e.status_type?"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200":"weekend"===e.status_type?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200":"bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200"),children:"present"===e.status_type?"Pr\xedtomn\xfd":"late"===e.status_type?"Me\u0161kanie":"absent"===e.status_type?"Absencia":"leave"===e.status_type?"Dovolenka/PN":"holiday"===e.status_type||"weekend"===e.status_type?"Pracovn\xfd pokoj":e.status_type}),e.status_description&&(0,A.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e.status_description})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"present"!==e.status_type&&"late"!==e.status_type||!e.check_in?"-":ne(e.check_in)}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"present"!==e.status_type&&"late"!==e.status_type||!e.check_out?"-":ne(e.check_out)})]},e.id))})]})})]})]})]}),"attendance-overview"===D&&(0,A.jsx)(te.A,{companyId:t,isCompanyView:!0}),"leave"===D&&(0,A.jsxs)("div",{className:"space-y-6",children:["overview"===ce&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"flex items-center justify-between",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Spr\xe1va dovoleniek"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Spravujte \u017eiadosti o dovolenku"})]})}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,A.jsx)("button",{onClick:()=>me("leave-requests"),className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-yellow-500 hover:shadow-lg transition-all duration-200 text-left",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:(0,A.jsx)(M.A,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"\u010cakaj\xface \u017eiadosti"}),(0,A.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(null===u||void 0===u?void 0:u.leave_requests.pending_leave_requests)||0," \u017eiadost\xed \u010dak\xe1 na schv\xe1lenie"]})]})]})}),(0,A.jsx)("button",{onClick:()=>me("select-employee-for-leave"),className:"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-blue-500 hover:shadow-lg transition-all duration-200 text-left",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:(0,A.jsx)(x.A,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Nov\xe1 \u017eiados\u0165"}),(0,A.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Vytvori\u0165 \u017eiados\u0165 o dovolenku za zamestnanca"})]})]})})]})]}),"select-employee-for-leave"===ce&&(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Vytvori\u0165 \u017eiados\u0165 o dovolenku"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"Vyberte zamestnanca, za ktor\xe9ho chcete vytvori\u0165 \u017eiados\u0165 o dovolenku"})]}),(0,A.jsx)("button",{onClick:()=>me("overview"),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600",children:"Sp\xe4\u0165 na preh\u013ead"})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden",children:[(0,A.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-600",children:(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Zamestnanci"})}),(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,A.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zamestnanec"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Poz\xedcia"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Akcie"})]})}),(0,A.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:i.map(e=>(0,A.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.first_name," ",e.last_name]}),(0,A.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.email})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.position}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("active"===e.status?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"inactive"===e.status?"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200"),children:U.hrService.getStatusLabel(e.status)})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,A.jsx)("button",{onClick:()=>{de(e),ae(!0),me("overview")},className:"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 font-medium",children:"Vytvori\u0165 \u017eiados\u0165"})})]},e.id))})]})}),0===i.length&&(0,A.jsx)("div",{className:"text-center py-8",children:(0,A.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"\u017diadni zamestnanci"})})]})]}),"leave-requests"===ce&&(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsx)("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"\u010cakaj\xface \u017eiadosti o dovolenku"}),(0,A.jsx)("p",{className:"text-gray-600 dark:text-gray-300",children:"\u017diadosti \u010dakaj\xface na schv\xe1lenie"})]}),(0,A.jsx)("button",{onClick:()=>me("overview"),className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600",children:"Sp\xe4\u0165 na preh\u013ead"})]}),(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden",children:[(0,A.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-dark-600",children:(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"\u017diadosti \u010dakaj\xface na schv\xe1lenie"})}),(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,A.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Zamestnanec"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Typ"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Obdobie"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Dn\xed"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Akcie"})]})}),(0,A.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:o.filter(e=>"pending"===e.status).map(e=>(0,A.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsxs)("div",{children:[(0,A.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.first_name," ",e.last_name]}),(0,A.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.employee_id_code})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:U.hrService.getLeaveTypeLabel(e.leave_type)}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{children:U.hrService.formatDate(e.start_date)}),(0,A.jsxs)("div",{className:"text-gray-500 dark:text-gray-400",children:["do ",U.hrService.formatDate(e.end_date)]})]})}),(0,A.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[e.total_days," dn\xed"]}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,A.jsxs)("div",{className:"flex space-x-2",children:[(0,A.jsx)("button",{onClick:()=>(async e=>{try{await U.hrService.updateLeaveRequestStatus(e,"approved",1),xe(),alert("\u017diados\u0165 o dovolenku bola schv\xe1len\xe1")}catch(t){console.error("Chyba pri schva\u013eovan\xed dovolenky:",t),alert("Chyba pri schva\u013eovan\xed dovolenky")}})(e.id),className:"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 font-medium",children:"Schv\xe1li\u0165"}),(0,A.jsx)("button",{onClick:()=>(async e=>{try{await U.hrService.updateLeaveRequestStatus(e,"rejected",1),xe(),alert("\u017diados\u0165 o dovolenku bola zamietnut\xe1")}catch(t){console.error("Chyba pri zamietan\xed dovolenky:",t),alert("Chyba pri zamietan\xed dovolenky")}})(e.id),className:"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 font-medium",children:"Zamietnu\u0165"})]})})]},e.id))})]})}),0===o.filter(e=>"pending"===e.status).length&&(0,A.jsx)("div",{className:"text-center py-8",children:(0,A.jsx)("p",{className:"text-gray-500 dark:text-gray-400",children:"\u017diadne \u010dakaj\xface \u017eiadosti o dovolenku"})})]})]})]}),"employee-cards"===D&&(0,A.jsx)($,{userEmail:"admin@portal.sk",companyId:t,onBack:()=>P("overview"),selectedEmployeeId:null===T||void 0===T?void 0:T.id}),"employment-relations"===D&&(0,A.jsx)(ee,{companyId:t,userEmail:"admin@portal.sk",onBack:()=>P("overview")})]})}),(0,A.jsx)(q,{isOpen:F,onClose:()=>I(!1),employee:T,companyId:t,onSuccess:()=>{I(!1),xe()}}),(0,A.jsx)(Y.A,{isOpen:Q,onClose:()=>ae(!1),companyId:t,employeeId:(null===ie||void 0===ie?void 0:ie.id)||0,employeeName:ie?"".concat(null===ie||void 0===ie?void 0:ie.first_name," ").concat(null===ie||void 0===ie?void 0:ie.last_name):"Nezvolen\xfd zamestnanec",onSuccess:()=>{ae(!1),xe()}}),(0,A.jsx)(se,{isOpen:oe,onClose:()=>le(!1),companyId:t,onSuccess:()=>{le(!1),xe()}})]})};var de=a(76456),oe=a(38372);const le=new class{async getPayrollPeriods(e,t){const a=t?"?year=".concat(t):"";return K.apiService.get("/payroll/periods/".concat(e).concat(a))}async getCurrentPeriod(e){return K.apiService.get("/payroll/periods/".concat(e,"/current"))}async closePayrollPeriod(e,t,a,r){return K.apiService.post("/payroll/periods/".concat(e,"/close"),{year:t,month:a,closedBy:r})}async openPayrollPeriod(e,t,a){return K.apiService.post("/payroll/periods/".concat(e,"/open"),{year:t,month:a})}async checkPeriodStatus(e,t,a){return K.apiService.get("/payroll/periods/".concat(e,"/check/").concat(t,"/").concat(a))}getMonthName(e){return["Janu\xe1r","Febru\xe1r","Marec","Apr\xedl","M\xe1j","J\xfan","J\xfal","August","September","Okt\xf3ber","November","December"][e-1]||""}getPeriodLabel(e,t){return"".concat(this.getMonthName(t)," ").concat(e)}isCurrentPeriod(e,t){const a=new Date;return e===a.getFullYear()&&t===a.getMonth()+1}canClosePeriod(e,t){const a=new Date,r=a.getFullYear(),s=a.getMonth()+1;return e<r||e===r&&t<s}},ce=e=>{let{isOpen:t,onClose:a,companyId:r,userEmail:n,userRole:i="user"}=e;const[d,o]=(0,s.useState)([]),[l,c]=(0,s.useState)(!0),[x,u]=(0,s.useState)((new Date).getFullYear()),[h,g]=(0,s.useState)(null),[p,y]=(0,s.useState)(!1),b=async()=>{try{c(!0);const e=await le.getPayrollPeriods(r,x);o(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed mzdov\xfdch obdob\xed:",e)}finally{c(!1)}};(0,s.useEffect)(()=>{t&&b()},[t,x]);const k="admin"===i||"accountant"===i;return t?(0,A.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,A.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden",children:[(0,A.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600",children:[(0,A.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,A.jsx)(m.A,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),(0,A.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"\xda\u010dtovn\xe9 obdobia"})]}),(0,A.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,A.jsx)(V.A,{className:"w-6 h-6"})})]}),(0,A.jsxs)("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[(0,A.jsxs)("div",{className:"mb-6",children:[(0,A.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rok"}),(0,A.jsx)("select",{value:x,onChange:e=>u(Number(e.target.value)),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:(()=>{const e=(new Date).getFullYear(),t=[];for(let a=e-2;a<=e+1;a++)t.push(a);return t})().map(e=>(0,A.jsx)("option",{value:e,children:e},e))})]}),l?(0,A.jsxs)("div",{className:"text-center py-8",children:[(0,A.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,A.jsx)("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:"Na\u010d\xedtavam..."})]}):(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-dark-600",children:[(0,A.jsx)("thead",{className:"bg-gray-50 dark:bg-dark-700",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Obdobie"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Uzatvoren\xe9"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Akcie"})]})}),(0,A.jsx)("tbody",{className:"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600",children:0===d.length?(0,A.jsx)("tr",{children:(0,A.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"\u017diadne mzdov\xe9 obdobia pre vybran\xfd rok"})}):d.map(e=>(0,A.jsxs)("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700",children:[(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("div",{className:"flex items-center",children:(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:le.getPeriodLabel(e.year,e.month)}),le.isCurrentPeriod(e.year,e.month)&&(0,A.jsx)("div",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Aktu\xe1lne obdobie"})]})})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.is_closed?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400"),children:e.is_closed?"Uzatvoren\xe9":"Otvoren\xe9"})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:e.closed_at?(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{children:new Date(e.closed_at).toLocaleDateString("sk-SK")}),(0,A.jsx)("div",{className:"text-xs",children:e.closed_by})]}):"-"}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:k?(0,A.jsxs)("button",{onClick:()=>(async e=>{if(k)try{if(y(!0),e.is_closed)await le.openPayrollPeriod(r,e.year,e.month);else{if(!le.canClosePeriod(e.year,e.month))return void alert("Nie je mo\u017en\xe9 uzatvori\u0165 aktu\xe1lne alebo bud\xface obdobie!");await le.closePayrollPeriod(r,e.year,e.month,n)}await b()}catch(t){console.error("Chyba pri zmene stavu obdobia:",t),alert("Chyba pri zmene stavu obdobia")}finally{y(!1)}else alert("Nem\xe1te opr\xe1vnenie na \xfapravu mzdov\xfdch obdob\xed. Kontaktujte administr\xe1tora alebo \xfa\u010dtovn\xedka.")})(e),disabled:p||!e.is_closed&&!le.canClosePeriod(e.year,e.month),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md ".concat(e.is_closed?"text-blue-700 bg-blue-100 hover:bg-blue-200 dark:text-blue-400 dark:bg-blue-900/20 dark:hover:bg-blue-900/30":"text-red-700 bg-red-100 hover:bg-red-200 dark:text-red-400 dark:bg-red-900/20 dark:hover:bg-red-900/30"," disabled:opacity-50 disabled:cursor-not-allowed"),children:[p?(0,A.jsx)("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-current mr-1"}):e.is_closed?(0,A.jsx)(de.A,{className:"w-3 h-3 mr-1"}):(0,A.jsx)(oe.A,{className:"w-3 h-3 mr-1"}),e.is_closed?"Odomkn\xfa\u0165":"Uzatvori\u0165"]}):(0,A.jsx)("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Len na zobrazenie"})})]},e.id))})]})})]}),(0,A.jsxs)("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-dark-600",children:[(0,A.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["* M\xf4\u017eete uzatvori\u0165 len minul\xe9 mesiace",!k&&(0,A.jsx)("span",{className:"block mt-1 text-orange-600",children:"** Len administr\xe1tori a \xfa\u010dtovn\xedci m\xf4\u017eu upravova\u0165 obdobia"})]}),(0,A.jsx)("button",{onClick:a,className:"px-4 py-2 bg-gray-300 dark:bg-dark-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-400 dark:hover:bg-dark-500",children:"Zavrie\u0165"})]})]})}):null};var me=a(2460);const xe=e=>{let{company:t,onClose:a,userEmail:b,userRole:k="company"}=e;const v=(0,n.Zp)(),[f,j]=(0,s.useState)("overview"),[w,_]=(0,s.useState)([]),[N,z]=(0,s.useState)(!0),[S,C]=(0,s.useState)([]),[E,M]=(0,s.useState)(!0),[,R]=(0,s.useState)(0),[O,L]=(0,s.useState)({receivedUnreadCount:0,sentUnreadCount:0,totalUnreadCount:0}),[Z,B]=(0,s.useState)([]),[V,H]=(0,s.useState)(!0),[q,Y]=(0,s.useState)([]),[G,W]=(0,s.useState)(!0),[J,X]=(0,s.useState)(!1),[$,Q]=(0,s.useState)(null),[ee,te]=(0,s.useState)(!1),[ae,re]=(0,s.useState)(""),[se,ne]=(0,s.useState)(!1),de=(0,s.useCallback)(async()=>{try{const e=await K.apiService.getCompanyUnreadCount(t.id);R(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed po\u010dtu nepre\u010d\xedtan\xfdch spr\xe1v pre firmu:",e)}},[t.id]),oe=(0,s.useCallback)(async()=>{try{const e=await K.apiService.getCompanyUnreadCounts(t.id);L(e),R(e.totalUnreadCount)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed rozl\xed\u0161en\xfdch po\u010dtov spr\xe1v pre firmu:",e)}},[t.id]),le=(0,s.useCallback)(async()=>{try{z(!0);const e=(await U.hrService.getEmployees(t.id)).map(e=>({id:e.id.toString(),name:"".concat(e.first_name," ").concat(e.last_name),email:e.email,role:e.position,department:e.department||"Ne\u0161pecifikovan\xe9"}));_(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed zamestnancov:",e),_([])}finally{z(!1)}},[t.id]),xe=()=>{Q(null),X(!0)},ue=e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},he={totalFiles:Z.length,documentFiles:Z.filter(e=>"documents"===e.category).length,invoiceFiles:Z.filter(e=>"invoices"===e.category).length,contractFiles:Z.filter(e=>"contracts"===e.category).length,totalTasks:q.length,pendingTasks:q.filter(e=>"pending"===e.status).length,completedTasks:q.filter(e=>"completed"===e.status).length,totalInvoices:S.length,unpaidInvoices:S.filter(e=>{var t,a;const r=e.kc_likv&&parseFloat(e.kc_likv)>0||"unpaid"===e.status||"overdue"===e.status,s=(null===(t=e.supplier_name)||void 0===t?void 0:t.includes("DIVIDENDA"))||(null===(a=e.supplier_name)||void 0===a?void 0:a.includes("36543039"));return r&&s}).length,totalAmount:S.filter(e=>{var t,a;const r=e.kc_likv&&parseFloat(e.kc_likv)>0||"unpaid"===e.status||"overdue"===e.status,s=(null===(t=e.supplier_name)||void 0===t?void 0:t.includes("DIVIDENDA"))||(null===(a=e.supplier_name)||void 0===a?void 0:a.includes("36543039"));return r&&s}).reduce((e,t)=>e+(parseFloat(t.kc_likv)||parseFloat(t.total_amount)||0),0),totalFileSize:Z.reduce((e,t)=>e+t.file_size,0)};(0,s.useEffect)(()=>{(async()=>{try{H(!0),W(!0),M(!0);const e=await K.apiService.getCompanyFiles(t.id);B(e);const a=await K.apiService.getCompanyTasks(t.id),r=await me.B.getReceivedInvoices(t.id,{limit:1e3});C(r);const s=a.map(e=>({id:e.id.toString(),title:e.title,description:e.description||"",status:e.status,priority:e.priority,assignedTo:e.assigned_to,dueDate:e.due_date||"",createdAt:e.created_at,createdBy:e.created_by,category:"other"}));console.log("CompanyDashboard: Konvertovan\xe9 \xfalohy:",s),Y(s),await oe(),await le()}catch(e){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t:",e),console.error("Error details:",e)}finally{H(!1),W(!1),M(!1)}})()},[t.id,de,oe,le]),(0,s.useEffect)(()=>{const e=setInterval(()=>{oe()},3e4);return()=>clearInterval(e)},[oe]);return(0,A.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,A.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,A.jsx)("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:(0,A.jsxs)("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[(0,A.jsx)("li",{className:"inline-flex items-center",children:(0,A.jsxs)("button",{onClick:a,className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-primary-600",children:[(0,A.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,A.jsx)("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),"Dashboard"]})}),(0,A.jsx)("li",{children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,A.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,A.jsx)("span",{className:"ml-1 text-sm font-medium text-gray-500 md:ml-2",children:t.name})]})})]})}),(0,A.jsx)("div",{className:"mb-6",children:(0,A.jsxs)("div",{className:"flex items-center justify-between",children:[(0,A.jsxs)("div",{children:[(0,A.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:[t.name," - Dashboard"]}),(0,A.jsxs)("p",{className:"text-gray-600",children:["I\u010cO: ",t.ico," | OR: ",t.business_registry]})]}),(0,A.jsx)("div",{className:"text-right",children:(0,A.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg px-4 py-2",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Akt\xedvna firma"}),(0,A.jsx)("p",{className:"text-xs text-blue-600",children:t.name})]})})]})}),(0,A.jsx)("div",{className:"border-b border-gray-200 mb-6",children:(0,A.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"overview",name:"Preh\u013ead",icon:g.A},{id:"tasks",name:"\xdalohy",icon:d.A},{id:"files",name:"S\xfabory",icon:i.A},{id:"dropbox",name:"Dropbox",icon:p.A},{id:"hr",name:"HR",icon:c.A},{id:"accountants",name:"\xda\u010dtovn\xedci",icon:u.A},{id:"accounting",name:"\xda\u010dtovn\xedctvo",icon:y.A},{id:"messages",name:"Spr\xe1vy",icon:l.A}].map(e=>{const a=e.icon;return(0,A.jsxs)("button",{onClick:()=>{if("accounting"===e.id){try{localStorage.setItem("selectedCompanyId",String(t.id))}catch(a){}v("/accounting")}else j(e.id)},className:"py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ".concat(f===e.id?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,A.jsx)(a,{className:"h-5 w-5"}),(0,A.jsx)("span",{children:e.name})]},e.id)})})}),(0,A.jsxs)("div",{className:"mb-6",children:["overview"===f&&(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,A.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)(i.A,{className:"h-8 w-8 text-blue-500"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"S\xfabory"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:he.totalFiles}),(0,A.jsxs)("p",{className:"text-sm text-gray-500",children:[he.documentFiles," dokumentov"]})]})]})}),(0,A.jsx)("button",{onClick:()=>j("tasks"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)(d.A,{className:"h-8 w-8 text-green-500"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"\xdalohy"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:he.totalTasks}),(0,A.jsxs)("p",{className:"text-sm text-gray-500",children:[he.pendingTasks," \u010dakaj\xfacich"]}),(0,A.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,A.jsx)("button",{onClick:()=>v("/accounting/received-invoices?filter=dividenda"),className:"bg-white dark:bg-dark-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)(o.A,{className:"h-8 w-8 text-yellow-500"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Nezaplaten\xe9 fakt\xfary"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:he.unpaidInvoices}),(0,A.jsxs)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[he.totalAmount.toFixed(2)," \u20ac celkovo"]}),(0,A.jsx)("p",{className:"text-xs text-yellow-600 mt-1",children:"DIVIDENDA s.r.o. - kliknite pre zobrazenie"})]})]})}),(0,A.jsx)("button",{onClick:()=>j("messages"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)(l.A,{className:"h-8 w-8 text-purple-500"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Spr\xe1vy"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:O.totalUnreadCount}),(0,A.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,A.jsxs)("div",{children:["Prijat\xe9: ",O.receivedUnreadCount]}),(0,A.jsxs)("div",{children:["Odoslan\xe9: ",O.sentUnreadCount]})]}),(0,A.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"Kliknite pre zobrazenie"})]})]})})]}),(0,A.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,A.jsx)("button",{onClick:()=>j("hr"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)(c.A,{className:"h-8 w-8 text-orange-500"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"HR, Personalistika a mzdy"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"\ud83d\udc65"}),(0,A.jsx)("p",{className:"text-sm text-gray-500",children:"Spr\xe1va \u013eudsk\xfdch zdrojov"}),(0,A.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,A.jsx)("button",{onClick:()=>j("tasks"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)(d.A,{className:"h-8 w-8 text-green-500"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"\xdalohy"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:he.totalTasks}),(0,A.jsxs)("p",{className:"text-sm text-gray-500",children:[he.pendingTasks," \u010dakaj\xfacich"]}),(0,A.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,A.jsx)("button",{onClick:()=>j("files"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)(i.A,{className:"h-8 w-8 text-indigo-500"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"S\xfabory"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:he.totalFiles}),(0,A.jsxs)("p",{className:"text-sm text-gray-500",children:[ue(he.totalFileSize)," celkovo"]}),(0,A.jsx)("p",{className:"text-xs text-indigo-600 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,A.jsx)("button",{onClick:()=>ne(!0),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"flex-shrink-0",children:(0,A.jsx)(m.A,{className:"h-8 w-8 text-purple-500"})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"\xda\u010dtovn\xe9 obdobie"}),(0,A.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"\ud83d\udcc5"}),(0,A.jsx)("p",{className:"text-sm text-gray-500",children:"Mzdov\xe9 obdobia"}),(0,A.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"Kliknite pre zobrazenie"})]})]})})]})]}),"tasks"===f&&(console.log("CompanyDashboard: renderTasks - loadingTasks:",G,"tasks.length:",q.length),(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex justify-between items-center",children:[(0,A.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\xdalohy"}),(0,A.jsxs)("button",{onClick:xe,className:"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 flex items-center",children:[(0,A.jsx)(x.A,{className:"h-5 w-5 mr-2"}),"Prida\u0165 \xfalohu"]})]}),G?(0,A.jsxs)("div",{className:"text-center py-12",children:[(0,A.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,A.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam \xfalohy..."})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(e=>{return(0,A.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[(0,A.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,A.jsxs)("div",{className:"flex-1",children:[(0,A.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.title}),(0,A.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,A.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,A.jsx)(m.A,{className:"h-4 w-4 mr-1"}),e.dueDate]}),(0,A.jsxs)("div",{className:"flex items-center text-sm text-gray-500 mt-1",children:[(0,A.jsx)(u.A,{className:"h-4 w-4 mr-1"}),e.assignedTo]})]}),(0,A.jsxs)("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[(a=e.status,(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",in_progress:"bg-blue-100 text-blue-800",cancelled:"bg-gray-100 text-gray-800",unpaid:"bg-red-100 text-red-800",paid:"bg-green-100 text-green-800",overdue:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-800"),children:{pending:"\u010cakaj\xface",completed:"Dokon\u010den\xe9",in_progress:"V spracovan\xed",cancelled:"Zru\u0161en\xe9",unpaid:"Nezaplaten\xe9",paid:"Zaplaten\xe9",overdue:"Po splatnosti"}[a]||a})),(t=e.priority,(0,A.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({low:"bg-gray-100 text-gray-800",medium:"bg-blue-100 text-blue-800",high:"bg-orange-100 text-orange-800",urgent:"bg-red-100 text-red-800"}[t]||"bg-gray-100 text-gray-800"),children:{low:"N\xedzka",medium:"Stredn\xe1",high:"Vysok\xe1",urgent:"Urgentn\xe1"}[t]||t}))]})]}),(0,A.jsx)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:(0,A.jsxs)("div",{className:"flex space-x-2",children:[(0,A.jsx)("button",{onClick:()=>(e=>{Q(e),X(!0)})(e),className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"Upravi\u0165"}),(0,A.jsx)("button",{onClick:()=>(async e=>{try{await K.apiService.deleteTask(parseInt(e)),Y(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Chyba pri mazan\xed \xfalohy:",t)}})(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Vymaza\u0165"})]})})]},e.id);var t,a})}),0===q.length&&(0,A.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[(0,A.jsx)(d.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,A.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"\u017diadne \xfalohy"}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Zatia\u013e neboli vytvoren\xe9 \u017eiadne \xfalohy pre t\xfato firmu."}),(0,A.jsx)("button",{onClick:xe,className:"mt-4 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700",children:"Vytvori\u0165 prv\xfa \xfalohu"})]})]})]})),"files"===f&&(0,A.jsxs)("div",{children:[(console.log("CompanyDashboard: Rendering files tab, loadingFiles:",V,"files.length:",Z.length),null),V?(0,A.jsxs)("div",{className:"text-center py-12",children:[(0,A.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,A.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam s\xfabory..."})]}):(0,A.jsx)(D,{files:Z,onFileUpload:e=>{B(t=>[e,...t])},onFileDelete:async e=>{try{await K.apiService.deleteFile(e),B(t=>t.filter(t=>t.id!==e))}catch(t){console.error("Chyba pri mazan\xed s\xfaboru:",t)}},onFileDownload:async e=>{try{const t=await K.apiService.downloadFile(e.id),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=e.original_name,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(a),document.body.removeChild(r)}catch(t){console.error("Chyba pri s\u0165ahovan\xed s\xfaboru:",t),alert("Chyba pri s\u0165ahovan\xed s\xfaboru")}},onFilePreview:async e=>{try{await K.apiService.previewFile(e.id)}catch(t){console.error("Chyba pri n\xe1h\u013eade s\xfaboru:",t)}},companyId:t.id,loading:V,userRole:k,onEmptyTrash:async()=>{try{await K.apiService.emptyTrash(t.id);const e=await K.apiService.getCompanyFiles(t.id);B(e)}catch(e){console.error("Chyba pri vypr\xe1zd\u0148ovan\xed k\xf4\u0161a:",e)}}})]}),"dropbox"===f&&(0,A.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(console.log("=== COMPANY DASHBOARD - DROPBOX TAB ==="),console.log("CompanyDashboard: Rendering dropbox tab"),console.log("CompanyDashboard: activeTab:",f),console.log("CompanyDashboard: company.id:",t.id),console.log("CompanyDashboard: userEmail:",b),console.log("CompanyDashboard: company.owner_email:",t.owner_email),console.log("CompanyDashboard: userRole:",k),console.log("CompanyDashboard: company.name:",t.name),null),(0,A.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,A.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Dropbox s\xfabory"}),(0,A.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Va\u0161e zdie\u013ean\xe9 s\xfabory v Dropboxe"})]}),(0,A.jsx)("div",{className:"p-6",children:(0,A.jsx)(T.A,{companyId:t.id,userEmail:b,companyEmail:t.owner_email,isCompanyView:!0,userRole:k,companyName:t.name,companyICO:t.ico,onFileSelect:e=>{console.log("Selected Dropbox file:",e)}})})]}),"hr"===f&&(0,A.jsx)(ie,{companyId:t.id}),"accountants"===f&&(()=>{var e;return(0,A.jsxs)("div",{className:"space-y-6",children:[(0,A.jsxs)("div",{className:"flex justify-between items-center",children:[(0,A.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Priraden\xed \xfa\u010dtovn\xedci"}),(0,A.jsxs)("div",{className:"text-sm text-gray-500",children:[(null===(e=t.assignedToAccountants)||void 0===e?void 0:e.length)||0," \xfa\u010dtovn\xedkov priraden\xfdch k firme"]})]}),t.assignedToAccountants&&t.assignedToAccountants.length>0?(0,A.jsx)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:(0,A.jsx)("div",{className:"overflow-x-auto",children:(0,A.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,A.jsx)("thead",{className:"bg-gray-50",children:(0,A.jsxs)("tr",{children:[(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xda\u010dtovn\xedk"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Posledn\xe9 prihl\xe1senie"}),(0,A.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Akcie"})]})}),(0,A.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.assignedToAccountants.map((e,t)=>{const a={id:t+1,name:e.includes("@")?e.split("@")[0].replace(/[._]/g," ").replace(/\b\w/g,e=>e.toUpperCase()):e,email:e,status:"active",lastLogin:"1 hodinu",department:"\xda\u010dtovn\xedctvo"};return(0,A.jsxs)("tr",{children:[(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsxs)("div",{className:"flex items-center",children:[(0,A.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,A.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,A.jsx)("span",{className:"text-sm font-medium text-gray-700",children:a.name.split(" ").map(e=>e[0]).join("")})})}),(0,A.jsxs)("div",{className:"ml-4",children:[(0,A.jsx)("div",{className:"text-sm font-medium text-gray-900",children:a.name}),(0,A.jsx)("div",{className:"text-sm text-gray-500",children:a.department})]})]})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("div",{className:"text-sm text-gray-900",children:a.email})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,A.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Akt\xedvny"})}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.lastLogin}),(0,A.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,A.jsx)("button",{onClick:()=>(e=>{re(e),te(!0)})(a.email),className:"text-primary-600 hover:text-primary-900",children:"Kontaktova\u0165"})})]},a.id)})})]})})}):(0,A.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[(0,A.jsx)(u.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,A.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"\u017diadni priraden\xed \xfa\u010dtovn\xedci"}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"K tejto firme zatia\u013e nie s\xfa priraden\xed \u017eiadni \xfa\u010dtovn\xedci."})]})]})})(),"accounting"===f&&(0,A.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg shadow-md",children:[(0,A.jsx)(h.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,A.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"\xda\u010dtovn\xedctvo"}),(0,A.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Pre pr\xedstup k \xfa\u010dtovn\xedctvu kliknite na tla\u010didlo ni\u017e\u0161ie."}),(0,A.jsx)("div",{className:"mt-6",children:(0,A.jsx)("button",{onClick:()=>v("/accounting"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:"Otvori\u0165 \xfa\u010dtovn\xedctvo"})})]}),"messages"===f&&(0,A.jsx)(F.A,{userEmail:b,userRole:"company"===k?"user":k,companyId:t.id,isAdmin:"admin"===k,onMessageAction:oe})]}),(0,A.jsx)(P.A,{isOpen:J,onClose:()=>{X(!1),Q(null)},onSave:async e=>{try{if($){const t={title:e.title,description:e.description,status:e.status,priority:e.priority,assigned_to:e.assignedToEmail||e.assignedTo,due_date:e.dueDate,category:e.category,estimated_hours:e.estimatedHours};await K.apiService.updateTask(parseInt($.id),t),Y(t=>t.map(t=>t.id===$.id?(0,r.A)((0,r.A)({},t),e):t))}else{const a={title:e.title,description:e.description,status:e.status,priority:e.priority,assigned_to:e.assignedToEmail||e.assignedTo,due_date:e.dueDate,category:e.category,estimated_hours:e.estimatedHours,company_id:t.id,created_by:b,company_name:t.name};await K.apiService.createTask(a),console.log("CompanyDashboard: Znovu na\u010d\xedtavam \xfalohy po vytvoren\xed novej \xfalohy");const r=await K.apiService.getCompanyTasks(t.id);console.log("CompanyDashboard: Na\u010d\xedtan\xe9 \xfalohy po vytvoren\xed:",r);const s=r.map(e=>({id:e.id.toString(),title:e.title,description:e.description||"",status:e.status,priority:e.priority,assignedTo:e.assigned_to,dueDate:e.due_date||"",createdAt:e.created_at,createdBy:e.created_by,category:"other"}));Y(s)}X(!1),Q(null)}catch(a){console.error("Chyba pri ukladan\xed \xfalohy:",a)}},task:$,companyEmployees:w,company:t,isAccountant:"accountant"===k,userEmail:b}),(0,A.jsx)(I.A,{isOpen:ee,onClose:()=>{te(!1),re("")},onSend:()=>{te(!1),re(""),oe()},senderEmail:b,userRole:"company"===k?"user":k,companyId:t.id,initialRecipient:ae}),(0,A.jsx)(ce,{isOpen:se,onClose:()=>ne(!1),companyId:t.id,userEmail:b,userRole:k})]})})}},82695:(e,t,a)=>{a.d(t,{A:()=>l});var r=a(22555),s=a(9950),n=a(52941),i=a(75516),d=a(15536),o=a(44414);const l=e=>{let{isOpen:t,onClose:a,onSave:l,employee:c}=e;const[m,x]=(0,s.useState)({first_name:"",last_name:"",email:"",phone:"",position:"",department:"",salary:"",employment_type:"full_time",status:"active",termination_date:"",termination_reason:"",birth_name:"",title_before:"",title_after:"",gender:"",birth_date:"",birth_number:"",birth_place:"",nationality:"",citizenship:"",education:"",marital_status:"",is_partner:!1,is_statutory:!1,employee_bonus:!1,bonus_months:"",permanent_street:"",permanent_number:"",permanent_city:"",permanent_zip:"",permanent_country:"Slovensko",contact_street:"",contact_number:"",contact_city:"",contact_zip:"",contact_country:"Slovensko",is_foreigner:!1,foreigner_country:"",residence_permit_number:"",social_insurance_sr:"",social_insurance_foreign:"",health_insurance_sr:"",foreigner_without_permanent_residence:!1,tax_identification_number:""}),[u,h]=(0,s.useState)(!1),[g,p]=(0,s.useState)({});(0,s.useEffect)(()=>{var e,a;c&&t&&(x({first_name:c.first_name||"",last_name:c.last_name||"",email:c.email||"",phone:c.phone||"",position:c.position||"",department:c.department||"",salary:(null===(e=c.salary)||void 0===e?void 0:e.toString())||"",employment_type:c.employment_type||"full_time",status:c.status||"active",termination_date:c.termination_date||"",termination_reason:c.termination_reason||"",birth_name:c.birth_name||"",title_before:c.title_before||"",title_after:c.title_after||"",gender:c.gender||"",birth_date:c.birth_date||"",birth_number:c.birth_number||"",birth_place:c.birth_place||"",nationality:c.nationality||"",citizenship:c.citizenship||"",education:c.education||"",marital_status:c.marital_status||"",is_partner:c.is_partner||!1,is_statutory:c.is_statutory||!1,employee_bonus:c.employee_bonus||!1,bonus_months:(null===(a=c.bonus_months)||void 0===a?void 0:a.toString())||"",permanent_street:c.permanent_street||"",permanent_number:c.permanent_number||"",permanent_city:c.permanent_city||"",permanent_zip:c.permanent_zip||"",permanent_country:c.permanent_country||"Slovensko",contact_street:c.contact_street||"",contact_number:c.contact_number||"",contact_city:c.contact_city||"",contact_zip:c.contact_zip||"",contact_country:c.contact_country||"Slovensko",is_foreigner:c.is_foreigner||!1,foreigner_country:c.foreigner_country||"",residence_permit_number:c.residence_permit_number||"",social_insurance_sr:c.social_insurance_sr||"",social_insurance_foreign:c.social_insurance_foreign||"",health_insurance_sr:c.health_insurance_sr||"",foreigner_without_permanent_residence:c.foreigner_without_permanent_residence||!1,tax_identification_number:c.tax_identification_number||""}),p({}))},[c,t]);const y=e=>{const{name:t,value:a,type:s}=e.target;let n=a;"checkbox"===s&&(n=e.target.checked),x(e=>(0,r.A)((0,r.A)({},e),{},{[t]:n})),g[t]&&p(e=>(0,r.A)((0,r.A)({},e),{},{[t]:""}))},b=()=>{x({first_name:"",last_name:"",email:"",phone:"",position:"",department:"",salary:"",employment_type:"full_time",status:"active",termination_date:"",termination_reason:"",birth_name:"",title_before:"",title_after:"",gender:"",birth_date:"",birth_number:"",birth_place:"",nationality:"",citizenship:"",education:"",marital_status:"",is_partner:!1,is_statutory:!1,employee_bonus:!1,bonus_months:"",permanent_street:"",permanent_number:"",permanent_city:"",permanent_zip:"",permanent_country:"Slovensko",contact_street:"",contact_number:"",contact_city:"",contact_zip:"",contact_country:"Slovensko",is_foreigner:!1,foreigner_country:"",residence_permit_number:"",social_insurance_sr:"",social_insurance_foreign:"",health_insurance_sr:"",foreigner_without_permanent_residence:!1,tax_identification_number:""}),p({}),a()};return t&&c?(0,o.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:(0,o.jsxs)("div",{className:"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto mx-4",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Upravi\u0165 zamestnanca"}),(0,o.jsx)("button",{onClick:b,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:(0,o.jsx)(d.A,{className:"h-6 w-6"})})]}),(0,o.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};return m.first_name.trim()||(e.first_name="Meno je povinn\xe9"),m.last_name.trim()||(e.last_name="Priezvisko je povinn\xe9"),m.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m.email)||(e.email="Neplatn\xfd form\xe1t emailu"):e.email="Email je povinn\xfd",m.position.trim()||(e.position="Poz\xedcia je povinn\xe1"),"terminated"!==m.status||m.termination_date||(e.termination_date="D\xe1tum ukon\u010denia je povinn\xfd pri ukon\u010den\xed zamestnania"),"terminated"!==m.status||m.termination_reason.trim()||(e.termination_reason="D\xf4vod ukon\u010denia je povinn\xfd"),p(e),0===Object.keys(e).length})()){h(!0);try{const e={first_name:m.first_name.trim(),last_name:m.last_name.trim(),email:m.email.trim(),phone:m.phone.trim()||void 0,position:m.position.trim(),department:m.department.trim()||void 0,salary:m.salary?parseFloat(m.salary):void 0,employment_type:m.employment_type,status:m.status,birth_name:m.birth_name.trim()||void 0,title_before:m.title_before.trim()||void 0,title_after:m.title_after.trim()||void 0,gender:m.gender||void 0,birth_date:m.birth_date||void 0,birth_number:m.birth_number.trim()||void 0,birth_place:m.birth_place.trim()||void 0,nationality:m.nationality.trim()||void 0,citizenship:m.citizenship.trim()||void 0,education:m.education.trim()||void 0,marital_status:m.marital_status.trim()||void 0,is_partner:m.is_partner,is_statutory:m.is_statutory,employee_bonus:m.employee_bonus,bonus_months:m.bonus_months?parseInt(m.bonus_months):void 0,permanent_street:m.permanent_street.trim()||void 0,permanent_number:m.permanent_number.trim()||void 0,permanent_city:m.permanent_city.trim()||void 0,permanent_zip:m.permanent_zip.trim()||void 0,permanent_country:m.permanent_country.trim()||void 0,contact_street:m.contact_street.trim()||void 0,contact_number:m.contact_number.trim()||void 0,contact_city:m.contact_city.trim()||void 0,contact_zip:m.contact_zip.trim()||void 0,contact_country:m.contact_country.trim()||void 0,is_foreigner:m.is_foreigner,foreigner_country:m.foreigner_country.trim()||void 0,residence_permit_number:m.residence_permit_number.trim()||void 0,social_insurance_sr:m.social_insurance_sr.trim()||void 0,social_insurance_foreign:m.social_insurance_foreign.trim()||void 0,health_insurance_sr:m.health_insurance_sr.trim()||void 0,foreigner_without_permanent_residence:m.foreigner_without_permanent_residence,tax_identification_number:m.tax_identification_number.trim()||void 0};"terminated"===m.status&&(e.termination_date=m.termination_date,e.termination_reason=m.termination_reason.trim(),m.termination_date&&new Date(m.termination_date)<=new Date&&(e.status="inactive")),await l(e),a()}catch(t){console.error("Chyba pri ukladan\xed zamestnanca:",t)}finally{h(!1)}}},className:"p-6 space-y-6",children:[(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Meno *"}),(0,o.jsx)("input",{type:"text",id:"first_name",name:"first_name",value:m.first_name,onChange:y,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(g.first_name?"border-red-300":"border-gray-300 dark:border-dark-600")}),g.first_name&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.first_name})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Priezvisko *"}),(0,o.jsx)("input",{type:"text",id:"last_name",name:"last_name",value:m.last_name,onChange:y,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(g.last_name?"border-red-300":"border-gray-300 dark:border-dark-600")}),g.last_name&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.last_name})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Email *"}),(0,o.jsx)("input",{type:"email",id:"email",name:"email",value:m.email,onChange:y,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(g.email?"border-red-300":"border-gray-300 dark:border-dark-600")}),g.email&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.email})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Telef\xf3n"}),(0,o.jsx)("input",{type:"tel",id:"phone",name:"phone",value:m.phone,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Poz\xedcia *"}),(0,o.jsx)("input",{type:"text",id:"position",name:"position",value:m.position,onChange:y,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(g.position?"border-red-300":"border-gray-300 dark:border-dark-600")}),g.position&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.position})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"department",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Oddelenie"}),(0,o.jsx)("input",{type:"text",id:"department",name:"department",value:m.department,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"salary",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mzda (\u20ac)"}),(0,o.jsx)("input",{type:"number",id:"salary",name:"salary",value:m.salary,onChange:y,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"employment_type",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Typ \xfav\xe4zku"}),(0,o.jsxs)("select",{id:"employment_type",name:"employment_type",value:m.employment_type,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[(0,o.jsx)("option",{value:"full_time",children:"Pln\xfd \xfav\xe4zok"}),(0,o.jsx)("option",{value:"part_time",children:"\u010ciasto\u010dn\xfd \xfav\xe4zok"}),(0,o.jsx)("option",{value:"contract",children:"Dohoda"}),(0,o.jsx)("option",{value:"intern",children:"St\xe1\u017e"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status zamestnania"}),(0,o.jsxs)("select",{id:"status",name:"status",value:m.status,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[(0,o.jsx)("option",{value:"active",children:"Akt\xedvny"}),(0,o.jsx)("option",{value:"inactive",children:"Neakt\xedvny"}),(0,o.jsx)("option",{value:"terminated",children:"Ukon\u010den\xfd"}),(0,o.jsx)("option",{value:"on_leave",children:"Na dovolenke"})]})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 dark:border-dark-600 pt-6",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Person\xe1lne \xfadaje"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"birth_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rodn\xe9 priezvisko"}),(0,o.jsx)("input",{type:"text",id:"birth_name",name:"birth_name",value:m.birth_name,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"title_before",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Titul pred"}),(0,o.jsx)("input",{type:"text",id:"title_before",name:"title_before",value:m.title_before,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"title_after",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Titul za"}),(0,o.jsx)("input",{type:"text",id:"title_after",name:"title_after",value:m.title_after,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Pohlavie"}),(0,o.jsxs)("select",{id:"gender",name:"gender",value:m.gender,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[(0,o.jsx)("option",{value:"",children:"Vyberte pohlavie"}),(0,o.jsx)("option",{value:"mu\u017e",children:"Mu\u017e"}),(0,o.jsx)("option",{value:"\u017eena",children:"\u017dena"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"birth_date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"D\xe1tum narodenia"}),(0,o.jsx)("input",{type:"date",id:"birth_date",name:"birth_date",value:m.birth_date,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"birth_number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rodn\xe9 \u010d\xedslo"}),(0,o.jsx)("input",{type:"text",id:"birth_number",name:"birth_number",value:m.birth_number,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"birth_place",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Miesto narodenia"}),(0,o.jsx)("input",{type:"text",id:"birth_place",name:"birth_place",value:m.birth_place,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"nationality",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"N\xe1rodnos\u0165"}),(0,o.jsx)("input",{type:"text",id:"nationality",name:"nationality",value:m.nationality,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"citizenship",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u0160t\xe1t ob\u010dianstvo"}),(0,o.jsx)("input",{type:"text",id:"citizenship",name:"citizenship",value:m.citizenship,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"education",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Vzdelanie"}),(0,o.jsx)("input",{type:"text",id:"education",name:"education",value:m.education,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"marital_status",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Rodinn\xfd stav"}),(0,o.jsx)("input",{type:"text",id:"marital_status",name:"marital_status",value:m.marital_status,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"bonus_months",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Mesiacov pre zam. pr\xe9miu"}),(0,o.jsx)("input",{type:"number",id:"bonus_months",name:"bonus_months",value:m.bonus_months,onChange:y,min:"0",className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6",children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_partner",name:"is_partner",checked:m.is_partner,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"is_partner",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Spolo\u010dn\xedk"})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_statutory",name:"is_statutory",checked:m.is_statutory,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"is_statutory",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"\u0160tatut\xe1r"})]}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("input",{type:"checkbox",id:"employee_bonus",name:"employee_bonus",checked:m.employee_bonus,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"employee_bonus",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Zamestnaneck\xe1 pr\xe9mia"})]})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 dark:border-dark-600 pt-6",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Adresa trval\xe9ho pobytu"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"permanent_street",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ulica"}),(0,o.jsx)("input",{type:"text",id:"permanent_street",name:"permanent_street",value:m.permanent_street,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"permanent_number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u010c\xedslo popisn\xe9"}),(0,o.jsx)("input",{type:"text",id:"permanent_number",name:"permanent_number",value:m.permanent_number,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"permanent_city",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Obec"}),(0,o.jsx)("input",{type:"text",id:"permanent_city",name:"permanent_city",value:m.permanent_city,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"permanent_zip",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"PS\u010c"}),(0,o.jsx)("input",{type:"text",id:"permanent_zip",name:"permanent_zip",value:m.permanent_zip,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"permanent_country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u0160t\xe1t"}),(0,o.jsx)("input",{type:"text",id:"permanent_country",name:"permanent_country",value:m.permanent_country,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 dark:border-dark-600 pt-6",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Kontaktn\xe1 adresa"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"contact_street",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ulica"}),(0,o.jsx)("input",{type:"text",id:"contact_street",name:"contact_street",value:m.contact_street,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"contact_number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u010c\xedslo popisn\xe9"}),(0,o.jsx)("input",{type:"text",id:"contact_number",name:"contact_number",value:m.contact_number,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"contact_city",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Obec"}),(0,o.jsx)("input",{type:"text",id:"contact_city",name:"contact_city",value:m.contact_city,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"contact_zip",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"PS\u010c"}),(0,o.jsx)("input",{type:"text",id:"contact_zip",name:"contact_zip",value:m.contact_zip,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"contact_country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u0160t\xe1t"}),(0,o.jsx)("input",{type:"text",id:"contact_country",name:"contact_country",value:m.contact_country,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]})]}),(0,o.jsxs)("div",{className:"border-t border-gray-200 dark:border-dark-600 pt-6",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"Cudzineck\xe9 \xfadaje"}),(0,o.jsxs)("div",{className:"flex items-center mb-6",children:[(0,o.jsx)("input",{type:"checkbox",id:"is_foreigner",name:"is_foreigner",checked:m.is_foreigner,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"is_foreigner",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Cudzinec"})]}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"foreigner_country",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u0160t\xe1t (cudzinec)"}),(0,o.jsx)("input",{type:"text",id:"foreigner_country",name:"foreigner_country",value:m.foreigner_country,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"residence_permit_number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u010c\xedslo povolenia k pobytu"}),(0,o.jsx)("input",{type:"text",id:"residence_permit_number",name:"residence_permit_number",value:m.residence_permit_number,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"social_insurance_sr",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u010c\xedslo soc. poist. v SR"}),(0,o.jsx)("input",{type:"text",id:"social_insurance_sr",name:"social_insurance_sr",value:m.social_insurance_sr,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"social_insurance_foreign",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u010c\xedslo soc. poist. v zahrani\u010d\xed"}),(0,o.jsx)("input",{type:"text",id:"social_insurance_foreign",name:"social_insurance_foreign",value:m.social_insurance_foreign,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"health_insurance_sr",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"\u010c\xedslo zdrav. poist. v SR"}),(0,o.jsx)("input",{type:"text",id:"health_insurance_sr",name:"health_insurance_sr",value:m.health_insurance_sr,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"tax_identification_number",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Identifika\u010dn\xe9 \u010d\xedslo na da\u0148ov\xe9 \xfa\u010dely"}),(0,o.jsx)("input",{type:"text",id:"tax_identification_number",name:"tax_identification_number",value:m.tax_identification_number,onChange:y,className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]}),(0,o.jsxs)("div",{className:"flex items-center mt-6",children:[(0,o.jsx)("input",{type:"checkbox",id:"foreigner_without_permanent_residence",name:"foreigner_without_permanent_residence",checked:m.foreigner_without_permanent_residence,onChange:y,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,o.jsx)("label",{htmlFor:"foreigner_without_permanent_residence",className:"ml-2 block text-sm text-gray-900 dark:text-white",children:"Cudzinec bez trv. pobytu v SR"})]})]}),"terminated"===m.status&&(0,o.jsxs)("div",{className:"border-t border-gray-200 dark:border-dark-600 pt-6",children:[(0,o.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-4",children:"\xdadaje o ukon\u010den\xed zamestnania"}),m.termination_date&&(0,o.jsx)("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)(n.A,{className:"h-5 w-5 text-blue-400"}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsxs)("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:["D\xe1tum ukon\u010denia: ",new Date(m.termination_date).toLocaleDateString("sk-SK")]}),m.termination_reason&&(0,o.jsx)("div",{className:"mt-1 text-sm text-blue-700 dark:text-blue-300",children:(0,o.jsxs)("p",{children:[(0,o.jsx)("strong",{children:"D\xf4vod:"})," ",m.termination_reason]})})]})]})}),m.termination_date&&new Date(m.termination_date)<=new Date&&(0,o.jsx)("div",{className:"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md",children:(0,o.jsxs)("div",{className:"flex",children:[(0,o.jsx)(i.A,{className:"h-5 w-5 text-yellow-400"}),(0,o.jsxs)("div",{className:"ml-3",children:[(0,o.jsx)("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"D\xe1tum ukon\u010denia uplynul"}),(0,o.jsx)("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-300",children:(0,o.jsxs)("p",{children:["D\xe1tum ukon\u010denia zamestnania (",new Date(m.termination_date).toLocaleDateString("sk-SK"),') u\u017e uplynul. Po ulo\u017een\xed sa status zamestnanca automaticky zmen\xed na "Neakt\xedvny".']})})]})]})}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{htmlFor:"termination_date",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"D\xe1tum ukon\u010denia *"}),(0,o.jsx)("input",{type:"date",id:"termination_date",name:"termination_date",value:m.termination_date,onChange:y,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(g.termination_date?"border-red-300":"border-gray-300 dark:border-dark-600")}),g.termination_date&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.termination_date})]}),(0,o.jsxs)("div",{className:"md:col-span-2",children:[(0,o.jsx)("label",{htmlFor:"termination_reason",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"D\xf4vod ukon\u010denia *"}),(0,o.jsx)("textarea",{id:"termination_reason",name:"termination_reason",value:m.termination_reason,onChange:y,rows:3,className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ".concat(g.termination_reason?"border-red-300":"border-gray-300 dark:border-dark-600"),placeholder:"Zadajte d\xf4vod ukon\u010denia zamestnania..."}),g.termination_reason&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",children:g.termination_reason})]})]})]}),(0,o.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-dark-600",children:[(0,o.jsx)("button",{type:"button",onClick:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Zru\u0161i\u0165"}),(0,o.jsx)("button",{type:"submit",disabled:u,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Uklad\xe1m...":"Ulo\u017ei\u0165 zmeny"})]})]})]})}):null}}}]);