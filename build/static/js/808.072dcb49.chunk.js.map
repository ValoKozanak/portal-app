{"version":3,"file":"static/js/808.072dcb49.chunk.js","mappings":"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","sources":["components/EditEmployeeModal.tsx","services/accountingService.ts","components/FileManager.tsx","components/EmployeeModal.tsx","pages/EmployeeCardPage.tsx","components/EmploymentRelationModal.tsx","pages/EmploymentRelationsPage.tsx","pages/AutomaticAttendancePage.tsx","components/AttendanceRecordModal.tsx","components/HRDashboard.tsx","services/payrollService.ts","components/PayrollPeriodsModal.tsx","components/CompanyDashboard.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { XMarkIcon, UserIcon, CalendarIcon, ExclamationTriangleIcon } from '@heroicons/react/24/outline';\r\nimport { Employee } from '../services/hrService';\r\n\r\ninterface EditEmployeeModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSave: (employeeData: Partial<Employee>) => void;\r\n  employee: Employee | null;\r\n}\r\n\r\nconst EditEmployeeModal: React.FC<EditEmployeeModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onSave,\r\n  employee\r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    first_name: '',\r\n    last_name: '',\r\n    email: '',\r\n    phone: '',\r\n    position: '',\r\n    department: '',\r\n    salary: '',\r\n    employment_type: 'full_time' as 'full_time' | 'part_time' | 'contract' | 'intern',\r\n    status: 'active' as 'active' | 'inactive' | 'terminated' | 'on_leave',\r\n    termination_date: '',\r\n    termination_reason: '',\r\n    // Personálne údaje\r\n    birth_name: '',\r\n    title_before: '',\r\n    title_after: '',\r\n    gender: '' as '' | 'muž' | 'žena',\r\n    birth_date: '',\r\n    birth_number: '',\r\n    birth_place: '',\r\n    nationality: '',\r\n    citizenship: '',\r\n    education: '',\r\n    marital_status: '',\r\n    is_partner: false,\r\n    is_statutory: false,\r\n    employee_bonus: false,\r\n    bonus_months: '',\r\n    // Adresa trvalého pobytu\r\n    permanent_street: '',\r\n    permanent_number: '',\r\n    permanent_city: '',\r\n    permanent_zip: '',\r\n    permanent_country: 'Slovensko',\r\n    // Kontaktná adresa\r\n    contact_street: '',\r\n    contact_number: '',\r\n    contact_city: '',\r\n    contact_zip: '',\r\n    contact_country: 'Slovensko',\r\n    // Cudzinecké údaje\r\n    is_foreigner: false,\r\n    foreigner_country: '',\r\n    residence_permit_number: '',\r\n    social_insurance_sr: '',\r\n    social_insurance_foreign: '',\r\n    health_insurance_sr: '',\r\n    foreigner_without_permanent_residence: false,\r\n    tax_identification_number: ''\r\n  });\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => {\r\n    if (employee && isOpen) {\r\n      setFormData({\r\n        first_name: employee.first_name || '',\r\n        last_name: employee.last_name || '',\r\n        email: employee.email || '',\r\n        phone: employee.phone || '',\r\n        position: employee.position || '',\r\n        department: employee.department || '',\r\n        salary: employee.salary?.toString() || '',\r\n        employment_type: employee.employment_type || 'full_time',\r\n        status: employee.status || 'active',\r\n        termination_date: employee.termination_date || '',\r\n        termination_reason: employee.termination_reason || '',\r\n        // Personálne údaje\r\n        birth_name: employee.birth_name || '',\r\n        title_before: employee.title_before || '',\r\n        title_after: employee.title_after || '',\r\n        gender: employee.gender || '',\r\n        birth_date: employee.birth_date || '',\r\n        birth_number: employee.birth_number || '',\r\n        birth_place: employee.birth_place || '',\r\n        nationality: employee.nationality || '',\r\n        citizenship: employee.citizenship || '',\r\n        education: employee.education || '',\r\n        marital_status: employee.marital_status || '',\r\n        is_partner: employee.is_partner || false,\r\n        is_statutory: employee.is_statutory || false,\r\n        employee_bonus: employee.employee_bonus || false,\r\n        bonus_months: employee.bonus_months?.toString() || '',\r\n        // Adresa trvalého pobytu\r\n        permanent_street: employee.permanent_street || '',\r\n        permanent_number: employee.permanent_number || '',\r\n        permanent_city: employee.permanent_city || '',\r\n        permanent_zip: employee.permanent_zip || '',\r\n        permanent_country: employee.permanent_country || 'Slovensko',\r\n        // Kontaktná adresa\r\n        contact_street: employee.contact_street || '',\r\n        contact_number: employee.contact_number || '',\r\n        contact_city: employee.contact_city || '',\r\n        contact_zip: employee.contact_zip || '',\r\n        contact_country: employee.contact_country || 'Slovensko',\r\n        // Cudzinecké údaje\r\n        is_foreigner: employee.is_foreigner || false,\r\n        foreigner_country: employee.foreigner_country || '',\r\n        residence_permit_number: employee.residence_permit_number || '',\r\n        social_insurance_sr: employee.social_insurance_sr || '',\r\n        social_insurance_foreign: employee.social_insurance_foreign || '',\r\n        health_insurance_sr: employee.health_insurance_sr || '',\r\n        foreigner_without_permanent_residence: employee.foreigner_without_permanent_residence || false,\r\n        tax_identification_number: employee.tax_identification_number || ''\r\n      });\r\n      setErrors({});\r\n    }\r\n  }, [employee, isOpen]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\r\n    const { name, value, type } = e.target;\r\n    \r\n    let newValue: any = value;\r\n    if (type === 'checkbox') {\r\n      newValue = (e.target as HTMLInputElement).checked;\r\n    }\r\n    \r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: newValue\r\n    }));\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    if (!formData.first_name.trim()) {\r\n      newErrors.first_name = 'Meno je povinné';\r\n    }\r\n\r\n    if (!formData.last_name.trim()) {\r\n      newErrors.last_name = 'Priezvisko je povinné';\r\n    }\r\n\r\n    if (!formData.email.trim()) {\r\n      newErrors.email = 'Email je povinný';\r\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\r\n      newErrors.email = 'Neplatný formát emailu';\r\n    }\r\n\r\n    if (!formData.position.trim()) {\r\n      newErrors.position = 'Pozícia je povinná';\r\n    }\r\n\r\n    if (formData.status === 'terminated' && !formData.termination_date) {\r\n      newErrors.termination_date = 'Dátum ukončenia je povinný pri ukončení zamestnania';\r\n    }\r\n\r\n    if (formData.status === 'terminated' && !formData.termination_reason.trim()) {\r\n      newErrors.termination_reason = 'Dôvod ukončenia je povinný';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      const employeeData: Partial<Employee> = {\r\n        first_name: formData.first_name.trim(),\r\n        last_name: formData.last_name.trim(),\r\n        email: formData.email.trim(),\r\n        phone: formData.phone.trim() || undefined,\r\n        position: formData.position.trim(),\r\n        department: formData.department.trim() || undefined,\r\n        salary: formData.salary ? parseFloat(formData.salary) : undefined,\r\n        employment_type: formData.employment_type,\r\n        status: formData.status,\r\n        // Personálne údaje\r\n        birth_name: formData.birth_name.trim() || undefined,\r\n        title_before: formData.title_before.trim() || undefined,\r\n        title_after: formData.title_after.trim() || undefined,\r\n        gender: formData.gender || undefined,\r\n        birth_date: formData.birth_date || undefined,\r\n        birth_number: formData.birth_number.trim() || undefined,\r\n        birth_place: formData.birth_place.trim() || undefined,\r\n        nationality: formData.nationality.trim() || undefined,\r\n        citizenship: formData.citizenship.trim() || undefined,\r\n        education: formData.education.trim() || undefined,\r\n        marital_status: formData.marital_status.trim() || undefined,\r\n        is_partner: formData.is_partner,\r\n        is_statutory: formData.is_statutory,\r\n        employee_bonus: formData.employee_bonus,\r\n        bonus_months: formData.bonus_months ? parseInt(formData.bonus_months) : undefined,\r\n        // Adresa trvalého pobytu\r\n        permanent_street: formData.permanent_street.trim() || undefined,\r\n        permanent_number: formData.permanent_number.trim() || undefined,\r\n        permanent_city: formData.permanent_city.trim() || undefined,\r\n        permanent_zip: formData.permanent_zip.trim() || undefined,\r\n        permanent_country: formData.permanent_country.trim() || undefined,\r\n        // Kontaktná adresa\r\n        contact_street: formData.contact_street.trim() || undefined,\r\n        contact_number: formData.contact_number.trim() || undefined,\r\n        contact_city: formData.contact_city.trim() || undefined,\r\n        contact_zip: formData.contact_zip.trim() || undefined,\r\n        contact_country: formData.contact_country.trim() || undefined,\r\n        // Cudzinecké údaje\r\n        is_foreigner: formData.is_foreigner,\r\n        foreigner_country: formData.foreigner_country.trim() || undefined,\r\n        residence_permit_number: formData.residence_permit_number.trim() || undefined,\r\n        social_insurance_sr: formData.social_insurance_sr.trim() || undefined,\r\n        social_insurance_foreign: formData.social_insurance_foreign.trim() || undefined,\r\n        health_insurance_sr: formData.health_insurance_sr.trim() || undefined,\r\n        foreigner_without_permanent_residence: formData.foreigner_without_permanent_residence,\r\n        tax_identification_number: formData.tax_identification_number.trim() || undefined\r\n      };\r\n\r\n      // Ak je zamestnanec ukončený, pridaj dátum ukončenia\r\n      if (formData.status === 'terminated') {\r\n        employeeData.termination_date = formData.termination_date;\r\n        employeeData.termination_reason = formData.termination_reason.trim();\r\n        \r\n        // Ak uplynul dátum ukončenia, automaticky nastav status na 'inactive'\r\n        if (formData.termination_date && new Date(formData.termination_date) <= new Date()) {\r\n          employeeData.status = 'inactive';\r\n        }\r\n      }\r\n\r\n      await onSave(employeeData);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Chyba pri ukladaní zamestnanca:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      first_name: '',\r\n      last_name: '',\r\n      email: '',\r\n      phone: '',\r\n      position: '',\r\n      department: '',\r\n      salary: '',\r\n      employment_type: 'full_time',\r\n      status: 'active',\r\n      termination_date: '',\r\n      termination_reason: '',\r\n      // Personálne údaje\r\n      birth_name: '',\r\n      title_before: '',\r\n      title_after: '',\r\n      gender: '',\r\n      birth_date: '',\r\n      birth_number: '',\r\n      birth_place: '',\r\n      nationality: '',\r\n      citizenship: '',\r\n      education: '',\r\n      marital_status: '',\r\n      is_partner: false,\r\n      is_statutory: false,\r\n      employee_bonus: false,\r\n      bonus_months: '',\r\n      // Adresa trvalého pobytu\r\n      permanent_street: '',\r\n      permanent_number: '',\r\n      permanent_city: '',\r\n      permanent_zip: '',\r\n      permanent_country: 'Slovensko',\r\n      // Kontaktná adresa\r\n      contact_street: '',\r\n      contact_number: '',\r\n      contact_city: '',\r\n      contact_zip: '',\r\n      contact_country: 'Slovensko',\r\n      // Cudzinecké údaje\r\n      is_foreigner: false,\r\n      foreigner_country: '',\r\n      residence_permit_number: '',\r\n      social_insurance_sr: '',\r\n      social_insurance_foreign: '',\r\n      health_insurance_sr: '',\r\n      foreigner_without_permanent_residence: false,\r\n      tax_identification_number: ''\r\n    });\r\n    setErrors({});\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen || !employee) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto mx-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n            Upraviť zamestnanca\r\n          </h2>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Základné informácie */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div>\r\n              <label htmlFor=\"first_name\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Meno *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"first_name\"\r\n                name=\"first_name\"\r\n                value={formData.first_name}\r\n                onChange={handleInputChange}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                  errors.first_name ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                }`}\r\n              />\r\n              {errors.first_name && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.first_name}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"last_name\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Priezvisko *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"last_name\"\r\n                name=\"last_name\"\r\n                value={formData.last_name}\r\n                onChange={handleInputChange}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                  errors.last_name ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                }`}\r\n              />\r\n              {errors.last_name && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.last_name}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Email *\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                value={formData.email}\r\n                onChange={handleInputChange}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                  errors.email ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                }`}\r\n              />\r\n              {errors.email && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.email}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Telefón\r\n              </label>\r\n              <input\r\n                type=\"tel\"\r\n                id=\"phone\"\r\n                name=\"phone\"\r\n                value={formData.phone}\r\n                onChange={handleInputChange}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"position\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Pozícia *\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"position\"\r\n                name=\"position\"\r\n                value={formData.position}\r\n                onChange={handleInputChange}\r\n                className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                  errors.position ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                }`}\r\n              />\r\n              {errors.position && (\r\n                <p className=\"mt-1 text-sm text-red-600\">{errors.position}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"department\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Oddelenie\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"department\"\r\n                name=\"department\"\r\n                value={formData.department}\r\n                onChange={handleInputChange}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"salary\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Mzda (€)\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                id=\"salary\"\r\n                name=\"salary\"\r\n                value={formData.salary}\r\n                onChange={handleInputChange}\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"employment_type\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Typ úväzku\r\n              </label>\r\n              <select\r\n                id=\"employment_type\"\r\n                name=\"employment_type\"\r\n                value={formData.employment_type}\r\n                onChange={handleInputChange}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n              >\r\n                <option value=\"full_time\">Plný úväzok</option>\r\n                <option value=\"part_time\">Čiastočný úväzok</option>\r\n                <option value=\"contract\">Dohoda</option>\r\n                <option value=\"intern\">Stáž</option>\r\n              </select>\r\n            </div>\r\n\r\n            <div>\r\n              <label htmlFor=\"status\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                Status zamestnania\r\n              </label>\r\n              <select\r\n                id=\"status\"\r\n                name=\"status\"\r\n                value={formData.status}\r\n                onChange={handleInputChange}\r\n                className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n              >\r\n                <option value=\"active\">Aktívny</option>\r\n                <option value=\"inactive\">Neaktívny</option>\r\n                <option value=\"terminated\">Ukončený</option>\r\n                <option value=\"on_leave\">Na dovolenke</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Personálne údaje */}\r\n          <div className=\"border-t border-gray-200 dark:border-dark-600 pt-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              Personálne údaje\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label htmlFor=\"birth_name\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Rodné priezvisko\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"birth_name\"\r\n                  name=\"birth_name\"\r\n                  value={formData.birth_name}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"title_before\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Titul pred\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"title_before\"\r\n                  name=\"title_before\"\r\n                  value={formData.title_before}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"title_after\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Titul za\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"title_after\"\r\n                  name=\"title_after\"\r\n                  value={formData.title_after}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"gender\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Pohlavie\r\n                </label>\r\n                <select\r\n                  id=\"gender\"\r\n                  name=\"gender\"\r\n                  value={formData.gender}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                >\r\n                  <option value=\"\">Vyberte pohlavie</option>\r\n                  <option value=\"muž\">Muž</option>\r\n                  <option value=\"žena\">Žena</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"birth_date\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Dátum narodenia\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"birth_date\"\r\n                  name=\"birth_date\"\r\n                  value={formData.birth_date}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"birth_number\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Rodné číslo\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"birth_number\"\r\n                  name=\"birth_number\"\r\n                  value={formData.birth_number}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"birth_place\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Miesto narodenia\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"birth_place\"\r\n                  name=\"birth_place\"\r\n                  value={formData.birth_place}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"nationality\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Národnosť\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"nationality\"\r\n                  name=\"nationality\"\r\n                  value={formData.nationality}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"citizenship\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Štát občianstvo\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"citizenship\"\r\n                  name=\"citizenship\"\r\n                  value={formData.citizenship}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"education\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Vzdelanie\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"education\"\r\n                  name=\"education\"\r\n                  value={formData.education}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"marital_status\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Rodinný stav\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"marital_status\"\r\n                  name=\"marital_status\"\r\n                  value={formData.marital_status}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"bonus_months\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Mesiacov pre zam. prémiu\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"bonus_months\"\r\n                  name=\"bonus_months\"\r\n                  value={formData.bonus_months}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Checkboxy */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"is_partner\"\r\n                  name=\"is_partner\"\r\n                  checked={formData.is_partner}\r\n                  onChange={handleInputChange}\r\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"is_partner\" className=\"ml-2 block text-sm text-gray-900 dark:text-white\">\r\n                  Spoločník\r\n                </label>\r\n              </div>\r\n\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"is_statutory\"\r\n                  name=\"is_statutory\"\r\n                  checked={formData.is_statutory}\r\n                  onChange={handleInputChange}\r\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"is_statutory\" className=\"ml-2 block text-sm text-gray-900 dark:text-white\">\r\n                  Štatutár\r\n                </label>\r\n              </div>\r\n\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"employee_bonus\"\r\n                  name=\"employee_bonus\"\r\n                  checked={formData.employee_bonus}\r\n                  onChange={handleInputChange}\r\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"employee_bonus\" className=\"ml-2 block text-sm text-gray-900 dark:text-white\">\r\n                  Zamestnanecká prémia\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Adresa trvalého pobytu */}\r\n          <div className=\"border-t border-gray-200 dark:border-dark-600 pt-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              Adresa trvalého pobytu\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label htmlFor=\"permanent_street\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Ulica\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"permanent_street\"\r\n                  name=\"permanent_street\"\r\n                  value={formData.permanent_street}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"permanent_number\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Číslo popisné\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"permanent_number\"\r\n                  name=\"permanent_number\"\r\n                  value={formData.permanent_number}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"permanent_city\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Obec\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"permanent_city\"\r\n                  name=\"permanent_city\"\r\n                  value={formData.permanent_city}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"permanent_zip\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  PSČ\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"permanent_zip\"\r\n                  name=\"permanent_zip\"\r\n                  value={formData.permanent_zip}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"permanent_country\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Štát\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"permanent_country\"\r\n                  name=\"permanent_country\"\r\n                  value={formData.permanent_country}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Kontaktná adresa */}\r\n          <div className=\"border-t border-gray-200 dark:border-dark-600 pt-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              Kontaktná adresa\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label htmlFor=\"contact_street\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Ulica\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"contact_street\"\r\n                  name=\"contact_street\"\r\n                  value={formData.contact_street}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"contact_number\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Číslo popisné\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"contact_number\"\r\n                  name=\"contact_number\"\r\n                  value={formData.contact_number}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"contact_city\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Obec\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"contact_city\"\r\n                  name=\"contact_city\"\r\n                  value={formData.contact_city}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"contact_zip\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  PSČ\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"contact_zip\"\r\n                  name=\"contact_zip\"\r\n                  value={formData.contact_zip}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"contact_country\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Štát\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"contact_country\"\r\n                  name=\"contact_country\"\r\n                  value={formData.contact_country}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Cudzinecké údaje */}\r\n          <div className=\"border-t border-gray-200 dark:border-dark-600 pt-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              Cudzinecké údaje\r\n            </h3>\r\n            \r\n            <div className=\"flex items-center mb-6\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"is_foreigner\"\r\n                name=\"is_foreigner\"\r\n                checked={formData.is_foreigner}\r\n                onChange={handleInputChange}\r\n                className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n              />\r\n              <label htmlFor=\"is_foreigner\" className=\"ml-2 block text-sm text-gray-900 dark:text-white\">\r\n                Cudzinec\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label htmlFor=\"foreigner_country\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Štát (cudzinec)\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"foreigner_country\"\r\n                  name=\"foreigner_country\"\r\n                  value={formData.foreigner_country}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"residence_permit_number\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Číslo povolenia k pobytu\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"residence_permit_number\"\r\n                  name=\"residence_permit_number\"\r\n                  value={formData.residence_permit_number}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"social_insurance_sr\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Číslo soc. poist. v SR\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"social_insurance_sr\"\r\n                  name=\"social_insurance_sr\"\r\n                  value={formData.social_insurance_sr}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"social_insurance_foreign\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Číslo soc. poist. v zahraničí\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"social_insurance_foreign\"\r\n                  name=\"social_insurance_foreign\"\r\n                  value={formData.social_insurance_foreign}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"health_insurance_sr\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Číslo zdrav. poist. v SR\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"health_insurance_sr\"\r\n                  name=\"health_insurance_sr\"\r\n                  value={formData.health_insurance_sr}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"tax_identification_number\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Identifikačné číslo na daňové účely\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"tax_identification_number\"\r\n                  name=\"tax_identification_number\"\r\n                  value={formData.tax_identification_number}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center mt-6\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"foreigner_without_permanent_residence\"\r\n                name=\"foreigner_without_permanent_residence\"\r\n                checked={formData.foreigner_without_permanent_residence}\r\n                onChange={handleInputChange}\r\n                className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n              />\r\n              <label htmlFor=\"foreigner_without_permanent_residence\" className=\"ml-2 block text-sm text-gray-900 dark:text-white\">\r\n                Cudzinec bez trv. pobytu v SR\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n                     {/* Sekcia pre ukončenie zamestnania */}\r\n           {formData.status === 'terminated' && (\r\n             <div className=\"border-t border-gray-200 dark:border-dark-600 pt-6\">\r\n               <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n                 Údaje o ukončení zamestnania\r\n               </h3>\r\n               \r\n                               {/* Informácia o existujúcom dátume ukončenia */}\r\n                {formData.termination_date && (\r\n                  <div className=\"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md\">\r\n                    <div className=\"flex\">\r\n                      <CalendarIcon className=\"h-5 w-5 text-blue-400\" />\r\n                      <div className=\"ml-3\">\r\n                        <h3 className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">\r\n                          Dátum ukončenia: {new Date(formData.termination_date).toLocaleDateString('sk-SK')}\r\n                        </h3>\r\n                        {formData.termination_reason && (\r\n                          <div className=\"mt-1 text-sm text-blue-700 dark:text-blue-300\">\r\n                            <p><strong>Dôvod:</strong> {formData.termination_reason}</p>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n                \r\n                {/* Upozornenie o uplynutí lehoty */}\r\n                {formData.termination_date && new Date(formData.termination_date) <= new Date() && (\r\n                  <div className=\"mb-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md\">\r\n                    <div className=\"flex\">\r\n                      <ExclamationTriangleIcon className=\"h-5 w-5 text-yellow-400\" />\r\n                      <div className=\"ml-3\">\r\n                        <h3 className=\"text-sm font-medium text-yellow-800 dark:text-yellow-200\">\r\n                          Dátum ukončenia uplynul\r\n                        </h3>\r\n                        <div className=\"mt-2 text-sm text-yellow-700 dark:text-yellow-300\">\r\n                          <p>\r\n                            Dátum ukončenia zamestnania ({new Date(formData.termination_date).toLocaleDateString('sk-SK')}) už uplynul. \r\n                            Po uložení sa status zamestnanca automaticky zmení na \"Neaktívny\".\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <label htmlFor=\"termination_date\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    Dátum ukončenia *\r\n                  </label>\r\n                  <input\r\n                    type=\"date\"\r\n                    id=\"termination_date\"\r\n                    name=\"termination_date\"\r\n                    value={formData.termination_date}\r\n                    onChange={handleInputChange}\r\n                    className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                      errors.termination_date ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                    }`}\r\n                  />\r\n                  {errors.termination_date && (\r\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.termination_date}</p>\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"md:col-span-2\">\r\n                  <label htmlFor=\"termination_reason\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                    Dôvod ukončenia *\r\n                  </label>\r\n                  <textarea\r\n                    id=\"termination_reason\"\r\n                    name=\"termination_reason\"\r\n                    value={formData.termination_reason}\r\n                    onChange={handleInputChange}\r\n                    rows={3}\r\n                    className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                      errors.termination_reason ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                    }`}\r\n                    placeholder=\"Zadajte dôvod ukončenia zamestnania...\"\r\n                  />\r\n                  {errors.termination_reason && (\r\n                    <p className=\"mt-1 text-sm text-red-600\">{errors.termination_reason}</p>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          {/* Tlačidlá */}\r\n          <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-dark-600\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleClose}\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              Zrušiť\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {isSubmitting ? 'Ukladám...' : 'Uložiť zmeny'}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditEmployeeModal;\r\n","import { apiService, ApiResponse } from './apiService';\r\n\r\n// ===== ÚČTOVNÍCTVO SERVICE =====\r\n\r\nexport interface AccountingSettings {\r\n  id?: number;\r\n  company_id: number;\r\n  pohoda_enabled: boolean;\r\n  pohoda_url?: string;\r\n  pohoda_username?: string;\r\n  pohoda_password?: string;\r\n  pohoda_ico?: string;\r\n  pohoda_year?: string;\r\n  auto_sync: boolean;\r\n  sync_frequency: 'hourly' | 'daily' | 'weekly' | 'manual';\r\n  last_sync?: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\nexport interface AccountingPermissions {\r\n  id?: number;\r\n  user_email: string;\r\n  company_id: number;\r\n  can_view_invoices: boolean;\r\n  can_create_invoices: boolean;\r\n  can_edit_invoices: boolean;\r\n  can_delete_invoices: boolean;\r\n  can_view_bank: boolean;\r\n  can_edit_bank: boolean;\r\n  can_view_cash: boolean;\r\n  can_edit_cash: boolean;\r\n  can_view_reports: boolean;\r\n  can_export_data: boolean;\r\n  can_manage_settings: boolean;\r\n  granted_by: string;\r\n  granted_at?: string;\r\n}\r\n\r\nexport interface FinancialAnalysis {\r\n  expenses: {\r\n    total: number;\r\n    count: number;\r\n    details: Array<{\r\n      account: string;\r\n      account_name: string;\r\n      amount: number;\r\n      count: number;\r\n    }>;\r\n  };\r\n  revenue: {\r\n    total: number;\r\n    count: number;\r\n    details: Array<{\r\n      account: string;\r\n      account_name: string;\r\n      amount: number;\r\n      count: number;\r\n    }>;\r\n  };\r\n  profit: number;\r\n  isProfit: boolean;\r\n  filters?: {\r\n    dateFrom: string | null;\r\n    dateTo: string | null;\r\n  };\r\n}\r\n\r\nexport interface InvoiceItem {\r\n  id?: number;\r\n  description: string;\r\n  quantity: number;\r\n  unit_price: number;\r\n  vat_rate: number;\r\n  total_price: number;\r\n  vat_amount: number;\r\n  unit?: string;\r\n}\r\n\r\nexport interface IssuedInvoice {\r\n  id?: number;\r\n  company_id: number;\r\n  invoice_number: string;\r\n  customer_name: string;\r\n  customer_ico?: string;\r\n  customer_dic?: string;\r\n  customer_address?: string;\r\n  issue_date: string;\r\n  due_date: string;\r\n  total_amount: number;\r\n  vat_amount: number;\r\n  \r\n  // MDB polia - základy DPH\r\n  kc0?: number;\r\n  kc1?: number;\r\n  kc2?: number;\r\n  kc3?: number;\r\n  \r\n  // MDB polia - DPH\r\n  kc_dph1?: number;\r\n  kc_dph2?: number;\r\n  kc_dph3?: number;\r\n  \r\n  // MDB polia - celkové sumy\r\n  kc_celkem?: number;\r\n  \r\n  // MDB polia - ďalšie informácie\r\n  var_sym?: string;\r\n  s_text?: string;\r\n  mdb_id?: number;\r\n  rel_tp_fak?: number;\r\n  datum?: string;\r\n  dat_splat?: string;\r\n  firma?: string;\r\n  ico?: string;\r\n  dic?: string;\r\n  ulice?: string;\r\n  psc?: string;\r\n  obec?: string;\r\n  mdb_cislo?: string;\r\n  \r\n  // MDB polia - likvidácia a platby\r\n  kc_likv?: number;\r\n  kc_u?: number;\r\n  dat_likv?: string;\r\n  \r\n  currency: string;\r\n  status: 'draft' | 'sent' | 'paid' | 'overdue' | 'cancelled';\r\n  pohoda_id?: string;\r\n  notes?: string;\r\n  created_by: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n  items?: InvoiceItem[];\r\n}\r\n\r\nexport interface ReceivedInvoice {\r\n  id?: number;\r\n  company_id: number;\r\n  invoice_number: string;\r\n  supplier_name: string;\r\n  supplier_ico?: string;\r\n  supplier_dic?: string;\r\n  supplier_address?: string;\r\n  issue_date: string;\r\n  due_date: string;\r\n  total_amount: number;\r\n  vat_amount: number;\r\n  \r\n  // MDB polia - základy DPH\r\n  kc0?: number;\r\n  kc1?: number;\r\n  kc2?: number;\r\n  kc3?: number;\r\n  \r\n  // MDB polia - DPH\r\n  kc_dph1?: number;\r\n  kc_dph2?: number;\r\n  kc_dph3?: number;\r\n  \r\n  // MDB polia - celkové sumy\r\n  kc_celkem?: number;\r\n  \r\n  // MDB polia - ďalšie informácie\r\n  var_sym?: string;\r\n  s_text?: string;\r\n  mdb_id?: number;\r\n  rel_tp_fak?: number;\r\n  datum?: string;\r\n  dat_splat?: string;\r\n  firma?: string;\r\n  ico?: string;\r\n  dic?: string;\r\n  ulice?: string;\r\n  psc?: string;\r\n  obec?: string;\r\n  mdb_cislo?: string;\r\n  \r\n  // MDB polia - likvidácia a platby\r\n  kc_likv?: number;\r\n  kc_u?: number;\r\n  dat_likv?: string;\r\n  \r\n  currency: string;\r\n  status: 'received' | 'approved' | 'paid' | 'overdue' | 'disputed';\r\n  pohoda_id?: string;\r\n  notes?: string;\r\n  created_by: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n  items?: InvoiceItem[];\r\n}\r\n\r\nexport interface BankTransaction {\r\n  id?: number;\r\n  company_id: number;\r\n  transaction_date: string;\r\n  description: string;\r\n  amount: number;\r\n  currency: string;\r\n  type: 'income' | 'expense';\r\n  category?: string;\r\n  bank_account?: string;\r\n  reference?: string;\r\n  pohoda_id?: string;\r\n  notes?: string;\r\n  created_by: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\nexport interface CashTransaction {\r\n  id?: number;\r\n  company_id: number;\r\n  transaction_date: string;\r\n  description: string;\r\n  amount: number;\r\n  currency: string;\r\n  type: 'income' | 'expense';\r\n  category?: string;\r\n  receipt_number?: string;\r\n  pohoda_id?: string;\r\n  notes?: string;\r\n  created_by: string;\r\n  created_at?: string;\r\n  updated_at?: string;\r\n}\r\n\r\n\r\n\r\nexport interface AccountingStats {\r\n  issued_invoices: {\r\n    total_count: number;\r\n    total_amount: number;\r\n    paid_amount: number;\r\n    overdue_amount: number;\r\n  };\r\n  received_invoices: {\r\n    total_count: number;\r\n    total_amount: number;\r\n    paid_amount: number;\r\n    overdue_amount: number;\r\n  };\r\n  bank: {\r\n    total_income: number;\r\n    total_expense: number;\r\n  };\r\n  cash: {\r\n    total_income: number;\r\n    total_expense: number;\r\n  };\r\n}\r\n\r\nexport class AccountingService {\r\n  // 1. NASTAVENIA ÚČTOVNÍCTVA\r\n\r\n    async getSettings(companyId: number): Promise<AccountingSettings> {\r\n    const response = await apiService.get(`/accounting/settings/${companyId}`); \r\n    return response as AccountingSettings;\r\n  }\r\n\r\n  async saveSettings(companyId: number, settings: Partial<AccountingSettings>): Promise<any> {\r\n    const response = await apiService.post(`/accounting/settings/${companyId}`, settings);\r\n    return response;\r\n  }\r\n\r\n  // 2. PRÁVA PRE ÚČTOVNÍCTVO\r\n\r\n  async getPermissions(companyId: number, userEmail: string): Promise<AccountingPermissions> {\r\n    const response = await apiService.get(`/accounting/permissions/${companyId}/${userEmail}`);\r\n    return response as AccountingPermissions;\r\n  }\r\n\r\n  async savePermissions(companyId: number, permissions: Partial<AccountingPermissions>): Promise<any> {\r\n    const response = await apiService.post(`/accounting/permissions/${companyId}`, permissions);\r\n    return response;\r\n  }\r\n\r\n  async getAllPermissions(companyId: number): Promise<AccountingPermissions[]> {\r\n    const response = await apiService.get(`/accounting/permissions/${companyId}`);\r\n    return response as AccountingPermissions[];\r\n  }\r\n\r\n  // 3. VYDANÉ FAKTÚRY\r\n\r\n  async getIssuedInvoices(\r\n    companyId: number, \r\n    filters?: {\r\n      status?: string;\r\n      date_from?: string;\r\n      date_to?: string;\r\n      limit?: number;\r\n      offset?: number;\r\n    }\r\n  ): Promise<IssuedInvoice[]> {\r\n    const params = new URLSearchParams();\r\n    if (filters) {\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value !== undefined) {\r\n          params.append(key, value.toString());\r\n        }\r\n      });\r\n    }\r\n    \r\n    const response = await apiService.get(`/accounting/issued-invoices/${companyId}?${params}`);\r\n    return response as IssuedInvoice[];\r\n  }\r\n\r\n  async createIssuedInvoice(companyId: number, invoice: Partial<IssuedInvoice>): Promise<any> {\r\n    const response = await apiService.post(`/accounting/issued-invoices/${companyId}`, invoice);\r\n    return response;\r\n  }\r\n\r\n  async getIssuedInvoiceById(invoiceId: number): Promise<IssuedInvoice> {\r\n    const response = await apiService.get(`/accounting/issued-invoices/detail/${invoiceId}`);\r\n    return response as IssuedInvoice;\r\n  }\r\n\r\n\r\n\r\n  // 4. PRIJATÉ FAKTÚRY\r\n\r\n  async getReceivedInvoices(\r\n    companyId: number, \r\n    filters?: {\r\n      status?: string;\r\n      date_from?: string;\r\n      date_to?: string;\r\n      limit?: number;\r\n      offset?: number;\r\n    }\r\n  ): Promise<ReceivedInvoice[]> {\r\n    const params = new URLSearchParams();\r\n    if (filters) {\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value !== undefined) {\r\n          params.append(key, value.toString());\r\n        }\r\n      });\r\n    }\r\n    \r\n    const response = await apiService.get(`/accounting/received-invoices/${companyId}?${params}`);\r\n    return response as ReceivedInvoice[];\r\n  }\r\n\r\n  async getReceivedInvoiceById(invoiceId: number): Promise<ReceivedInvoice> {\r\n    const response = await apiService.get(`/accounting/received-invoices/detail/${invoiceId}`);\r\n    return response as ReceivedInvoice;\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  // 7. HOSPODÁRSKE VÝSLEDKY (pUD)\r\n\r\n  async getPudSummary(companyId: number): Promise<{ total_kc: number; total_count: number }> {\r\n    const response = await apiService.get(`/accounting/pud-summary/${companyId}`);\r\n    return response as { total_kc: number; total_count: number };\r\n  }\r\n\r\n  // Získanie podrobnej analýzy nákladov a výnosov\r\n  async getFinancialAnalysis(companyId: number, dateFrom?: string, dateTo?: string): Promise<FinancialAnalysis> {\r\n    let url = `/accounting/financial-analysis/${companyId}`;\r\n    const params = new URLSearchParams();\r\n    \r\n    if (dateFrom) params.append('dateFrom', dateFrom);\r\n    if (dateTo) params.append('dateTo', dateTo);\r\n    \r\n    if (params.toString()) {\r\n      url += `?${params.toString()}`;\r\n    }\r\n    \r\n    const response = await apiService.get(url);\r\n    return response as FinancialAnalysis;\r\n  }\r\n\r\n  // 8. ŠTATISTIKY\r\n\r\n  async getStats(\r\n    companyId: number, \r\n    filters?: {\r\n      year?: number;\r\n      month?: number;\r\n    }\r\n  ): Promise<AccountingStats> {\r\n    const params = new URLSearchParams();\r\n    if (filters) {\r\n      Object.entries(filters).forEach(([key, value]) => {\r\n        if (value !== undefined) {\r\n          params.append(key, value.toString());\r\n        }\r\n      });\r\n    }\r\n    \r\n    const response = await apiService.get(`/accounting/stats/${companyId}?${params}`);\r\n    return response as AccountingStats;\r\n  }\r\n\r\n  // 8. POMOCNÉ METÓDY\r\n\r\n  formatCurrency(amount: number, currency: string = 'EUR'): string {\r\n    return new Intl.NumberFormat('sk-SK', {\r\n      style: 'currency',\r\n      currency: currency\r\n    }).format(amount);\r\n  }\r\n\r\n  formatDate(date: string): string {\r\n    return new Date(date).toLocaleDateString('sk-SK');\r\n  }\r\n\r\n  getStatusBadge(status: string): { text: string; color: string } {\r\n    const statusMap: Record<string, { text: string; color: string }> = {\r\n      // Vydané faktúry\r\n      draft: { text: 'Koncept', color: 'bg-gray-100 text-gray-800' },\r\n      sent: { text: 'Odoslaná', color: 'bg-blue-100 text-blue-800' },\r\n      paid: { text: 'Zaplatená', color: 'bg-green-100 text-green-800' },\r\n      overdue: { text: 'Po splatnosti', color: 'bg-red-100 text-red-800' },\r\n      cancelled: { text: 'Zrušená', color: 'bg-yellow-100 text-yellow-800' },\r\n      \r\n      // Prijaté faktúry\r\n      received: { text: 'Prijatá', color: 'bg-gray-100 text-gray-800' },\r\n      approved: { text: 'Schválená', color: 'bg-blue-100 text-blue-800' },\r\n      disputed: { text: 'Sporná', color: 'bg-orange-100 text-orange-800' }\r\n    };\r\n\r\n    return statusMap[status] || { text: status, color: 'bg-gray-100 text-gray-800' };\r\n  }\r\n\r\n  getTypeBadge(type: string): { text: string; color: string } {\r\n    const typeMap: Record<string, { text: string; color: string }> = {\r\n      income: { text: 'Príjem', color: 'bg-green-100 text-green-800' },\r\n      expense: { text: 'Výdavok', color: 'bg-red-100 text-red-800' }\r\n    };\r\n\r\n    return typeMap[type] || { text: type, color: 'bg-gray-100 text-gray-800' };\r\n  }\r\n\r\n  // 9. POHODA INTEGRÁCIA\r\n\r\n  // Test POHODA connection\r\n  async testPohodaConnection(companyId: number, settings: Partial<AccountingSettings>): Promise<ApiResponse> {\r\n    return await apiService.post('/accounting/test-pohoda-connection', {\r\n      companyId,\r\n      ...settings\r\n    });\r\n  }\r\n\r\n  // Test POHODA invoices\r\n  async testPohodaInvoices(companyId: number, settings: Partial<AccountingSettings>): Promise<ApiResponse> {\r\n    return await apiService.post('/accounting/test-pohoda-invoices', {\r\n      companyId,\r\n      ...settings\r\n    });\r\n  }\r\n\r\n  // Sync POHODA invoices\r\n  async syncPohodaInvoices(companyId: number, dateFrom?: string, dateTo?: string): Promise<ApiResponse> {\r\n    return await apiService.post(`/accounting/sync-pohoda-invoices/${companyId}`, {\r\n      dateFrom,\r\n      dateTo\r\n    });\r\n  }\r\n\r\n  // 10. XML IMPORT/EXPORT\r\n\r\n  // Upload POHODA XML file\r\n  async uploadPohodaXml(companyId: number, file: File): Promise<ApiResponse> {\r\n    const formData = new FormData();\r\n    formData.append('xmlFile', file);\r\n    \r\n    // Používame fetch priamo pre FormData\r\n    const response = await fetch(`http://localhost:5000/api/accounting/upload-pohoda-xml/${companyId}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n      },\r\n      body: formData\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri nahrávaní XML súboru');\r\n    }\r\n    \r\n    return await response.json();\r\n  }\r\n\r\n  // Export invoices to POHODA XML format\r\n  async exportPohodaXml(companyId: number, dateFrom?: string, dateTo?: string): Promise<Blob> {\r\n    const response = await fetch(`http://localhost:5000/api/accounting/export-pohoda-xml/${companyId}?dateFrom=${dateFrom || ''}&dateTo=${dateTo || ''}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n      }\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri exporte XML súboru');\r\n    }\r\n    \r\n    return await response.blob();\r\n  }\r\n\r\n\r\n\r\n  // 11. OBNOVENIE FAKTÚR Z MDB\r\n\r\n  // Obnovenie vydaných faktúr z MDB\r\n  async refreshInvoicesFromMdb(companyId: number): Promise<{\r\n    success: boolean;\r\n    message: string;\r\n    importedCount: number;\r\n    totalCount: number;\r\n  }> {\r\n    const response = await fetch(`http://localhost:5000/api/accounting/refresh-invoices/${companyId}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri obnovení faktúr z MDB');\r\n    }\r\n    \r\n    return await response.json();\r\n  }\r\n\r\n  // Obnovenie prijatých faktúr z MDB\r\n  async refreshReceivedInvoicesFromMdb(companyId: number): Promise<{\r\n    success: boolean;\r\n    message: string;\r\n    importedCount: number;\r\n    totalCount: number;\r\n  }> {\r\n    const response = await fetch(`http://localhost:5000/api/accounting/refresh-received-invoices/${companyId}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri obnovení prijatých faktúr z MDB');\r\n    }\r\n    \r\n    return await response.json();\r\n  }\r\n\r\n  // 12. IMPORT FAKTÚR Z MDB\r\n\r\n  // Import vydaných faktúr z MDB\r\n  async importInvoicesFromMdb(companyId: number): Promise<{\r\n    success: boolean;\r\n    message: string;\r\n    importedCount: number;\r\n    skippedCount: number;\r\n    totalCount: number;\r\n  }> {\r\n    const response = await fetch(`http://localhost:5000/api/accounting/import-invoices/${companyId}`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri importe faktúr z MDB');\r\n    }\r\n    \r\n    return await response.json();\r\n  }\r\n\r\n  // 12. MAZANIE POLOŽIEK\r\n\r\n  // Mazanie vydanej faktúry\r\n  async deleteIssuedInvoice(invoiceId: number): Promise<any> {\r\n    const response = await apiService.delete(`/accounting/issued-invoices/${invoiceId}`);\r\n    return response;\r\n  }\r\n\r\n  // Mazanie prijatej faktúry\r\n  async deleteReceivedInvoice(invoiceId: number): Promise<any> {\r\n    const response = await apiService.delete(`/accounting/received-invoices/${invoiceId}`);\r\n    return response;\r\n  }\r\n\r\n  // Mazanie bankovej transakcie\r\n  async deleteBankTransaction(transactionId: number): Promise<any> {\r\n    const response = await apiService.delete(`/accounting/bank-transactions/${transactionId}`);\r\n    return response;\r\n  }\r\n\r\n  // Mazanie pokladničnej transakcie\r\n  async deleteCashTransaction(transactionId: number): Promise<any> {\r\n    const response = await apiService.delete(`/accounting/cash-transactions/${transactionId}`);\r\n    return response;\r\n  }\r\n\r\n  // 13. ADRESÁR FIRIEM Z MDB\r\n\r\n  // Načítanie adresára firiem z MDB\r\n  async getDirectory(companyId: number): Promise<{\r\n    success: boolean;\r\n    company: { ico: string; name: string };\r\n    mdb_file: string;\r\n    companies: Array<{\r\n      id: number;\r\n      name: string;\r\n      ico: string;\r\n      dic: string;\r\n      address: string;\r\n      postal_code: string;\r\n      city: string;\r\n      phone: string;\r\n      email: string;\r\n      bank_account: string;\r\n      bank_code: string;\r\n    }>;\r\n    total_count: number;\r\n  }> {\r\n    const response = await fetch(`http://localhost:5000/api/accounting/directory/${companyId}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri načítaní adresára');\r\n    }\r\n    \r\n    return await response.json();\r\n  }\r\n\r\n  // 14. DPH PODANIA\r\n\r\n  // Načítanie DPH podaní z MDB\r\n  async getVatReturns(companyId: number, year?: number): Promise<{\r\n    company: {\r\n      id: number;\r\n      name: string;\r\n      ico: string;\r\n    };\r\n    year: number;\r\n    returns: Array<{\r\n      id: number;\r\n      rok: number;\r\n      mesiac: number;\r\n      povinnost: number;\r\n      odpočet: number;\r\n      odoslané: boolean;\r\n    }>;\r\n    summary: {\r\n      totalPovinnost: number;\r\n      totalOdpočet: number;\r\n      totalRozdiel: number;\r\n      odoslanéCount: number;\r\n      neodoslanéCount: number;\r\n    };\r\n  }> {\r\n    const yearParam = year || new Date().getFullYear();\r\n    const response = await fetch(`http://localhost:5000/api/accounting/vat-returns/${companyId}?year=${yearParam}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri načítaní DPH podaní');\r\n    }\r\n    \r\n    return await response.json();\r\n  }\r\n\r\n  // 15. BANKOVÉ ÚČTY\r\n\r\n  // Načítanie bankových účtov z MDB\r\n  async getBankAccounts(companyId: number): Promise<{\r\n    company: {\r\n      id: number;\r\n      name: string;\r\n      ico: string;\r\n    };\r\n    accounts: Array<{\r\n      id: number;\r\n      accountNumber: string;\r\n      accountName: string;\r\n      bankName: string;\r\n      balance: number;\r\n      creditTotal: number;\r\n      debitTotal: number;\r\n      transactionCount: number;\r\n    }>;\r\n    summary: {\r\n      totalBalance: number;\r\n      totalCredit: number;\r\n      totalDebit: number;\r\n      accountCount: number;\r\n    };\r\n  }> {\r\n    console.log('🏦 Volám bankový endpoint pre companyId:', companyId);\r\n    \r\n    const response = await fetch(`http://localhost:5000/api/accounting/bank-accounts/${companyId}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    \r\n    console.log('🏦 Bankový endpoint response status:', response.status);\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri načítaní bankových účtov');\r\n    }\r\n    \r\n    const data = await response.json();\r\n    console.log('🏦 Bankový endpoint response data:', data);\r\n    \r\n    return data;\r\n  }\r\n\r\n  // 16. POKLADŇA\r\n\r\n  // Načítanie pokladňových účtov z MDB\r\n  async getCashAccounts(companyId: number): Promise<{\r\n    company: {\r\n      id: number;\r\n      name: string;\r\n      ico: string;\r\n    };\r\n    accounts: Array<{\r\n      id: number;\r\n      accountNumber: string;\r\n      accountName: string;\r\n      balance: number;\r\n      creditTotal: number;\r\n      debitTotal: number;\r\n      transactionCount: number;\r\n    }>;\r\n    summary: {\r\n      totalBalance: number;\r\n      totalCredit: number;\r\n      totalDebit: number;\r\n      accountCount: number;\r\n    };\r\n  }> {\r\n    const response = await fetch(`http://localhost:5000/api/accounting/cash-accounts/${companyId}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n    \r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri načítaní pokladňových účtov');\r\n    }\r\n    \r\n    return await response.json();\r\n  }\r\n\r\n  // 17. BANKOVÉ TRANSAKCIE\r\n  async getBankTransactions(companyId: number, accountNumber: string): Promise<{\r\n    company: { id: number; name: string; ico: string; };\r\n    account: { accountNumber: string; accountName: string; bankName: string; };\r\n    transactions: Array<{\r\n      id: number; datum: string; popis: string; kredit: number; debet: number; zostatok: number; typ: 'kredit' | 'debet';\r\n    }>;\r\n    summary: {\r\n      totalCredit: number; totalDebit: number; currentBalance: number; transactionCount: number;\r\n    };\r\n  }> {\r\n    console.log('🏦 Volám bankový transakčný endpoint pre companyId:', companyId, 'accountNumber:', accountNumber);\r\n\r\n    const response = await fetch(`http://localhost:5000/api/accounting/bank-transactions/${companyId}/${accountNumber}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n\r\n    console.log('🏦 Bankový transakčný endpoint response status:', response.status);\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri načítaní bankových transakcií');\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('🏦 Bankový transakčný endpoint response data:', data);\r\n\r\n    return data;\r\n  }\r\n\r\n  // 18. POKLADŇOVÉ TRANSAKCIE\r\n  async getCashTransactions(companyId: number, accountNumber: string): Promise<{\r\n    company: { id: number; name: string; ico: string; };\r\n    account: { accountNumber: string; accountName: string; bankName: string; };\r\n    transactions: Array<{\r\n      id: number; datum: string; popis: string; kredit: number; debet: number; zostatok: number; typ: 'kredit' | 'debet';\r\n    }>;\r\n    summary: {\r\n      totalCredit: number; totalDebit: number; currentBalance: number; transactionCount: number;\r\n    };\r\n  }> {\r\n    console.log('💰 Volám pokladňový transakčný endpoint pre companyId:', companyId, 'accountNumber:', accountNumber);\r\n\r\n    const response = await fetch(`http://localhost:5000/api/accounting/cash-transactions/${companyId}/${accountNumber}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    });\r\n\r\n    console.log('💰 Pokladňový transakčný endpoint response status:', response.status);\r\n\r\n    if (!response.ok) {\r\n      throw new Error('Chyba pri načítaní pokladňových transakcií');\r\n    }\r\n\r\n    const data = await response.json();\r\n    console.log('💰 Pokladňový transakčný endpoint response data:', data);\r\n\r\n    return data;\r\n  }\r\n}\r\n\r\nexport const accountingService = new AccountingService();\r\n","import React, { useState } from 'react';\nimport { \n  DocumentArrowUpIcon,\n  DocumentIcon,\n  TrashIcon,\n  EyeIcon,\n  DocumentTextIcon,\n  PhotoIcon,\n  ArchiveBoxIcon,\n  MagnifyingGlassIcon,\n  FunnelIcon,\n  CloudArrowDownIcon\n} from '@heroicons/react/24/outline';\nimport FileUploadModal from './FileUploadModal';\nimport FilePreviewModal from './FilePreviewModal';\nimport { FileData } from '../services/apiService';\n\ninterface FileManagerProps {\n  files: FileData[];\n  onFileUpload?: (file: FileData) => void;\n  onFileDelete: (fileId: number) => void;\n  onFileDownload?: (file: FileData) => void;\n  onFilePreview?: (file: FileData) => void;\n  companyId: number;\n  loading?: boolean;\n  userRole?: 'admin' | 'accountant' | 'company';\n  onEmptyTrash?: () => void;\n}\n\nconst FileManager: React.FC<FileManagerProps> = ({\n  files,\n  onFileUpload,\n  onFileDelete,\n  onFileDownload,\n  onFilePreview,\n  companyId,\n  loading = false,\n  userRole = 'company',\n  onEmptyTrash\n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState('all');\n  const [showUploadModal, setShowUploadModal] = useState(false);\n  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid');\n  const [downloadingFiles, setDownloadingFiles] = useState<Set<string>>(new Set());\n  const [deletingFiles, setDeletingFiles] = useState<Set<string>>(new Set());\n  const [previewFile, setPreviewFile] = useState<FileData | null>(null);\n  const [showPreviewModal, setShowPreviewModal] = useState(false);\n\n  const categories = [\n    { id: 'all', name: 'Všetky súbory' },\n    { id: 'documents', name: 'Dokumenty' },\n    { id: 'invoices', name: 'Faktúry' },\n    { id: 'contracts', name: 'Zmluvy' },\n    { id: 'reports', name: 'Správy' },\n    { id: 'images', name: 'Obrázky' },\n    { id: 'archives', name: 'Archívy' },\n    { id: 'other', name: 'Ostatné' }\n  ];\n\n\n\n  const filteredFiles = files.filter(file => {\n    // Kontrola, či file a file.original_name existujú\n    if (!file || !file.original_name) {\n      return false;\n    }\n    \n    const matchesSearch = file.original_name.toLowerCase().includes(searchTerm.toLowerCase());\n    const matchesCategory = selectedCategory === 'all' || (file.category || 'other') === selectedCategory;\n    \n    return matchesSearch && matchesCategory;\n  });\n\n  const getFileIcon = (fileType: string, category: string) => {\n    if (category === 'images') return PhotoIcon;\n    if (category === 'archives') return ArchiveBoxIcon;\n    if (category === 'documents') return DocumentTextIcon;\n    return DocumentIcon;\n  };\n\n  const formatFileSize = (bytes: number) => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('sk-SK', {\n      year: 'numeric',\n      month: 'short',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  // Funkcia na preklad kategórií z anglického kódu na slovenský názov\n  const getCategoryName = (categoryCode: string) => {\n    const categoryMap: Record<string, string> = {\n      'documents': 'Dokumenty',\n      'invoices': 'Faktúry',\n      'contracts': 'Zmluvy',\n      'reports': 'Správy',\n      'images': 'Obrázky',\n      'archives': 'Archívy',\n      'other': 'Ostatné'\n    };\n    return categoryMap[categoryCode] || categoryCode;\n  };\n\n  const handleFileUpload = (file: FileData) => {\n    if (onFileUpload) {\n      onFileUpload(file);\n    }\n    setShowUploadModal(false);\n  };\n\n  const handleFilePreview = (file: FileData) => {\n    setPreviewFile(file);\n    setShowPreviewModal(true);\n  };\n\n  const handleFileDownload = async (file: FileData) => {\n    setDownloadingFiles(prev => new Set(prev).add(file.id.toString()));\n\n    try {\n      if (onFileDownload) {\n        onFileDownload(file);\n      }\n    } catch (error) {\n      console.error('Chyba pri sťahovaní súboru:', error);\n      alert('Nepodarilo sa stiahnuť súbor');\n    } finally {\n      setDownloadingFiles(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(file.id.toString());\n        return newSet;\n      });\n    }\n  };\n\n  const handleFileDelete = async (file: FileData) => {\n    const fileName = file.original_name || 'Neznámy súbor';\n    if (!window.confirm(`Naozaj chcete vymazať súbor \"${fileName}\"?`)) {\n      return;\n    }\n\n    setDeletingFiles(prev => new Set(prev).add(file.id.toString()));\n\n    try {\n      onFileDelete(file.id);\n    } catch (error) {\n      console.error('Chyba pri mazaní súboru:', error);\n      alert('Nepodarilo sa vymazať súbor');\n    } finally {\n      setDeletingFiles(prev => {\n        const newSet = new Set(prev);\n        newSet.delete(file.id.toString());\n        return newSet;\n      });\n    }\n  };\n\n  const totalSize = files.reduce((sum, file) => sum + (file.file_size || 0), 0);\n  const filesByCategory = categories.reduce((acc, cat) => {\n    if (cat.id === 'all') {\n      acc[cat.id] = files.length;\n    } else {\n      acc[cat.id] = files.filter(f => f && (f.category || 'other') === cat.id).length;\n    }\n    return acc;\n  }, {} as Record<string, number>);\n\n  // Debug informácie (dočasné)\n  console.log('Files:', files.length);\n  console.log('Filtered files:', filteredFiles.length);\n  console.log('Selected category:', selectedCategory);\n  console.log('Files by category:', filesByCategory);\n  if (files.length > 0) {\n    console.log('Files with categories:', files.map(f => ({ name: f.original_name, category: f.category })));\n  }\n\n\n\n  console.log('FileManager rendering with files:', files.length);\n  \n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h2 className=\"text-lg font-semibold text-gray-900\">Správa súborov</h2>\n          <p className=\"text-sm text-gray-500\">\n            {files.length} súborov • {formatFileSize(totalSize)} celkovo\n          </p>\n        </div>\n        <div className=\"mt-4 sm:mt-0 flex space-x-3\">\n          {userRole === 'admin' && onEmptyTrash && (\n            <button\n              onClick={() => {\n                if (window.confirm('Naozaj chcete vyprázdniť kôš? Táto akcia je nevratná.')) {\n                  onEmptyTrash();\n                }\n              }}\n              className=\"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 flex items-center\"\n            >\n              <TrashIcon className=\"h-4 w-4 mr-2\" />\n              Vyprázdniť kôš\n            </button>\n          )}\n          <button\n            onClick={() => setShowUploadModal(true)}\n            className=\"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 flex items-center\"\n          >\n            <DocumentArrowUpIcon className=\"h-5 w-5 mr-2\" />\n            Nahrať súbory\n          </button>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white rounded-lg shadow-md p-4\">\n        <div className=\"flex flex-col sm:flex-row sm:items-center space-y-4 sm:space-y-0 sm:space-x-4\">\n          {/* Search */}\n          <div className=\"flex-1 relative\">\n            <MagnifyingGlassIcon className=\"absolute left-3 top-2.5 h-5 w-5 text-gray-400\" />\n            <input\n              type=\"text\"\n              placeholder=\"Hľadať súbory...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n            />\n          </div>\n\n          {/* Category filter */}\n          <div className=\"relative\">\n            <FunnelIcon className=\"absolute left-3 top-2.5 h-5 w-5 text-gray-400\" />\n            <select\n              value={selectedCategory}\n              onChange={(e) => setSelectedCategory(e.target.value)}\n              className=\"pl-10 pr-8 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500\"\n            >\n              {categories.map((cat) => (\n                <option key={cat.id} value={cat.id}>\n                  {cat.name} ({filesByCategory[cat.id] || 0})\n                </option>\n              ))}\n            </select>\n          </div>\n\n          {/* View mode */}\n          <div className=\"flex border border-gray-300 rounded-md\">\n            <button\n              onClick={() => setViewMode('grid')}\n              className={`px-3 py-2 text-sm font-medium ${\n                viewMode === 'grid'\n                  ? 'bg-primary-600 text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              Grid\n            </button>\n            <button\n              onClick={() => setViewMode('list')}\n              className={`px-3 py-2 text-sm font-medium ${\n                viewMode === 'list'\n                  ? 'bg-primary-600 text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              List\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Files */}\n      {(() => {\n        console.log('Rendering files section, filteredFiles.length:', filteredFiles.length);\n        return filteredFiles.length === 0 ? (\n          <div className=\"text-center py-12 bg-white rounded-lg shadow-md\">\n            <DocumentIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Žiadne súbory</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              {searchTerm || selectedCategory !== 'all' \n                ? 'Nenašli sa žiadne súbory s vybranými filtrami.'\n                : 'Zatiaľ neboli nahrané žiadne súbory.'\n              }\n            </p>\n            {!searchTerm && selectedCategory === 'all' && (\n              <button\n                onClick={() => setShowUploadModal(true)}\n                className=\"mt-4 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700\"\n              >\n                Nahrať prvý súbor\n              </button>\n            )}\n          </div>\n        ) : (\n          <div className={viewMode === 'grid' ? 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6' : 'space-y-4'}>\n            {filteredFiles.map((file) => {\n              const Icon = getFileIcon(file.file_type || 'unknown', file.category || 'other');\n              const isDownloading = downloadingFiles.has(file.id.toString());\n              const isDeleting = deletingFiles.has(file.id.toString());\n              \n              return (\n                <div\n                  key={file.id}\n                  className={`bg-white rounded-lg shadow-md hover:shadow-lg transition-shadow ${\n                    viewMode === 'list' ? 'p-4' : 'p-6'\n                  }`}\n                >\n                  <div className={viewMode === 'list' ? 'flex items-center space-x-4' : 'text-center'}>\n                    <div className={`${viewMode === 'list' ? 'flex-shrink-0' : 'mb-4'}`}>\n                      <Icon className={`${viewMode === 'list' ? 'h-8 w-8' : 'h-12 w-12'} text-primary-600`} />\n                    </div>\n                    \n                    <div className={`flex-1 min-w-0 ${viewMode === 'list' ? '' : 'mb-4'}`}>\n                      <h3 className={`font-medium text-gray-900 truncate ${viewMode === 'list' ? 'text-sm' : 'text-lg'}`}>\n                        {file.original_name || 'Neznámy súbor'}\n                      </h3>\n                      <p className=\"text-sm text-gray-500\">\n                        {formatFileSize(file.file_size || 0)} • {formatDate(file.created_at || new Date().toISOString())}\n                      </p>\n                      <p className=\"text-xs text-blue-600 font-medium\">\n                        {getCategoryName(file.category || 'other')}\n                      </p>\n                    </div>\n\n                    <div className={`flex space-x-2 ${viewMode === 'list' ? 'flex-shrink-0' : 'justify-center'}`}>\n                      <button\n                        onClick={() => handleFilePreview(file)}\n                        className=\"text-primary-600 hover:text-primary-700\"\n                        title=\"Náhľad\"\n                      >\n                        <EyeIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        onClick={() => handleFileDownload(file)}\n                        disabled={isDownloading}\n                        className={`text-blue-600 hover:text-blue-700 ${isDownloading ? 'opacity-50 cursor-not-allowed' : ''}`}\n                        title={isDownloading ? 'Sťahujem...' : 'Stiahnuť'}\n                      >\n                        <CloudArrowDownIcon className=\"h-5 w-5\" />\n                      </button>\n                      <button\n                        onClick={() => handleFileDelete(file)}\n                        disabled={isDeleting}\n                        className={`text-red-600 hover:text-red-700 ${isDeleting ? 'opacity-50 cursor-not-allowed' : ''}`}\n                        title={isDeleting ? 'Mažem...' : 'Vymazať'}\n                      >\n                        <TrashIcon className=\"h-5 w-5\" />\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              );\n            })}\n          </div>\n        );\n      })()}\n\n      {/* Upload Modal */}\n       {showUploadModal && (\n         <FileUploadModal\n           isOpen={showUploadModal}\n           onClose={() => setShowUploadModal(false)}\n           companyId={companyId}\n           onFileUpload={handleFileUpload}\n           userRole={userRole}\n         />\n       )}\n\n       {/* Preview Modal */}\n       <FilePreviewModal\n         isOpen={showPreviewModal}\n         onClose={() => {\n           setShowPreviewModal(false);\n           setPreviewFile(null);\n         }}\n         file={previewFile}\n       />\n     </div>\n   );\n };\n\nexport default FileManager;\n","import React, { useState, useEffect } from 'react';\r\nimport { XMarkIcon } from '@heroicons/react/24/outline';\r\nimport { Employee, hrService } from '../services/hrService';\r\nimport { apiService } from '../services/apiService';\r\n\r\n// Helper funkcia pre lokálne formátovanie dátumu\r\nconst formatDate = (date: Date): string => {\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}-${month}-${day}`;\r\n};\r\n\r\ninterface EmployeeModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  employee?: Employee | null;\r\n  companyId: number;\r\n  onSuccess: () => void;\r\n}\r\n\r\nconst EmployeeModal: React.FC<EmployeeModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  employee,\r\n  companyId,\r\n  onSuccess\r\n}) => {\r\n  const [formData, setFormData] = useState({\r\n    first_name: '',\r\n    last_name: '',\r\n    email: '',\r\n    phone: '',\r\n    password: ''\r\n  });\r\n\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const isEdit = !!employee;\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      if (employee) {\r\n        setFormData({\r\n          first_name: employee.first_name,\r\n          last_name: employee.last_name,\r\n          email: employee.email,\r\n          phone: employee.phone || '',\r\n          password: ''\r\n        });\r\n      } else {\r\n        setFormData({\r\n          first_name: '',\r\n          last_name: '',\r\n          email: '',\r\n          phone: '',\r\n          password: ''\r\n        });\r\n      }\r\n    }\r\n  }, [isOpen, employee]);\r\n\r\n\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (isEdit) {\r\n        // Aktualizácia základných údajov zamestnanca\r\n        const employeeData = {\r\n          first_name: formData.first_name,\r\n          last_name: formData.last_name,\r\n          email: formData.email,\r\n          phone: formData.phone || undefined\r\n        };\r\n        await hrService.updateEmployee(employee!.id, employeeData);\r\n      } else {\r\n        // Vytvorenie základného záznamu zamestnanca\r\n        const employeeData = {\r\n          company_id: companyId,\r\n          employee_id: `EMP${Date.now()}`, // Automaticky generované ID\r\n          first_name: formData.first_name,\r\n          last_name: formData.last_name,\r\n          email: formData.email,\r\n          phone: formData.phone || undefined,\r\n          position: 'Zamestnanec', // Základná pozícia\r\n          hire_date: formatDate(new Date()), // Dnešný dátum\r\n          employment_type: 'full_time' as const, // Základný typ úväzku\r\n          status: 'active' as const\r\n        };\r\n        \r\n        await hrService.addEmployee(employeeData);\r\n        \r\n        // Vytvorenie používateľského účtu pre zamestnanca\r\n        if (formData.password) {\r\n          try {\r\n            console.log('🔧 Vytváram používateľský účet pre zamestnanca:', formData.email);\r\n            const userData = {\r\n              email: formData.email,\r\n              password: formData.password,\r\n              name: `${formData.first_name} ${formData.last_name}`,\r\n              role: 'employee',\r\n              status: 'active',\r\n              phone: formData.phone || undefined\r\n            };\r\n            console.log('📤 Odosielam dáta:', userData);\r\n            await apiService.createUser(userData);\r\n            console.log('✅ Používateľský účet vytvorený úspešne');\r\n          } catch (error) {\r\n            console.error('❌ Chyba pri vytváraní používateľského účtu:', error);\r\n            const errorMessage = error instanceof Error ? error.message : 'Neznáma chyba';\r\n            alert('Chyba pri vytváraní používateľského účtu: ' + errorMessage);\r\n          }\r\n        } else {\r\n          console.log('⚠️ Heslo nie je zadané, používateľský účet sa nevytvorí');\r\n        }\r\n      }\r\n\r\n      onSuccess();\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Chyba pri ukladaní zamestnanca:', error);\r\n      alert('Chyba pri ukladaní zamestnanca');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n            {isEdit ? 'Upraviť základné údaje zamestnanca' : 'Pridať nového zamestnanca a vytvoriť účet'}\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Základné údaje zamestnanca</h3>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Meno *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"first_name\"\r\n                  value={formData.first_name}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"Ján\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Priezvisko *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"last_name\"\r\n                  value={formData.last_name}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"Novák\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Email *\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  name=\"email\"\r\n                  value={formData.email}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"jan.novak@firma.sk\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Telefón\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  name=\"phone\"\r\n                  value={formData.phone}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"+421 901 234 567\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {!isEdit && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                  Heslo pre prihlásenie *\r\n                </label>\r\n                <input\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  value={formData.password}\r\n                  onChange={handleInputChange}\r\n                  required={!isEdit}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                  placeholder=\"Zadajte heslo pre zamestnanca\"\r\n                />\r\n                <p className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                  Zamestnanec sa bude môcť prihlásiť s týmto emailom a heslom. \r\n                  Personálne údaje a pracovné pomery sa budú dopĺňať v sekciách \"Karty zamestnancov\" a \"Pracovné pomery\".\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-dark-600\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-dark-700 rounded-md hover:bg-gray-200 dark:hover:bg-dark-600 transition-colors\"\r\n            >\r\n              Zrušiť\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              className=\"px-4 py-2 bg-blue-600 dark:bg-blue-500 text-white rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors disabled:opacity-50\"\r\n            >\r\n              {loading ? 'Ukladám...' : (isEdit ? 'Upraviť' : 'Pridať')}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmployeeModal;\r\n","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  ArrowLeftIcon,\r\n  UserIcon,\r\n  DocumentTextIcon,\r\n  PencilIcon\r\n} from '@heroicons/react/24/outline';\r\nimport { hrService, Employee } from '../services/hrService';\r\nimport { apiService } from '../services/apiService';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport EditEmployeeModal from '../components/EditEmployeeModal';\r\n\r\ninterface EmployeeCardPageProps {\r\n  userEmail: string;\r\n  companyId: number;\r\n  onBack: () => void;\r\n  selectedEmployeeId?: number;\r\n}\r\n\r\nconst EmployeeCardPage: React.FC<EmployeeCardPageProps> = ({ userEmail, companyId, onBack, selectedEmployeeId }) => {\r\n  const [employees, setEmployees] = useState<Employee[]>([]);\r\n  const [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [activeTab, setActiveTab] = useState<'personal'>('personal');\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [employeeChanges, setEmployeeChanges] = useState<any[]>([]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [companyId]);\r\n\r\n  useEffect(() => {\r\n    if (selectedEmployeeId && employees.length > 0) {\r\n      const employee = employees.find(emp => emp.id === selectedEmployeeId);\r\n      if (employee) {\r\n        setSelectedEmployee(employee);\r\n      }\r\n    }\r\n  }, [selectedEmployeeId, employees]);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Načítanie zamestnancov z aktuálnej firmy\r\n      const employeesData = await hrService.getEmployees(companyId);\r\n      setEmployees(employeesData);\r\n      \r\n      // Načítanie zmien pre firmu\r\n      const changesData = await hrService.getCompanyChanges(companyId);\r\n      setEmployeeChanges(changesData);\r\n    } catch (error) {\r\n      console.error('Chyba pri načítaní dát:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n\r\n\r\n  const handleEditEmployee = (employeeData: Partial<Employee>) => {\r\n    if (!selectedEmployee) return;\r\n    \r\n    const updatedEmployee = { ...selectedEmployee, ...employeeData };\r\n    \r\n    // Async function sa volá, ale nevraciam Promise\r\n    (async () => {\r\n      try {\r\n        await hrService.updateEmployee(selectedEmployee.id!, updatedEmployee);\r\n        \r\n        // Aktualizuj zoznam zamestnancov\r\n        const employeesData = await hrService.getEmployees(companyId);\r\n        setEmployees(employeesData);\r\n        \r\n        // Aktualizuj vybraného zamestnanca\r\n        const updatedSelectedEmployee = employeesData.find(emp => emp.id === selectedEmployee.id);\r\n        if (updatedSelectedEmployee) {\r\n          setSelectedEmployee(updatedSelectedEmployee);\r\n        }\r\n        \r\n        setShowEditModal(false);\r\n      } catch (error) {\r\n        console.error('Chyba pri aktualizácii zamestnanca:', error);\r\n      }\r\n    })();\r\n  };\r\n\r\n  const filteredEmployees = employees.filter(employee =>\r\n    employee.first_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    employee.last_name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    employee.email.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    employee.employee_id.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  // Funkcia na získanie stavu zmeny pre pole\r\n  const getFieldChangeStatus = (employeeId: number, fieldName: string) => {\r\n    const change = employeeChanges.find(c => \r\n      c.employee_id === employeeId && \r\n      c.field_name === fieldName && \r\n      c.status === 'pending'\r\n    );\r\n    \r\n    if (change) {\r\n      return {\r\n        status: 'pending',\r\n        reason: change.reason,\r\n        changeId: change.id\r\n      };\r\n    }\r\n    \r\n    const approvedChange = employeeChanges.find(c => \r\n      c.employee_id === employeeId && \r\n      c.field_name === fieldName && \r\n      c.status === 'approved'\r\n    );\r\n    \r\n    if (approvedChange) {\r\n      return {\r\n        status: 'approved',\r\n        reason: approvedChange.reason,\r\n        changeId: approvedChange.id\r\n      };\r\n    }\r\n    \r\n    return null;\r\n  };\r\n\r\n  // Funkcia na schválenie zmeny\r\n  const handleApproveChange = async (changeId: number, employeeId: number, fieldName: string, newValue: string) => {\r\n    try {\r\n      // Schváliť zmenu\r\n      await hrService.approveEmployeeChange(changeId, 1); // TODO: použiť skutočné ID schvaľovateľa\r\n      \r\n      // Aktualizovať údaje zamestnanca\r\n      await hrService.updateEmployeeField(employeeId, fieldName, newValue);\r\n      \r\n      // Obnoviť dáta\r\n      await loadData();\r\n      \r\n      alert('Zmena bola úspešne schválená');\r\n    } catch (error) {\r\n      console.error('Chyba pri schvaľovaní zmeny:', error);\r\n      alert('Chyba pri schvaľovaní zmeny');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <LoadingSpinner size=\"lg\" text=\"Načítavam karty zamestnancov...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <button\r\n            onClick={onBack}\r\n            className=\"flex items-center text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white\"\r\n          >\r\n            <ArrowLeftIcon className=\"h-5 w-5 mr-2\" />\r\n            Späť na Dashboard\r\n          </button>\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Karty zamestnancov</h1>\r\n            <p className=\"text-gray-600 dark:text-gray-300\">Detailné personálne údaje zamestnancov</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Informačný box */}\r\n      <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\r\n        <div className=\"flex\">\r\n          <div className=\"flex-shrink-0\">\r\n            <svg className=\"h-5 w-5 text-yellow-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n              <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n          </div>\r\n          <div className=\"ml-3\">\r\n            <h3 className=\"text-sm font-medium text-yellow-800 dark:text-yellow-200\">\r\n              Personálne údaje zamestnancov\r\n            </h3>\r\n            <div className=\"mt-2 text-sm text-yellow-700 dark:text-yellow-300\">\r\n              <p>Tu dopĺňate detailné personálne údaje pre zamestnancov, ktorí už majú vytvorený účet v sekcii \"Zamestnanci\".</p>\r\n              <p>Pre pridanie nového zamestnanca použite sekciu \"Zamestnanci\".</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Filtre */}\r\n      <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6\">\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n            Vyhľadávanie zamestnancov\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Hľadať zamestnancov...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Zoznam zamestnancov */}\r\n        <div className=\"lg:col-span-1\">\r\n          <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow\">\r\n            <div className=\"px-6 py-4 border-b border-gray-200 dark:border-dark-600\">\r\n              <h2 className=\"text-lg font-medium text-gray-900 dark:text-white\">\r\n                Zoznam zamestnancov\r\n              </h2>\r\n            </div>\r\n            <div className=\"max-h-96 overflow-y-auto\">\r\n              {filteredEmployees.map((employee) => (\r\n                <div\r\n                  key={employee.id}\r\n                  onClick={() => setSelectedEmployee(employee)}\r\n                  className={`p-4 border-b border-gray-200 dark:border-dark-600 cursor-pointer hover:bg-gray-50 dark:hover:bg-dark-700 ${\r\n                    selectedEmployee?.id === employee.id ? 'bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500' : ''\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className=\"flex-shrink-0 h-10 w-10\">\r\n                      <div className=\"h-10 w-10 rounded-full bg-gray-300 dark:bg-dark-600 flex items-center justify-center\">\r\n                        <UserIcon className=\"h-6 w-6 text-gray-600 dark:text-gray-400\" />\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex-1 min-w-0\">\r\n                      <p className=\"text-sm font-medium text-gray-900 dark:text-white truncate\">\r\n                        {employee.first_name} {employee.last_name}\r\n                      </p>\r\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400 truncate\">\r\n                        {employee.position}\r\n                      </p>\r\n                      <p className=\"text-xs text-gray-400 dark:text-gray-500 truncate\">\r\n                        {employee.employee_id}\r\n                      </p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n              \r\n              {filteredEmployees.length === 0 && (\r\n                <div className=\"text-center py-8\">\r\n                  <UserIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                  <h3 className=\"mt-2 text-sm font-medium text-gray-900 dark:text-white\">\r\n                    {searchTerm ? 'Žiadni zamestnanci nenájdení' : 'Žiadni zamestnanci'}\r\n                  </h3>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Detail karty zamestnanca */}\r\n        <div className=\"lg:col-span-2\">\r\n          {selectedEmployee ? (\r\n            <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow\">\r\n              {/* Header karty */}\r\n              <div className=\"px-6 py-4 border-b border-gray-200 dark:border-dark-600\">\r\n                                          <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                              <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n                                {selectedEmployee.first_name} {selectedEmployee.last_name}\r\n                              </h2>\r\n                              <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                                {selectedEmployee.position} • {selectedEmployee.employee_id}\r\n                              </p>\r\n                            </div>\r\n                            <div className=\"flex space-x-2\">\r\n                              <button\r\n                                onClick={() => setShowEditModal(true)}\r\n                                className=\"flex items-center px-3 py-2 text-sm font-medium text-blue-600 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300\"\r\n                              >\r\n                                <PencilIcon className=\"h-4 w-4 mr-1\" />\r\n                                Upraviť\r\n                              </button>\r\n                    <button\r\n                      onClick={() => setActiveTab('personal')}\r\n                      className={`px-3 py-1 text-sm font-medium rounded-md ${\r\n                        activeTab === 'personal'\r\n                          ? 'bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300'\r\n                          : 'text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300'\r\n                      }`}\r\n                    >\r\n                      <DocumentTextIcon className=\"h-4 w-4 inline mr-1\" />\r\n                      Personálne\r\n                    </button>\r\n\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Obsah karty */}\r\n              <div className=\"p-6\">\r\n                <PersonalDataTab \r\n                  employee={selectedEmployee} \r\n                  employeeChanges={employeeChanges}\r\n                  onApproveChange={handleApproveChange}\r\n                />\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-12 text-center\">\r\n              <UserIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900 dark:text-white\">\r\n                Vyberte zamestnanca\r\n              </h3>\r\n              <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\r\n                Kliknite na zamestnanca z ľavého zoznamu pre zobrazenie jeho karty\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Edit Employee Modal */}\r\n      {selectedEmployee && (\r\n        <EditEmployeeModal\r\n          isOpen={showEditModal}\r\n          onClose={() => setShowEditModal(false)}\r\n          onSave={handleEditEmployee}\r\n          employee={selectedEmployee}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Komponent pre personálne údaje\r\nconst PersonalDataTab: React.FC<{ \r\n  employee: Employee;\r\n  employeeChanges: any[];\r\n  onApproveChange: (changeId: number, employeeId: number, fieldName: string, newValue: string) => void;\r\n}> = ({ employee, employeeChanges, onApproveChange }) => {\r\n  \r\n  // Funkcia na získanie stavu zmeny pre pole\r\n  const getFieldChangeStatus = (fieldName: string) => {\r\n    // Hľadanie najnovšej pending zmeny (podľa ID)\r\n    const pendingChanges = employeeChanges.filter(c => \r\n      c.employee_id === employee.id && \r\n      c.field_name === fieldName && \r\n      c.status === 'pending'\r\n    );\r\n    \r\n    if (pendingChanges.length > 0) {\r\n      // Vrátiť najnovšiu pending zmenu (s najvyšším ID)\r\n      const latestPendingChange = pendingChanges.reduce((latest, current) => \r\n        (current.id > latest.id) ? current : latest\r\n      );\r\n      \r\n      return {\r\n        status: 'pending',\r\n        reason: latestPendingChange.reason,\r\n        changeId: latestPendingChange.id,\r\n        newValue: latestPendingChange.new_value\r\n      };\r\n    }\r\n    \r\n    // Hľadanie najnovšej approved zmeny\r\n    const approvedChanges = employeeChanges.filter(c => \r\n      c.employee_id === employee.id && \r\n      c.field_name === fieldName && \r\n      c.status === 'approved'\r\n    );\r\n    \r\n    if (approvedChanges.length > 0) {\r\n      const latestApprovedChange = approvedChanges.reduce((latest, current) => \r\n        (current.id > latest.id) ? current : latest\r\n      );\r\n      \r\n      return {\r\n        status: 'approved',\r\n        reason: latestApprovedChange.reason,\r\n        changeId: latestApprovedChange.id,\r\n        newValue: latestApprovedChange.new_value\r\n      };\r\n    }\r\n    \r\n    return null;\r\n  };\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Základné údaje */}\r\n      <div>\r\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Základné údaje</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <DataField \r\n            label=\"Priezvisko\" \r\n            value={employee.last_name} \r\n            employeeId={employee.id}\r\n            fieldName=\"last_name\"\r\n            changeStatus={getFieldChangeStatus('last_name')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Meno\" \r\n            value={employee.first_name} \r\n            employeeId={employee.id}\r\n            fieldName=\"first_name\"\r\n            changeStatus={getFieldChangeStatus('first_name')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Rodné priezvisko\" \r\n            value={employee.birth_name || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"birth_name\"\r\n            changeStatus={getFieldChangeStatus('birth_name')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Titul pred\" \r\n            value={employee.title_before || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"title_before\"\r\n            changeStatus={getFieldChangeStatus('title_before')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Titul za\" \r\n            value={employee.title_after || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"title_after\"\r\n            changeStatus={getFieldChangeStatus('title_after')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Pohlavie\" \r\n            value={employee.gender || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"gender\"\r\n            changeStatus={getFieldChangeStatus('gender')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Dátum narodenia\" \r\n            value={employee.birth_date ? new Date(employee.birth_date).toLocaleDateString('sk-SK') : '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"birth_date\"\r\n            changeStatus={getFieldChangeStatus('birth_date')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Rodné číslo\" \r\n            value={employee.birth_number || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"birth_number\"\r\n            changeStatus={getFieldChangeStatus('birth_number')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Miesto narodenia\" \r\n            value={employee.birth_place || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"birth_place\"\r\n            changeStatus={getFieldChangeStatus('birth_place')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Národnosť\" \r\n            value={employee.nationality || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"nationality\"\r\n            changeStatus={getFieldChangeStatus('nationality')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Štát občianstvo\" \r\n            value={employee.citizenship || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"citizenship\"\r\n            changeStatus={getFieldChangeStatus('citizenship')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Vzdelanie\" \r\n            value={employee.education || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"education\"\r\n            changeStatus={getFieldChangeStatus('education')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Rodinný stav\" \r\n            value={employee.marital_status || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"marital_status\"\r\n            changeStatus={getFieldChangeStatus('marital_status')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField label=\"Spoločník\" value={employee.is_partner ? 'Áno' : 'Nie'} />\r\n          <DataField label=\"Štatutár\" value={employee.is_statutory ? 'Áno' : 'Nie'} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Adresa trvalého pobytu */}\r\n      <div>\r\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Adresa trvalého pobytu</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <DataField \r\n            label=\"Ulica\" \r\n            value={employee.permanent_street || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"permanent_street\"\r\n            changeStatus={getFieldChangeStatus('permanent_street')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Číslo popisné\" \r\n            value={employee.permanent_number || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"permanent_number\"\r\n            changeStatus={getFieldChangeStatus('permanent_number')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Obec\" \r\n            value={employee.permanent_city || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"permanent_city\"\r\n            changeStatus={getFieldChangeStatus('permanent_city')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"PSČ\" \r\n            value={employee.permanent_zip || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"permanent_zip\"\r\n            changeStatus={getFieldChangeStatus('permanent_zip')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Štát\" \r\n            value={employee.permanent_country || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"permanent_country\"\r\n            changeStatus={getFieldChangeStatus('permanent_country')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Kontaktná adresa */}\r\n      <div>\r\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Kontaktná adresa</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <DataField \r\n            label=\"Ulica\" \r\n            value={employee.contact_street || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"contact_street\"\r\n            changeStatus={getFieldChangeStatus('contact_street')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Číslo popisné\" \r\n            value={employee.contact_number || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"contact_number\"\r\n            changeStatus={getFieldChangeStatus('contact_number')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Obec\" \r\n            value={employee.contact_city || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"contact_city\"\r\n            changeStatus={getFieldChangeStatus('contact_city')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"PSČ\" \r\n            value={employee.contact_zip || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"contact_zip\"\r\n            changeStatus={getFieldChangeStatus('contact_zip')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Štát\" \r\n            value={employee.contact_country || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"contact_country\"\r\n            changeStatus={getFieldChangeStatus('contact_country')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField \r\n            label=\"Telefón\" \r\n            value={employee.phone || '-'} \r\n            employeeId={employee.id}\r\n            fieldName=\"phone\"\r\n            changeStatus={getFieldChangeStatus('phone')}\r\n            onApproveChange={onApproveChange}\r\n          />\r\n          <DataField label=\"E-mail\" value={employee.email} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Cudzinecké údaje */}\r\n      <div>\r\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Cudzinecké údaje</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <DataField label=\"Cudzinec\" value={employee.is_foreigner ? 'Áno' : 'Nie'} />\r\n          <DataField label=\"Štát (cudzinec)\" value={employee.foreigner_country || '-'} />\r\n          <DataField label=\"Číslo povolenia k pobytu\" value={employee.residence_permit_number || '-'} />\r\n          <DataField label=\"Číslo soc. poist. v SR\" value={employee.social_insurance_sr || '-'} />\r\n          <DataField label=\"Číslo soc. poist. v zahraničí\" value={employee.social_insurance_foreign || '-'} />\r\n          <DataField label=\"Číslo zdrav. poist. v SR\" value={employee.health_insurance_sr || '-'} />\r\n          <DataField label=\"Cudzinec bez trv. pobytu v SR\" value={employee.foreigner_without_permanent_residence ? 'Áno' : 'Nie'} />\r\n          <DataField label=\"Identifikačné číslo na daňové účely\" value={employee.tax_identification_number || '-'} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\n// Pomocný komponent pre zobrazenie údajového poľa\r\nconst DataField: React.FC<{ \r\n  label: string; \r\n  value: string; \r\n  employeeId?: number;\r\n  fieldName?: string;\r\n  changeStatus?: any;\r\n  onApproveChange?: (changeId: number, employeeId: number, fieldName: string, newValue: string) => void;\r\n}> = ({ label, value, employeeId, fieldName, changeStatus, onApproveChange }) => (\r\n  <div className=\"relative\">\r\n    <dt className=\"text-sm font-medium text-gray-500 dark:text-gray-400\">{label}</dt>\r\n    <dd className=\"mt-1 text-sm text-gray-900 dark:text-white pr-8\">\r\n      {changeStatus && changeStatus.status === 'pending' ? changeStatus.newValue : value}\r\n    </dd>\r\n    \r\n    {changeStatus && (\r\n      <div className=\"absolute top-0 right-0\">\r\n        {changeStatus.status === 'pending' && (\r\n          <button\r\n            onClick={() => onApproveChange?.(changeStatus.changeId, employeeId!, fieldName!, changeStatus.newValue)}\r\n            className=\"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300\"\r\n            title={`🔄 Čakajúca zmena od zamestnanca\r\n\r\n📝 Dôvod: ${changeStatus.reason}\r\n🆕 Nová hodnota: ${changeStatus.newValue}\r\n\r\nKliknite pre schválenie zmeny.`}\r\n          >\r\n            <PencilIcon className=\"w-4 h-4\" />\r\n          </button>\r\n        )}\r\n        {changeStatus.status === 'approved' && (\r\n          <div className=\"text-green-500 dark:text-green-400\" title={`✅ Schválená zmena\r\n\r\n📝 Dôvod: ${changeStatus.reason}\r\n🆕 Nová hodnota: ${changeStatus.newValue}\r\n\r\nZmena bola schválená a aplikovaná.`}>\r\n            <PencilIcon className=\"w-4 h-4\" />\r\n          </div>\r\n        )}\r\n      </div>\r\n    )}\r\n  </div>\r\n);\r\n\r\n// Pomocné funkcie\r\nconst getEmploymentTypeLabel = (type: string) => {\r\n  const labels = {\r\n    'full_time': 'Plný úväzok',\r\n    'part_time': 'Čiastočný úväzok',\r\n    'contract': 'Dohoda',\r\n    'intern': 'Stáž'\r\n  };\r\n  return labels[type as keyof typeof labels] || type;\r\n};\r\n\r\nconst getStatusLabel = (status: string) => {\r\n  const labels = {\r\n    'active': 'Aktívny',\r\n    'inactive': 'Neaktívny',\r\n    'terminated': 'Ukončený',\r\n    'on_leave': 'Na dovolenke'\r\n  };\r\n  return labels[status as keyof typeof labels] || status;\r\n};\r\n\r\nexport default EmployeeCardPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { XMarkIcon } from '@heroicons/react/24/outline';\r\nimport { Employee } from '../services/hrService';\r\nimport { EmploymentRelation } from '../types/EmploymentRelation';\r\n\r\ninterface EmploymentRelationModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onSave: (relation: EmploymentRelation) => void;\r\n  relation?: EmploymentRelation | null;\r\n  employees: Employee[];\r\n  isEdit?: boolean;\r\n}\r\n\r\nconst EmploymentRelationModal: React.FC<EmploymentRelationModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onSave,\r\n  relation,\r\n  employees,\r\n  isEdit = false\r\n}) => {\r\n  const [formData, setFormData] = useState<EmploymentRelation>({\r\n    employee_id: 0,\r\n    employee_first_name: '',\r\n    employee_last_name: '',\r\n    employee_email: '',\r\n    \r\n    // Základné údaje\r\n    birth_number: '',\r\n    insurance_company: 'Všeobecná zdravotná poisťovňa',\r\n    insurance_number: '',\r\n    workplace: 'HS',\r\n    center: '',\r\n    work_start_date: '',\r\n    work_end_date: undefined,\r\n    position: '',\r\n    position_name: '',\r\n    employment_type: 'full_time',\r\n    employment_start_date: '',\r\n    probation_end_date: undefined,\r\n    fixed_term_contract: false,\r\n    departure_date: undefined,\r\n    employment_termination_date: undefined, // Ukončenie pracovného pomeru\r\n    is_active: true,\r\n    \r\n    // Mzdové údaje\r\n    salary: 0,\r\n    salary_after_departure: 0,\r\n    temporary_work_force: false,\r\n    irregular_income: false,\r\n    reduce_personal_evaluation: false,\r\n    agreed_weekly_hours: 40,\r\n    no_vacation_entitlement: false,\r\n    manual_vacation_adjustment: false,\r\n    \r\n    // Dovolenka\r\n    permanent_child_care_from: undefined,\r\n    permanent_child_care_to: undefined,\r\n    agreed_work_days: 5,\r\n    agreed_work_days_partial: 5,\r\n    work_days_full_time: 5,\r\n    work_days_full_time_partial: 5,\r\n    vacation_increase: 0,\r\n    vacation_increase_partial: 0,\r\n    basic_annual_vacation_days: 25,\r\n    basic_annual_vacation_days_partial: 25,\r\n    vacation_partial: 25,\r\n    vacation_days: 25,\r\n    forfeited_vacation_days: 0,\r\n    forfeited_vacation_days_partial: 0,\r\n    vacation_reduction_days: 0,\r\n    vacation_reduction_days_partial: 0,\r\n    vacation_used: 0,\r\n    vacation_used_partial: 0,\r\n    overpaid_vacation_days: 0,\r\n    overpaid_vacation_days_2year: 0,\r\n    overpaid_vacation_days_3year: 0,\r\n    \r\n    // Mzda a prémie\r\n    salary_type: 'monthly',\r\n    holidays_paid: 'Priemerom',\r\n    schedule: 'Rovnomerný',\r\n    rate: 0,\r\n    vacation: 25,\r\n    personal_evaluation: 0,\r\n    bonus_percentage: 0,\r\n    bonus: 0,\r\n    \r\n    // Poistenie\r\n    life_insurance_company: '',\r\n    life_insurance: 0,\r\n    varsym_life_insurance: '',\r\n    specsym_life_insurance: '',\r\n    risky_work: false,\r\n    \r\n    // Výplata\r\n    advance: 0,\r\n    payment: 0,\r\n    advance_2: 0,\r\n    in_cash: 0,\r\n    account_number: '',\r\n    bank_code: '',\r\n    varsym_settlement: '',\r\n    specsym_settlement: '',\r\n    \r\n    // Počítané roky\r\n    counted_years: 0,\r\n    counted_days: 0,\r\n    \r\n    // Oznámenia\r\n    organization_notice: '',\r\n    termination_reason: '',\r\n    other_notice: '',\r\n    \r\n    // Poistné\r\n    np: true,\r\n    sp: true,\r\n    ip: true,\r\n    pvn: true,\r\n    pfp: true,\r\n    gp: true,\r\n    up: true,\r\n    prfs: true,\r\n    zp: true,\r\n    \r\n    // Dôchodkové poistenie\r\n    pension_company: '',\r\n    varsym_pension: '',\r\n    specsym_pension: '',\r\n    pension_contribution: 0,\r\n    maximum: 0,\r\n    pension_contribution_percentage: 0,\r\n    \r\n    // Identifikácia\r\n    identification_number: '',\r\n    workplace_code: '',\r\n    classification_code: '',\r\n    oop_application_date: undefined,\r\n    oop_termination_date: undefined,\r\n    \r\n    // Systémové polia\r\n    status: 'active',\r\n    \r\n    // Dochádzkové nastavenia\r\n    attendance_mode: 'manual',\r\n    work_start_time: '08:00',\r\n    work_end_time: '16:00',\r\n    break_start_time: '12:00',\r\n    break_end_time: '12:30',\r\n    weekly_hours: 40\r\n  });\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  useEffect(() => {\r\n    if (relation && isOpen) {\r\n      setFormData(relation);\r\n    } else if (!isEdit && isOpen) {\r\n      // Reset form for new relation\r\n      setFormData({\r\n        ...formData,\r\n        id: undefined,\r\n        employee_id: 0,\r\n        employee_first_name: '',\r\n        employee_last_name: '',\r\n        employee_email: '',\r\n        position: '',\r\n        position_name: '',\r\n        salary: 0,\r\n        rate: 0\r\n      });\r\n    }\r\n    setErrors({});\r\n  }, [relation, isOpen, isEdit]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>) => {\r\n    const { name, value, type } = e.target;\r\n    \r\n    let newValue: any = value;\r\n    if (type === 'checkbox') {\r\n      newValue = (e.target as HTMLInputElement).checked;\r\n    } else if (type === 'number') {\r\n      newValue = value === '' ? 0 : parseFloat(value);\r\n    } else if (name === 'salary') {\r\n      // Pre mzdu zachováme text, ale odstránime nečíselné znaky okrem bodky a čiarky\r\n      newValue = value.replace(/[^\\d.,]/g, '');\r\n    } else if (name === 'is_active') {\r\n      // Pre boolean hodnoty\r\n      newValue = value === 'true';\r\n    } else if (name === 'employment_termination_date') {\r\n      // Ak sa zadá dátum ukončenia, automaticky nastavíme status na neaktívny\r\n      if (value && value.trim() !== '') {\r\n        setFormData(prev => ({\r\n          ...prev,\r\n          [name]: value,\r\n          is_active: false\r\n        }));\r\n        return; // Ukončíme funkciu, aby sa nevykonal setFormData dvakrát\r\n      }\r\n    }\r\n    \r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: newValue\r\n    }));\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [name]: ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleEmployeeChange = (employeeId: number) => {\r\n    const selectedEmployee = employees.find(emp => emp.id === employeeId);\r\n    if (selectedEmployee) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        employee_id: employeeId,\r\n        employee_first_name: selectedEmployee.first_name,\r\n        employee_last_name: selectedEmployee.last_name,\r\n        employee_email: selectedEmployee.email,\r\n        birth_number: selectedEmployee.birth_number || ''\r\n      }));\r\n    }\r\n  };\r\n\r\n  const validateForm = () => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    if (!formData.employee_id) {\r\n      newErrors.employee_id = 'Zamestnanec je povinný';\r\n    }\r\n\r\n    if (!formData.position.trim()) {\r\n      newErrors.position = 'Pozícia je povinná';\r\n    }\r\n\r\n    if (!formData.employment_start_date) {\r\n      newErrors.employment_start_date = 'Dátum začiatku pracovného pomeru je povinný';\r\n    }\r\n\r\n    if (!formData.salary || formData.salary.toString().trim() === '' || parseFloat(formData.salary.toString().replace(',', '.')) <= 0) {\r\n      newErrors.salary = 'Mzda musí byť väčšia ako 0';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n\r\n    setIsSubmitting(true);\r\n    \r\n    try {\r\n      onSave(formData);\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Chyba pri ukladaní pracovného pomeru:', error);\r\n    } finally {\r\n      setIsSubmitting(false);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setFormData({\r\n      employee_id: 0,\r\n      employee_first_name: '',\r\n      employee_last_name: '',\r\n      employee_email: '',\r\n      birth_number: '',\r\n      insurance_company: 'Všeobecná zdravotná poisťovňa',\r\n      insurance_number: '',\r\n      workplace: 'HS',\r\n      center: '',\r\n      work_start_date: '',\r\n      work_end_date: undefined,\r\n      position: '',\r\n      position_name: '',\r\n      employment_type: 'full_time',\r\n      employment_start_date: '',\r\n      probation_end_date: undefined,\r\n      fixed_term_contract: false,\r\n      departure_date: undefined,\r\n      is_active: true,\r\n      salary: 0,\r\n      salary_after_departure: 0,\r\n      temporary_work_force: false,\r\n      irregular_income: false,\r\n      reduce_personal_evaluation: false,\r\n      agreed_weekly_hours: 40,\r\n      no_vacation_entitlement: false,\r\n      manual_vacation_adjustment: false,\r\n      permanent_child_care_from: undefined,\r\n      permanent_child_care_to: undefined,\r\n      agreed_work_days: 5,\r\n      agreed_work_days_partial: 5,\r\n      work_days_full_time: 5,\r\n      work_days_full_time_partial: 5,\r\n      vacation_increase: 0,\r\n      vacation_increase_partial: 0,\r\n      basic_annual_vacation_days: 25,\r\n      basic_annual_vacation_days_partial: 25,\r\n      vacation_partial: 25,\r\n      vacation_days: 25,\r\n      forfeited_vacation_days: 0,\r\n      forfeited_vacation_days_partial: 0,\r\n      vacation_reduction_days: 0,\r\n      vacation_reduction_days_partial: 0,\r\n      vacation_used: 0,\r\n      vacation_used_partial: 0,\r\n      overpaid_vacation_days: 0,\r\n      overpaid_vacation_days_2year: 0,\r\n      overpaid_vacation_days_3year: 0,\r\n      salary_type: 'monthly',\r\n      holidays_paid: 'Priemerom',\r\n      schedule: 'Rovnomerný',\r\n      rate: 0,\r\n      vacation: 25,\r\n      personal_evaluation: 0,\r\n      bonus_percentage: 0,\r\n      bonus: 0,\r\n      life_insurance_company: '',\r\n      life_insurance: 0,\r\n      varsym_life_insurance: '',\r\n      specsym_life_insurance: '',\r\n      risky_work: false,\r\n      advance: 0,\r\n      payment: 0,\r\n      advance_2: 0,\r\n      in_cash: 0,\r\n      account_number: '',\r\n      bank_code: '',\r\n      varsym_settlement: '',\r\n      specsym_settlement: '',\r\n      counted_years: 0,\r\n      counted_days: 0,\r\n      organization_notice: '',\r\n      termination_reason: '',\r\n      other_notice: '',\r\n      np: true,\r\n      sp: true,\r\n      ip: true,\r\n      pvn: true,\r\n      pfp: true,\r\n      gp: true,\r\n      up: true,\r\n      prfs: true,\r\n      zp: true,\r\n      pension_company: '',\r\n      varsym_pension: '',\r\n      specsym_pension: '',\r\n      pension_contribution: 0,\r\n      maximum: 0,\r\n      pension_contribution_percentage: 0,\r\n      identification_number: '',\r\n      workplace_code: '',\r\n      classification_code: '',\r\n      oop_application_date: undefined,\r\n      oop_termination_date: undefined,\r\n      status: 'active'\r\n    });\r\n    setErrors({});\r\n    onClose();\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] overflow-y-auto mx-4\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n            {isEdit ? 'Upraviť pracovný pomer' : 'Pridať pracovný pomer'}\r\n          </h2>\r\n          <button\r\n            onClick={handleClose}\r\n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"h-6 w-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-6\">\r\n          {/* Základné informácie */}\r\n          <div className=\"border-b border-gray-200 dark:border-dark-600 pb-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              Základné informácie\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label htmlFor=\"employee_id\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Zamestnanec *\r\n                </label>\r\n                <select\r\n                  id=\"employee_id\"\r\n                  name=\"employee_id\"\r\n                  value={formData.employee_id}\r\n                  onChange={(e) => handleEmployeeChange(parseInt(e.target.value))}\r\n                  className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                    errors.employee_id ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                  }`}\r\n                >\r\n                  <option value=\"\">Vyberte zamestnanca</option>\r\n                  {employees.map((employee) => (\r\n                    <option key={employee.id} value={employee.id}>\r\n                      {employee.first_name} {employee.last_name} ({employee.email})\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                {errors.employee_id && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.employee_id}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"birth_number\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Rodné číslo\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"birth_number\"\r\n                  name=\"birth_number\"\r\n                  value={formData.birth_number}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"position\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Pozícia *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"position\"\r\n                  name=\"position\"\r\n                  value={formData.position}\r\n                  onChange={handleInputChange}\r\n                  className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                    errors.position ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                  }`}\r\n                />\r\n                {errors.position && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.position}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"employment_type\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Druh pracovného pomeru\r\n                </label>\r\n                <select\r\n                  id=\"employment_type\"\r\n                  name=\"employment_type\"\r\n                  value={formData.employment_type}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                >\r\n                  <option value=\"full_time\">Hlavný pracovný pomer</option>\r\n                  <option value=\"part_time\">Čiastočný úväzok</option>\r\n                  <option value=\"contract\">Dohoda o pracovnej činnosti</option>\r\n                  <option value=\"intern\">Stáž</option>\r\n                  <option value=\"dohoda\">Dohoda</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"employment_start_date\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Začiatok pracovného pomeru *\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"employment_start_date\"\r\n                  name=\"employment_start_date\"\r\n                  value={formData.employment_start_date}\r\n                  onChange={handleInputChange}\r\n                  className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                    errors.employment_start_date ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                  }`}\r\n                />\r\n                {errors.employment_start_date && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.employment_start_date}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"employment_termination_date\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Ukončenie pracovného pomeru\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  id=\"employment_termination_date\"\r\n                  name=\"employment_termination_date\"\r\n                  value={formData.employment_termination_date || ''}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"is_active\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Status pracovného pomeru\r\n                </label>\r\n                <select\r\n                  id=\"is_active\"\r\n                  name=\"is_active\"\r\n                  value={formData.is_active ? 'true' : 'false'}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                >\r\n                  <option value=\"true\">Aktívny</option>\r\n                  <option value=\"false\">Neaktívny (ukončený)</option>\r\n                </select>\r\n                <p className=\"mt-1 text-sm text-gray-500 dark:text-gray-400\">\r\n                  Neaktívny status sa automaticky nastaví pri zadaní dátumu ukončenia\r\n                </p>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"salary\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Mzda (€) - napíšte sumu *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"salary\"\r\n                  name=\"salary\"\r\n                  value={formData.salary}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Napríklad: 2500\"\r\n                  className={`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white ${\r\n                    errors.salary ? 'border-red-300' : 'border-gray-300 dark:border-dark-600'\r\n                  }`}\r\n                />\r\n                {errors.salary && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.salary}</p>\r\n                )}\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"salary_type\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Druh mzdy\r\n                </label>\r\n                <select\r\n                  id=\"salary_type\"\r\n                  name=\"salary_type\"\r\n                  value={formData.salary_type}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                >\r\n                  <option value=\"monthly\">Mesačné</option>\r\n                  <option value=\"hourly\">Hodinová</option>\r\n                  <option value=\"task_based\">Úkolová</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Mzdové údaje */}\r\n          <div className=\"border-b border-gray-200 dark:border-dark-600 pb-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              Mzdové údaje\r\n            </h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n              <div>\r\n                <label htmlFor=\"rate\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Sadzba (€)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"rate\"\r\n                  name=\"rate\"\r\n                  value={formData.rate}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"personal_evaluation\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Osobné ohodnotenie (€)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"personal_evaluation\"\r\n                  name=\"personal_evaluation\"\r\n                  value={formData.personal_evaluation}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"bonus_percentage\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Prémie (%)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"bonus_percentage\"\r\n                  name=\"bonus_percentage\"\r\n                  value={formData.bonus_percentage}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  step=\"0.01\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"agreed_weekly_hours\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Dohodnutý týždenný úväzok (hodiny)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"agreed_weekly_hours\"\r\n                  name=\"agreed_weekly_hours\"\r\n                  value={formData.agreed_weekly_hours}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  step=\"0.5\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Checkboxy */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mt-6\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"temporary_work_force\"\r\n                  name=\"temporary_work_force\"\r\n                  checked={formData.temporary_work_force}\r\n                  onChange={handleInputChange}\r\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"temporary_work_force\" className=\"ml-2 block text-sm text-gray-900 dark:text-white\">\r\n                  Prenájom pracovnej sily\r\n                </label>\r\n              </div>\r\n\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"irregular_income\"\r\n                  name=\"irregular_income\"\r\n                  checked={formData.irregular_income}\r\n                  onChange={handleInputChange}\r\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"irregular_income\" className=\"ml-2 block text-sm text-gray-900 dark:text-white\">\r\n                  Nepravidelný príjem\r\n                </label>\r\n              </div>\r\n\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  id=\"no_vacation_entitlement\"\r\n                  name=\"no_vacation_entitlement\"\r\n                  checked={formData.no_vacation_entitlement}\r\n                  onChange={handleInputChange}\r\n                  className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                />\r\n                <label htmlFor=\"no_vacation_entitlement\" className=\"ml-2 block text-sm text-gray-900 dark:text-white\">\r\n                  Bez nároku na dovolenku\r\n                </label>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Dochádzkové nastavenia */}\r\n          <div className=\"mt-8\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              Dochádzkové nastavenia\r\n            </h3>\r\n            \r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n              <div>\r\n                <label htmlFor=\"attendance_mode\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Režim dochádzky\r\n                </label>\r\n                <select\r\n                  id=\"attendance_mode\"\r\n                  name=\"attendance_mode\"\r\n                  value={formData.attendance_mode}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                >\r\n                  <option value=\"manual\">Manuálne - zamestnanec označuje dochádzku</option>\r\n                  <option value=\"automatic\">Automaticky - systém počíta dochádzku podľa nastavení</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"weekly_hours\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Týždenný úväzok (hodiny)\r\n                </label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"weekly_hours\"\r\n                  name=\"weekly_hours\"\r\n                  value={formData.weekly_hours}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  step=\"0.5\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"work_start_time\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Začiatok pracovného času\r\n                </label>\r\n                <input\r\n                  type=\"time\"\r\n                  id=\"work_start_time\"\r\n                  name=\"work_start_time\"\r\n                  value={formData.work_start_time}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"work_end_time\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Koniec pracovného času\r\n                </label>\r\n                <input\r\n                  type=\"time\"\r\n                  id=\"work_end_time\"\r\n                  name=\"work_end_time\"\r\n                  value={formData.work_end_time}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"break_start_time\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Začiatok prestávky\r\n                </label>\r\n                <input\r\n                  type=\"time\"\r\n                  id=\"break_start_time\"\r\n                  name=\"break_start_time\"\r\n                  value={formData.break_start_time}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label htmlFor=\"break_end_time\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Koniec prestávky\r\n                </label>\r\n                <input\r\n                  type=\"time\"\r\n                  id=\"break_end_time\"\r\n                  name=\"break_end_time\"\r\n                  value={formData.break_end_time}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {formData.attendance_mode === 'automatic' && (\r\n              <div className=\"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-md\">\r\n                <p className=\"text-sm text-blue-800 dark:text-blue-200\">\r\n                  💡 <strong>Automatický režim:</strong> Systém automaticky vytvorí dochádzku pre tohto zamestnanca \r\n                  na základe nastavených pracovných hodín. Zamestnanec nebude musieť manuálne označovať dochádzku.\r\n                </p>\r\n              </div>\r\n            )}\r\n\r\n            {formData.attendance_mode === 'manual' && (\r\n              <div className=\"mt-4 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-md\">\r\n                <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\r\n                  💡 <strong>Manuálny režim:</strong> Zamestnanec bude musieť manuálne označovať dochádzku cez \r\n                  AttendanceTracker. Firma môže upraviť dochádzku v prípade potreby.\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Tlačidlá */}\r\n          <div className=\"flex justify-end space-x-3 pt-6 border-t border-gray-200 dark:border-dark-600\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleClose}\r\n              className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600 focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            >\r\n              Zrušiť\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isSubmitting}\r\n              className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n            >\r\n              {isSubmitting ? 'Ukladám...' : (isEdit ? 'Uložiť zmeny' : 'Pridať pracovný pomer')}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmploymentRelationModal;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  PlusIcon, \r\n  PencilIcon, \r\n  TrashIcon, \r\n  MagnifyingGlassIcon,\r\n  ArrowLeftIcon\r\n} from '@heroicons/react/24/outline';\r\nimport { hrService } from '../services/hrService';\r\nimport { EmploymentRelation } from '../types/EmploymentRelation';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\nimport EmploymentRelationModal from '../components/EmploymentRelationModal';\r\n\r\ninterface EmploymentRelationsPageProps {\r\n  companyId: number;\r\n  userEmail: string;\r\n  onBack: () => void;\r\n}\r\n\r\nconst EmploymentRelationsPage: React.FC<EmploymentRelationsPageProps> = ({\r\n  companyId,\r\n  userEmail,\r\n  onBack\r\n}) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [employmentRelations, setEmploymentRelations] = useState<EmploymentRelation[]>([]);\r\n  const [employees, setEmployees] = useState<any[]>([]);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [showAddModal, setShowAddModal] = useState(false);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n  const [selectedRelation, setSelectedRelation] = useState<EmploymentRelation | null>(null);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [companyId]);\r\n\r\n  const loadData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      // Načítanie zamestnancov firmy\r\n      const employeesData = await hrService.getEmployees(companyId);\r\n      setEmployees(employeesData);\r\n      \r\n      // Načítanie pracovných pomerov z API\r\n      const relationsData = await hrService.getEmploymentRelations(companyId);\r\n      setEmploymentRelations(relationsData);\r\n    } catch (error) {\r\n      console.error('Chyba pri načítaní dát:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const filteredRelations = employmentRelations.filter(relation =>\r\n    relation.first_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    relation.last_name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    relation.position?.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const handleAddRelation = () => {\r\n    setShowAddModal(true);\r\n  };\r\n\r\n  const handleEditRelation = (relation: EmploymentRelation) => {\r\n    setSelectedRelation(relation);\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const handleSaveRelation = async (relationData: EmploymentRelation) => {\r\n    try {\r\n      if (showEditModal && selectedRelation && selectedRelation.id) {\r\n        // Edit existing relation\r\n        await hrService.updateEmploymentRelation(selectedRelation.id, {\r\n          position: relationData.position,\r\n          employment_type: relationData.employment_type === 'dohoda' ? 'contract' : relationData.employment_type,\r\n          employment_start_date: relationData.employment_start_date,\r\n          employment_end_date: relationData.employment_termination_date,\r\n          salary: relationData.salary,\r\n          weekly_hours: relationData.agreed_weekly_hours,\r\n          attendance_mode: relationData.attendance_mode,\r\n          work_start_time: relationData.work_start_time,\r\n          work_end_time: relationData.work_end_time,\r\n          break_start_time: relationData.break_start_time,\r\n          break_end_time: relationData.break_end_time,\r\n          is_active: relationData.is_active\r\n        });\r\n      } else {\r\n        // Add new relation\r\n        await hrService.addEmploymentRelation({\r\n          employee_id: relationData.employee_id,\r\n          company_id: companyId,\r\n          position: relationData.position,\r\n          employment_type: relationData.employment_type === 'dohoda' ? 'contract' : relationData.employment_type,\r\n          employment_start_date: relationData.employment_start_date,\r\n          employment_end_date: relationData.employment_termination_date,\r\n          salary: relationData.salary,\r\n          weekly_hours: relationData.agreed_weekly_hours,\r\n          attendance_mode: relationData.attendance_mode,\r\n          work_start_time: relationData.work_start_time,\r\n          work_end_time: relationData.work_end_time,\r\n          break_start_time: relationData.break_start_time,\r\n          break_end_time: relationData.break_end_time,\r\n          is_active: relationData.is_active\r\n        });\r\n      }\r\n      \r\n      // Obnoviť dáta\r\n      await loadData();\r\n    } catch (error) {\r\n      console.error('Chyba pri ukladaní pracovného pomeru:', error);\r\n      alert('Chyba pri ukladaní pracovného pomeru');\r\n    }\r\n  };\r\n\r\n  const handleDeleteRelation = (relationId: number) => {\r\n    if (window.confirm('Naozaj chcete vymazať tento pracovný pomer?')) {\r\n      try {\r\n\r\n        setEmploymentRelations(prev => prev.filter(r => r.id !== relationId));\r\n      } catch (error) {\r\n        console.error('Chyba pri vymazaní pracovného pomeru:', error);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const statusConfig = {\r\n      active: { color: 'bg-green-100 text-green-800', label: 'Aktívny' },\r\n      inactive: { color: 'bg-gray-100 text-gray-800', label: 'Neaktívny' },\r\n      terminated: { color: 'bg-red-100 text-red-800', label: 'Ukončený' }\r\n    };\r\n    const config = statusConfig[status as keyof typeof statusConfig] || statusConfig.inactive;\r\n    return (\r\n      <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${config.color}`}>\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getEmploymentTypeLabel = (type: string) => {\r\n    const labels = {\r\n      'full_time': 'Plný úväzok',\r\n      'part_time': 'Čiastočný úväzok',\r\n      'contract': 'Dohoda',\r\n      'intern': 'Stáž'\r\n    };\r\n    return labels[type as keyof typeof labels] || type;\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-dark-900\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between mb-8\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <button\r\n              onClick={onBack}\r\n              className=\"flex items-center text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white\"\r\n            >\r\n              <ArrowLeftIcon className=\"w-5 h-5 mr-2\" />\r\n              Späť\r\n            </button>\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">Pracovné pomery</h1>\r\n              <p className=\"text-gray-600 dark:text-gray-300\">Správa pracovných pomerov zamestnancov</p>\r\n            </div>\r\n          </div>\r\n          <button\r\n            onClick={handleAddRelation}\r\n            className=\"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors flex items-center\"\r\n          >\r\n            <PlusIcon className=\"w-5 h-5 mr-2\" />\r\n            Pridať pracovný pomer\r\n          </button>\r\n        </div>\r\n\r\n        {/* Search */}\r\n        <div className=\"mb-6\">\r\n          <div className=\"relative\">\r\n            <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400\" />\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Hľadať zamestnanca alebo pozíciu...\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Table */}\r\n        <div className=\"bg-white dark:bg-dark-800 shadow rounded-lg overflow-hidden\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-dark-600\">\r\n              <thead className=\"bg-gray-50 dark:bg-dark-700\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Zamestnanec\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Pozícia\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Typ\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Začiatok\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Ukončenie\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Mzda\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Týždenné hodiny\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Dochádzka\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Pracovný čas\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Status\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Akcie\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600\">\r\n                {filteredRelations.map((relation) => (\r\n                    <tr key={relation.id} className=\"hover:bg-gray-50 dark:hover:bg-dark-700\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div>\r\n                        <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                          {relation.first_name} {relation.last_name}\r\n                        </div>\r\n                        <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                          {relation.email}\r\n                        </div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {relation.position}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {getEmploymentTypeLabel(relation.employment_type)}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {relation.employment_start_date ? new Date(relation.employment_start_date).toLocaleDateString('sk-SK') : '-'}\r\n                    </td>\r\n                                         <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                       {relation.employment_termination_date ? new Date(relation.employment_termination_date).toLocaleDateString('sk-SK') : '-'}\r\n                     </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {relation.salary ? `${relation.salary} €` : '-'}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {relation.weekly_hours ? `${relation.weekly_hours} hodín` : '-'}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {relation.attendance_mode === 'automatic' ? 'Automatická' : \r\n                       relation.attendance_mode === 'manual' ? 'Manuálna' : '-'}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {relation.work_start_time && relation.work_end_time ? \r\n                        `${relation.work_start_time} - ${relation.work_end_time}` : '-'}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      {getStatusBadge(\r\n                        relation.employment_termination_date && new Date(relation.employment_termination_date) <= new Date() \r\n                          ? 'terminated' \r\n                          : (relation.is_active ? 'active' : 'inactive')\r\n                      )}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                      <div className=\"flex space-x-2\">\r\n                        <button\r\n                          onClick={() => handleEditRelation(relation)}\r\n                          className=\"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300\"\r\n                        >\r\n                          <PencilIcon className=\"w-4 h-4\" />\r\n                        </button>\r\n                                                 <button\r\n                           onClick={() => relation.id && handleDeleteRelation(relation.id)}\r\n                           className=\"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300\"\r\n                         >\r\n                          <TrashIcon className=\"w-4 h-4\" />\r\n                        </button>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          {filteredRelations.length === 0 && (\r\n            <div className=\"text-center py-8\">\r\n              <p className=\"text-gray-500 dark:text-gray-400\">\r\n                {searchTerm ? 'Žiadne výsledky pre vyhľadávanie' : 'Žiadne pracovné pomery'}\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Modals */}\r\n        {showAddModal && (\r\n          <EmploymentRelationModal\r\n            isOpen={showAddModal}\r\n            onClose={() => setShowAddModal(false)}\r\n            onSave={handleSaveRelation}\r\n            employees={employees}\r\n            isEdit={false}\r\n          />\r\n        )}\r\n\r\n        {showEditModal && selectedRelation && (\r\n          <EmploymentRelationModal\r\n            isOpen={showEditModal}\r\n            onClose={() => setShowEditModal(false)}\r\n            onSave={handleSaveRelation}\r\n            relation={selectedRelation}\r\n            employees={employees}\r\n            isEdit={true}\r\n          />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmploymentRelationsPage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { \r\n  ArrowLeftIcon,\r\n  ClockIcon,\r\n  CalendarIcon,\r\n  CheckCircleIcon,\r\n  ExclamationTriangleIcon,\r\n  UserGroupIcon\r\n} from '@heroicons/react/24/outline';\r\nimport { hrService } from '../services/hrService';\r\nimport LoadingSpinner from '../components/LoadingSpinner';\r\n\r\ninterface AutomaticAttendancePageProps {\r\n  companyId: number;\r\n  onBack?: () => void;\r\n}\r\n\r\ninterface EmployeeWithAutomaticAttendance {\r\n  id: number;\r\n  first_name: string;\r\n  last_name: string;\r\n  position: string;\r\n  employment_relation_id: number;\r\n  work_start_time: string;\r\n  work_end_time: string;\r\n  break_start_time: string;\r\n  break_end_time: string;\r\n  weekly_hours: number;\r\n}\r\n\r\ntype PeriodType = 'month' | 'year' | 'custom';\r\n\r\ninterface PeriodOption {\r\n  value: PeriodType;\r\n  label: string;\r\n}\r\n\r\nconst AutomaticAttendancePage: React.FC<AutomaticAttendancePageProps> = ({ companyId, onBack }) => {\r\n  const [loading, setLoading] = useState(false);\r\n  const [processing, setProcessing] = useState(false);\r\n  const [employees, setEmployees] = useState<EmployeeWithAutomaticAttendance[]>([]);\r\n  const [selectedEmployees, setSelectedEmployees] = useState<number[]>([]);\r\n  const [selectedPeriod, setSelectedPeriod] = useState<PeriodType>('month');\r\n  const [startDate, setStartDate] = useState<string>('');\r\n  const [endDate, setEndDate] = useState<string>('');\r\n  const [results, setResults] = useState<any[]>([]);\r\n  const [showResults, setShowResults] = useState(false);\r\n\r\n  const periodOptions: PeriodOption[] = [\r\n    { value: 'month', label: 'Tento mesiac' },\r\n    { value: 'year', label: 'Tento rok' },\r\n    { value: 'custom', label: 'Vlastné obdobie' }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    loadEmployees();\r\n    updateDateRange();\r\n  }, [companyId]); // Pridaná závislosť companyId\r\n\r\n  useEffect(() => {\r\n    updateDateRange();\r\n  }, [selectedPeriod]);\r\n\r\n  const loadEmployees = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const employeesData = await hrService.getEmployeesWithAutomaticAttendance(companyId);\r\n      setEmployees(employeesData);\r\n      // Resetovať výber len ak je prázdny alebo ak sa zmenili zamestnanci\r\n      setSelectedEmployees(prev => {\r\n        // Ak sú zamestnanci rovnakí, zachovať výber\r\n        if (employees.length === employeesData.length && \r\n            employees.every((emp, index) => emp.id === employeesData[index]?.id)) {\r\n          return prev;\r\n        }\r\n        // Inak resetovať\r\n        return [];\r\n      });\r\n    } catch (error) {\r\n      console.error('Chyba pri načítaní zamestnancov:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const updateDateRange = () => {\r\n    const now = new Date();\r\n    let start: Date;\r\n    let end: Date;\r\n\r\n    switch (selectedPeriod) {\r\n      case 'month':\r\n        start = new Date(now.getFullYear(), now.getMonth(), 1);\r\n        end = new Date(now.getFullYear(), now.getMonth() + 1, 0); // Posledný deň mesiaca\r\n        break;\r\n      case 'year':\r\n        start = new Date(now.getFullYear(), 0, 1);\r\n        end = new Date(now.getFullYear(), 11, 31); // 31. december tohto roku\r\n        break;\r\n      case 'custom':\r\n        // Použije aktuálne hodnoty startDate a endDate\r\n        return;\r\n      default:\r\n        start = new Date(now.getFullYear(), now.getMonth(), 1);\r\n        end = new Date(now.getFullYear(), now.getMonth() + 1, 0);\r\n    }\r\n\r\n    // Použiť lokálne dátumové formátovanie namiesto toISOString()\r\n    const formatDate = (date: Date): string => {\r\n      const year = date.getFullYear();\r\n      const month = String(date.getMonth() + 1).padStart(2, '0');\r\n      const day = String(date.getDate()).padStart(2, '0');\r\n      return `${year}-${month}-${day}`;\r\n    };\r\n\r\n    setStartDate(formatDate(start));\r\n    setEndDate(formatDate(end));\r\n  };\r\n\r\n  const handleSelectAll = () => {\r\n    if (selectedEmployees.length === employees.length) {\r\n      setSelectedEmployees([]);\r\n    } else {\r\n      setSelectedEmployees(employees.map(emp => emp.id));\r\n    }\r\n  };\r\n\r\n  const handleSelectEmployee = (employeeId: number) => {\r\n    setSelectedEmployees(prev => {\r\n      const newSelection = prev.includes(employeeId) \r\n        ? prev.filter(id => id !== employeeId)\r\n        : [...prev, employeeId];\r\n      return newSelection;\r\n    });\r\n  };\r\n\r\n  const handleProcessAttendance = async () => {\r\n    if (selectedEmployees.length === 0) {\r\n      alert('Vyberte aspoň jedného zamestnanca');\r\n      return;\r\n    }\r\n\r\n    if (!startDate || !endDate) {\r\n      alert('Vyberte obdobie');\r\n      return;\r\n    }\r\n\r\n    const confirmed = window.confirm(\r\n      `Naozaj chcete prepočítať dochádzku pre ${selectedEmployees.length} zamestnancov ` +\r\n      `za obdobie ${startDate} až ${endDate}?\\n\\n` +\r\n      'Táto akcia prepíše existujúce záznamy dochádzky!'\r\n    );\r\n\r\n    if (!confirmed) return;\r\n\r\n    setProcessing(true);\r\n    setShowResults(false);\r\n    setResults([]);\r\n\r\n    try {\r\n      const response = await hrService.processAutomaticAttendance(\r\n        companyId,\r\n        selectedEmployees,\r\n        startDate,\r\n        endDate\r\n      );\r\n      \r\n      // Backend vracia { message, results }\r\n      setResults(response.results || []);\r\n      setShowResults(true);\r\n    } catch (error: any) {\r\n      console.error('Chyba pri spracovaní dochádzky:', error);\r\n      \r\n      // Zobraziť špecifickú chybu pre uzatvorené obdobie\r\n      if (error.response?.data?.error) {\r\n        alert(`Chyba: ${error.response.data.error}`);\r\n      } else {\r\n        alert('Chyba pri spracovaní dochádzky');\r\n      }\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleCleanupFutureAttendance = async () => {\r\n    if (!window.confirm('Naozaj chcete vyčistiť všetku dochádzku za budúce dni? Táto akcia sa nedá vrátiť späť.')) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch('/api/hr/attendance/cleanup-future', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\r\n        },\r\n        body: JSON.stringify({ companyId })\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (response.ok) {\r\n        alert(`Vyčistenie dokončené. Odstránených ${result.deletedCount} záznamov.`);\r\n        // Obnoviť stránku pre zobrazenie aktuálnych dát\r\n        window.location.reload();\r\n      } else {\r\n        alert(`Chyba: ${result.error}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Chyba pri vyčistení dochádzky:', error);\r\n      alert('Chyba pri vyčistení dochádzky. Skúste to znova.');\r\n    }\r\n  };\r\n\r\n  const formatTime = (timeString: string) => {\r\n    return timeString.substring(0, 5); // Zobraziť len HH:MM\r\n  };\r\n\r\n  const getSuccessCount = () => {\r\n    return Array.isArray(results) ? results.filter(r => r.success && !r.skipped).length : 0;\r\n  };\r\n\r\n  const getErrorCount = () => {\r\n    return Array.isArray(results) ? results.filter(r => !r.success && !r.skipped).length : 0;\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <LoadingSpinner size=\"lg\" text=\"Načítavam zamestnancov...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-6xl mx-auto p-6\">\r\n      {/* Header */}\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center\">\r\n          <button\r\n            onClick={() => onBack ? onBack() : window.history.back()}\r\n            className=\"mr-4 p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200\"\r\n          >\r\n            <ArrowLeftIcon className=\"w-6 h-6\" />\r\n          </button>\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold text-gray-900 dark:text-white\">\r\n              Automatické prepočítanie dochádzky\r\n            </h1>\r\n            <p className=\"text-gray-600 dark:text-gray-400\">\r\n              Prepočítaj dochádzku na základe nastavených pracovných hodín\r\n            </p>\r\n                    <div className=\"mt-2 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg\">\r\n          <p className=\"text-sm text-blue-800 dark:text-blue-200\">\r\n            <strong>Dôležité:</strong> Automatický výpočet dochádzky môže prebehnúť len za dni <strong>pred aktuálnym dňom</strong>.\r\n            Systém automaticky zohľadní dovolenky, PN, dni pracovného voľna a sviatky.\r\n          </p>\r\n        </div>\r\n\r\n        <div className=\"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg\">\r\n          <p className=\"text-sm text-yellow-800 dark:text-yellow-200 mb-3\">\r\n            <strong>Pozor:</strong> Ak máte dochádzku za budúce dni, môžete ju vyčistiť pomocou tlačidla nižšie.\r\n          </p>\r\n          <button\r\n            onClick={handleCleanupFutureAttendance}\r\n            className=\"px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-white rounded-lg text-sm font-medium transition-colors\"\r\n          >\r\n            Vyčistiť budúce dochádzky\r\n          </button>\r\n        </div>\r\n            <div className=\"mt-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg\">\r\n              <p className=\"text-sm text-yellow-800 dark:text-yellow-200\">\r\n                <strong>Poznámka:</strong> Ak máte existujúce dochádzky za víkendy alebo sviatky, môžete ich vyčistiť pomocou tlačidla \"Vyčistiť dochádzku za víkendy a sviatky\".\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n        {/* Ľavý panel - Výber zamestnancov */}\r\n        <div className=\"lg:col-span-2\">\r\n          <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between mb-4\">\r\n              <div>\r\n                <h2 className=\"text-lg font-medium text-gray-900 dark:text-white\">\r\n                  Zamestnanci s automatickou dochádzkou\r\n                </h2>\r\n                <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\r\n                  Kliknite na zamestnanca pre výber alebo použite \"Označiť všetkých\"\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={handleSelectAll}\r\n                className=\"text-sm text-blue-600 dark:text-blue-400 hover:underline\"\r\n              >\r\n                {selectedEmployees.length === employees.length ? 'Odznačiť všetkých' : 'Označiť všetkých'}\r\n              </button>\r\n            </div>\r\n\r\n\r\n            {employees.length === 0 ? (\r\n              <div className=\"text-center py-8\">\r\n                <UserGroupIcon className=\"w-12 h-12 text-gray-400 mx-auto mb-4\" />\r\n                <p className=\"text-gray-500 dark:text-gray-400\">\r\n                  Žiadni zamestnanci s automatickou dochádzkou\r\n                </p>\r\n                <p className=\"text-sm text-gray-400 dark:text-gray-500 mt-2\">\r\n                  Zamestnanci musia mať nastavený režim \"Automatická dochádzka\" v pracovných pomeroch\r\n                </p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-3 max-h-96 overflow-y-auto\">\r\n                {employees.map((employee, index) => (\r\n                    <div\r\n                      key={`${employee.id}-${index}`}\r\n                      className={`p-4 border rounded-lg cursor-pointer transition-colors ${\r\n                        selectedEmployees.includes(employee.id)\r\n                          ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\r\n                          : 'border-gray-200 dark:border-dark-600 hover:border-gray-300 dark:hover:border-dark-500'\r\n                      }`}\r\n                      onClick={() => handleSelectEmployee(employee.id)}\r\n                    >\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"flex items-center\">\r\n                        <input\r\n                          type=\"checkbox\"\r\n                          checked={selectedEmployees.includes(employee.id)}\r\n                          onChange={() => handleSelectEmployee(employee.id)}\r\n                          className=\"mr-3 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded\"\r\n                        />\r\n                        <div>\r\n                          <p className={`font-medium ${\r\n                            selectedEmployees.includes(employee.id)\r\n                              ? 'text-blue-900 dark:text-blue-100'\r\n                              : 'text-gray-900 dark:text-white'\r\n                          }`}>\r\n                            {employee.first_name} {employee.last_name}\r\n                          </p>\r\n                          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                            {employee.position}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"text-right text-sm text-gray-500 dark:text-gray-400\">\r\n                        <p>{formatTime(employee.work_start_time)} - {formatTime(employee.work_end_time)}</p>\r\n                        <p>{employee.weekly_hours}h/týždeň</p>\r\n                      </div>\r\n                                          </div>\r\n                    </div>\r\n                  ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Pravý panel - Nastavenia */}\r\n        <div className=\"space-y-6\">\r\n          {/* Výber obdobia */}\r\n          <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              Obdobie prepočítania\r\n            </h3>\r\n            \r\n            <div className=\"space-y-4\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                  Typ obdobia\r\n                </label>\r\n                <select\r\n                  value={selectedPeriod}\r\n                  onChange={(e) => setSelectedPeriod(e.target.value as PeriodType)}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                >\r\n                  {periodOptions.map(option => (\r\n                    <option key={option.value} value={option.value}>\r\n                      {option.label}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {selectedPeriod === 'custom' && (\r\n                <div className=\"space-y-3\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                      Od dátumu\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={startDate}\r\n                      onChange={(e) => setStartDate(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">\r\n                      Do dátumu\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={endDate}\r\n                      onChange={(e) => setEndDate(e.target.value)}\r\n                      className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"bg-gray-50 dark:bg-dark-700 p-3 rounded-md\">\r\n                <p className=\"text-sm text-gray-600 dark:text-gray-400\">\r\n                  <strong>Obdobie:</strong> {startDate} až {endDate}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Akcie */}\r\n          <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n              Akcie\r\n            </h3>\r\n            \r\n            <div className=\"space-y-3\">\r\n              <button\r\n                onClick={handleProcessAttendance}\r\n                disabled={processing || selectedEmployees.length === 0}\r\n                className=\"w-full flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors\"\r\n              >\r\n                {processing ? (\r\n                  <>\r\n                    <LoadingSpinner size=\"sm\" className=\"mr-2\" />\r\n                    Spracovávam...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <ClockIcon className=\"w-5 h-5 mr-2\" />\r\n                    Prepočítať dochádzku\r\n                  </>\r\n                )}\r\n              </button>\r\n\r\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                <p>✅ Vybraných: {selectedEmployees.length} zamestnancov</p>\r\n                {selectedEmployees.length === 0 && (\r\n                  <p className=\"text-orange-600 dark:text-orange-400\">⚠️ Vyberte aspoň jedného zamestnanca</p>\r\n                )}\r\n                <p>⚠️ Táto akcia prepíše existujúce záznamy</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Výsledky */}\r\n      {showResults && (\r\n        <div className=\"mt-6 bg-white dark:bg-dark-800 rounded-lg shadow p-6\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n            Výsledky spracovania\r\n          </h3>\r\n          \r\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6\">\r\n            <div className=\"bg-green-50 dark:bg-green-900/20 p-4 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <CheckCircleIcon className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\r\n                <div className=\"ml-3\">\r\n                  <p className=\"text-sm font-medium text-green-600 dark:text-green-400\">Úspešne</p>\r\n                  <p className=\"text-2xl font-bold text-green-900 dark:text-green-100\">\r\n                    {getSuccessCount()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <ExclamationTriangleIcon className=\"w-8 h-8 text-yellow-600 dark:text-yellow-400\" />\r\n                <div className=\"ml-3\">\r\n                  <p className=\"text-sm font-medium text-yellow-600 dark:text-yellow-400\">Preskočené</p>\r\n                  <p className=\"text-2xl font-bold text-yellow-900 dark:text-yellow-100\">\r\n                    {results.filter(r => r.skipped).length}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <ExclamationTriangleIcon className=\"w-8 h-8 text-red-600 dark:text-red-400\" />\r\n                <div className=\"ml-3\">\r\n                  <p className=\"text-sm font-medium text-red-600 dark:text-red-400\">Chyby</p>\r\n                  <p className=\"text-2xl font-bold text-red-900 dark:text-red-100\">\r\n                    {getErrorCount()}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg\">\r\n              <div className=\"flex items-center\">\r\n                <CalendarIcon className=\"w-8 h-8 text-blue-600 dark:text-blue-400\" />\r\n                <div className=\"ml-3\">\r\n                  <p className=\"text-sm font-medium text-blue-600 dark:text-blue-400\">Celkom</p>\r\n                  <p className=\"text-2xl font-bold text-blue-900 dark:text-blue-100\">\r\n                    {results.length}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {results.length > 0 && (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200 dark:divide-dark-600\">\r\n                <thead className=\"bg-gray-50 dark:bg-dark-700\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Zamestnanec\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Dátum\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Správa\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600\">\r\n                  {results.map((result, index) => (\r\n                    <tr key={index}>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                        {employees.find(emp => emp.id === result.employee_id)?.first_name} {employees.find(emp => emp.id === result.employee_id)?.last_name}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                        {result.date}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                          result.success\r\n                            ? result.skipped\r\n                              ? 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200'\r\n                              : 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\r\n                            : 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200'\r\n                        }`}>\r\n                          {result.success \r\n                            ? result.skipped \r\n                              ? 'Preskočené' \r\n                              : (result.status || 'Úspech')\r\n                            : 'Chyba'\r\n                          }\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                        {result.success \r\n                          ? result.note || 'Dochádzka vytvorená'\r\n                          : result.error\r\n                        }\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AutomaticAttendancePage;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { XMarkIcon, ClockIcon, ExclamationTriangleIcon } from '@heroicons/react/24/outline';\r\nimport { hrService } from '../services/hrService';\r\n\r\ninterface AttendanceRecordModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  companyId: number;\r\n  onSuccess: () => void;\r\n}\r\n\r\ninterface EmployeeWithMissingAttendance {\r\n  id: number;\r\n  first_name: string;\r\n  last_name: string;\r\n  email: string;\r\n  position: string;\r\n  attendance_mode: string;\r\n  missing_dates: string[];\r\n  work_start_time?: string;\r\n  work_end_time?: string;\r\n  break_start_time?: string;\r\n  break_end_time?: string;\r\n  weekly_hours?: number;\r\n}\r\n\r\nconst AttendanceRecordModal: React.FC<AttendanceRecordModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  companyId,\r\n  onSuccess\r\n}) => {\r\n  const [employees, setEmployees] = useState<EmployeeWithMissingAttendance[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [selectedEmployee, setSelectedEmployee] = useState<EmployeeWithMissingAttendance | null>(null);\r\n  const [selectedDate, setSelectedDate] = useState<string>('');\r\n  const [attendanceType, setAttendanceType] = useState<'present' | 'absent' | 'leave' | 'sick_leave'>('present');\r\n  const [startTime, setStartTime] = useState<string>('08:00');\r\n  const [endTime, setEndTime] = useState<string>('16:00');\r\n  const [breakMinutes, setBreakMinutes] = useState<number>(30);\r\n  const [note, setNote] = useState<string>('');\r\n  const [submitting, setSubmitting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      loadEmployeesWithMissingAttendance();\r\n    }\r\n  }, [isOpen, companyId]);\r\n\r\n  const loadEmployeesWithMissingAttendance = async () => {\r\n    try {\r\n      setLoading(true);\r\n      // Získame zamestnancov s manuálnou dochádzkou, ktorí nemajú zaznamenanú dochádzku\r\n      const employeesData = await hrService.getEmployeesWithMissingAttendance(companyId);\r\n      setEmployees(employeesData);\r\n    } catch (error) {\r\n      console.error('Chyba pri načítaní zamestnancov:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleEmployeeSelect = (employee: EmployeeWithMissingAttendance) => {\r\n    setSelectedEmployee(employee);\r\n    if (employee.missing_dates.length > 0) {\r\n      setSelectedDate(employee.missing_dates[0]);\r\n    }\r\n    \r\n    // Automaticky nastavíme pracovné časy podľa nastavení zamestnanca\r\n    if (employee.work_start_time) {\r\n      setStartTime(employee.work_start_time);\r\n    }\r\n    if (employee.work_end_time) {\r\n      setEndTime(employee.work_end_time);\r\n    }\r\n    \r\n    // Vypočítame prestávku v minútach\r\n    if (employee.break_start_time && employee.break_end_time) {\r\n      const breakStart = new Date(`2000-01-01T${employee.break_start_time}`);\r\n      const breakEnd = new Date(`2000-01-01T${employee.break_end_time}`);\r\n      const breakMinutes = Math.round((breakEnd.getTime() - breakStart.getTime()) / (1000 * 60));\r\n      setBreakMinutes(breakMinutes);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    if (!selectedEmployee || !selectedDate) {\r\n      alert('Vyberte zamestnanca a dátum');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setSubmitting(true);\r\n\r\n      const attendanceData = {\r\n        employee_id: selectedEmployee.id,\r\n        company_id: companyId,\r\n        date: selectedDate,\r\n        attendance_type: attendanceType,\r\n        start_time: attendanceType === 'present' ? startTime : null,\r\n        end_time: attendanceType === 'present' ? endTime : null,\r\n        break_minutes: attendanceType === 'present' ? breakMinutes : 0,\r\n        note: note,\r\n        recorded_by: 'hr_manager' // TODO: použiť skutočné ID prihláseného používateľa\r\n      };\r\n\r\n      await hrService.recordAttendance(attendanceData);\r\n      \r\n      // Obnoviť zoznam zamestnancov\r\n      await loadEmployeesWithMissingAttendance();\r\n      \r\n      // Reset formulára\r\n      setSelectedEmployee(null);\r\n      setSelectedDate('');\r\n      setAttendanceType('present');\r\n      setStartTime('08:00');\r\n      setEndTime('16:00');\r\n      setBreakMinutes(30);\r\n      setNote('');\r\n      \r\n      onSuccess();\r\n      alert('Dochádzka bola úspešne zaznamenaná');\r\n    } catch (error) {\r\n      console.error('Chyba pri zaznamenávaní dochádzky:', error);\r\n      alert('Chyba pri zaznamenávaní dochádzky');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600\">\r\n          <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n            Zaznamenať dochádzku\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"p-6\">\r\n          {loading ? (\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\r\n              <p className=\"mt-2 text-gray-600 dark:text-gray-400\">Načítavam zamestnancov...</p>\r\n            </div>\r\n          ) : employees.length === 0 ? (\r\n            <div className=\"text-center py-8\">\r\n              <ExclamationTriangleIcon className=\"w-12 h-12 text-green-500 mx-auto mb-4\" />\r\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-2\">\r\n                Všetci zamestnanci majú zaznamenanú dochádzku\r\n              </h3>\r\n              <p className=\"text-gray-600 dark:text-gray-400\">\r\n                Všetci zamestnanci s manuálnou dochádzkou majú dnes zaznamenanú dochádzku.\r\n              </p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n              {/* Zoznam zamestnancov */}\r\n              <div>\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n                  Zamestnanci bez dochádzky\r\n                </h3>\r\n                <div className=\"space-y-2 max-h-96 overflow-y-auto\">\r\n                  {employees.map((employee) => (\r\n                    <div\r\n                      key={employee.id}\r\n                      onClick={() => handleEmployeeSelect(employee)}\r\n                      className={`p-4 border rounded-lg cursor-pointer transition-colors ${\r\n                        selectedEmployee?.id === employee.id\r\n                          ? 'border-blue-500 bg-blue-50 dark:bg-blue-900/20'\r\n                          : 'border-gray-200 dark:border-dark-600 hover:border-gray-300 dark:hover:border-dark-500'\r\n                      }`}\r\n                    >\r\n                      <div className=\"flex items-center justify-between\">\r\n                        <div>\r\n                          <h4 className=\"font-medium text-gray-900 dark:text-white\">\r\n                            {employee.first_name} {employee.last_name}\r\n                          </h4>\r\n                          <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                            {employee.position}\r\n                          </p>\r\n                          <p className=\"text-xs text-gray-400 dark:text-gray-500\">\r\n                            {employee.email}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"text-right\">\r\n                          <span className=\"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200\">\r\n                            <ClockIcon className=\"w-3 h-3 mr-1\" />\r\n                            {employee.missing_dates.length} dní\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Formulár pre zaznamenanie dochádzky */}\r\n              {selectedEmployee && (\r\n                <div>\r\n                  <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">\r\n                    Zaznamenať dochádzku pre {selectedEmployee.first_name} {selectedEmployee.last_name}\r\n                  </h3>\r\n                  \r\n                  <div className=\"space-y-4\">\r\n                    {/* Dátum */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                        Dátum\r\n                      </label>\r\n                      <select\r\n                        value={selectedDate}\r\n                        onChange={(e) => setSelectedDate(e.target.value)}\r\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white\"\r\n                      >\r\n                        {selectedEmployee.missing_dates.map((date) => (\r\n                          <option key={date} value={date}>\r\n                            {new Date(date).toLocaleDateString('sk-SK')}\r\n                          </option>\r\n                        ))}\r\n                      </select>\r\n                    </div>\r\n\r\n                    {/* Typ dochádzky */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                        Typ dochádzky\r\n                      </label>\r\n                      <select\r\n                        value={attendanceType}\r\n                        onChange={(e) => setAttendanceType(e.target.value as any)}\r\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white\"\r\n                      >\r\n                        <option value=\"present\">Prítomný</option>\r\n                        <option value=\"absent\">Neprítomný</option>\r\n                        <option value=\"leave\">Dovolenka</option>\r\n                        <option value=\"sick_leave\">PN</option>\r\n                      </select>\r\n                    </div>\r\n\r\n                    {/* Časy (len pre prítomných) */}\r\n                    {attendanceType === 'present' && (\r\n                      <div className=\"grid grid-cols-2 gap-4\">\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                            Príchod\r\n                          </label>\r\n                          <input\r\n                            type=\"time\"\r\n                            value={startTime}\r\n                            onChange={(e) => setStartTime(e.target.value)}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white\"\r\n                          />\r\n                        </div>\r\n                        <div>\r\n                          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                            Odchod\r\n                          </label>\r\n                          <input\r\n                            type=\"time\"\r\n                            value={endTime}\r\n                            onChange={(e) => setEndTime(e.target.value)}\r\n                            className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white\"\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Prestávka (len pre prítomných) */}\r\n                    {attendanceType === 'present' && (\r\n                      <div>\r\n                        <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                          Prestávka (minúty)\r\n                        </label>\r\n                        <input\r\n                          type=\"number\"\r\n                          value={breakMinutes}\r\n                          onChange={(e) => setBreakMinutes(parseInt(e.target.value) || 0)}\r\n                          min=\"0\"\r\n                          max=\"480\"\r\n                          className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white\"\r\n                        />\r\n                      </div>\r\n                    )}\r\n\r\n                    {/* Poznámka */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n                        Poznámka\r\n                      </label>\r\n                      <textarea\r\n                        value={note}\r\n                        onChange={(e) => setNote(e.target.value)}\r\n                        rows={3}\r\n                        className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-dark-700 dark:text-white\"\r\n                        placeholder=\"Voliteľná poznámka k dochádzke...\"\r\n                      />\r\n                    </div>\r\n\r\n                    {/* Tlačidlá */}\r\n                    <div className=\"flex space-x-3 pt-4\">\r\n                      <button\r\n                        onClick={handleSubmit}\r\n                        disabled={submitting}\r\n                        className=\"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                      >\r\n                        {submitting ? 'Zaznamenávam...' : 'Zaznamenať dochádzku'}\r\n                      </button>\r\n                      <button\r\n                        onClick={onClose}\r\n                        className=\"px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-md text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-dark-700\"\r\n                      >\r\n                        Zrušiť\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceRecordModal;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { \r\n  UsersIcon, \r\n  CheckCircleIcon, \r\n  ExclamationTriangleIcon, \r\n  ClockIcon, \r\n  UserPlusIcon, \r\n  CalendarIcon,\r\n  PlusIcon,\r\n  PencilIcon,\r\n  DocumentTextIcon,\r\n  BriefcaseIcon,\r\n  ChartBarIcon\r\n} from '@heroicons/react/24/outline';\r\nimport LoadingSpinner from './LoadingSpinner';\r\nimport EmployeeModal from './EmployeeModal';\r\nimport LeaveRequestModal from './LeaveRequestModal';\r\nimport EmployeeCardPage from '../pages/EmployeeCardPage';\r\nimport EmploymentRelationsPage from '../pages/EmploymentRelationsPage';\r\nimport AttendanceOverview from './AttendanceOverview';\r\nimport AutomaticAttendancePage from '../pages/AutomaticAttendancePage';\r\nimport AttendanceRecordModal from './AttendanceRecordModal';\r\nimport { hrService, Employee, LeaveRequest, HRStats, EmployeeAttendanceStatus } from '../services/hrService';\r\n\r\n// Helper funkcia pre lokálne formátovanie dátumu\r\nconst formatDate = (date: Date): string => {\r\n  const year = date.getFullYear();\r\n  const month = String(date.getMonth() + 1).padStart(2, '0');\r\n  const day = String(date.getDate()).padStart(2, '0');\r\n  return `${year}-${month}-${day}`;\r\n};\r\n\r\n// Helper funkcia pre formátovanie času\r\nconst formatTime = (timeString: string | null): string => {\r\n  if (!timeString) return '-';\r\n  \r\n  try {\r\n    // Ak je to už čas v formáte HH:MM, vráť ho\r\n    if (timeString.match(/^\\d{2}:\\d{2}$/)) {\r\n      return timeString;\r\n    }\r\n    \r\n    // Ak je to dátum, skús ho spracovať\r\n    const date = new Date(timeString);\r\n    if (isNaN(date.getTime())) {\r\n      return '-';\r\n    }\r\n    \r\n    return date.toLocaleTimeString('sk-SK', { \r\n      hour: '2-digit', \r\n      minute: '2-digit',\r\n      hour12: false \r\n    });\r\n  } catch (error) {\r\n    console.error('Chyba pri formátovaní času:', timeString, error);\r\n    return '-';\r\n  }\r\n};\r\n\r\ninterface HRDashboardProps {\r\n  companyId: number;\r\n}\r\n\r\nconst HRDashboard: React.FC<HRDashboardProps> = ({ companyId }) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [employees, setEmployees] = useState<Employee[]>([]);\r\n  const [leaveRequests, setLeaveRequests] = useState<LeaveRequest[]>([]);\r\n  const [stats, setStats] = useState<HRStats | null>(null);\r\n  const [employeeChanges, setEmployeeChanges] = useState<any[]>([]);\r\n  const [presentEmployeesToday, setPresentEmployeesToday] = useState<any[]>([]);\r\n  const [absentEmployeesToday, setAbsentEmployeesToday] = useState<any[]>([]);\r\n  const [employeesAttendanceStatus, setEmployeesAttendanceStatus] = useState<EmployeeAttendanceStatus[]>([]);\r\n  const [lastAttendanceUpdate, setLastAttendanceUpdate] = useState<Date>(new Date());\r\n  const [isRefreshingAttendance, setIsRefreshingAttendance] = useState(false);\r\n  const [activeTab, setActiveTab] = useState<'overview' | 'employees' | 'attendance' | 'leave' | 'employee-cards' | 'employment-relations' | 'attendance-overview'>('overview');\r\n  const [showEmployeeModal, setShowEmployeeModal] = useState(false);\r\n  const [selectedEmployee, setSelectedEmployee] = useState<Employee | null>(null);\r\n  const [showLeaveRequestModal, setShowLeaveRequestModal] = useState(false);\r\n  const [selectedEmployeeForLeave, setSelectedEmployeeForLeave] = useState<Employee | null>(null);\r\n  const [showAttendanceRecordModal, setShowAttendanceRecordModal] = useState(false);\r\n  const [activeSection, setActiveSection] = useState<'overview' | 'leave-requests' | 'automatic-attendance' | 'select-employee-for-leave' | 'present-today' | 'absent-today'>('overview');\r\n\r\n  const loadData = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Načítanie štatistík\r\n      const statsData = await hrService.getHRStats(companyId);\r\n      console.log('HR Stats:', statsData);\r\n      setStats(statsData);\r\n\r\n      // Načítanie zamestnancov\r\n      const employeesData = await hrService.getEmployees(companyId);\r\n      setEmployees(employeesData);\r\n\r\n      // Načítanie žiadostí o dovolenku\r\n      const leaveData = await hrService.getLeaveRequests(companyId);\r\n      console.log('Všetky žiadosti o dovolenku:', leaveData);\r\n      console.log('Čakajúce žiadosti:', statsData?.leave_requests?.pending_leave_requests);\r\n      console.log('Počet všetkých žiadostí:', leaveData.length);\r\n      setLeaveRequests(leaveData);\r\n\r\n      // Načítanie zmien zamestnancov\r\n      const changesData = await hrService.getCompanyChanges(companyId);\r\n      setEmployeeChanges(changesData);\r\n\r\n      // Načítanie prítomných zamestnancov dnes\r\n      try {\r\n        const presentData = await hrService.getPresentEmployeesToday(companyId);\r\n        setPresentEmployeesToday(presentData);\r\n      } catch (error) {\r\n        console.error('Chyba pri načítaní prítomných zamestnancov:', error);\r\n        setPresentEmployeesToday([]);\r\n      }\r\n\r\n      // Načítanie neprítomných zamestnancov dnes\r\n      try {\r\n        const absentData = await hrService.getAbsentEmployeesToday(companyId);\r\n        setAbsentEmployeesToday(absentData);\r\n      } catch (error) {\r\n        console.error('Chyba pri načítaní neprítomných zamestnancov:', error);\r\n        setAbsentEmployeesToday([]);\r\n      }\r\n\r\n      // Načítanie všetkých aktívnych zamestnancov s dochádzkou\r\n      try {\r\n        const attendanceStatusData = await hrService.getEmployeesAttendanceStatus(companyId);\r\n        setEmployeesAttendanceStatus(attendanceStatusData);\r\n      } catch (error) {\r\n        console.error('Chyba pri načítaní zamestnancov s dochádzkou:', error);\r\n        setEmployeesAttendanceStatus([]);\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Chyba pri načítaní HR dát:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [companyId]);\r\n\r\n  // Funkcia na aktualizáciu dochádzkových dát\r\n  const refreshAttendanceData = useCallback(async () => {\r\n    try {\r\n      setIsRefreshingAttendance(true);\r\n      \r\n      // Aktualizácia štatistík\r\n      const statsData = await hrService.getHRStats(companyId);\r\n      setStats(statsData);\r\n\r\n      // Aktualizácia prítomných zamestnancov dnes\r\n      const presentData = await hrService.getPresentEmployeesToday(companyId);\r\n      setPresentEmployeesToday(presentData);\r\n\r\n      // Aktualizácia neprítomných zamestnancov dnes\r\n      const absentData = await hrService.getAbsentEmployeesToday(companyId);\r\n      setAbsentEmployeesToday(absentData);\r\n\r\n      setLastAttendanceUpdate(new Date());\r\n    } catch (error) {\r\n      console.error('Chyba pri aktualizácii dochádzkových dát:', error);\r\n    } finally {\r\n      setIsRefreshingAttendance(false);\r\n    }\r\n  }, [companyId]);\r\n\r\n  useEffect(() => {\r\n    loadData();\r\n  }, [loadData]);\r\n\r\n  // Automatické aktualizácie dochádzkových dát každých 30 sekúnd\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      refreshAttendanceData();\r\n    }, 30000); // 30 sekúnd\r\n\r\n    return () => clearInterval(interval);\r\n  }, [refreshAttendanceData]);\r\n\r\n  const handleAddEmployee = () => {\r\n    setSelectedEmployee(null);\r\n    setShowEmployeeModal(true);\r\n  };\r\n\r\n  const handleEditEmployee = (employee: Employee) => {\r\n    setSelectedEmployee(employee);\r\n    setShowEmployeeModal(true);\r\n  };\r\n\r\n  const handleOpenPersonalCard = (employee: Employee) => {\r\n    setSelectedEmployee(employee);\r\n    setActiveTab('employee-cards');\r\n  };\r\n\r\n  const handleEmployeeSuccess = () => {\r\n    setShowEmployeeModal(false);\r\n    loadData();\r\n  };\r\n\r\n  const handleLeaveRequestSuccess = () => {\r\n    setShowLeaveRequestModal(false);\r\n    loadData();\r\n  };\r\n\r\n  const handleApproveLeaveRequest = async (requestId: number) => {\r\n    try {\r\n      await hrService.updateLeaveRequestStatus(requestId, 'approved', 1); // TODO: použiť skutočné ID schvaľovateľa\r\n      loadData(); // Obnoviť dáta\r\n      alert('Žiadosť o dovolenku bola schválená');\r\n    } catch (error) {\r\n      console.error('Chyba pri schvaľovaní dovolenky:', error);\r\n      alert('Chyba pri schvaľovaní dovolenky');\r\n    }\r\n  };\r\n\r\n  // Funkcia na získanie stavu zmien pre zamestnanca\r\n  const getEmployeeChangeStatus = (employeeId: number) => {\r\n    const pendingChanges = employeeChanges.filter(c => \r\n      c.employee_id === employeeId && \r\n      c.status === 'pending'\r\n    );\r\n    \r\n    if (pendingChanges.length > 0) {\r\n      return {\r\n        hasPendingChanges: true,\r\n        pendingCount: pendingChanges.length,\r\n        latestChange: pendingChanges.reduce((latest, current) => \r\n          (current.id > latest.id) ? current : latest\r\n        )\r\n      };\r\n    }\r\n    \r\n    return {\r\n      hasPendingChanges: false,\r\n      pendingCount: 0,\r\n      latestChange: null\r\n    };\r\n  };\r\n\r\n  // Funkcia na kontrolu, či má nejaký zamestnanec pending zmeny\r\n  const hasAnyPendingChanges = () => {\r\n    const pendingChanges = employeeChanges.filter(c => c.status === 'pending');\r\n    return pendingChanges.length > 0;\r\n  };\r\n\r\n  // Funkcia na získanie počtu zamestnancov s pending zmenami\r\n  const getEmployeesWithPendingChangesCount = () => {\r\n    const employeesWithChanges = new Set(\r\n      employeeChanges\r\n        .filter(c => c.status === 'pending')\r\n        .map(c => c.employee_id)\r\n    );\r\n    return employeesWithChanges.size;\r\n  };\r\n\r\n  const handleRejectLeaveRequest = async (requestId: number) => {\r\n    try {\r\n      await hrService.updateLeaveRequestStatus(requestId, 'rejected', 1); // TODO: použiť skutočné ID schvaľovateľa\r\n      loadData(); // Obnoviť dáta\r\n      alert('Žiadosť o dovolenku bola zamietnutá');\r\n    } catch (error) {\r\n      console.error('Chyba pri zamietaní dovolenky:', error);\r\n      alert('Chyba pri zamietaní dovolenky');\r\n    }\r\n  };\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n  const handleCreateAutomaticAttendance = async () => {\r\n    try {\r\n              const today = formatDate(new Date());\r\n      const result = await hrService.createAutomaticAttendance(companyId, today);\r\n      \r\n      if (result.results && result.results.length > 0) {\r\n        const successCount = result.results.filter(r => r.success).length;\r\n        const errorCount = result.results.length - successCount;\r\n        \r\n        let message = `Automatická dochádzka vytvorená!\\n\\n`;\r\n        message += `✅ Úspešne vytvorená: ${successCount} zamestnancov\\n`;\r\n        if (errorCount > 0) {\r\n          message += `❌ Chyby: ${errorCount} zamestnancov\\n`;\r\n          message += `(Dochádzka už existuje alebo nastala chyba)`;\r\n        }\r\n        \r\n        alert(message);\r\n      } else {\r\n        alert('Žiadni zamestnanci s automatickou dochádzkou');\r\n      }\r\n      \r\n      loadData(); // Obnoviť dáta\r\n    } catch (error) {\r\n      console.error('Chyba pri vytváraní automatickej dochádzky:', error);\r\n      alert('Chyba pri vytváraní automatickej dochádzky');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center min-h-screen\">\r\n        <LoadingSpinner size=\"lg\" text=\"Načítavam HR dashboard...\" />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const renderOverview = () => (\r\n    <div className=\"space-y-6\">\r\n      {activeSection === 'overview' && (\r\n        <>\r\n          {/* Štatistiky */}\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n            <div \r\n              className={`bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 ${\r\n                hasAnyPendingChanges() ? 'border-red-500 hover:shadow-lg cursor-pointer' : 'border-blue-500 hover:shadow-lg cursor-pointer'\r\n              } transition-all duration-200`}\r\n              title={hasAnyPendingChanges() ? \r\n                `⚠️ Pozor - Čakajúce zmeny údajov\r\n\r\n${getEmployeesWithPendingChangesCount()} ${getEmployeesWithPendingChangesCount() === 1 ? 'zamestnanec má' : 'zamestnanci majú'} nepotvrdené zmeny údajov.\r\n\r\nKliknite pre zobrazenie zoznamu zamestnancov.` : \r\n                'Celkový počet zamestnancov vo firme. Kliknite pre zobrazenie zoznamu zamestnancov.'}\r\n              onClick={() => setActiveTab('employees')}\r\n            >\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"flex items-center\">\r\n                  <div className={`p-2 rounded-lg ${\r\n                    hasAnyPendingChanges() \r\n                      ? 'bg-red-100 dark:bg-red-900' \r\n                      : 'bg-blue-100 dark:bg-blue-900'\r\n                  }`}>\r\n                    <UsersIcon className={`w-6 h-6 ${\r\n                      hasAnyPendingChanges() \r\n                        ? 'text-red-600 dark:text-red-400' \r\n                        : 'text-blue-600 dark:text-blue-400'\r\n                    }`} />\r\n                  </div>\r\n                  <div className=\"ml-4\">\r\n                    <p className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">Celkovo zamestnancov</p>\r\n                    <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stats?.employees.total_employees || 0}</p>\r\n                    <div className=\"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400\">\r\n                      <span>Aktívnych: {stats?.employees.active_employees || 0}</span>\r\n                      {hasAnyPendingChanges() && (\r\n                        <span className=\"text-red-600 dark:text-red-400 animate-pulse\" style={{ animationDuration: '0.5s' }}>\r\n                          Zmena: {getEmployeesWithPendingChangesCount()}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <button \r\n              onClick={() => setActiveSection('present-today')}\r\n              className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-green-500 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left w-full\"\r\n            >\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-2 bg-green-100 dark:bg-green-900 rounded-lg\">\r\n                  <CheckCircleIcon className=\"w-6 h-6 text-green-600 dark:text-green-400\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">Prítomní dnes</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{presentEmployeesToday.length}</p>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                    Meškanie: {presentEmployeesToday.filter(emp => emp.status === 'late').length}\r\n                  </p>\r\n                  <p className=\"text-xs text-green-600 mt-1\">Kliknite pre zobrazenie</p>\r\n                </div>\r\n              </div>\r\n            </button>\r\n\r\n            <button \r\n              onClick={() => setActiveTab('leave')}\r\n              className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-yellow-500 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left w-full\"\r\n            >\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg\">\r\n                  <ExclamationTriangleIcon className=\"w-6 h-6 text-yellow-600 dark:text-yellow-400\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">Čakajúce dovolenky</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stats?.leave_requests.pending_leave_requests || 0}</p>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">Na schválenie</p>\r\n                  <p className=\"text-xs text-yellow-600 mt-1\">Kliknite pre zobrazenie</p>\r\n                </div>\r\n              </div>\r\n            </button>\r\n\r\n            <button \r\n              onClick={() => setActiveSection('automatic-attendance')}\r\n              className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-purple-500 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left w-full\"\r\n            >\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg\">\r\n                  <ClockIcon className=\"w-6 h-6 text-purple-600 dark:text-purple-400\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">Automatická dochádzka</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">⚡</p>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">Prepočítať dochádzku</p>\r\n                </div>\r\n              </div>\r\n            </button>\r\n\r\n            <button \r\n              onClick={() => setActiveSection('absent-today')}\r\n              className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-orange-500 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left w-full\"\r\n            >\r\n              <div className=\"flex items-center\">\r\n                <div className=\"p-2 bg-orange-100 dark:bg-orange-900 rounded-lg\">\r\n                  <ExclamationTriangleIcon className=\"w-6 h-6 text-orange-600 dark:text-orange-400\" />\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <p className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">Neprítomní dnes</p>\r\n                  <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{absentEmployeesToday.length}</p>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                    Dovolenka, PN, Absencia\r\n                  </p>\r\n                  <p className=\"text-xs text-orange-600 mt-1\">Kliknite pre zobrazenie</p>\r\n                </div>\r\n              </div>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Rýchle akcie */}\r\n          <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6\">\r\n            <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Rýchle akcie</h3>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n              <button \r\n                onClick={handleAddEmployee}\r\n                className=\"flex items-center justify-center p-4 border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors\"\r\n              >\r\n                <UserPlusIcon className=\"w-6 h-6 text-gray-400 mr-2\" />\r\n                <span className=\"text-gray-600 dark:text-gray-300\">Pridať zamestnanca</span>\r\n              </button>\r\n              <button \r\n                onClick={() => setShowAttendanceRecordModal(true)}\r\n                className=\"flex items-center justify-center p-4 border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors\"\r\n              >\r\n                <ClockIcon className=\"w-6 h-6 text-gray-400 mr-2\" />\r\n                <span className=\"text-gray-600 dark:text-gray-300\">Zaznamenať dochádzku</span>\r\n              </button>\r\n              <button \r\n                onClick={() => setActiveSection('select-employee-for-leave')}\r\n                className=\"flex items-center justify-center p-4 border-2 border-dashed border-gray-300 dark:border-dark-600 rounded-lg hover:border-blue-500 dark:hover:border-blue-400 transition-colors\"\r\n              >\r\n                <CalendarIcon className=\"w-6 h-6 text-gray-400 mr-2\" />\r\n                <span className=\"text-gray-600 dark:text-gray-300\">Žiadosť o dovolenku</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Posledné aktivity */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Najnovší zamestnanci</h3>\r\n              <div className=\"space-y-3\">\r\n                {employees.slice(0, 5).map((employee) => (\r\n                  <div key={employee.id} className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg\">\r\n                    <div>\r\n                      <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                        {employee.first_name} {employee.last_name}\r\n                      </p>\r\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">{employee.position}</p>\r\n                    </div>\r\n                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                      employee.status === 'active' \r\n                        ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\r\n                        : 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200'\r\n                    }`}>\r\n                      {hrService.getStatusLabel(employee.status)}\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6\">\r\n              <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Čakajúce dovolenky</h3>\r\n              <div className=\"space-y-3\">\r\n                {leaveRequests.slice(0, 5).map((request) => (\r\n                  <div key={request.id} className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg\">\r\n                    <div>\r\n                      <p className=\"font-medium text-gray-900 dark:text-white\">\r\n                        {request.first_name} {request.last_name}\r\n                      </p>\r\n                      <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        {hrService.getLeaveTypeLabel(request.leave_type)} • {request.total_days} dní\r\n                      </p>\r\n                    </div>\r\n                    <span className=\"px-2 py-1 text-xs font-medium rounded-full bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200\">\r\n                      Čaká\r\n                    </span>\r\n                  </div>\r\n                ))}\r\n                {leaveRequests.length === 0 && (\r\n                  <p className=\"text-gray-500 dark:text-gray-400 text-center py-4\">\r\n                    Žiadne čakajúce žiadosti o dovolenku\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n\r\n      {activeSection === 'present-today' && (\r\n        <div className=\"space-y-6\">\r\n          {/* Header pre prítomných dnes */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Prítomní zamestnanci dnes</h2>\r\n              <p className=\"text-gray-600 dark:text-gray-300\">Zamestnanci, ktorí sú dnes v práci</p>\r\n            </div>\r\n            <div className=\"flex space-x-2\">\r\n              <button\r\n                onClick={refreshAttendanceData}\r\n                className=\"px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/40 flex items-center\"\r\n              >\r\n                <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n                </svg>\r\n                Aktualizovať\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveSection('overview')}\r\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600\"\r\n              >\r\n                Späť na prehľad\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Zoznam prítomných zamestnancov */}\r\n          <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden\">\r\n            <div className=\"px-6 py-4 border-b border-gray-200 dark:border-dark-600\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Prítomní dnes ({presentEmployeesToday.length})</h3>\r\n                <div className=\"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400\">\r\n                  {isRefreshingAttendance && (\r\n                    <div className=\"flex items-center\">\r\n                      <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                      </svg>\r\n                      <span>Aktualizuje sa...</span>\r\n                    </div>\r\n                  )}\r\n                  <span>Posledná aktualizácia: {lastAttendanceUpdate.toLocaleTimeString('sk-SK')}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200 dark:divide-dark-600\">\r\n                <thead className=\"bg-gray-50 dark:bg-dark-700\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Zamestnanec\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Pozícia\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Príchod\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600\">\r\n                  {presentEmployeesToday.length > 0 ? (\r\n                    presentEmployeesToday.map((employee) => (\r\n                      <tr key={employee.id} className=\"hover:bg-gray-50 dark:hover:bg-dark-700\">\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div>\r\n                            <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                              {employee.first_name} {employee.last_name}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500 dark:text-gray-400\">{employee.email}</div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                          {employee.position}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                          {employee.check_in ? new Date(employee.check_in).toLocaleTimeString('sk-SK', { \r\n                            hour: '2-digit', \r\n                            minute: '2-digit' \r\n                          }) : 'N/A'}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                            employee.status === 'late' \r\n                              ? 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200'\r\n                              : 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\r\n                          }`}>\r\n                            {employee.status === 'late' ? 'Meškanie' : 'Prítomný'}\r\n                          </span>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  ) : (\r\n                    <tr>\r\n                      <td colSpan={4} className=\"px-6 py-4 text-center text-gray-500 dark:text-gray-400\">\r\n                        Žiadni prítomní zamestnanci dnes\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {activeSection === 'absent-today' && (\r\n        <div className=\"space-y-6\">\r\n          {/* Header pre neprítomných dnes */}\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Neprítomní zamestnanci dnes</h2>\r\n              <p className=\"text-gray-600 dark:text-gray-300\">Zamestnanci na dovolenke, PN, absencii alebo iných dôvodoch</p>\r\n            </div>\r\n            <div className=\"flex space-x-2\">\r\n              <button\r\n                onClick={refreshAttendanceData}\r\n                className=\"px-4 py-2 text-sm font-medium text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/20 border border-blue-300 dark:border-blue-700 rounded-md hover:bg-blue-100 dark:hover:bg-blue-900/40 flex items-center\"\r\n              >\r\n                <svg className=\"w-4 h-4 mr-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n                </svg>\r\n                Aktualizovať\r\n              </button>\r\n              <button\r\n                onClick={() => setActiveSection('overview')}\r\n                className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600\"\r\n              >\r\n                Späť na prehľad\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Zoznam ospravedlnených zamestnancov */}\r\n          <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden\">\r\n            <div className=\"px-6 py-4 border-b border-gray-200 dark:border-dark-600\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Neprítomní dnes ({absentEmployeesToday.length})</h3>\r\n                <div className=\"flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400\">\r\n                  {isRefreshingAttendance && (\r\n                    <div className=\"flex items-center\">\r\n                      <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-blue-500\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                      </svg>\r\n                      <span>Aktualizuje sa...</span>\r\n                    </div>\r\n                  )}\r\n                  <span>Posledná aktualizácia: {lastAttendanceUpdate.toLocaleTimeString('sk-SK')}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200 dark:divide-dark-600\">\r\n                <thead className=\"bg-gray-50 dark:bg-dark-700\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Zamestnanec\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Pozícia\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Dôvod\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Obdobie\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600\">\r\n                  {absentEmployeesToday.length > 0 ? (\r\n                    absentEmployeesToday.map((employee) => (\r\n                      <tr key={employee.id} className=\"hover:bg-gray-50 dark:hover:bg-dark-700\">\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div>\r\n                            <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                              {employee.first_name} {employee.last_name}\r\n                            </div>\r\n                            <div className=\"text-sm text-gray-500 dark:text-gray-400\">{employee.email}</div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                          {employee.position}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                          {employee.reason}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                          {employee.period || 'N/A'}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                            employee.reason === 'Dovolenka' \r\n                              ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200'\r\n                              : employee.reason === 'PN'\r\n                              ? 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200'\r\n                              : employee.reason === 'Pracovný pokoj'\r\n                              ? 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200'\r\n                              : employee.reason === 'Absencia'\r\n                              ? 'bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200'\r\n                              : 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200'\r\n                          }`}>\r\n                            {employee.reason}\r\n                          </span>\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  ) : (\r\n                    <tr>\r\n                      <td colSpan={5} className=\"px-6 py-4 text-center text-gray-500 dark:text-gray-400\">\r\n                        Žiadni neprítomní zamestnanci dnes\r\n                      </td>\r\n                    </tr>\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n    </div>\r\n  );\r\n\r\n  const renderEmployees = () => (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Zamestnanci</h2>\r\n        <button \r\n          onClick={handleAddEmployee}\r\n          className=\"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors flex items-center\"\r\n        >\r\n          <PlusIcon className=\"w-5 h-5 mr-2\" />\r\n          Pridať zamestnanca\r\n        </button>\r\n      </div>\r\n\r\n      {/* Informačný box */}\r\n      <div className=\"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4\">\r\n        <div className=\"flex\">\r\n          <div className=\"flex-shrink-0\">\r\n            <svg className=\"h-5 w-5 text-blue-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n              <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\r\n            </svg>\r\n          </div>\r\n          <div className=\"ml-3\">\r\n            <h3 className=\"text-sm font-medium text-blue-800 dark:text-blue-200\">\r\n              Informácia o správe zamestnancov\r\n            </h3>\r\n            <div className=\"mt-2 text-sm text-blue-700 dark:text-blue-300\">\r\n              <p>• <strong>Zamestnanci:</strong> Tu pridávate základné údaje a vytvárate prihlasovacie účty</p>\r\n              <p>• <strong>Karty zamestnancov:</strong> Tu dopĺňate detailné personálne údaje pre registrovaných zamestnancov</p>\r\n              <p>• <strong>Pracovné pomery:</strong> Tu vytvárate pracovné pomery pre vybraných zamestnancov</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden\">\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-dark-600\">\r\n            <thead className=\"bg-gray-50 dark:bg-dark-700\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                  Zamestnanec\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                  Pozícia\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                  Kontakt\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                  Dátum nástupu\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                  Typ dochádzky\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                  Status\r\n                </th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                  Akcie\r\n                </th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600\">\r\n              {employees.map((employee) => (\r\n                <tr key={employee.id} className=\"hover:bg-gray-50 dark:hover:bg-dark-700\">\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div>\r\n                      <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                        {employee.first_name} {employee.last_name}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                        ID: {employee.employee_id || 'N/A'}\r\n                      </div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                    {employee.position || 'N/A'}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div>\r\n                      <div className=\"text-sm text-gray-900 dark:text-white\">{employee.email}</div>\r\n                      <div className=\"text-sm text-gray-500 dark:text-gray-400\">{employee.phone || 'Bez telefónu'}</div>\r\n                    </div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                    {employee.employment_start_date ? new Date(employee.employment_start_date).toLocaleDateString('sk-SK') : 'N/A'}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                      employee.attendance_mode === 'automatic'\r\n                        ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200'\r\n                        : employee.attendance_mode === 'manual'\r\n                        ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\r\n                        : 'bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200'\r\n                    }`}>\r\n                      {employee.attendance_mode === 'automatic' ? 'Automatická' : \r\n                       employee.attendance_mode === 'manual' ? 'Manuálna' : 'Nenastavené'}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                      employee.status === 'active' \r\n                        ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\r\n                        : employee.status === 'inactive'\r\n                        ? 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200'\r\n                        : 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200'\r\n                    }`}>\r\n                      {hrService.getStatusLabel(employee.status)}\r\n                    </span>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                    <div className=\"flex space-x-2\">\r\n                      <button \r\n                        onClick={() => handleEditEmployee(employee)}\r\n                        className=\"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 flex items-center\"\r\n                        title=\"Upraviť základné údaje\"\r\n                      >\r\n                        <PencilIcon className=\"w-4 h-4 mr-1\" />\r\n                        Upraviť\r\n                      </button>\r\n                      <button \r\n                        onClick={() => handleOpenPersonalCard(employee)}\r\n                        className={`${\r\n                          (() => {\r\n                            const changeStatus = getEmployeeChangeStatus(employee.id);\r\n                            if (changeStatus.hasPendingChanges) {\r\n                              return 'text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300';\r\n                            }\r\n                            return 'text-green-600 hover:text-green-700 dark:text-green-400 dark:hover:text-green-300';\r\n                          })()\r\n                        } flex items-center`}\r\n                        title={(() => {\r\n                          const changeStatus = getEmployeeChangeStatus(employee.id);\r\n                          if (changeStatus.hasPendingChanges) {\r\n                            return `🔄 Zamestnanec má ${changeStatus.pendingCount} čakajúcich zmien údajov\r\n\r\n📝 Posledná zmena: ${changeStatus.latestChange?.field_name}\r\n🆕 Nová hodnota: ${changeStatus.latestChange?.new_value}\r\n\r\nKliknite pre zobrazenie personal card a schválenie zmien.`;\r\n                          }\r\n                          return 'Kliknite pre zobrazenie personal card';\r\n                        })()}\r\n                      >\r\n                        <DocumentTextIcon className=\"w-4 h-4 mr-1\" />\r\n                        Personal Card\r\n                      </button>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        {employees.length === 0 && (\r\n          <div className=\"text-center py-8\">\r\n            <p className=\"text-gray-500 dark:text-gray-400\">Žiadni zamestnanci</p>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  const renderAttendance = () => (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Dochádzka</h2>\r\n        <button \r\n          onClick={() => setShowAttendanceRecordModal(true)}\r\n          className=\"bg-blue-600 dark:bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-700 dark:hover:bg-blue-600 transition-colors\"\r\n        >\r\n          Zaznamenať dochádzku\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6\">\r\n        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Dochádzka dnes</h3>\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6\">\r\n          <div className=\"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4\">\r\n            <div className=\"flex items-center\">\r\n              <CheckCircleIcon className=\"w-8 h-8 text-green-600 dark:text-green-400\" />\r\n              <div className=\"ml-3\">\r\n                <p className=\"text-sm font-medium text-green-800 dark:text-green-200\">Prítomní</p>\r\n                <p className=\"text-2xl font-bold text-green-900 dark:text-green-100\">{presentEmployeesToday.length}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4\">\r\n            <div className=\"flex items-center\">\r\n              <ExclamationTriangleIcon className=\"w-8 h-8 text-red-600 dark:text-red-400\" />\r\n              <div className=\"ml-3\">\r\n                <p className=\"text-sm font-medium text-red-800 dark:text-red-200\">Neprítomní</p>\r\n                <p className=\"text-2xl font-bold text-red-900 dark:text-red-100\">{absentEmployeesToday.length}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4\">\r\n            <div className=\"flex items-center\">\r\n              <ClockIcon className=\"w-8 h-8 text-yellow-600 dark:text-yellow-400\" />\r\n              <div className=\"ml-3\">\r\n                <p className=\"text-sm font-medium text-yellow-800 dark:text-yellow-200\">Meškanie</p>\r\n                <p className=\"text-2xl font-bold text-yellow-900 dark:text-yellow-100\">{presentEmployeesToday.filter(emp => emp.status === 'late').length}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Zoznam všetkých aktívnych zamestnancov */}\r\n        <div className=\"mt-6\">\r\n          <h4 className=\"text-lg font-medium text-gray-900 dark:text-white mb-4\">Všetci aktívni zamestnanci dnes</h4>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-dark-600\">\r\n              <thead className=\"bg-gray-50 dark:bg-dark-700\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Zamestnanec\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Pozícia\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Typ dochádzky\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Status dnes\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Príchod\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                    Odchod\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600\">\r\n                {employeesAttendanceStatus.map((employee) => (\r\n                  <tr key={employee.id} className=\"hover:bg-gray-50 dark:hover:bg-dark-700\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      <div>\r\n                        <div className=\"font-medium\">{employee.first_name} {employee.last_name}</div>\r\n                        <div className=\"text-gray-500 dark:text-gray-400\">{employee.email}</div>\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {employee.position}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                        employee.attendance_mode === 'automatic'\r\n                          ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200'\r\n                          : employee.attendance_mode === 'manual'\r\n                          ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\r\n                          : 'bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200'\r\n                      }`}>\r\n                        {employee.attendance_mode === 'automatic' ? 'Automatická' : \r\n                         employee.attendance_mode === 'manual' ? 'Manuálna' : 'Nenastavené'}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      <div>\r\n                        <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                          employee.status_type === 'present' \r\n                            ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\r\n                            : employee.status_type === 'late'\r\n                            ? 'bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200'\r\n                            : employee.status_type === 'absent'\r\n                            ? 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200'\r\n                            : employee.status_type === 'leave'\r\n                            ? 'bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200'\r\n                            : employee.status_type === 'holiday'\r\n                            ? 'bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200'\r\n                            : employee.status_type === 'weekend'\r\n                            ? 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200'\r\n                            : 'bg-gray-100 dark:bg-gray-900 text-gray-800 dark:text-gray-200'\r\n                        }`}>\r\n                          {employee.status_type === 'present' ? 'Prítomný' :\r\n                           employee.status_type === 'late' ? 'Meškanie' :\r\n                           employee.status_type === 'absent' ? 'Absencia' :\r\n                           employee.status_type === 'leave' ? 'Dovolenka/PN' :\r\n                           employee.status_type === 'holiday' ? 'Pracovný pokoj' :\r\n                           employee.status_type === 'weekend' ? 'Pracovný pokoj' :\r\n                           employee.status_type}\r\n                        </span>\r\n                        {employee.status_description && (\r\n                          <div className=\"text-xs text-gray-500 dark:text-gray-400 mt-1\">\r\n                            {employee.status_description}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {employee.status_type === 'present' || employee.status_type === 'late' \r\n                        ? (employee.check_in ? formatTime(employee.check_in) : '-')\r\n                        : '-'\r\n                      }\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {employee.status_type === 'present' || employee.status_type === 'late'\r\n                        ? (employee.check_out ? formatTime(employee.check_out) : '-')\r\n                        : '-'\r\n                      }\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Header */}\r\n      {activeSection !== 'automatic-attendance' && (\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between\">\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold text-gray-900 dark:text-white\">HR Dashboard</h1>\r\n            <p className=\"text-gray-600 dark:text-gray-300\">Správa ľudských zdrojov a dochádzky</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Navigation */}\r\n      {activeSection !== 'automatic-attendance' && (\r\n        <nav className=\"bg-white dark:bg-dark-800 shadow rounded-lg\">\r\n          <div className=\"px-4\">\r\n            <div className=\"flex space-x-8\">\r\n              {[\r\n                { id: 'overview', name: 'Prehľad', icon: DocumentTextIcon },\r\n                { id: 'employees', name: 'Zamestnanci', icon: UsersIcon },\r\n                { id: 'attendance', name: 'Dochádzka', icon: ClockIcon },\r\n                { id: 'attendance-overview', name: 'Prehľad dochádzky', icon: ChartBarIcon },\r\n                { id: 'leave', name: 'Dovolenky', icon: CalendarIcon },\r\n                { id: 'employee-cards', name: 'Karty zamestnancov', icon: DocumentTextIcon },\r\n                { id: 'employment-relations', name: 'Pracovné pomery', icon: BriefcaseIcon }\r\n              ].map((tab) => (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id as any)}\r\n                  className={`py-4 px-1 border-b-2 font-medium text-sm flex items-center ${\r\n                    activeTab === tab.id\r\n                      ? 'border-blue-500 text-blue-600 dark:text-blue-400'\r\n                      : 'border-transparent text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 hover:border-gray-300 dark:hover:border-gray-600'\r\n                  }`}\r\n                >\r\n                  <tab.icon className=\"w-5 h-5 mr-2\" />\r\n                  {tab.name}\r\n                </button>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </nav>\r\n      )}\r\n\r\n      {/* Content */}\r\n      <div className=\"mt-6\">\r\n        {activeSection === 'automatic-attendance' ? (\r\n          <AutomaticAttendancePage \r\n            companyId={companyId}\r\n            onBack={() => setActiveSection('overview')}\r\n          />\r\n        ) : (\r\n          <>\r\n            {activeTab === 'overview' && renderOverview()}\r\n            {activeTab === 'employees' && renderEmployees()}\r\n            {activeTab === 'attendance' && renderAttendance()}\r\n            {activeTab === 'attendance-overview' && (\r\n              <AttendanceOverview\r\n                companyId={companyId}\r\n                isCompanyView={true}\r\n              />\r\n            )}\r\n            {activeTab === 'leave' && (\r\n              <div className=\"space-y-6\">\r\n                {activeSection === 'overview' && (\r\n                  <>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Správa dovoleniek</h2>\r\n                        <p className=\"text-gray-600 dark:text-gray-300\">Spravujte žiadosti o dovolenku</p>\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                      <button \r\n                        onClick={() => setActiveSection('leave-requests')}\r\n                        className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-yellow-500 hover:shadow-lg transition-all duration-200 text-left\"\r\n                      >\r\n                        <div className=\"flex items-center\">\r\n                          <div className=\"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg\">\r\n                            <ExclamationTriangleIcon className=\"w-6 h-6 text-yellow-600 dark:text-yellow-400\" />\r\n                          </div>\r\n                          <div className=\"ml-4\">\r\n                            <p className=\"text-lg font-medium text-gray-900 dark:text-white\">Čakajúce žiadosti</p>\r\n                            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                              {stats?.leave_requests.pending_leave_requests || 0} žiadostí čaká na schválenie\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n\r\n                      <button \r\n                        onClick={() => setActiveSection('select-employee-for-leave')}\r\n                        className=\"bg-white dark:bg-dark-800 rounded-lg shadow p-6 border-l-4 border-blue-500 hover:shadow-lg transition-all duration-200 text-left\"\r\n                      >\r\n                        <div className=\"flex items-center\">\r\n                          <div className=\"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg\">\r\n                            <PlusIcon className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n                          </div>\r\n                          <div className=\"ml-4\">\r\n                            <p className=\"text-lg font-medium text-gray-900 dark:text-white\">Nová žiadosť</p>\r\n                            <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                              Vytvoriť žiadosť o dovolenku za zamestnanca\r\n                            </p>\r\n                          </div>\r\n                        </div>\r\n                      </button>\r\n                    </div>\r\n                  </>\r\n                )}\r\n\r\n                {activeSection === 'select-employee-for-leave' && (\r\n                  <div className=\"space-y-6\">\r\n                    {/* Header pre výber zamestnanca */}\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Vytvoriť žiadosť o dovolenku</h2>\r\n                        <p className=\"text-gray-600 dark:text-gray-300\">Vyberte zamestnanca, za ktorého chcete vytvoriť žiadosť o dovolenku</p>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => setActiveSection('overview')}\r\n                        className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600\"\r\n                      >\r\n                        Späť na prehľad\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* Zoznam zamestnancov */}\r\n                    <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden\">\r\n                      <div className=\"px-6 py-4 border-b border-gray-200 dark:border-dark-600\">\r\n                        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Zamestnanci</h3>\r\n                      </div>\r\n                      <div className=\"overflow-x-auto\">\r\n                        <table className=\"min-w-full divide-y divide-gray-200 dark:divide-dark-600\">\r\n                          <thead className=\"bg-gray-50 dark:bg-dark-700\">\r\n                            <tr>\r\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                                Zamestnanec\r\n                              </th>\r\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                                Pozícia\r\n                              </th>\r\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                                Status\r\n                              </th>\r\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                                Akcie\r\n                              </th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody className=\"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600\">\r\n                            {employees.map((employee) => (\r\n                              <tr key={employee.id} className=\"hover:bg-gray-50 dark:hover:bg-dark-700\">\r\n                                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                  <div>\r\n                                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                                      {employee.first_name} {employee.last_name}\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">{employee.email}</div>\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                                  {employee.position}\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                  <span className={`px-2 py-1 text-xs font-medium rounded-full ${\r\n                                    employee.status === 'active' \r\n                                      ? 'bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200'\r\n                                      : employee.status === 'inactive'\r\n                                      ? 'bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200'\r\n                                      : 'bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200'\r\n                                  }`}>\r\n                                    {hrService.getStatusLabel(employee.status)}\r\n                                  </span>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                                  <button \r\n                                    onClick={() => {\r\n                                      setSelectedEmployeeForLeave(employee);\r\n                                      setShowLeaveRequestModal(true);\r\n                                      setActiveSection('overview');\r\n                                    }}\r\n                                    className=\"text-blue-600 dark:text-blue-400 hover:text-blue-900 dark:hover:text-blue-300 font-medium\"\r\n                                  >\r\n                                    Vytvoriť žiadosť\r\n                                  </button>\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                      {employees.length === 0 && (\r\n                        <div className=\"text-center py-8\">\r\n                          <p className=\"text-gray-500 dark:text-gray-400\">Žiadni zamestnanci</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {activeSection === 'leave-requests' && (\r\n                  <div className=\"space-y-6\">\r\n                    {/* Header pre čakajúce žiadosti */}\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div>\r\n                        <h2 className=\"text-2xl font-bold text-gray-900 dark:text-white\">Čakajúce žiadosti o dovolenku</h2>\r\n                        <p className=\"text-gray-600 dark:text-gray-300\">Žiadosti čakajúce na schválenie</p>\r\n                      </div>\r\n                      <button\r\n                        onClick={() => setActiveSection('overview')}\r\n                        className=\"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-dark-700 border border-gray-300 dark:border-dark-600 rounded-md hover:bg-gray-50 dark:hover:bg-dark-600\"\r\n                      >\r\n                        Späť na prehľad\r\n                      </button>\r\n                    </div>\r\n\r\n                    {/* Filtrované žiadosti - len čakajúce */}\r\n                    <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow overflow-hidden\">\r\n                      <div className=\"px-6 py-4 border-b border-gray-200 dark:border-dark-600\">\r\n                        <h3 className=\"text-lg font-medium text-gray-900 dark:text-white\">Žiadosti čakajúce na schválenie</h3>\r\n                      </div>\r\n                      <div className=\"overflow-x-auto\">\r\n                        <table className=\"min-w-full divide-y divide-gray-200 dark:divide-dark-600\">\r\n                          <thead className=\"bg-gray-50 dark:bg-dark-700\">\r\n                            <tr>\r\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                                Zamestnanec\r\n                              </th>\r\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                                Typ\r\n                              </th>\r\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                                Obdobie\r\n                              </th>\r\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                                Dní\r\n                              </th>\r\n                              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                                Akcie\r\n                              </th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody className=\"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600\">\r\n                            {leaveRequests.filter(request => request.status === 'pending').map((request) => (\r\n                              <tr key={request.id} className=\"hover:bg-gray-50 dark:hover:bg-dark-700\">\r\n                                <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                                  <div>\r\n                                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                                      {request.first_name} {request.last_name}\r\n                                    </div>\r\n                                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">{request.employee_id_code}</div>\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                                  {hrService.getLeaveTypeLabel(request.leave_type)}\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                                  <div>\r\n                                    <div>{hrService.formatDate(request.start_date)}</div>\r\n                                    <div className=\"text-gray-500 dark:text-gray-400\">do {hrService.formatDate(request.end_date)}</div>\r\n                                  </div>\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                                  {request.total_days} dní\r\n                                </td>\r\n                                <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                                  <div className=\"flex space-x-2\">\r\n                                    <button \r\n                                      onClick={() => handleApproveLeaveRequest(request.id)}\r\n                                      className=\"text-green-600 dark:text-green-400 hover:text-green-900 dark:hover:text-green-300 font-medium\"\r\n                                    >\r\n                                      Schváliť\r\n                                    </button>\r\n                                    <button \r\n                                      onClick={() => handleRejectLeaveRequest(request.id)}\r\n                                      className=\"text-red-600 dark:text-red-400 hover:text-red-900 dark:hover:text-red-300 font-medium\"\r\n                                    >\r\n                                      Zamietnuť\r\n                                    </button>\r\n                                  </div>\r\n                                </td>\r\n                              </tr>\r\n                            ))}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                      {leaveRequests.filter(request => request.status === 'pending').length === 0 && (\r\n                        <div className=\"text-center py-8\">\r\n                          <p className=\"text-gray-500 dark:text-gray-400\">Žiadne čakajúce žiadosti o dovolenku</p>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n            {activeTab === 'employee-cards' && (\r\n              <EmployeeCardPage \r\n                userEmail=\"admin@portal.sk\" \r\n                companyId={companyId}\r\n                onBack={() => setActiveTab('overview')} \r\n                selectedEmployeeId={selectedEmployee?.id}\r\n              />\r\n            )}\r\n            {activeTab === 'employment-relations' && (\r\n              <EmploymentRelationsPage \r\n                companyId={companyId} \r\n                userEmail=\"admin@portal.sk\" \r\n                onBack={() => setActiveTab('overview')} \r\n              />\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Employee Modal */}\r\n      <EmployeeModal\r\n        isOpen={showEmployeeModal}\r\n        onClose={() => setShowEmployeeModal(false)}\r\n        employee={selectedEmployee}\r\n        companyId={companyId}\r\n        onSuccess={handleEmployeeSuccess}\r\n      />\r\n\r\n      {/* Leave Request Modal */}\r\n      <LeaveRequestModal\r\n        isOpen={showLeaveRequestModal}\r\n        onClose={() => setShowLeaveRequestModal(false)}\r\n        companyId={companyId}\r\n        employeeId={selectedEmployeeForLeave?.id || 0}\r\n        employeeName={selectedEmployeeForLeave ? `${selectedEmployeeForLeave?.first_name} ${selectedEmployeeForLeave?.last_name}` : 'Nezvolený zamestnanec'}\r\n        onSuccess={handleLeaveRequestSuccess}\r\n      />\r\n\r\n      {/* Attendance Record Modal */}\r\n      <AttendanceRecordModal\r\n        isOpen={showAttendanceRecordModal}\r\n        onClose={() => setShowAttendanceRecordModal(false)}\r\n        companyId={companyId}\r\n        onSuccess={() => {\r\n          setShowAttendanceRecordModal(false);\r\n          loadData();\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HRDashboard;\r\n","import { apiService } from './apiService';\r\n\r\nexport interface PayrollPeriod {\r\n  id: number;\r\n  company_id: number;\r\n  year: number;\r\n  month: number;\r\n  is_closed: number;\r\n  closed_at?: string;\r\n  closed_by?: string;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\nexport interface PayrollPeriodStatus {\r\n  isClosed: boolean;\r\n}\r\n\r\nclass PayrollService {\r\n  // Získanie mzdových období pre firmu\r\n  async getPayrollPeriods(companyId: number, year?: number): Promise<PayrollPeriod[]> {\r\n    const params = year ? `?year=${year}` : '';\r\n    return apiService.get(`/payroll/periods/${companyId}${params}`);\r\n  }\r\n\r\n  // Získanie aktuálneho neuzatvoreného obdobia\r\n  async getCurrentPeriod(companyId: number): Promise<PayrollPeriod | null> {\r\n    return apiService.get(`/payroll/periods/${companyId}/current`);\r\n  }\r\n\r\n  // Uzatvorenie mzdového obdobia\r\n  async closePayrollPeriod(\r\n    companyId: number, \r\n    year: number, \r\n    month: number, \r\n    closedBy: string\r\n  ): Promise<{ message: string; changes: number }> {\r\n    return apiService.post(`/payroll/periods/${companyId}/close`, {\r\n      year,\r\n      month,\r\n      closedBy\r\n    });\r\n  }\r\n\r\n  // Odomknutie mzdového obdobia\r\n  async openPayrollPeriod(\r\n    companyId: number, \r\n    year: number, \r\n    month: number\r\n  ): Promise<{ message: string; changes: number }> {\r\n    return apiService.post(`/payroll/periods/${companyId}/open`, {\r\n      year,\r\n      month\r\n    });\r\n  }\r\n\r\n  // Kontrola či je obdobie uzatvorené\r\n  async checkPeriodStatus(\r\n    companyId: number, \r\n    year: number, \r\n    month: number\r\n  ): Promise<PayrollPeriodStatus> {\r\n    return apiService.get(`/payroll/periods/${companyId}/check/${year}/${month}`);\r\n  }\r\n\r\n  // Pomocné metódy\r\n  getMonthName(month: number): string {\r\n    const months = [\r\n      'Január', 'Február', 'Marec', 'Apríl', 'Máj', 'Jún',\r\n      'Júl', 'August', 'September', 'Október', 'November', 'December'\r\n    ];\r\n    return months[month - 1] || '';\r\n  }\r\n\r\n  getPeriodLabel(year: number, month: number): string {\r\n    return `${this.getMonthName(month)} ${year}`;\r\n  }\r\n\r\n  isCurrentPeriod(year: number, month: number): boolean {\r\n    const now = new Date();\r\n    return year === now.getFullYear() && month === now.getMonth() + 1;\r\n  }\r\n\r\n  canClosePeriod(year: number, month: number): boolean {\r\n    const now = new Date();\r\n    const currentYear = now.getFullYear();\r\n    const currentMonth = now.getMonth() + 1;\r\n    \r\n    // Môžeme uzatvoriť len minulé mesiace\r\n    return year < currentYear || (year === currentYear && month < currentMonth);\r\n  }\r\n}\r\n\r\nexport const payrollService = new PayrollService();\r\n","import React, { useState, useEffect } from 'react';\r\nimport { XMarkIcon, CalendarIcon, LockClosedIcon, LockOpenIcon } from '@heroicons/react/24/outline';\r\nimport { payrollService, PayrollPeriod } from '../services/payrollService';\r\n\r\ninterface PayrollPeriodsModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  companyId: number;\r\n  userEmail: string;\r\n  userRole?: 'admin' | 'accountant' | 'company' | 'user';\r\n}\r\n\r\nconst PayrollPeriodsModal: React.FC<PayrollPeriodsModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  companyId,\r\n  userEmail,\r\n  userRole = 'user'\r\n}) => {\r\n  const [periods, setPeriods] = useState<PayrollPeriod[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [selectedYear, setSelectedYear] = useState(new Date().getFullYear());\r\n  const [selectedPeriod, setSelectedPeriod] = useState<PayrollPeriod | null>(null);\r\n  const [actionLoading, setActionLoading] = useState(false);\r\n\r\n  // Načítanie mzdových období\r\n  const loadPeriods = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await payrollService.getPayrollPeriods(companyId, selectedYear);\r\n      setPeriods(data);\r\n    } catch (error) {\r\n      console.error('Chyba pri načítaní mzdových období:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      loadPeriods();\r\n    }\r\n  }, [isOpen, selectedYear]);\r\n\r\n  // Kontrola oprávnení na editáciu\r\n  const canEdit = userRole === 'admin' || userRole === 'accountant';\r\n\r\n  // Uzatvorenie/odomknutie obdobia\r\n  const handleTogglePeriod = async (period: PayrollPeriod) => {\r\n    if (!canEdit) {\r\n      alert('Nemáte oprávnenie na úpravu mzdových období. Kontaktujte administrátora alebo účtovníka.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setActionLoading(true);\r\n      \r\n      if (period.is_closed) {\r\n        // Odomknutie\r\n        await payrollService.openPayrollPeriod(companyId, period.year, period.month);\r\n      } else {\r\n        // Uzatvorenie\r\n        if (!payrollService.canClosePeriod(period.year, period.month)) {\r\n          alert('Nie je možné uzatvoriť aktuálne alebo budúce obdobie!');\r\n          return;\r\n        }\r\n        await payrollService.closePayrollPeriod(companyId, period.year, period.month, userEmail);\r\n      }\r\n      \r\n      // Obnovenie dát\r\n      await loadPeriods();\r\n    } catch (error) {\r\n      console.error('Chyba pri zmene stavu obdobia:', error);\r\n      alert('Chyba pri zmene stavu obdobia');\r\n    } finally {\r\n      setActionLoading(false);\r\n    }\r\n  };\r\n\r\n  // Generovanie rokov pre výber\r\n  const generateYearOptions = () => {\r\n    const currentYear = new Date().getFullYear();\r\n    const years = [];\r\n    for (let year = currentYear - 2; year <= currentYear + 1; year++) {\r\n      years.push(year);\r\n    }\r\n    return years;\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white dark:bg-dark-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden\">\r\n        {/* Header */}\r\n        <div className=\"flex items-center justify-between p-6 border-b border-gray-200 dark:border-dark-600\">\r\n          <div className=\"flex items-center space-x-3\">\r\n            <CalendarIcon className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\r\n            <h2 className=\"text-xl font-semibold text-gray-900 dark:text-white\">\r\n              Účtovné obdobia\r\n            </h2>\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300\"\r\n          >\r\n            <XMarkIcon className=\"w-6 h-6\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"p-6 overflow-y-auto max-h-[calc(90vh-120px)]\">\r\n          {/* Výber roku */}\r\n          <div className=\"mb-6\">\r\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              Rok\r\n            </label>\r\n            <select\r\n              value={selectedYear}\r\n              onChange={(e) => setSelectedYear(Number(e.target.value))}\r\n              className=\"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 bg-white dark:bg-dark-700 text-gray-900 dark:text-white\"\r\n            >\r\n              {generateYearOptions().map(year => (\r\n                <option key={year} value={year}>\r\n                  {year}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Tabuľka období */}\r\n          {loading ? (\r\n            <div className=\"text-center py-8\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\r\n              <p className=\"mt-2 text-gray-500 dark:text-gray-400\">Načítavam...</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"min-w-full divide-y divide-gray-200 dark:divide-dark-600\">\r\n                <thead className=\"bg-gray-50 dark:bg-dark-700\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Obdobie\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Status\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Uzatvorené\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider\">\r\n                      Akcie\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white dark:bg-dark-800 divide-y divide-gray-200 dark:divide-dark-600\">\r\n                  {periods.length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan={4} className=\"px-6 py-4 text-center text-gray-500 dark:text-gray-400\">\r\n                        Žiadne mzdové obdobia pre vybraný rok\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    periods.map((period) => (\r\n                      <tr key={period.id} className=\"hover:bg-gray-50 dark:hover:bg-dark-700\">\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <div className=\"flex items-center\">\r\n                            <div>\r\n                              <div className=\"text-sm font-medium text-gray-900 dark:text-white\">\r\n                                {payrollService.getPeriodLabel(period.year, period.month)}\r\n                              </div>\r\n                              {payrollService.isCurrentPeriod(period.year, period.month) && (\r\n                                <div className=\"text-xs text-blue-600 dark:text-blue-400\">\r\n                                  Aktuálne obdobie\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${\r\n                            period.is_closed\r\n                              ? 'bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400'\r\n                              : 'bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400'\r\n                          }`}>\r\n                            {period.is_closed ? 'Uzatvorené' : 'Otvorené'}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400\">\r\n                          {period.closed_at ? (\r\n                            <div>\r\n                              <div>{new Date(period.closed_at).toLocaleDateString('sk-SK')}</div>\r\n                              <div className=\"text-xs\">{period.closed_by}</div>\r\n                            </div>\r\n                          ) : (\r\n                            '-'\r\n                          )}\r\n                        </td>\r\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                          {canEdit ? (\r\n                            <button\r\n                              onClick={() => handleTogglePeriod(period)}\r\n                              disabled={actionLoading || (!period.is_closed && !payrollService.canClosePeriod(period.year, period.month))}\r\n                              className={`inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md ${\r\n                                period.is_closed\r\n                                  ? 'text-blue-700 bg-blue-100 hover:bg-blue-200 dark:text-blue-400 dark:bg-blue-900/20 dark:hover:bg-blue-900/30'\r\n                                  : 'text-red-700 bg-red-100 hover:bg-red-200 dark:text-red-400 dark:bg-red-900/20 dark:hover:bg-red-900/30'\r\n                              } disabled:opacity-50 disabled:cursor-not-allowed`}\r\n                            >\r\n                              {actionLoading ? (\r\n                                <div className=\"animate-spin rounded-full h-3 w-3 border-b-2 border-current mr-1\"></div>\r\n                              ) : period.is_closed ? (\r\n                                <LockOpenIcon className=\"w-3 h-3 mr-1\" />\r\n                              ) : (\r\n                                <LockClosedIcon className=\"w-3 h-3 mr-1\" />\r\n                              )}\r\n                              {period.is_closed ? 'Odomknúť' : 'Uzatvoriť'}\r\n                            </button>\r\n                          ) : (\r\n                            <span className=\"text-xs text-gray-500 dark:text-gray-400\">\r\n                              Len na zobrazenie\r\n                            </span>\r\n                          )}\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Footer */}\r\n        <div className=\"flex items-center justify-between p-6 border-t border-gray-200 dark:border-dark-600\">\r\n          <div className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n            * Môžete uzatvoriť len minulé mesiace\r\n            {!canEdit && (\r\n              <span className=\"block mt-1 text-orange-600\">\r\n                ** Len administrátori a účtovníci môžu upravovať obdobia\r\n              </span>\r\n            )}\r\n          </div>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"px-4 py-2 bg-gray-300 dark:bg-dark-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-400 dark:hover:bg-dark-500\"\r\n          >\r\n            Zavrieť\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PayrollPeriodsModal;\r\n","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  CurrencyDollarIcon,\r\n  UserIcon,\r\n  ChartBarIcon,\r\n  PlusIcon,\r\n  EyeIcon,\r\n  ClipboardDocumentListIcon,\r\n  CreditCardIcon,\r\n  EnvelopeIcon,\r\n  FolderIcon,\r\n  CalendarIcon,\r\n  CloudIcon,\r\n  UsersIcon,\r\n  PencilIcon,\r\n  TrashIcon,\r\n  DocumentTextIcon,\r\n  BanknotesIcon\r\n} from '@heroicons/react/24/outline';\r\nimport FileManager from './FileManager';\r\nimport TaskModal, { Task, Employee } from './TaskModal';\r\nimport MessagesList from './MessagesList';\r\nimport MessageModal from './MessageModal';\r\nimport DropboxIntegration from './DropboxIntegration';\r\nimport HRDashboard from './HRDashboard';\r\nimport PayrollPeriodsModal from './PayrollPeriodsModal';\r\n// import AccountingDashboard from './AccountingDashboard'; // Už sa nepoužíva\r\n\r\nimport { apiService } from '../services/apiService';\r\nimport { Company as ApiCompany, FileData } from '../services/apiService';\r\nimport { hrService } from '../services/hrService';\r\nimport { accountingService } from '../services/accountingService';\r\n\r\n// Používame API typy, ale zachovávame kompatibilitu s existujúcimi komponentmi\r\ntype Company = ApiCompany;\r\n\r\ninterface CompanyDashboardProps {\r\n  company: Company;\r\n  onClose: () => void;\r\n  userEmail: string;\r\n  userRole?: 'admin' | 'accountant' | 'company';\r\n}\r\n\r\nconst CompanyDashboard: React.FC<CompanyDashboardProps> = ({ company, onClose, userEmail, userRole = 'company' }) => {\r\n  const navigate = useNavigate();\r\n  const [activeTab, setActiveTab] = useState('overview');\r\n\r\n\r\n\r\n\r\n\r\n  // Skutoční zamestnanci firmy z HR modulu\r\n  const [companyEmployees, setCompanyEmployees] = useState<Employee[]>([]);\r\n  const [loadingEmployees, setLoadingEmployees] = useState(true);\r\n\r\n  const [invoices, setInvoices] = useState<any[]>([]);\r\n  const [loadingInvoices, setLoadingInvoices] = useState(true);\r\n\r\n  // Načítavame skutočné správy cez MessagesList komponent\r\n  const [, setUnreadMessagesCount] = useState(0);\r\n  const [unreadCounts, setUnreadCounts] = useState({\r\n    receivedUnreadCount: 0,\r\n    sentUnreadCount: 0,\r\n    totalUnreadCount: 0\r\n  });\r\n\r\n  // Súbory pre firmu - načítané z fileService\r\n  const [files, setFiles] = useState<FileData[]>([]);\r\n  const [loadingFiles, setLoadingFiles] = useState(true);\r\n\r\n  // Úlohy pre firmu - načítané z taskService\r\n  const [tasks, setTasks] = useState<Task[]>([]);\r\n  const [loadingTasks, setLoadingTasks] = useState(true);\r\n\r\n\r\n\r\n  // State pre TaskModal\r\n  const [showTaskModal, setShowTaskModal] = useState(false);\r\n  const [editingTask, setEditingTask] = useState<Task | null>(null);\r\n\r\n  // State pre MessageModal\r\n  const [showMessageModal, setShowMessageModal] = useState(false);\r\n  const [selectedAccountant, setSelectedAccountant] = useState<string>('');\r\n\r\n  // State pre PayrollPeriodsModal\r\n  const [showPayrollPeriodsModal, setShowPayrollPeriodsModal] = useState(false);\r\n\r\n  // Funkcia na načítanie počtu neprečítaných správ pre konkrétnu firmu\r\n  const loadUnreadMessagesCount = useCallback(async () => {\r\n    try {\r\n      const unreadCount = await apiService.getCompanyUnreadCount(company.id);\r\n      setUnreadMessagesCount(unreadCount);\r\n    } catch (error) {\r\n      console.error('Chyba pri načítaní počtu neprečítaných správ pre firmu:', error);\r\n    }\r\n  }, [company.id]);\r\n\r\n  // Funkcia na načítanie rozlíšených počtov neprečítaných správ pre konkrétnu firmu\r\n  const loadUnreadCounts = useCallback(async () => {\r\n    try {\r\n      const counts = await apiService.getCompanyUnreadCounts(company.id);\r\n      setUnreadCounts(counts);\r\n      setUnreadMessagesCount(counts.totalUnreadCount);\r\n    } catch (error) {\r\n      console.error('Chyba pri načítaní rozlíšených počtov správ pre firmu:', error);\r\n    }\r\n  }, [company.id]);\r\n\r\n  // Funkcia na načítanie zamestnancov firmy z HR modulu\r\n  const loadEmployees = useCallback(async () => {\r\n    try {\r\n      setLoadingEmployees(true);\r\n      const employees = await hrService.getEmployees(company.id);\r\n      \r\n      // Konvertujeme HR zamestnancov na formát potrebný pre TaskModal\r\n      const convertedEmployees: Employee[] = employees.map(emp => ({\r\n        id: emp.id.toString(),\r\n        name: `${emp.first_name} ${emp.last_name}`,\r\n        email: emp.email,\r\n        role: emp.position,\r\n        department: emp.department || 'Nešpecifikované'\r\n      }));\r\n      \r\n      setCompanyEmployees(convertedEmployees);\r\n    } catch (error) {\r\n      console.error('Chyba pri načítaní zamestnancov:', error);\r\n      setCompanyEmployees([]);\r\n    } finally {\r\n      setLoadingEmployees(false);\r\n    }\r\n  }, [company.id]);\r\n\r\n  // Funkcia na otvorenie modalu pre kontaktovanie účtovníka\r\n  const handleContactAccountant = (accountantEmail: string) => {\r\n    setSelectedAccountant(accountantEmail);\r\n    setShowMessageModal(true);\r\n  };\r\n\r\n\r\n\r\n\r\n\r\n  const handleEmptyTrash = async () => {\r\n    try {\r\n      await apiService.emptyTrash(company.id);\r\n      // Refresh súborov po vyprázdnení kôša\r\n      const updatedFiles = await apiService.getCompanyFiles(company.id);\r\n      setFiles(updatedFiles);\r\n    } catch (error) {\r\n      console.error('Chyba pri vyprázdňovaní kôša:', error);\r\n    }\r\n  };\r\n\r\n  // Handler funkcie pre súbory\r\n  const handleFileUpload = (file: FileData) => {\r\n    setFiles(prev => [file, ...prev]);\r\n  };\r\n\r\n  const handleFileDelete = async (fileId: number) => {\r\n    try {\r\n      await apiService.deleteFile(fileId);\r\n      setFiles(prev => prev.filter(file => file.id !== fileId));\r\n    } catch (error) {\r\n      console.error('Chyba pri mazaní súboru:', error);\r\n    }\r\n  };\r\n\r\n  const handleFileDownload = async (file: FileData) => {\r\n    try {\r\n      const blob = await apiService.downloadFile(file.id);\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = file.original_name;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n      document.body.removeChild(a);\r\n    } catch (error) {\r\n      console.error('Chyba pri sťahovaní súboru:', error);\r\n      alert('Chyba pri sťahovaní súboru');\r\n    }\r\n  };\r\n\r\n  const handleFilePreview = async (file: FileData) => {\r\n    try {\r\n      await apiService.previewFile(file.id);\r\n    } catch (error) {\r\n      console.error('Chyba pri náhľade súboru:', error);\r\n    }\r\n  };\r\n\r\n  // Handler funkcie pre úlohy\r\n  const handleAddTask = () => {\r\n    setEditingTask(null);\r\n    setShowTaskModal(true);\r\n  };\r\n\r\n  const handleEditTask = (task: Task) => {\r\n    setEditingTask(task);\r\n    setShowTaskModal(true);\r\n  };\r\n\r\n  const handleDeleteTask = async (taskId: string) => {\r\n    try {\r\n      await apiService.deleteTask(parseInt(taskId));\r\n      setTasks(prev => prev.filter(task => task.id !== taskId));\r\n    } catch (error) {\r\n      console.error('Chyba pri mazaní úlohy:', error);\r\n    }\r\n  };\r\n\r\n  const handleSaveTask = async (task: Omit<Task, 'id' | 'createdAt'>) => {\r\n    try {\r\n      if (editingTask) {\r\n        // Update existing task - convert TaskModal Task to API Task format\r\n        const apiTaskData = {\r\n          title: task.title,\r\n          description: task.description,\r\n          status: task.status,\r\n          priority: task.priority,\r\n          assigned_to: task.assignedToEmail || task.assignedTo, // Používame email ak je dostupný\r\n          due_date: task.dueDate,\r\n          category: task.category,\r\n          estimated_hours: task.estimatedHours\r\n        };\r\n        \r\n        await apiService.updateTask(parseInt(editingTask.id), apiTaskData);\r\n        setTasks(prev => prev.map(t => t.id === editingTask.id ? { ...t, ...task } : t));\r\n      } else {\r\n        // Create new task - convert TaskModal Task to API Task format\r\n        const apiTaskData = {\r\n          title: task.title,\r\n          description: task.description,\r\n          status: task.status,\r\n          priority: task.priority,\r\n          assigned_to: task.assignedToEmail || task.assignedTo, // Používame email ak je dostupný\r\n          due_date: task.dueDate,\r\n          category: task.category,\r\n          estimated_hours: task.estimatedHours,\r\n          company_id: company.id,\r\n          created_by: userEmail,\r\n          company_name: company.name\r\n        };\r\n        \r\n        await apiService.createTask(apiTaskData);\r\n        \r\n        // Po vytvorení úlohy znovu načítame všetky úlohy z API\r\n        console.log('CompanyDashboard: Znovu načítavam úlohy po vytvorení novej úlohy');\r\n        const companyTasks = await apiService.getCompanyTasks(company.id);\r\n        console.log('CompanyDashboard: Načítané úlohy po vytvorení:', companyTasks);\r\n        \r\n        // Konvertujeme API Task na TaskModal Task\r\n        const convertedTasks: Task[] = companyTasks.map(apiTask => ({\r\n          id: apiTask.id.toString(),\r\n          title: apiTask.title,\r\n          description: apiTask.description || '',\r\n          status: apiTask.status,\r\n          priority: apiTask.priority,\r\n          assignedTo: apiTask.assigned_to,\r\n          dueDate: apiTask.due_date || '',\r\n          createdAt: apiTask.created_at,\r\n          createdBy: apiTask.created_by,\r\n          category: 'other', // Default kategória\r\n        }));\r\n        \r\n        setTasks(convertedTasks);\r\n      }\r\n      setShowTaskModal(false);\r\n      setEditingTask(null);\r\n    } catch (error) {\r\n      console.error('Chyba pri ukladaní úlohy:', error);\r\n    }\r\n  };\r\n\r\n  // Helper funkcie\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const getStatusBadge = (status: string) => {\r\n    const colors = {\r\n      pending: 'bg-yellow-100 text-yellow-800',\r\n      completed: 'bg-green-100 text-green-800',\r\n      in_progress: 'bg-blue-100 text-blue-800',\r\n      cancelled: 'bg-gray-100 text-gray-800',\r\n      unpaid: 'bg-red-100 text-red-800',\r\n      paid: 'bg-green-100 text-green-800',\r\n      overdue: 'bg-red-100 text-red-800',\r\n    };\r\n    const labels = {\r\n      pending: 'Čakajúce',\r\n      completed: 'Dokončené',\r\n      in_progress: 'V spracovaní',\r\n      cancelled: 'Zrušené',\r\n      unpaid: 'Nezaplatené',\r\n      paid: 'Zaplatené',\r\n      overdue: 'Po splatnosti',\r\n    };\r\n    return (\r\n      <span className={`px-2 py-1 text-xs font-medium rounded-full ${colors[status as keyof typeof colors] || 'bg-gray-100 text-gray-800'}`}>\r\n        {labels[status as keyof typeof labels] || status}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  const getPriorityBadge = (priority: string) => {\r\n    const colors = {\r\n      low: 'bg-gray-100 text-gray-800',\r\n      medium: 'bg-blue-100 text-blue-800',\r\n      high: 'bg-orange-100 text-orange-800',\r\n      urgent: 'bg-red-100 text-red-800',\r\n    };\r\n    const labels = {\r\n      low: 'Nízka',\r\n      medium: 'Stredná',\r\n      high: 'Vysoká',\r\n      urgent: 'Urgentná',\r\n    };\r\n    return (\r\n      <span className={`px-2 py-1 text-xs font-medium rounded-full ${colors[priority as keyof typeof colors] || 'bg-gray-100 text-gray-800'}`}>\r\n        {labels[priority as keyof typeof labels] || priority}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  // Štatistiky\r\n  const stats = {\r\n    totalFiles: files.length,\r\n    documentFiles: files.filter(f => f.category === 'documents').length,\r\n    invoiceFiles: files.filter(f => f.category === 'invoices').length,\r\n    contractFiles: files.filter(f => f.category === 'contracts').length,\r\n    totalTasks: tasks.length,\r\n    pendingTasks: tasks.filter(t => t.status === 'pending').length,\r\n    completedTasks: tasks.filter(t => t.status === 'completed').length,\r\n    totalInvoices: invoices.length,\r\n    // Len nezaplatené faktúry od DIVIDENDA s.r.o.\r\n    unpaidInvoices: invoices.filter(i => {\r\n      const isUnpaid = (i.kc_likv && parseFloat(i.kc_likv) > 0) || i.status === 'unpaid' || i.status === 'overdue';\r\n      const isDividenda = i.supplier_name?.includes('DIVIDENDA') || i.supplier_name?.includes('36543039');\r\n      return isUnpaid && isDividenda;\r\n    }).length,\r\n    totalAmount: invoices.filter(i => {\r\n      const isUnpaid = (i.kc_likv && parseFloat(i.kc_likv) > 0) || i.status === 'unpaid' || i.status === 'overdue';\r\n      const isDividenda = i.supplier_name?.includes('DIVIDENDA') || i.supplier_name?.includes('36543039');\r\n      return isUnpaid && isDividenda;\r\n    }).reduce((sum, i) => sum + (parseFloat(i.kc_likv) || parseFloat(i.total_amount) || 0), 0),\r\n    totalFileSize: files.reduce((sum, f) => sum + f.file_size, 0),\r\n  };\r\n\r\n  \r\n\r\n  // Načítanie súborov, úloh a dokumentov pri otvorení dashboardu\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      try {\r\n        setLoadingFiles(true);\r\n        setLoadingTasks(true);\r\n        setLoadingInvoices(true);\r\n        \r\n        // Načítanie súborov\r\n        const companyFiles = await apiService.getCompanyFiles(company.id);\r\n        setFiles(companyFiles);\r\n        \r\n        // Načítanie úloh\r\n        const companyTasks = await apiService.getCompanyTasks(company.id);\r\n        \r\n        // Načítanie prijatých faktúr\r\n        const receivedInvoices = await accountingService.getReceivedInvoices(company.id, { limit: 1000 });\r\n        setInvoices(receivedInvoices);\r\n        \r\n        \r\n        // Konvertujeme API Task na TaskModal Task\r\n        const convertedTasks: Task[] = companyTasks.map(apiTask => ({\r\n          id: apiTask.id.toString(),\r\n          title: apiTask.title,\r\n          description: apiTask.description || '',\r\n          status: apiTask.status,\r\n          priority: apiTask.priority,\r\n          assignedTo: apiTask.assigned_to,\r\n          dueDate: apiTask.due_date || '',\r\n          createdAt: apiTask.created_at,\r\n          createdBy: apiTask.created_by,\r\n          category: 'other', // Default kategória\r\n        }));\r\n        console.log('CompanyDashboard: Konvertované úlohy:', convertedTasks);\r\n        setTasks(convertedTasks);\r\n\r\n        // Načítanie rozlíšených počtov neprečítaných správ\r\n        await loadUnreadCounts();\r\n\r\n        // Načítanie zamestnancov\r\n        await loadEmployees();\r\n\r\n      } catch (error) {\r\n        console.error('Chyba pri načítaní dát:', error);\r\n        console.error('Error details:', error);\r\n      } finally {\r\n        setLoadingFiles(false);\r\n        setLoadingTasks(false);\r\n        setLoadingInvoices(false);\r\n      }\r\n    };\r\n\r\n    loadData();\r\n  }, [company.id, loadUnreadMessagesCount, loadUnreadCounts, loadEmployees]);\r\n\r\n  // Automatické aktualizácie počtu správ každých 30 sekúnd\r\n  useEffect(() => {\r\n    const interval = setInterval(() => {\r\n      loadUnreadCounts();\r\n    }, 30000); // 30 sekúnd\r\n\r\n    return () => clearInterval(interval);\r\n  }, [loadUnreadCounts]);\r\n\r\n  const renderOverview = () => (\r\n    <div className=\"space-y-6\">\r\n      {/* Štatistiky */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <div className=\"bg-white rounded-lg shadow-md p-6\">\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <FolderIcon className=\"h-8 w-8 text-blue-500\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Súbory</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalFiles}</p>\r\n              <p className=\"text-sm text-gray-500\">{stats.documentFiles} dokumentov</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <button \r\n          onClick={() => setActiveTab('tasks')}\r\n          className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <ClipboardDocumentListIcon className=\"h-8 w-8 text-green-500\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Úlohy</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalTasks}</p>\r\n              <p className=\"text-sm text-gray-500\">{stats.pendingTasks} čakajúcich</p>\r\n              <p className=\"text-xs text-green-600 mt-1\">Kliknite pre zobrazenie</p>\r\n            </div>\r\n          </div>\r\n        </button>\r\n\r\n        <button \r\n          onClick={() => navigate('/accounting/received-invoices?filter=dividenda')}\r\n          className=\"bg-white dark:bg-dark-800 rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <CurrencyDollarIcon className=\"h-8 w-8 text-yellow-500\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600 dark:text-gray-300\">Nezaplatené faktúry</p>\r\n              <p className=\"text-2xl font-bold text-gray-900 dark:text-white\">{stats.unpaidInvoices}</p>\r\n              <p className=\"text-sm text-gray-500 dark:text-gray-400\">{stats.totalAmount.toFixed(2)} € celkovo</p>\r\n              <p className=\"text-xs text-yellow-600 mt-1\">DIVIDENDA s.r.o. - kliknite pre zobrazenie</p>\r\n            </div>\r\n          </div>\r\n        </button>\r\n\r\n        <button \r\n          onClick={() => setActiveTab('messages')}\r\n          className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <EnvelopeIcon className=\"h-8 w-8 text-purple-500\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Správy</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{unreadCounts.totalUnreadCount}</p>\r\n              <div className=\"text-sm text-gray-500\">\r\n                <div>Prijaté: {unreadCounts.receivedUnreadCount}</div>\r\n                <div>Odoslané: {unreadCounts.sentUnreadCount}</div>\r\n              </div>\r\n              <p className=\"text-xs text-purple-600 mt-1\">Kliknite pre zobrazenie</p>\r\n            </div>\r\n          </div>\r\n        </button>\r\n\r\n\r\n\r\n\r\n      </div>\r\n\r\n      {/* Rýchle akcie */}\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n        <button \r\n          onClick={() => setActiveTab('hr')}\r\n          className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <UsersIcon className=\"h-8 w-8 text-orange-500\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">HR, Personalistika a mzdy</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">👥</p>\r\n              <p className=\"text-sm text-gray-500\">Správa ľudských zdrojov</p>\r\n              <p className=\"text-xs text-orange-600 mt-1\">Kliknite pre zobrazenie</p>\r\n            </div>\r\n          </div>\r\n        </button>\r\n\r\n        <button \r\n          onClick={() => setActiveTab('tasks')}\r\n          className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <ClipboardDocumentListIcon className=\"h-8 w-8 text-green-500\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Úlohy</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalTasks}</p>\r\n              <p className=\"text-sm text-gray-500\">{stats.pendingTasks} čakajúcich</p>\r\n              <p className=\"text-xs text-green-600 mt-1\">Kliknite pre zobrazenie</p>\r\n            </div>\r\n          </div>\r\n        </button>\r\n\r\n        <button \r\n          onClick={() => setActiveTab('files')}\r\n          className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <FolderIcon className=\"h-8 w-8 text-indigo-500\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Súbory</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">{stats.totalFiles}</p>\r\n              <p className=\"text-sm text-gray-500\">{formatFileSize(stats.totalFileSize)} celkovo</p>\r\n              <p className=\"text-xs text-indigo-600 mt-1\">Kliknite pre zobrazenie</p>\r\n            </div>\r\n          </div>\r\n        </button>\r\n\r\n        <button \r\n          onClick={() => setShowPayrollPeriodsModal(true)}\r\n          className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105 text-left\"\r\n        >\r\n          <div className=\"flex items-center\">\r\n            <div className=\"flex-shrink-0\">\r\n              <CalendarIcon className=\"h-8 w-8 text-purple-500\" />\r\n            </div>\r\n            <div className=\"ml-4\">\r\n              <p className=\"text-sm font-medium text-gray-600\">Účtovné obdobie</p>\r\n              <p className=\"text-2xl font-bold text-gray-900\">📅</p>\r\n              <p className=\"text-sm text-gray-500\">Mzdové obdobia</p>\r\n              <p className=\"text-xs text-purple-600 mt-1\">Kliknite pre zobrazenie</p>\r\n            </div>\r\n          </div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n\r\n\r\n  const renderTasks = () => {\r\n    console.log('CompanyDashboard: renderTasks - loadingTasks:', loadingTasks, 'tasks.length:', tasks.length);\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"flex justify-between items-center\">\r\n          <h2 className=\"text-lg font-semibold text-gray-900\">Úlohy</h2>\r\n          <button \r\n            onClick={handleAddTask}\r\n            className=\"bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700 flex items-center\"\r\n          >\r\n            <PlusIcon className=\"h-5 w-5 mr-2\" />\r\n            Pridať úlohu\r\n          </button>\r\n        </div>\r\n\r\n        {loadingTasks ? (\r\n          <div className=\"text-center py-12\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\r\n            <p className=\"mt-4 text-gray-600\">Načítavam úlohy...</p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            {/* Zoznam úloh */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n              {tasks.map((task) => (\r\n                <div key={task.id} className=\"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow\">\r\n                  <div className=\"flex items-start justify-between mb-4\">\r\n                    <div className=\"flex-1\">\r\n                      <h3 className=\"text-lg font-medium text-gray-900 mb-2\">{task.title}</h3>\r\n                      <p className=\"text-sm text-gray-600 mb-2\">{task.description}</p>\r\n                      <div className=\"flex items-center text-sm text-gray-500\">\r\n                        <CalendarIcon className=\"h-4 w-4 mr-1\" />\r\n                        {task.dueDate}\r\n                      </div>\r\n                      <div className=\"flex items-center text-sm text-gray-500 mt-1\">\r\n                        <UserIcon className=\"h-4 w-4 mr-1\" />\r\n                        {task.assignedTo}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"flex flex-col items-end space-y-2 ml-4\">\r\n                      {getStatusBadge(task.status)}\r\n                      {getPriorityBadge(task.priority)}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\r\n                    <div className=\"flex space-x-2\">\r\n                      <button \r\n                        onClick={() => handleEditTask(task)}\r\n                        className=\"text-primary-600 hover:text-primary-700 text-sm font-medium\"\r\n                      >\r\n                        Upraviť\r\n                      </button>\r\n                      <button \r\n                        onClick={() => handleDeleteTask(task.id)}\r\n                        className=\"text-red-600 hover:text-red-700 text-sm font-medium\"\r\n                      >\r\n                        Vymazať\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Prázdny stav */}\r\n            {tasks.length === 0 && (\r\n              <div className=\"text-center py-12 bg-white rounded-lg shadow-md\">\r\n                <ClipboardDocumentListIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n                <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Žiadne úlohy</h3>\r\n                <p className=\"mt-1 text-sm text-gray-500\">\r\n                  Zatiaľ neboli vytvorené žiadne úlohy pre túto firmu.\r\n                </p>\r\n                <button\r\n                  onClick={handleAddTask}\r\n                  className=\"mt-4 bg-primary-600 text-white px-4 py-2 rounded-md hover:bg-primary-700\"\r\n                >\r\n                  Vytvoriť prvú úlohu\r\n                </button>\r\n              </div>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n\r\n\r\n  const renderAccounting = () => {\r\n    // Navigácia na samostatnú stránku účtovníctva\r\n    navigate('/accounting');\r\n    return null;\r\n  };\r\n\r\n  const renderAccountants = () => (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex justify-between items-center\">\r\n        <h2 className=\"text-lg font-semibold text-gray-900\">Priradení účtovníci</h2>\r\n        <div className=\"text-sm text-gray-500\">\r\n          {company.assignedToAccountants?.length || 0} účtovníkov priradených k firme\r\n        </div>\r\n      </div>\r\n\r\n      {company.assignedToAccountants && company.assignedToAccountants.length > 0 ? (\r\n        <div className=\"bg-white rounded-lg shadow-md overflow-hidden\">\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Účtovník\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Email\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Status\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Posledné prihlásenie\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Akcie\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {company.assignedToAccountants.map((accountantEmail, index) => {\r\n                  // Simulované dáta pre účtovníka (v reálnej aplikácii by sa načítali z databázy)\r\n                  const accountant = {\r\n                    id: index + 1,\r\n                    name: accountantEmail.includes('@') ? accountantEmail.split('@')[0].replace(/[._]/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase()) : accountantEmail,\r\n                    email: accountantEmail,\r\n                    status: 'active',\r\n                    lastLogin: '1 hodinu',\r\n                    department: 'Účtovníctvo'\r\n                  };\r\n\r\n                  return (\r\n                    <tr key={accountant.id}>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"flex items-center\">\r\n                          <div className=\"flex-shrink-0 h-10 w-10\">\r\n                            <div className=\"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center\">\r\n                              <span className=\"text-sm font-medium text-gray-700\">\r\n                                {accountant.name.split(' ').map(n => n[0]).join('')}\r\n                              </span>\r\n                            </div>\r\n                          </div>\r\n                          <div className=\"ml-4\">\r\n                            <div className=\"text-sm font-medium text-gray-900\">{accountant.name}</div>\r\n                            <div className=\"text-sm text-gray-500\">{accountant.department}</div>\r\n                          </div>\r\n                        </div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">{accountant.email}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800\">\r\n                          Aktívny\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\r\n                        {accountant.lastLogin}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                        <button \r\n                          onClick={() => handleContactAccountant(accountant.email)}\r\n                          className=\"text-primary-600 hover:text-primary-900\"\r\n                        >\r\n                          Kontaktovať\r\n                        </button>\r\n                      </td>\r\n                    </tr>\r\n                  );\r\n                })}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-12 bg-white rounded-lg shadow-md\">\r\n          <UserIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\r\n          <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Žiadni priradení účtovníci</h3>\r\n          <p className=\"mt-1 text-sm text-gray-500\">\r\n            K tejto firme zatiaľ nie sú priradení žiadni účtovníci.\r\n          </p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderMessages = () => (\r\n    <MessagesList\r\n      userEmail={userEmail}\r\n      userRole={userRole === 'company' ? 'user' : userRole}\r\n      companyId={company.id}\r\n      isAdmin={userRole === 'admin'}\r\n      onMessageAction={loadUnreadCounts}\r\n    />\r\n  );\r\n\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        {/* Breadcrumb Navigation */}\r\n        <nav className=\"flex mb-6\" aria-label=\"Breadcrumb\">\r\n          <ol className=\"inline-flex items-center space-x-1 md:space-x-3\">\r\n            <li className=\"inline-flex items-center\">\r\n              <button\r\n                onClick={onClose}\r\n                className=\"inline-flex items-center text-sm font-medium text-gray-700 hover:text-primary-600\"\r\n              >\r\n                <svg className=\"w-4 h-4 mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path d=\"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z\"></path>\r\n                </svg>\r\n                Dashboard\r\n              </button>\r\n            </li>\r\n            <li>\r\n              <div className=\"flex items-center\">\r\n                <svg className=\"w-6 h-6 text-gray-400\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\r\n                  <path fillRule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clipRule=\"evenodd\"></path>\r\n                </svg>\r\n                <span className=\"ml-1 text-sm font-medium text-gray-500 md:ml-2\">{company.name}</span>\r\n              </div>\r\n            </li>\r\n          </ol>\r\n        </nav>\r\n\r\n        <div className=\"mb-6\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div>\r\n              <h1 className=\"text-3xl font-bold text-gray-900\">{company.name} - Dashboard</h1>\r\n              <p className=\"text-gray-600\">IČO: {company.ico} | OR: {company.business_registry}</p>\r\n            </div>\r\n            <div className=\"text-right\">\r\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg px-4 py-2\">\r\n                <p className=\"text-sm font-medium text-blue-800\">Aktívna firma</p>\r\n                <p className=\"text-xs text-blue-600\">{company.name}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Tabs */}\r\n        <div className=\"border-b border-gray-200 mb-6\">\r\n          <nav className=\"-mb-px flex space-x-8\">\r\n            {[\r\n              { id: 'overview', name: 'Prehľad', icon: ChartBarIcon },\r\n              { id: 'tasks', name: 'Úlohy', icon: ClipboardDocumentListIcon },\r\n              { id: 'files', name: 'Súbory', icon: FolderIcon },\r\n              { id: 'dropbox', name: 'Dropbox', icon: CloudIcon },\r\n              { id: 'hr', name: 'HR', icon: UsersIcon },\r\n              { id: 'accountants', name: 'Účtovníci', icon: UserIcon },\r\n              { id: 'accounting', name: 'Účtovníctvo', icon: DocumentTextIcon },\r\n              { id: 'messages', name: 'Správy', icon: EnvelopeIcon },\r\n            ].map((tab) => {\r\n              const Icon = tab.icon;\r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id)}\r\n                  className={`py-2 px-1 border-b-2 font-medium text-sm flex items-center space-x-2 ${\r\n                    activeTab === tab.id\r\n                      ? 'border-primary-500 text-primary-600'\r\n                      : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\r\n                  }`}\r\n                >\r\n                  <Icon className=\"h-5 w-5\" />\r\n                  <span>{tab.name}</span>\r\n                </button>\r\n              );\r\n            })}\r\n          </nav>\r\n        </div>\r\n\r\n        {/* Tab Content */}\r\n        <div className=\"mb-6\">\r\n          {activeTab === 'overview' && renderOverview()}\r\n          {activeTab === 'tasks' && renderTasks()}\r\n          {activeTab === 'files' && (\r\n            <div>\r\n              {(() => {\r\n                console.log('CompanyDashboard: Rendering files tab, loadingFiles:', loadingFiles, 'files.length:', files.length);\r\n                return null;\r\n              })()}\r\n              {loadingFiles ? (\r\n                <div className=\"text-center py-12\">\r\n                  <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto\"></div>\r\n                  <p className=\"mt-4 text-gray-600\">Načítavam súbory...</p>\r\n                </div>\r\n              ) : (\r\n                <FileManager\r\n                  files={files}\r\n                  onFileUpload={handleFileUpload}\r\n                  onFileDelete={handleFileDelete}\r\n                  onFileDownload={handleFileDownload}\r\n                  onFilePreview={handleFilePreview}\r\n                  companyId={company.id}\r\n                  loading={loadingFiles}\r\n                  userRole={userRole}\r\n                  onEmptyTrash={handleEmptyTrash}\r\n                />\r\n              )}\r\n            </div>\r\n          )}\r\n          {activeTab === 'dropbox' && (\r\n            <div className=\"bg-white rounded-lg shadow-md\">\r\n              {(() => {\r\n                console.log('=== COMPANY DASHBOARD - DROPBOX TAB ===');\r\n                console.log('CompanyDashboard: Rendering dropbox tab');\r\n                console.log('CompanyDashboard: activeTab:', activeTab);\r\n                console.log('CompanyDashboard: company.id:', company.id);\r\n                console.log('CompanyDashboard: userEmail:', userEmail);\r\n                console.log('CompanyDashboard: company.owner_email:', company.owner_email);\r\n                console.log('CompanyDashboard: userRole:', userRole);\r\n                console.log('CompanyDashboard: company.name:', company.name);\r\n                return null;\r\n              })()}\r\n              <div className=\"px-6 py-4 border-b border-gray-200\">\r\n                <h2 className=\"text-lg font-semibold text-gray-900\">Dropbox súbory</h2>\r\n                <p className=\"text-sm text-gray-600 mt-1\">Vaše zdieľané súbory v Dropboxe</p>\r\n              </div>\r\n              <div className=\"p-6\">\r\n                <DropboxIntegration\r\n                  companyId={company.id}\r\n                  userEmail={userEmail}\r\n                  companyEmail={company.owner_email}\r\n                  isCompanyView={true}\r\n                  userRole={userRole}\r\n                  companyName={company.name}\r\n                  companyICO={company.ico}\r\n                  onFileSelect={(file) => {\r\n                    console.log('Selected Dropbox file:', file);\r\n                    // Tu môžeme implementovať logiku pre import súboru z Dropbox\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n          )}\r\n          {activeTab === 'hr' && (\r\n            <HRDashboard companyId={company.id} />\r\n          )}\r\n          {activeTab === 'accountants' && renderAccountants()}\r\n          {activeTab === 'accounting' && renderAccounting()}\r\n          {activeTab === 'messages' && renderMessages()}\r\n        </div>\r\n\r\n        {/* Task Modal */}\r\n        <TaskModal\r\n          isOpen={showTaskModal}\r\n          onClose={() => {\r\n            setShowTaskModal(false);\r\n            setEditingTask(null);\r\n          }}\r\n          onSave={handleSaveTask}\r\n          task={editingTask}\r\n          companyEmployees={companyEmployees}\r\n          company={company}\r\n          isAccountant={userRole === 'accountant'}\r\n          userEmail={userEmail}\r\n        />\r\n\r\n        {/* Message Modal */}\r\n        <MessageModal\r\n          isOpen={showMessageModal}\r\n          onClose={() => {\r\n            setShowMessageModal(false);\r\n            setSelectedAccountant('');\r\n          }}\r\n          onSend={() => {\r\n            setShowMessageModal(false);\r\n            setSelectedAccountant('');\r\n            loadUnreadCounts();\r\n          }}\r\n          senderEmail={userEmail}\r\n          userRole={userRole === 'company' ? 'user' : userRole}\r\n          companyId={company.id}\r\n          initialRecipient={selectedAccountant}\r\n        />\r\n\r\n        {/* Payroll Periods Modal */}\r\n        <PayrollPeriodsModal\r\n          isOpen={showPayrollPeriodsModal}\r\n          onClose={() => setShowPayrollPeriodsModal(false)}\r\n          companyId={company.id}\r\n          userEmail={userEmail}\r\n          userRole={userRole}\r\n        />\r\n\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CompanyDashboard;\r\n"],"names":["_ref","isOpen","onClose","onSave","employee","formData","setFormData","useState","first_name","last_name","email","phone","position","department","salary","employment_type","status","termination_date","termination_reason","birth_name","title_before","title_after","gender","birth_date","birth_number","birth_place","nationality","citizenship","education","marital_status","is_partner","is_statutory","employee_bonus","bonus_months","permanent_street","permanent_number","permanent_city","permanent_zip","permanent_country","contact_street","contact_number","contact_city","contact_zip","contact_country","is_foreigner","foreigner_country","residence_permit_number","social_insurance_sr","social_insurance_foreign","health_insurance_sr","foreigner_without_permanent_residence","tax_identification_number","isSubmitting","setIsSubmitting","errors","setErrors","useEffect","_employee$salary","_employee$bonus_month","toString","handleInputChange","e","name","value","type","target","newValue","checked","prev","_objectSpread","handleClose","_jsx","className","children","_jsxs","onClick","XMarkIcon","onSubmit","async","preventDefault","validateForm","newErrors","trim","test","Object","keys","length","employeeData","undefined","parseFloat","parseInt","Date","error","console","htmlFor","id","onChange","concat","min","step","CalendarIcon","toLocaleDateString","ExclamationTriangleIcon","rows","placeholder","disabled","accountingService","getSettings","companyId","apiService","get","saveSettings","settings","post","getPermissions","userEmail","savePermissions","permissions","getAllPermissions","getIssuedInvoices","filters","params","URLSearchParams","entries","forEach","key","append","createIssuedInvoice","invoice","getIssuedInvoiceById","invoiceId","getReceivedInvoices","_ref2","getReceivedInvoiceById","getPudSummary","getFinancialAnalysis","dateFrom","dateTo","url","getStats","_ref3","formatCurrency","amount","currency","arguments","Intl","NumberFormat","style","format","formatDate","date","getStatusBadge","draft","text","color","sent","paid","overdue","cancelled","received","approved","disputed","getTypeBadge","income","expense","testPohodaConnection","testPohodaInvoices","syncPohodaInvoices","uploadPohodaXml","file","FormData","response","fetch","method","headers","localStorage","getItem","body","ok","Error","json","exportPohodaXml","blob","refreshInvoicesFromMdb","refreshReceivedInvoicesFromMdb","importInvoicesFromMdb","deleteIssuedInvoice","delete","deleteReceivedInvoice","deleteBankTransaction","transactionId","deleteCashTransaction","getDirectory","getVatReturns","year","yearParam","getFullYear","getBankAccounts","log","data","getCashAccounts","getBankTransactions","accountNumber","getCashTransactions","files","onFileUpload","onFileDelete","onFileDownload","onFilePreview","loading","userRole","onEmptyTrash","searchTerm","setSearchTerm","selectedCategory","setSelectedCategory","showUploadModal","setShowUploadModal","viewMode","setViewMode","downloadingFiles","setDownloadingFiles","Set","deletingFiles","setDeletingFiles","previewFile","setPreviewFile","showPreviewModal","setShowPreviewModal","categories","filteredFiles","filter","original_name","matchesSearch","toLowerCase","includes","matchesCategory","category","formatFileSize","bytes","i","Math","floor","pow","toFixed","totalSize","reduce","sum","file_size","filesByCategory","acc","cat","f","map","window","confirm","TrashIcon","DocumentArrowUpIcon","MagnifyingGlassIcon","FunnelIcon","DocumentIcon","Icon","file_type","PhotoIcon","ArchiveBoxIcon","DocumentTextIcon","getFileIcon","isDownloading","has","isDeleting","dateString","created_at","toISOString","month","day","hour","minute","categoryCode","handleFilePreview","title","EyeIcon","add","alert","newSet","handleFileDownload","CloudArrowDownIcon","fileName","handleFileDelete","FileUploadModal","FilePreviewModal","String","getMonth","padStart","getDate","onSuccess","password","setLoading","isEdit","hrService","updateEmployee","company_id","employee_id","now","hire_date","addEmployee","userData","role","createUser","errorMessage","message","required","PersonalDataTab","employeeChanges","onApproveChange","getFieldChangeStatus","fieldName","pendingChanges","c","field_name","latestPendingChange","latest","current","reason","changeId","new_value","approvedChanges","latestApprovedChange","DataField","label","employeeId","changeStatus","PencilIcon","onBack","selectedEmployeeId","employees","setEmployees","selectedEmployee","setSelectedEmployee","activeTab","setActiveTab","showEditModal","setShowEditModal","setEmployeeChanges","loadData","find","emp","employeesData","getEmployees","changesData","getCompanyChanges","filteredEmployees","LoadingSpinner","size","ArrowLeftIcon","viewBox","fill","fillRule","d","clipRule","UserIcon","approveEmployeeChange","updateEmployeeField","EditEmployeeModal","updatedEmployee","updatedSelectedEmployee","relation","employee_first_name","employee_last_name","employee_email","insurance_company","insurance_number","workplace","center","work_start_date","work_end_date","position_name","employment_start_date","probation_end_date","fixed_term_contract","departure_date","employment_termination_date","is_active","salary_after_departure","temporary_work_force","irregular_income","reduce_personal_evaluation","agreed_weekly_hours","no_vacation_entitlement","manual_vacation_adjustment","permanent_child_care_from","permanent_child_care_to","agreed_work_days","agreed_work_days_partial","work_days_full_time","work_days_full_time_partial","vacation_increase","vacation_increase_partial","basic_annual_vacation_days","basic_annual_vacation_days_partial","vacation_partial","vacation_days","forfeited_vacation_days","forfeited_vacation_days_partial","vacation_reduction_days","vacation_reduction_days_partial","vacation_used","vacation_used_partial","overpaid_vacation_days","overpaid_vacation_days_2year","overpaid_vacation_days_3year","salary_type","holidays_paid","schedule","rate","vacation","personal_evaluation","bonus_percentage","bonus","life_insurance_company","life_insurance","varsym_life_insurance","specsym_life_insurance","risky_work","advance","payment","advance_2","in_cash","account_number","bank_code","varsym_settlement","specsym_settlement","counted_years","counted_days","organization_notice","other_notice","np","sp","ip","pvn","pfp","gp","up","prfs","zp","pension_company","varsym_pension","specsym_pension","pension_contribution","maximum","pension_contribution_percentage","identification_number","workplace_code","classification_code","oop_application_date","oop_termination_date","attendance_mode","work_start_time","work_end_time","break_start_time","break_end_time","weekly_hours","replace","handleEmployeeChange","employmentRelations","setEmploymentRelations","showAddModal","setShowAddModal","selectedRelation","setSelectedRelation","relationsData","getEmploymentRelations","filteredRelations","_relation$first_name","_relation$last_name","_relation$position","handleSaveRelation","updateEmploymentRelation","relationData","employment_end_date","addEmploymentRelation","statusConfig","active","inactive","terminated","config","handleAddRelation","PlusIcon","handleEditRelation","relationId","r","handleDeleteRelation","EmploymentRelationModal","processing","setProcessing","selectedEmployees","setSelectedEmployees","selectedPeriod","setSelectedPeriod","startDate","setStartDate","endDate","setEndDate","results","setResults","showResults","setShowResults","loadEmployees","updateDateRange","getEmployeesWithAutomaticAttendance","every","index","_employeesData$index","start","end","handleSelectEmployee","formatTime","timeString","substring","history","back","JSON","stringify","result","deletedCount","location","reload","handleSelectAll","UserGroupIcon","option","processAutomaticAttendance","_error$response","_error$response$data","_Fragment","ClockIcon","CheckCircleIcon","Array","isArray","success","skipped","_employees$find","_employees$find2","note","selectedDate","setSelectedDate","attendanceType","setAttendanceType","startTime","setStartTime","endTime","setEndTime","breakMinutes","setBreakMinutes","setNote","submitting","setSubmitting","loadEmployeesWithMissingAttendance","getEmployeesWithMissingAttendance","missing_dates","breakStart","breakEnd","round","getTime","handleEmployeeSelect","max","attendanceData","attendance_type","start_time","end_time","break_minutes","recorded_by","recordAttendance","match","isNaN","toLocaleTimeString","hour12","leaveRequests","setLeaveRequests","stats","setStats","presentEmployeesToday","setPresentEmployeesToday","absentEmployeesToday","setAbsentEmployeesToday","employeesAttendanceStatus","setEmployeesAttendanceStatus","lastAttendanceUpdate","setLastAttendanceUpdate","isRefreshingAttendance","setIsRefreshingAttendance","showEmployeeModal","setShowEmployeeModal","showLeaveRequestModal","setShowLeaveRequestModal","selectedEmployeeForLeave","setSelectedEmployeeForLeave","showAttendanceRecordModal","setShowAttendanceRecordModal","activeSection","setActiveSection","useCallback","_statsData$leave_requ","statsData","getHRStats","leaveData","getLeaveRequests","leave_requests","pending_leave_requests","presentData","getPresentEmployeesToday","absentData","getAbsentEmployeesToday","attendanceStatusData","getEmployeesAttendanceStatus","refreshAttendanceData","interval","setInterval","clearInterval","handleAddEmployee","getEmployeeChangeStatus","hasPendingChanges","pendingCount","latestChange","hasAnyPendingChanges","getEmployeesWithPendingChangesCount","icon","UsersIcon","ChartBarIcon","BriefcaseIcon","tab","AutomaticAttendancePage","total_employees","active_employees","animationDuration","UserPlusIcon","slice","getStatusLabel","request","getLeaveTypeLabel","leave_type","total_days","stroke","strokeLinecap","strokeLinejoin","strokeWidth","xmlns","cx","cy","check_in","colSpan","period","handleEditEmployee","handleOpenPersonalCard","_changeStatus$latestC","_changeStatus$latestC2","status_type","status_description","check_out","AttendanceOverview","isCompanyView","employee_id_code","start_date","end_date","updateLeaveRequestStatus","requestId","handleApproveLeaveRequest","handleRejectLeaveRequest","EmployeeCardPage","EmploymentRelationsPage","EmployeeModal","handleEmployeeSuccess","LeaveRequestModal","employeeName","handleLeaveRequestSuccess","AttendanceRecordModal","payrollService","getPayrollPeriods","getCurrentPeriod","closePayrollPeriod","closedBy","openPayrollPeriod","checkPeriodStatus","getMonthName","getPeriodLabel","this","isCurrentPeriod","canClosePeriod","currentYear","currentMonth","periods","setPeriods","selectedYear","setSelectedYear","actionLoading","setActionLoading","loadPeriods","canEdit","Number","generateYearOptions","years","push","is_closed","closed_at","closed_by","handleTogglePeriod","LockOpenIcon","LockClosedIcon","company","navigate","useNavigate","companyEmployees","setCompanyEmployees","loadingEmployees","setLoadingEmployees","invoices","setInvoices","loadingInvoices","setLoadingInvoices","setUnreadMessagesCount","unreadCounts","setUnreadCounts","receivedUnreadCount","sentUnreadCount","totalUnreadCount","setFiles","loadingFiles","setLoadingFiles","tasks","setTasks","loadingTasks","setLoadingTasks","showTaskModal","setShowTaskModal","editingTask","setEditingTask","showMessageModal","setShowMessageModal","selectedAccountant","setSelectedAccountant","showPayrollPeriodsModal","setShowPayrollPeriodsModal","loadUnreadMessagesCount","unreadCount","getCompanyUnreadCount","loadUnreadCounts","counts","getCompanyUnreadCounts","convertedEmployees","handleAddTask","totalFiles","documentFiles","invoiceFiles","contractFiles","totalTasks","pendingTasks","t","completedTasks","totalInvoices","unpaidInvoices","_i$supplier_name","_i$supplier_name2","isUnpaid","kc_likv","isDividenda","supplier_name","totalAmount","_i$supplier_name3","_i$supplier_name4","total_amount","totalFileSize","companyFiles","getCompanyFiles","companyTasks","getCompanyTasks","receivedInvoices","limit","convertedTasks","apiTask","description","priority","assignedTo","assigned_to","dueDate","due_date","createdAt","createdBy","created_by","ico","business_registry","ClipboardDocumentListIcon","FolderIcon","CloudIcon","EnvelopeIcon","CurrencyDollarIcon","task","pending","completed","in_progress","unpaid","low","medium","high","urgent","handleEditTask","deleteTask","taskId","handleDeleteTask","FileManager","deleteFile","fileId","downloadFile","URL","createObjectURL","a","document","createElement","href","download","appendChild","click","revokeObjectURL","removeChild","emptyTrash","updatedFiles","owner_email","DropboxIntegration","companyEmail","companyName","companyICO","onFileSelect","HRDashboard","renderAccountants","_company$assignedToAc","assignedToAccountants","accountantEmail","accountant","split","l","toUpperCase","lastLogin","n","join","handleContactAccountant","MessagesList","isAdmin","onMessageAction","TaskModal","apiTaskData","assignedToEmail","estimated_hours","estimatedHours","updateTask","company_name","createTask","isAccountant","MessageModal","onSend","senderEmail","initialRecipient","PayrollPeriodsModal"],"sourceRoot":""}