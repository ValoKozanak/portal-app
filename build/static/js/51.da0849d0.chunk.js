"use strict";(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[51],{14185:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(53986),s=a(9950);const l=["title","titleId"];function n(e,t){let{title:a,titleId:n}=e,i=(0,r.A)(e,l);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const i=s.forwardRef(n)},16467:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(53986),s=a(9950);const l=["title","titleId"];function n(e,t){let{title:a,titleId:n}=e,i=(0,r.A)(e,l);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const i=s.forwardRef(n)},39818:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(53986),s=a(9950);const l=["title","titleId"];function n(e,t){let{title:a,titleId:n}=e,i=(0,r.A)(e,l);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const i=s.forwardRef(n)},42013:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(53986),s=a(9950);const l=["title","titleId"];function n(e,t){let{title:a,titleId:n}=e,i=(0,r.A)(e,l);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const i=s.forwardRef(n)},46536:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(53986),s=a(9950);const l=["title","titleId"];function n(e,t){let{title:a,titleId:n}=e,i=(0,r.A)(e,l);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const i=s.forwardRef(n)},52941:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(53986),s=a(9950);const l=["title","titleId"];function n(e,t){let{title:a,titleId:n}=e,i=(0,r.A)(e,l);return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":n},i),a?s.createElement("title",{id:n},a):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const i=s.forwardRef(n)},75432:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var r=a(22555),s=a(9950),l=a(14185),n=a(52941),i=a(37619),o=a(42013),c=a(46536),d=a(39818),m=a(16467),x=a(64112),u=a(50237),p=a(44414);const h=e=>{let{onBack:t,onMessageAction:a}=e;const[h,g]=(0,s.useState)([]),[v,y]=(0,s.useState)(!0),[b,f]=(0,s.useState)(""),[j,w]=(0,s.useState)("all"),[N,k]=(0,s.useState)("all"),[A,C]=(0,s.useState)("all"),[_,S]=(0,s.useState)("all"),[z,L]=(0,s.useState)("all"),[E,M]=(0,s.useState)(new Set);(0,s.useEffect)(()=>{(async()=>{try{y(!0),console.log("Na\u010d\xedtavam v\u0161etky spr\xe1vy...");const e=await u.apiService.getAllMessages();console.log("Na\u010d\xedtan\xe9 spr\xe1vy:",e),g(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed spr\xe1v:",e)}finally{y(!1)}})()},[]);const V=h.filter(e=>{var t,a;const r=e.subject.toLowerCase().includes(b.toLowerCase())||e.content.toLowerCase().includes(b.toLowerCase())||(null===(t=e.sender_name)||void 0===t?void 0:t.toLowerCase().includes(b.toLowerCase()))||(null===(a=e.recipient_name)||void 0===a?void 0:a.toLowerCase().includes(b.toLowerCase())),s="all"===j||e.company_name&&e.company_name===j,l="all"===N||e.sender_email===N,n="all"===A||e.recipient_email===A,i="all"===_||"read"===_&&e.read_at||"unread"===_&&!e.read_at,o="all"===z||e.message_type===z;return r&&s&&l&&n&&i&&o}),I=Array.from(new Set(h.map(e=>e.company_name).filter(Boolean))),O=Array.from(new Set(h.map(e=>e.sender_email))),B=Array.from(new Set(h.map(e=>e.recipient_email))),R=Array.from(new Set(h.map(e=>e.message_type))),W=()=>M(new Set);return(0,p.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,p.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,p.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,p.jsx)("div",{className:"flex items-center justify-between h-16",children:(0,p.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,p.jsxs)("button",{onClick:t,className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,p.jsx)(l.A,{className:"h-5 w-5 mr-2"}),"Sp\xe4\u0165 do Dashboardu"]}),(0,p.jsx)("div",{className:"h-6 w-px bg-gray-300"}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(i.A,{className:"h-8 w-8 text-purple-500 mr-3"}),(0,p.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Spr\xe1va v\u0161etk\xfdch spr\xe1v"})]})]})})})}),(0,p.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,p.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,p.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,p.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Zoznam v\u0161etk\xfdch spr\xe1v"}),(0,p.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Celkovo ",h.length," spr\xe1v",V.length!==h.length&&(0,p.jsxs)("span",{className:"ml-2 text-purple-600",children:["(Zobrazen\xe9: ",V.length,")"]})]})]}),(0,p.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,p.jsxs)("span",{className:"text-sm text-gray-500",children:["Vybran\xe9: ",E.size]}),(0,p.jsx)("button",{onClick:()=>{M(new Set(V.map(e=>e.id)))},className:"px-3 py-1 text-sm border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Vybra\u0165 zobrazen\xe9"}),(0,p.jsx)("button",{onClick:W,className:"px-3 py-1 text-sm border border-gray-300 rounded-md text-gray-700 bg-white hover:bg-gray-50",children:"Zru\u0161i\u0165 v\xfdber"}),(0,p.jsxs)("button",{onClick:async()=>{if(0!==E.size&&window.confirm("Naozaj chcete vymaza\u0165 ".concat(E.size," vybran\xfdch spr\xe1v?")))try{await Promise.all(Array.from(E).map(e=>u.apiService.deleteMessage(e))),g(e=>e.filter(e=>!E.has(e.id))),W(),null===a||void 0===a||a()}catch(e){console.error("Chyba pri hromadnom mazan\xed spr\xe1v:",e),alert("Chyba pri hromadnom mazan\xed spr\xe1v")}},disabled:0===E.size,className:"px-3 py-1 text-sm rounded-md flex items-center ".concat(0===E.size?"bg-red-100 text-red-300 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"),title:0===E.size?"Najprv vyberte spr\xe1vy":"Vymaza\u0165 vybran\xe9 spr\xe1vy",children:[(0,p.jsx)(m.A,{className:"h-4 w-4 mr-1"})," Vymaza\u0165 vybran\xe9"]})]})]}),(0,p.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[(0,p.jsxs)("div",{className:"relative",children:[(0,p.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,p.jsx)(d.A,{className:"h-5 w-5 text-gray-400"})}),(0,p.jsx)("input",{type:"text",placeholder:"Vyh\u013eada\u0165 spr\xe1vy...",value:b,onChange:e=>f(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-purple-500 focus:border-purple-500 sm:text-sm"})]}),(0,p.jsx)("div",{children:(0,p.jsxs)("select",{value:j,onChange:e=>w(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 sm:text-sm",children:[(0,p.jsx)("option",{value:"all",children:"V\u0161etky firmy"}),I.map(e=>(0,p.jsx)("option",{value:e,children:e},e))]})}),(0,p.jsx)("div",{children:(0,p.jsxs)("select",{value:N,onChange:e=>k(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 sm:text-sm",children:[(0,p.jsx)("option",{value:"all",children:"V\u0161etci odosielatelia"}),O.map(e=>(0,p.jsx)("option",{value:e,children:e},e))]})}),(0,p.jsx)("div",{children:(0,p.jsxs)("select",{value:A,onChange:e=>C(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 sm:text-sm",children:[(0,p.jsx)("option",{value:"all",children:"V\u0161etci pr\xedjemcovia"}),B.map(e=>(0,p.jsx)("option",{value:e,children:e},e))]})}),(0,p.jsx)("div",{children:(0,p.jsxs)("select",{value:_,onChange:e=>S(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 sm:text-sm",children:[(0,p.jsx)("option",{value:"all",children:"V\u0161etky spr\xe1vy"}),(0,p.jsx)("option",{value:"read",children:"Pre\u010d\xedtan\xe9"}),(0,p.jsx)("option",{value:"unread",children:"Nepre\u010d\xedtan\xe9"})]})}),(0,p.jsx)("div",{children:(0,p.jsxs)("select",{value:z,onChange:e=>L(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500 sm:text-sm",children:[(0,p.jsx)("option",{value:"all",children:"V\u0161etky typy"}),R.map(e=>(0,p.jsx)("option",{value:e,children:e},e))]})})]}),(0,p.jsx)("div",{className:"mt-4",children:(0,p.jsx)("button",{onClick:()=>{f(""),w("all"),k("all"),C("all"),S("all"),L("all")},className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-1 focus:ring-purple-500 focus:border-purple-500",children:"Resetova\u0165 filtre"})})]}),(0,p.jsx)("div",{className:"p-6",children:v?(0,p.jsxs)("div",{className:"text-center py-12",children:[(0,p.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),(0,p.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam spr\xe1vy..."})]}):V.length>0?(0,p.jsx)("div",{className:"space-y-4",children:V.map(e=>{return(0,p.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 hover:shadow-md transition-shadow border border-gray-200",children:[(0,p.jsx)("div",{className:"flex items-start justify-between mb-3",children:(0,p.jsxs)("div",{className:"flex-1",children:[(0,p.jsx)("div",{className:"mb-2",children:(0,p.jsxs)("label",{className:"inline-flex items-center space-x-2 text-sm text-gray-600",children:[(0,p.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500",checked:(s=e.id,E.has(s)),onChange:()=>(e=>{M(t=>{const a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})})(e.id)}),(0,p.jsx)("span",{children:"Vybra\u0165"})]})}),(0,p.jsxs)("div",{className:"flex items-center mb-2",children:[(0,p.jsx)("h3",{className:"text-lg font-medium text-gray-900 mr-3",children:e.subject}),e.read_at?(0,p.jsxs)("span",{className:"bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full flex items-center",children:[(0,p.jsx)(c.A,{className:"h-3 w-3 mr-1"}),"Pre\u010d\xedtan\xe9"]}):(0,p.jsxs)("span",{className:"bg-purple-100 text-purple-800 text-xs font-medium px-2 py-1 rounded-full flex items-center",children:[(0,p.jsx)(o.A,{className:"h-3 w-3 mr-1"}),"Nepre\u010d\xedtan\xe9"]}),e.message_type&&(0,p.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full ml-2",children:e.message_type})]}),(0,p.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-3",children:e.content}),(0,p.jsxs)("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(x.A,{className:"h-4 w-4 mr-1"}),(0,p.jsxs)("span",{children:["Od: ",e.sender_name||e.sender_email]})]}),(0,p.jsx)("div",{className:"flex items-center",children:(0,p.jsxs)("span",{children:["Pre: ",e.recipient_name||e.recipient_email]})}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsx)(n.A,{className:"h-4 w-4 mr-1"}),(0,p.jsx)("span",{children:(t=e.created_at,new Date(t).toLocaleDateString("sk-SK",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}))})]}),e.company_name&&(0,p.jsx)("div",{className:"flex items-center",children:(0,p.jsx)("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded",children:e.company_name})})]})]})}),(0,p.jsx)("div",{className:"flex items-center justify-between pt-3 border-t border-gray-200",children:(0,p.jsxs)("div",{className:"flex space-x-2",children:[(0,p.jsx)("button",{onClick:()=>(async(e,t)=>{try{t?await u.apiService.markMessageAsRead(e):await u.apiService.markMessageAsUnread(e),g(a=>a.map(a=>a.id===e?(0,r.A)((0,r.A)({},a),{},{read_at:t?(new Date).toISOString():null}):a)),null===a||void 0===a||a()}catch(s){console.error("Chyba pri zmenen\xed stavu spr\xe1vy:",s),alert("Chyba pri zmenen\xed stavu spr\xe1vy: "+(s instanceof Error?s.message:"Nezn\xe1ma chyba"))}})(e.id,!e.read_at),className:"text-sm font-medium flex items-center ".concat(e.read_at?"text-orange-600 hover:text-orange-700":"text-green-600 hover:text-green-700"),children:e.read_at?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{className:"h-4 w-4 mr-1"}),"Ozna\u010di\u0165 ako nepre\u010d\xedtan\xe9"]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(c.A,{className:"h-4 w-4 mr-1"}),"Ozna\u010di\u0165 ako pre\u010d\xedtan\xe9"]})}),(0,p.jsxs)("button",{onClick:()=>(async e=>{if(window.confirm("Naozaj chcete vymaza\u0165 t\xfato spr\xe1vu?"))try{await u.apiService.deleteMessage(e),g(t=>t.filter(t=>t.id!==e)),null===a||void 0===a||a()}catch(t){console.error("Chyba pri mazan\xed spr\xe1vy:",t),alert("Chyba pri mazan\xed spr\xe1vy: "+(t instanceof Error?t.message:"Nezn\xe1ma chyba"))}})(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium flex items-center",children:[(0,p.jsx)(m.A,{className:"h-4 w-4 mr-1"}),"Vymaza\u0165"]})]})})]},e.id);var t,s})}):(0,p.jsxs)("div",{className:"text-center py-12",children:[(0,p.jsx)(i.A,{className:"mx-auto h-16 w-16 text-gray-400"}),(0,p.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:h.length>0?"\u017diadne spr\xe1vy nevyhovuj\xfa filtrom":"\u017diadne spr\xe1vy"}),(0,p.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:h.length>0?"Sk\xfaste zmeni\u0165 nastavenia filtrov alebo vyh\u013ead\xe1vania.":"V syst\xe9me nie s\xfa \u017eiadne spr\xe1vy."})]})})]})})]})}}}]);