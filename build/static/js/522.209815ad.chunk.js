"use strict";(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[522],{37522:(e,s,a)=>{a.r(s),a.d(s,{default:()=>q});var t=a(22555),r=a(9950),l=a(28429),i=a(64112),n=a(7342),c=a(2765),d=a(41435),o=a(2599),m=a(52941),x=a(12340),h=a(37619),p=a(27387),g=a(50237),y=a(14185),u=a(46536),j=a(40390),b=a(44414);const N=e=>{let{userEmail:s}=e;const[a,t]=(0,r.useState)([]),[l,i]=(0,r.useState)(null),[n,c]=(0,r.useState)(!0),[m,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{h()},[]);const h=async()=>{try{c(!0),x(null);const e=await fetch("http://localhost:5000/api/dropbox/admin/all-settings"),s=await e.json();s.success?t(s.settings):x("Chyba pri na\u010d\xedtan\xed firiem s Dropbox zlo\u017ekami")}catch(m){console.error("Error loading dropbox companies:",m),x("Chyba pri na\u010d\xedtan\xed firiem s Dropbox zlo\u017ekami")}finally{c(!1)}},p=()=>{i(null)};return n?(0,b.jsxs)("div",{className:"flex items-center justify-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),(0,b.jsx)("span",{className:"ml-3 text-gray-600",children:"Na\u010d\xedtavam firmy s Dropbox zlo\u017ekami..."})]}):m?(0,b.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,b.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,b.jsxs)("div",{className:"ml-3",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Chyba"}),(0,b.jsx)("p",{className:"text-sm text-red-700 mt-1",children:m})]})]})}):l?(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("div",{className:"flex items-center space-x-3",children:(0,b.jsx)("button",{onClick:p,className:"text-blue-600 hover:text-blue-800 font-medium",children:"\u2190 Sp\xe4\u0165 na zoznam firiem"})}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:l.companyName}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:l.companyEmail})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Dropbox s\xfabory"}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Zlo\u017eka: ",l.folderPath]})]}),(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)(j.A,{companyId:l.companyId,userEmail:s,companyEmail:l.companyEmail,isCompanyView:!0,userRole:"accountant",companyName:l.companyName,companyICO:l.companyICO,onFileSelect:e=>{}})})]})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Firmy s Dropbox zlo\u017ekami"}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Vyberte firmu pre zobrazenie jej Dropbox s\xfaborov"})]}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:[a.length," firiem s Dropbox zlo\u017ekami"]})]}),0===a.length?(0,b.jsxs)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 text-center",children:[(0,b.jsx)(d.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"\u017diadne firmy s Dropbox zlo\u017ekami"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Zatia\u013e neboli vytvoren\xe9 \u017eiadne Dropbox zlo\u017eky pre firmy."})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(e=>(0,b.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>(e=>{i(e)})(e),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,b.jsx)(o.A,{className:"h-8 w-8 text-blue-500"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e.companyName}),(0,b.jsx)("p",{className:"text-sm text-gray-600",children:e.companyEmail})]})]}),(0,b.jsxs)("div",{className:"mt-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,b.jsx)(d.A,{className:"h-4 w-4 mr-2"}),(0,b.jsx)("span",{className:"font-mono text-xs",children:e.folderPath})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-xs",children:[(0,b.jsx)("span",{className:"px-2 py-1 rounded-full ".concat(e.isShared?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.isShared?"Zdie\u013ean\xe9":"Nezdie\u013ean\xe9"}),(0,b.jsxs)("span",{className:"text-gray-500",children:["Aktualizovan\xe9: ",new Date(e.updatedAt).toLocaleDateString("sk-SK")]})]})]})]}),(0,b.jsx)(u.A,{className:"h-5 w-5 text-gray-400"})]}),(0,b.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,b.jsx)("span",{children:"Opr\xe1vnenia:"}),(0,b.jsxs)("div",{className:"flex space-x-1",children:[e.permissions.canView&&(0,b.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded",children:"Zobrazi\u0165"}),e.permissions.canEdit&&(0,b.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded",children:"Upravi\u0165"}),e.permissions.canUpload&&(0,b.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded",children:"Nahra\u0165"}),e.permissions.canDelete&&(0,b.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-800 rounded",children:"Vymaza\u0165"})]})]})})]},e.id))})]})},v=e=>{let{userEmail:s,onBack:a}=e;return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("button",{onClick:a,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,b.jsx)(y.A,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Sp\xe4\u0165 do Dashboard"})]})}),(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Prihl\xe1sen\xfd ako"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:s})]})})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dropbox integr\xe1cia"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Spr\xe1va s\xfaborov cez Dropbox pre v\u0161etky priraden\xe9 firmy"})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-md",children:(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)(N,{userEmail:s})})})]})]})};var f=a(4206),w=a(20418);const k=e=>{let{userEmail:s,onBack:a}=e;const[l,i]=(0,r.useState)([]),[n,c]=(0,r.useState)([]),[d,x]=(0,r.useState)(!0),[h,p]=(0,r.useState)(!1),[u,j]=(0,r.useState)(null),[N,v]=(0,r.useState)("all"),[k,S]=(0,r.useState)(new Set);(0,r.useEffect)(()=>{C()},[s]);const C=async()=>{try{const e=await g.apiService.getAccountantCompanies(s);i(e);const a=await Promise.all(e.map(e=>g.apiService.getCompanyTasks(e.id))),t=a.flat().map(e=>({id:e.id.toString(),title:e.title,description:e.description||"",status:e.status,priority:e.priority,assignedTo:e.assigned_to,dueDate:e.due_date||"",createdAt:e.created_at,createdBy:e.created_by,category:"other",companyId:e.company_id,companyName:e.company_name}));c(t)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t \xfa\u010dtovn\xedka:",e)}finally{x(!1)}},z=(e,s)=>{c(a=>a.map(a=>a.id===e?(0,t.A)((0,t.A)({},a),{},{status:s}):a))},A=n.filter(e=>"all"===N||("pending"===N?"pending"===e.status:"in_progress"===N?"in_progress"===e.status:"completed"===N?"completed"===e.status:"cancelled"!==N||"cancelled"===e.status)),_=()=>S(new Set),D=async e=>{if(0!==k.size)try{await Promise.all(Array.from(k).map(s=>g.apiService.updateTask(parseInt(s),{status:e}))),c(s=>s.map(s=>k.has(s.id)?(0,t.A)((0,t.A)({},s),{},{status:e}):s)),_()}catch(s){console.error("Chyba pri hromadnej zmene stavu \xfaloh:",s),alert("Chyba pri hromadnej zmene stavu \xfaloh")}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("button",{onClick:a,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,b.jsx)(y.A,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Sp\xe4\u0165 do Dashboard"})]})}),(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Prihl\xe1sen\xfd ako"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:s})]})})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\xdalohy zo v\u0161etk\xfdch priraden\xfdch firiem"}),(0,b.jsxs)("p",{className:"text-gray-600 mt-2",children:["Celkovo ",n.length," \xfaloh z ",l.length," firiem"]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Spr\xe1va \xfaloh"})}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:["Vybran\xe9: ",k.size]}),(0,b.jsx)("button",{onClick:()=>{S(new Set(A.map(e=>e.id)))},className:"px-3 py-2 text-sm border border-gray-300 rounded-md bg-white hover:bg-gray-50",children:"Vybra\u0165 zobrazen\xe9"}),(0,b.jsx)("button",{onClick:_,className:"px-3 py-2 text-sm border border-gray-300 rounded-md bg-white hover:bg-gray-50",children:"Zru\u0161i\u0165 v\xfdber"}),(0,b.jsxs)("div",{className:"hidden md:flex items-center space-x-1",children:[(0,b.jsx)("button",{onClick:()=>D("pending"),disabled:0===k.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===k.size?"bg-yellow-100 text-yellow-300 cursor-not-allowed":"bg-yellow-600 text-white hover:bg-yellow-700"),children:"\u010cakaj\xface"}),(0,b.jsx)("button",{onClick:()=>D("in_progress"),disabled:0===k.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===k.size?"bg-blue-100 text-blue-300 cursor-not-allowed":"bg-blue-600 text-white hover:bg-blue-700"),children:"V spracovan\xed"}),(0,b.jsx)("button",{onClick:()=>D("completed"),disabled:0===k.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===k.size?"bg-green-100 text-green-300 cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"),children:"Dokon\u010den\xe9"}),(0,b.jsx)("button",{onClick:()=>D("cancelled"),disabled:0===k.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===k.size?"bg-gray-100 text-gray-300 cursor-not-allowed":"bg-gray-600 text-white hover:bg-gray-700"),children:"Zru\u0161en\xe9"}),(0,b.jsx)("button",{onClick:async()=>{if(0!==k.size&&window.confirm("Naozaj chcete vymaza\u0165 ".concat(k.size," vybran\xfdch \xfaloh?")))try{await Promise.all(Array.from(k).map(e=>g.apiService.deleteTask(parseInt(e)))),c(e=>e.filter(e=>!k.has(e.id))),_()}catch(e){console.error("Chyba pri hromadnom mazan\xed \xfaloh:",e),alert("Chyba pri hromadnom mazan\xed \xfaloh")}},disabled:0===k.size,className:"px-3 py-2 text-sm rounded-md ".concat(0===k.size?"bg-red-100 text-red-300 cursor-not-allowed":"bg-red-600 text-white hover:bg-red-700"),children:"Vymaza\u0165 vybran\xe9"})]}),(0,b.jsxs)("button",{onClick:()=>{0!==l.length?(j(null),p(!0)):alert("Nem\xe1te priraden\xe9 \u017eiadne firmy. Kontaktujte administr\xe1tora.")},disabled:0===l.length,className:"px-4 py-2 rounded-md flex items-center ".concat(0===l.length?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700"),children:[(0,b.jsx)(f.A,{className:"h-5 w-5 mr-2"}),0===l.length?"\u017diadne firmy":"Prida\u0165 \xfalohu"]})]})]}),(0,b.jsx)("div",{className:"px-6 py-3 border-b border-gray-200 bg-gray-50",children:(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Filter:"}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsxs)("button",{onClick:()=>v("all"),className:"px-3 py-1 text-sm rounded-md ".concat("all"===N?"bg-primary-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"),children:["V\u0161etky (",n.length,")"]}),(0,b.jsxs)("button",{onClick:()=>v("pending"),className:"px-3 py-1 text-sm rounded-md ".concat("pending"===N?"bg-yellow-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"),children:["\u010cakaj\xface (",n.filter(e=>"pending"===e.status).length,")"]}),(0,b.jsxs)("button",{onClick:()=>v("in_progress"),className:"px-3 py-1 text-sm rounded-md ".concat("in_progress"===N?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"),children:["V spracovan\xed (",n.filter(e=>"in_progress"===e.status).length,")"]}),(0,b.jsxs)("button",{onClick:()=>v("completed"),className:"px-3 py-1 text-sm rounded-md ".concat("completed"===N?"bg-green-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"),children:["Dokon\u010den\xe9 (",n.filter(e=>"completed"===e.status).length,")"]}),(0,b.jsxs)("button",{onClick:()=>v("cancelled"),className:"px-3 py-1 text-sm rounded-md ".concat("cancelled"===N?"bg-gray-600 text-white":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"),children:["Zru\u0161en\xe9 (",n.filter(e=>"cancelled"===e.status).length,")"]})]})]})}),(0,b.jsx)("div",{className:"p-6",children:d?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam \xfalohy..."})]}):A.length>0?(0,b.jsx)("div",{className:"space-y-4",children:A.map(e=>{return(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("div",{className:"mb-2",children:(0,b.jsxs)("label",{className:"inline-flex items-center space-x-2 text-sm text-gray-600",children:[(0,b.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500",checked:(t=e.id,k.has(t)),onChange:()=>(e=>{S(s=>{const a=new Set(s);return a.has(e)?a.delete(e):a.add(e),a})})(e.id)}),(0,b.jsx)("span",{children:"Vybra\u0165"})]})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.title}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:e.description}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(o.A,{className:"h-4 w-4 mr-1"}),(0,b.jsx)("span",{children:e.companyName})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(m.A,{className:"h-4 w-4 mr-1"}),(0,b.jsxs)("span",{children:["Term\xedn: ",new Date(e.dueDate).toLocaleDateString("sk-SK")]})]}),e.estimatedHours&&(0,b.jsx)("div",{children:(0,b.jsxs)("span",{children:["Odhad: ",e.estimatedHours,"h"]})})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end space-y-2 ml-4",children:[(a=e.status,(0,b.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800",in_progress:"bg-blue-100 text-blue-800",cancelled:"bg-gray-100 text-gray-800"}[a]),children:{pending:"\u010cakaj\xface",completed:"Dokon\u010den\xe9",in_progress:"V spracovan\xed",cancelled:"Zru\u0161en\xe9"}[a]})),(s=e.priority,(0,b.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat({urgent:"bg-red-100 text-red-800",high:"bg-orange-100 text-orange-800",medium:"bg-yellow-100 text-yellow-800",low:"bg-green-100 text-green-800"}[s]),children:{urgent:"Urgentn\xe1",high:"Vysok\xe1",medium:"Stredn\xe1",low:"N\xedzka"}[s]}))]})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Vytvoril: ",e.createdBy," | Kateg\xf3ria: ",e.category]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:["pending"===e.status&&(0,b.jsx)("button",{onClick:()=>z(e.id,"in_progress"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Za\u010da\u0165 pr\xe1cu"}),"in_progress"===e.status&&(0,b.jsx)("button",{onClick:()=>z(e.id,"completed"),className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Dokon\u010di\u0165"}),(0,b.jsx)("button",{onClick:()=>(e=>{j(e),p(!0)})(e),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Upravi\u0165"}),(0,b.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Naozaj chcete vymaza\u0165 t\xfato \xfalohu?"))try{await g.apiService.deleteTask(parseInt(e)),c(s=>s.filter(s=>s.id!==e))}catch(s){console.error("Chyba pri mazan\xed \xfalohy:",s),alert("Chyba pri mazan\xed \xfalohy")}})(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Vymaza\u0165"})]})]})]},e.id);var s,a,t})}):0===l.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nem\xe1te priraden\xe9 firmy"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Kontaktujte administr\xe1tora, aby v\xe1m priradil firmy."})]}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(f.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"all"===N?"\u017diadne \xfalohy":"\u017diadne \xfalohy s vybran\xfdm filtrom"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"all"===N?"Zatia\u013e nem\xe1te \u017eiadne \xfalohy od priraden\xfdch firiem.":'Sk\xfaste zmeni\u0165 filter alebo sa vr\xe1ti\u0165 na "V\u0161etky"'})]})})]}),l.length>0&&(0,b.jsx)(w.A,{isOpen:h,onClose:()=>{p(!1),j(null)},onSave:async e=>{try{if(u){const s={title:e.title,description:e.description,status:e.status,priority:e.priority,assigned_to:e.assignedToEmail||e.assignedTo,due_date:e.dueDate,category:e.category,estimated_hours:e.estimatedHours};await g.apiService.updateTask(parseInt(u.id),s),c(s=>s.map(s=>s.id===u.id?(0,t.A)((0,t.A)({},s),e):s))}else if(e.companyId&&l.length>0){const a=l.find(s=>s.id===e.companyId);if(a){const t={id:(await g.apiService.createTask({title:e.title,description:e.description,status:e.status,priority:e.priority,assigned_to:e.assignedToEmail||e.assignedTo,company_id:a.id,company_name:a.name,created_by:s,due_date:e.dueDate})).taskId.toString(),title:e.title,description:e.description,status:e.status,priority:e.priority,assignedTo:e.assignedTo,dueDate:e.dueDate,createdAt:(new Date).toISOString(),createdBy:s,category:e.category,companyId:a.id,companyName:a.name};c(e=>[...e,t])}}p(!1),j(null)}catch(a){console.error("Chyba pri ukladan\xed \xfalohy:",a),alert("Chyba pri ukladan\xed \xfalohy")}},task:u,companyEmployees:[],company:{id:l[0].id,name:l[0].name},isAccountant:!0,assignedCompanies:l,userEmail:s})]})]})};var S=a(82777),C=a(75520),z=a(4111);const A=e=>{let{userEmail:s,onBack:a}=e;const[t,l]=(0,r.useState)([]),[i,n]=(0,r.useState)([]),[c,m]=(0,r.useState)(!0),[x,h]=(0,r.useState)(!1),[p,u]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null);(0,r.useEffect)(()=>{v()},[s]);const v=async()=>{try{const a=await g.apiService.getAccountantCompanies(s);l(a);const t=[];for(const s of a)try{const e=await g.apiService.getCompanyFiles(s.id);t.push(...e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed dokumentov pre firmu ".concat(s.id,":"),e)}n(t)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t \xfa\u010dtovn\xedka:",e)}finally{m(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("button",{onClick:a,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,b.jsx)(y.A,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Sp\xe4\u0165 do Dashboard"})]})}),(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Prihl\xe1sen\xfd ako"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:s})]})})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"S\xfabory zo v\u0161etk\xfdch priraden\xfdch firiem"}),(0,b.jsxs)("p",{className:"text-gray-600 mt-2",children:["Celkovo ",i.length," s\xfaborov z ",t.length," firiem"]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,b.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Spr\xe1va s\xfaborov"})}),(0,b.jsxs)("button",{onClick:()=>{0!==t.length?h(!0):alert("Nem\xe1te priraden\xe9 \u017eiadne firmy. Kontaktujte administr\xe1tora.")},disabled:0===t.length,className:"px-4 py-2 rounded-md flex items-center ".concat(0===t.length?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-primary-600 text-white hover:bg-primary-700"),children:[(0,b.jsx)(S.A,{className:"h-5 w-5 mr-2"}),0===t.length?"\u017diadne firmy":"Nahra\u0165 s\xfabor"]})]}),(0,b.jsx)("div",{className:"p-6",children:c?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam s\xfabory..."})]}):i.length>0?(0,b.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-shadow",children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.original_name}),(0,b.jsxs)("div",{className:"flex items-center space-x-4 text-sm text-gray-500 mb-3",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(o.A,{className:"h-4 w-4 mr-1"}),(0,b.jsxs)("span",{children:["Firma: ",e.company_name||"Nezn\xe1ma"]})]}),(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)(S.A,{className:"h-4 w-4 mr-1"}),(0,b.jsxs)("span",{children:["Typ: ",e.file_type]})]}),(0,b.jsx)("div",{className:"flex items-center",children:(0,b.jsxs)("span",{children:["Ve\u013ekos\u0165: ",(e.file_size/1024).toFixed(1)," KB"]})})]})]}),(0,b.jsx)("div",{className:"flex flex-col items-end space-y-2 ml-4",children:(0,b.jsx)("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs",children:"Nahran\xe9"})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-200",children:[(0,b.jsxs)("div",{className:"text-xs text-gray-500",children:["Nahral: ",e.uploaded_by," | D\xe1tum: ",new Date(e.created_at).toLocaleDateString("sk-SK")]}),(0,b.jsxs)("div",{className:"flex space-x-2",children:[(0,b.jsx)("button",{onClick:()=>(N(e),void u(!0)),className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"N\xe1h\u013ead"}),(0,b.jsx)("button",{onClick:()=>window.open("/api/files/download/".concat(e.id),"_blank"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Stiahnu\u0165"}),(0,b.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Naozaj chcete vymaza\u0165 tento dokument?"))try{await g.apiService.deleteFile(e),n(s=>s.filter(s=>s.id!==e))}catch(s){console.error("Chyba pri mazan\xed dokumentu:",s),alert("Chyba pri mazan\xed dokumentu")}})(e.id),className:"text-red-600 hover:text-red-700 text-sm font-medium",children:"Vymaza\u0165"})]})]})]},e.id))}):0===t.length?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Nem\xe1te priraden\xe9 firmy"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Kontaktujte administr\xe1tora, aby v\xe1m priradil firmy."})]}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(d.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"\u017diadne s\xfabory"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Zatia\u013e nem\xe1te \u017eiadne nahran\xe9 s\xfabory"})]})})]}),t.length>0&&(0,b.jsx)(C.A,{isOpen:x,onClose:()=>h(!1),companies:t,onFileUpload:async e=>{try{await v(),h(!1)}catch(s){console.error("Chyba pri nahr\xe1van\xed s\xfaboru:",s),alert("Chyba pri nahr\xe1van\xed s\xfaboru")}}}),(0,b.jsx)(z.A,{isOpen:p,onClose:()=>{u(!1),N(null)},file:j})]})]})};var _=a(39818),D=a(11818);const E=r.lazy(()=>a.e(552).then(a.bind(a,97552))),V=e=>{let{userEmail:s,onBack:a}=e;const[t,l]=(0,r.useState)([]),[i,n]=(0,r.useState)(!0),[c,d]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{u()},[s]);const u=async()=>{try{const e=await g.apiService.getAccountantCompanies(s);l(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t \xfa\u010dtovn\xedka:",e)}finally{n(!1)}},j=()=>{x(!1),p(null)},N=t.filter(e=>e.name.toLowerCase().includes(c.toLowerCase())||e.ico.includes(c)||e.owner_email.toLowerCase().includes(c.toLowerCase()));return m&&h?(0,b.jsx)(r.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg p-6",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-2 text-gray-600",children:"Na\u010d\xedtavam dashboard firmy..."})]})}),children:(0,b.jsx)(E,{company:h,userEmail:s,onBack:j})}):(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("button",{onClick:a,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,b.jsx)(y.A,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Sp\xe4\u0165 do Dashboard"})]})}),(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Prihl\xe1sen\xfd ako"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:s})]})})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Priraden\xe9 firmy"}),(0,b.jsxs)("p",{className:"text-gray-600 mt-2",children:["Celkovo ",t.length," priraden\xfdch firiem"]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md",children:[(0,b.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,b.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Spr\xe1va firiem"})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"relative mb-6",children:[(0,b.jsx)("input",{type:"text",placeholder:"H\u013eada\u0165 firmy...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500"}),(0,b.jsx)(_.A,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]}),i?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam firmy..."})]}):N.length>0?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:N.map(e=>(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 hover:shadow-md transition-all duration-200 cursor-pointer hover:bg-gray-100 hover:scale-[1.02] border border-transparent hover:border-gray-300",onClick:()=>(e=>{p(e),x(!0)})(e),children:[(0,b.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.name}),(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["I\u010cO: ",e.ico]}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mb-2",children:["Vlastn\xedk: ",e.owner_email]}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:e.address})]}),(0,b.jsx)("div",{className:"flex items-center space-x-2",children:(0,b.jsx)("div",{className:"p-2 text-primary-600",children:(0,b.jsx)(D.A,{className:"h-5 w-5"})})})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,b.jsxs)("span",{children:["Vytvoren\xe9: ",new Date(e.created_at).toLocaleDateString("sk-SK")]}),(0,b.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs",children:"Priraden\xe9"})]})]},e.id))}):(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,b.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:c?"\u017diadne firmy nen\xe1jden\xe9":"\u017diadne priraden\xe9 firmy"}),(0,b.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:c?"Sk\xfaste zmeni\u0165 vyh\u013ead\xe1vac\xed v\xfdraz":"Admin v\xe1m zatia\u013e nepriradil \u017eiadne firmy"})]})]})]})]})]})};var I=a(56554),K=a(42626),T=a(19964),B=a(83406),P=a(72083),L=a(36923),Z=a(63421),O=a(75516),U=a(33695),F=a(15536);const M=e=>{let{userEmail:s,userRole:a,tasks:l,companies:n,onTaskUpdate:d}=e;const[x,h]=(0,r.useState)(new Date),[p,g]=(0,r.useState)([]),[y,u]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[v,f]=(0,r.useState)({companyId:"all",status:"all",priority:"all"}),k=(0,r.useMemo)(()=>l.filter(e=>("all"===v.companyId||e.company_id===parseInt(v.companyId))&&(("all"===v.status||e.status===v.status)&&("all"===v.priority||e.priority===v.priority))).filter(e=>e.due_date).map(e=>({id:e.id,title:e.title,date:(0,K.H)(e.due_date),type:"task",task:e})),[l,v]);(0,r.useEffect)(()=>{if(!x)return;const e=k.filter(e=>(0,T.r)(e.date,x));g(e)},[x,k]);const S=e=>{switch(e){case"urgent":return"text-red-600 bg-red-100";case"high":return"text-orange-600 bg-orange-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}},C=e=>{switch(e){case"completed":return(0,b.jsx)(c.A,{className:"w-5 h-5 text-green-500"});case"in_progress":return(0,b.jsx)(L.A,{className:"w-5 h-5 text-blue-500"});case"cancelled":return(0,b.jsx)(Z.A,{className:"w-5 h-5 text-red-500"});default:return(0,b.jsx)(O.A,{className:"w-5 h-5 text-yellow-500"})}};return(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(m.A,{className:"w-6 h-6 text-blue-600"}),(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Kalend\xe1r \xfaloh"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(U.A,{className:"w-4 h-4 text-gray-500"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:"Filtre:"})]}),(0,b.jsxs)("select",{value:v.companyId,onChange:e=>f(s=>(0,t.A)((0,t.A)({},s),{},{companyId:e.target.value})),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"all",children:"V\u0161etky firmy"}),n.map(e=>(0,b.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,b.jsxs)("select",{value:v.status,onChange:e=>f(s=>(0,t.A)((0,t.A)({},s),{},{status:e.target.value})),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"all",children:"V\u0161etky stavy"}),(0,b.jsx)("option",{value:"pending",children:"\u010cakaj\xface"}),(0,b.jsx)("option",{value:"in_progress",children:"V rie\u0161en\xed"}),(0,b.jsx)("option",{value:"completed",children:"Dokon\u010den\xe9"}),(0,b.jsx)("option",{value:"cancelled",children:"Zru\u0161en\xe9"})]}),(0,b.jsxs)("select",{value:v.priority,onChange:e=>f(s=>(0,t.A)((0,t.A)({},s),{},{priority:e.target.value})),className:"px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,b.jsx)("option",{value:"all",children:"V\u0161etky priority"}),(0,b.jsx)("option",{value:"urgent",children:"Urgentn\xe9"}),(0,b.jsx)("option",{value:"high",children:"Vysok\xe9"}),(0,b.jsx)("option",{value:"medium",children:"Stredn\xe9"}),(0,b.jsx)("option",{value:"low",children:"N\xedzke"})]}),(0,b.jsxs)("button",{onClick:()=>{f({companyId:"all",status:"all",priority:"all"})},className:"flex items-center space-x-1 px-2 py-1 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",children:[(0,b.jsx)(F.A,{className:"w-4 h-4"}),(0,b.jsx)("span",{children:"Vymaza\u0165"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2",children:[(0,b.jsx)(I.Ay,{onChange:e=>h(e),value:x,tileContent:e=>{let{date:s}=e;const a=k.filter(e=>(0,T.r)(e.date,s));return 0===a.length?null:(0,b.jsx)("div",{className:"flex flex-col items-center",children:a.map((e,s)=>(0,b.jsx)("div",{className:"w-2 h-2 rounded-full mb-1 ".concat("completed"===e.task.status?"bg-green-500":"in_progress"===e.task.status?"bg-blue-500":"urgent"===e.task.priority?"bg-red-500":"high"===e.task.priority?"bg-orange-500":"bg-gray-500"),title:"".concat(e.title," - ").concat(e.task.status)},"".concat(e.id,"-").concat(s)))})},tileClassName:e=>{let{date:s}=e;const a=k.filter(e=>(0,T.r)(e.date,s));if(0===a.length)return"";const t=a.some(e=>"urgent"===e.task.priority),r=a.some(e=>"high"===e.task.priority),l=a.some(e=>"completed"===e.task.status);return t?"bg-red-100 border-red-300":r?"bg-orange-100 border-orange-300":l?"bg-green-100 border-green-300":"bg-blue-100 border-blue-300"},locale:"sk",className:"w-full border-0 shadow-sm"}),(0,b.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[(0,b.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Legenda:"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-4 text-xs",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),(0,b.jsx)("span",{children:"Urgentn\xe9"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),(0,b.jsx)("span",{children:"Vysok\xe9"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,b.jsx)("span",{children:"V rie\u0161en\xed"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,b.jsx)("span",{children:"Dokon\u010den\xe9"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,b.jsx)("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),(0,b.jsx)("span",{children:"Ostatn\xe9"})]})]})]})]}),(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,b.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:x?(0,B.GP)(x,"EEEE, d. MMMM yyyy",{locale:P.sk}):"Vyberte d\xe1tum"}),0===p.length?(0,b.jsx)("p",{className:"text-gray-500 text-center py-8",children:"\u017diadne \xfalohy na tento d\xe1tum"}):(0,b.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,b.jsx)("div",{className:"bg-white rounded-lg p-3 shadow-sm border border-gray-200 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>(e=>{N(e.task),u(!0)})(e),children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-800 mb-1",children:e.title}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,b.jsx)(o.A,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:e.task.company_name})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,b.jsx)(i.A,{className:"w-4 h-4 text-gray-400"}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:e.task.assigned_to})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[C(e.task.status),(0,b.jsx)("span",{className:"text-sm text-gray-600 capitalize",children:e.task.status.replace("_"," ")})]})]}),(0,b.jsxs)("div",{className:"flex flex-col items-end space-y-1",children:[(0,b.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(S(e.task.priority)),children:e.task.priority}),(0,b.jsx)("span",{className:"text-xs text-gray-500",children:(0,B.GP)(e.date,"HH:mm")})]})]})},e.id))})]})})]}),y&&j&&(0,b.jsx)(w.A,{isOpen:y,onClose:()=>u(!1),onSave:()=>{u(!1),N(null),d()},task:{id:j.id.toString(),title:j.title,description:j.description||"",status:j.status,priority:j.priority,assignedTo:j.assigned_to,dueDate:j.due_date||"",createdAt:j.created_at,createdBy:j.created_by,category:"other",companyId:j.company_id,companyName:j.company_name},companyEmployees:[],company:{id:j.company_id,name:j.company_name},isAccountant:"accountant"===a,assignedCompanies:n})]})},H=e=>{let{userEmail:s,onBack:a}=e;const[t,l]=(0,r.useState)([]),[i,n]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{o()},[s]);const o=async()=>{try{const e=await g.apiService.getAccountantCompanies(s);l(e);const a=await Promise.all(e.map(e=>g.apiService.getCompanyTasks(e.id))),t=a.flat().map(e=>({id:e.id.toString(),title:e.title,description:e.description||"",status:e.status,priority:e.priority,assignedTo:e.assigned_to,dueDate:e.due_date||"",createdAt:e.created_at,createdBy:e.created_by,category:"other",companyId:e.company_id,companyName:e.company_name}));n(t)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t \xfa\u010dtovn\xedka:",e)}finally{d(!1)}};return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("button",{onClick:a,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,b.jsx)(y.A,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Sp\xe4\u0165 do Dashboard"})]})}),(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Prihl\xe1sen\xfd ako"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:s})]})})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Kalend\xe1r \xfaloh"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Preh\u013ead \xfaloh zo v\u0161etk\xfdch priraden\xfdch firiem"})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-md",children:(0,b.jsx)("div",{className:"p-6",children:c?(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Na\u010d\xedtavam kalend\xe1r..."})]}):(0,b.jsx)(M,{userEmail:s,userRole:"accountant",tasks:i.map(e=>({id:parseInt(e.id),title:e.title,description:e.description,status:e.status,priority:e.priority,assigned_to:e.assignedTo,company_id:e.companyId||0,company_name:e.companyName||"Nezn\xe1ma firma",created_by:e.createdBy,due_date:e.dueDate,created_at:e.createdAt,updated_at:e.createdAt})),companies:t,onTaskUpdate:()=>{o()}})})})]})]})};var R=a(45930);const G=e=>{let{userEmail:s,onBack:a}=e;return(0,b.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("button",{onClick:a,className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 transition-colors",children:[(0,b.jsx)(y.A,{className:"h-5 w-5"}),(0,b.jsx)("span",{className:"font-medium",children:"Sp\xe4\u0165 do Dashboard"})]})}),(0,b.jsx)("div",{className:"flex items-center space-x-4",children:(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Prihl\xe1sen\xfd ako"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:s})]})})]})})}),(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Spr\xe1vy"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Komunik\xe1cia s firmami a spr\xe1vami"})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-md",children:(0,b.jsx)("div",{className:"p-6",children:(0,b.jsx)(R.A,{userEmail:s,userRole:"accountant",onMessageAction:()=>{}})})})]})]})},q=e=>{let{userEmail:s}=e;const a=(0,l.Zp)(),[y,u]=(0,r.useState)([]),[,j]=(0,r.useState)(!0),[N,f]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[C,z]=(0,r.useState)(!1),[_,D]=(0,r.useState)(!1),[E,I]=(0,r.useState)(!1),[K,T]=(0,r.useState)(!1),[B,P]=(0,r.useState)(0),[L,Z]=(0,r.useState)({documents:0,tasks:0,completed:0,pending:0,companies:0});(0,r.useEffect)(()=>{Z(e=>(0,t.A)((0,t.A)({},e),{},{companies:y.length}))},[y.length]);const O=async()=>{try{const e=await g.apiService.getUnreadCount(s);P(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed po\u010dtu nepre\u010d\xedtan\xfdch spr\xe1v:",e)}};return(0,r.useEffect)(()=>{(async()=>{try{const e=await g.apiService.getAccountantCompanies(s);u(e)}catch(e){console.error("Chyba pri na\u010d\xedtan\xed d\xe1t \xfa\u010dtovn\xedka:",e)}finally{j(!1)}})(),O(),(async()=>{try{const e=await g.apiService.getAccountantTasks(s),a=e.filter(e=>"pending"===e.status),r=e.filter(e=>"completed"===e.status);Z(s=>(0,t.A)((0,t.A)({},s),{},{tasks:e.length,pending:a.length,completed:r.length}))}catch(e){console.error("Chyba pri na\u010d\xedtan\xed \xfaloh \xfa\u010dtovn\xedka:",e)}})()},[s]),(0,r.useEffect)(()=>{const e=setInterval(()=>{O()},3e4);return()=>clearInterval(e)},[O]),N?(0,b.jsx)(v,{userEmail:s,onBack:()=>f(!1)}):w?(0,b.jsx)(k,{userEmail:s,onBack:()=>S(!1)}):C?(0,b.jsx)(A,{userEmail:s,onBack:()=>z(!1)}):_?(0,b.jsx)(V,{userEmail:s,onBack:()=>D(!1)}):E?(0,b.jsx)(H,{userEmail:s,onBack:()=>I(!1)}):K?(0,b.jsx)(G,{userEmail:s,onBack:()=>T(!1)}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard \xfa\u010dtovn\xedka"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Spr\xe1va priraden\xfdch firiem a \xfaloh"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Prihl\xe1sen\xfd ako"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:s})]}),(0,b.jsx)("div",{className:"h-10 w-10 bg-primary-100 rounded-full flex items-center justify-center",children:(0,b.jsx)(i.A,{className:"h-6 w-6 text-primary-600"})})]})]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6",children:[(0,b.jsx)("button",{onClick:()=>S(!0),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(n.A,{className:"h-8 w-8 text-green-500"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"\xdalohy"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:L.tasks}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kliknite pre zobrazenie"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500",children:[L.pending," \u010dakaj\xfacich"]})]})]})}),(0,b.jsx)("button",{onClick:()=>S(!0),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(c.A,{className:"h-8 w-8 text-green-500"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Dokon\u010den\xe9"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:L.completed}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,b.jsx)("button",{onClick:()=>z(!0),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(d.A,{className:"h-8 w-8 text-orange-500"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"S\xfabory"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"\u221e"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,b.jsx)("button",{onClick:()=>D(!0),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(o.A,{className:"h-8 w-8 text-purple-500"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Priraden\xe9 firmy"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:L.companies}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,b.jsx)("button",{onClick:()=>I(!0),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(m.A,{className:"h-8 w-8 text-orange-500"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Kalend\xe1r"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"\u221e"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,b.jsx)("button",{onClick:()=>f(!0),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(x.A,{className:"h-8 w-8 text-blue-500"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Dropbox"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"\u221e"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kliknite pre zobrazenie"})]})]})}),(0,b.jsx)("button",{onClick:()=>T(!0),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(h.A,{className:"h-8 w-8 text-indigo-500"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Spr\xe1vy"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:B}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kliknite pre zobrazenie"}),B>0&&(0,b.jsxs)("p",{className:"text-sm text-indigo-600 font-medium",children:[B," nepre\u010d\xedtan\xfdch"]})]})]})}),(0,b.jsx)("button",{onClick:()=>a("/accounting"),className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-all duration-200 transform hover:scale-105",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)(p.A,{className:"h-8 w-8 text-green-500"})}),(0,b.jsxs)("div",{className:"ml-4",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"\xda\u010dtovn\xedctvo"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:"\u221e"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Kliknite pre zobrazenie"})]})]})})]})]})}}}]);