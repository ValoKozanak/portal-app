"use strict";(self.webpackChunkclient_portal_frontend=self.webpackChunkclient_portal_frontend||[]).push([[638],{2460:(e,t,a)=>{a.d(t,{B:()=>r});var s=a(22555),n=a(50237);const r=new class{async getSettings(e){return await n.apiService.get("/accounting/settings/".concat(e))}async saveSettings(e,t){return await n.apiService.post("/accounting/settings/".concat(e),t)}async getPermissions(e,t){return await n.apiService.get("/accounting/permissions/".concat(e,"/").concat(t))}async savePermissions(e,t){return await n.apiService.post("/accounting/permissions/".concat(e),t)}async getAllPermissions(e){return await n.apiService.get("/accounting/permissions/".concat(e))}async getIssuedInvoices(e,t){const a=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,s]=e;void 0!==s&&a.append(t,s.toString())});return await n.apiService.get("/accounting/issued-invoices/".concat(e,"?").concat(a))}async createIssuedInvoice(e,t){return await n.apiService.post("/accounting/issued-invoices/".concat(e),t)}async getIssuedInvoiceById(e){return await n.apiService.get("/accounting/issued-invoices/detail/".concat(e))}async getReceivedInvoices(e,t){const a=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,s]=e;void 0!==s&&a.append(t,s.toString())});return await n.apiService.get("/accounting/received-invoices/".concat(e,"?").concat(a))}async getReceivedInvoiceById(e){return await n.apiService.get("/accounting/received-invoices/detail/".concat(e))}async getPudSummary(e){return await n.apiService.get("/accounting/pud-summary/".concat(e))}async getFinancialAnalysis(e,t,a){let s="/accounting/financial-analysis/".concat(e);const r=new URLSearchParams;t&&r.append("dateFrom",t),a&&r.append("dateTo",a),r.toString()&&(s+="?".concat(r.toString()));return await n.apiService.get(s)}async getStats(e,t){const a=new URLSearchParams;t&&Object.entries(t).forEach(e=>{let[t,s]=e;void 0!==s&&a.append(t,s.toString())});return await n.apiService.get("/accounting/stats/".concat(e,"?").concat(a))}formatCurrency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";return new Intl.NumberFormat("sk-SK",{style:"currency",currency:t}).format(e)}formatDate(e){return new Date(e).toLocaleDateString("sk-SK")}getStatusBadge(e){return{draft:{text:"Koncept",color:"bg-gray-100 text-gray-800"},sent:{text:"Odoslan\xe1",color:"bg-blue-100 text-blue-800"},paid:{text:"Zaplaten\xe1",color:"bg-green-100 text-green-800"},overdue:{text:"Po splatnosti",color:"bg-red-100 text-red-800"},cancelled:{text:"Zru\u0161en\xe1",color:"bg-yellow-100 text-yellow-800"},received:{text:"Prijat\xe1",color:"bg-gray-100 text-gray-800"},approved:{text:"Schv\xe1len\xe1",color:"bg-blue-100 text-blue-800"},disputed:{text:"Sporn\xe1",color:"bg-orange-100 text-orange-800"}}[e]||{text:e,color:"bg-gray-100 text-gray-800"}}getTypeBadge(e){return{income:{text:"Pr\xedjem",color:"bg-green-100 text-green-800"},expense:{text:"V\xfddavok",color:"bg-red-100 text-red-800"}}[e]||{text:e,color:"bg-gray-100 text-gray-800"}}async testPohodaConnection(e,t){return await n.apiService.post("/accounting/test-pohoda-connection",(0,s.A)({companyId:e},t))}async testPohodaInvoices(e,t){return await n.apiService.post("/accounting/test-pohoda-invoices",(0,s.A)({companyId:e},t))}async syncPohodaInvoices(e,t,a){return await n.apiService.post("/accounting/sync-pohoda-invoices/".concat(e),{dateFrom:t,dateTo:a})}async uploadPohodaXml(e,t){const a=new FormData;a.append("xmlFile",t);const s=await fetch("".concat("https://musical-stardust-faabdb.netlify.app","/api/accounting/upload-pohoda-xml/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:a});if(!s.ok)throw new Error("Chyba pri nahr\xe1van\xed XML s\xfaboru");return await s.json()}async exportPohodaXml(e,t,a){const s=await fetch("".concat("https://musical-stardust-faabdb.netlify.app","/api/accounting/export-pohoda-xml/").concat(e,"?dateFrom=").concat(t||"","&dateTo=").concat(a||""),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!s.ok)throw new Error("Chyba pri exporte XML s\xfaboru");return await s.blob()}async refreshInvoicesFromMdb(e){const t=localStorage.getItem("dropbox_access_token");if(!t)throw new Error("Dropbox token nie je dostupn\xfd. Pripojte sa k Dropboxu.");const a=await fetch("".concat("https://musical-stardust-faabdb.netlify.app","/api/accounting/refresh-invoices/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw new Error("Chyba pri obnoven\xed fakt\xfar z MDB");return await a.json()}async refreshReceivedInvoicesFromMdb(e){const t=localStorage.getItem("dropbox_access_token");if(!t)throw new Error("Dropbox token nie je dostupn\xfd. Pripojte sa k Dropboxu.");const a=await fetch("".concat("https://musical-stardust-faabdb.netlify.app","/api/accounting/refresh-received-invoices/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(t),"Content-Type":"application/json"}});if(!a.ok)throw new Error("Chyba pri obnoven\xed prijat\xfdch fakt\xfar z MDB");return await a.json()}async importInvoicesFromMdb(e){const t=await fetch("".concat("https://musical-stardust-faabdb.netlify.app","/api/accounting/import-invoices/").concat(e),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri importe fakt\xfar z MDB");return await t.json()}async deleteIssuedInvoice(e){return await n.apiService.delete("/accounting/issued-invoices/".concat(e))}async deleteReceivedInvoice(e){return await n.apiService.delete("/accounting/received-invoices/".concat(e))}async deleteBankTransaction(e){return await n.apiService.delete("/accounting/bank-transactions/".concat(e))}async deleteCashTransaction(e){return await n.apiService.delete("/accounting/cash-transactions/".concat(e))}async getDirectory(e){const t=await fetch("".concat("https://musical-stardust-faabdb.netlify.app","/api/accounting/directory/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri na\u010d\xedtan\xed adres\xe1ra");return await t.json()}async getVatReturns(e,t){const a=t||(new Date).getFullYear(),s=await fetch("".concat("https://musical-stardust-faabdb.netlify.app","/api/accounting/vat-returns/").concat(e,"?year=").concat(a),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!s.ok)throw new Error("Chyba pri na\u010d\xedtan\xed DPH podan\xed");return await s.json()}async getBankAccounts(e){console.log("\ud83c\udfe6 Vol\xe1m bankov\xfd endpoint pre companyId:",e);const t=await fetch("".concat("https://musical-stardust-faabdb.netlify.app","/api/accounting/bank-accounts/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(console.log("\ud83c\udfe6 Bankov\xfd endpoint response status:",t.status),!t.ok)throw new Error("Chyba pri na\u010d\xedtan\xed bankov\xfdch \xfa\u010dtov");const a=await t.json();return console.log("\ud83c\udfe6 Bankov\xfd endpoint response data:",a),a}async getCashAccounts(e){const t=await fetch("".concat("https://musical-stardust-faabdb.netlify.app","/api/accounting/cash-accounts/").concat(e),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(!t.ok)throw new Error("Chyba pri na\u010d\xedtan\xed poklad\u0148ov\xfdch \xfa\u010dtov");return await t.json()}async getBankTransactions(e,t){console.log("\ud83c\udfe6 Vol\xe1m bankov\xfd transak\u010dn\xfd endpoint pre companyId:",e,"accountNumber:",t);const a=await fetch("http://localhost:5000/api/accounting/bank-transactions/".concat(e,"/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(console.log("\ud83c\udfe6 Bankov\xfd transak\u010dn\xfd endpoint response status:",a.status),!a.ok)throw new Error("Chyba pri na\u010d\xedtan\xed bankov\xfdch transakci\xed");const s=await a.json();return console.log("\ud83c\udfe6 Bankov\xfd transak\u010dn\xfd endpoint response data:",s),s}async getCashTransactions(e,t){console.log("\ud83d\udcb0 Vol\xe1m poklad\u0148ov\xfd transak\u010dn\xfd endpoint pre companyId:",e,"accountNumber:",t);const a=await fetch("http://localhost:5000/api/accounting/cash-transactions/".concat(e,"/").concat(t),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}});if(console.log("\ud83d\udcb0 Poklad\u0148ov\xfd transak\u010dn\xfd endpoint response status:",a.status),!a.ok)throw new Error("Chyba pri na\u010d\xedtan\xed poklad\u0148ov\xfdch transakci\xed");const s=await a.json();return console.log("\ud83d\udcb0 Poklad\u0148ov\xfd transak\u010dn\xfd endpoint response data:",s),s}}},27638:(e,t,a)=>{a.r(t),a.d(t,{default:()=>w});var s=a(9950),n=a(28429),r=a(14185),o=a(50619),c=a(2460);const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";return null===e||void 0===e||isNaN(e)?"-":new Intl.NumberFormat("sk-SK",{style:"currency",currency:t}).format(e)};var l=a(81095),d=a(80294),m=a(93245),x=a(60158),h=a(44813),u=a(16335),g=a(85706),p=a(72528),v=a(67360),y=a(54203),j=a(44414);const b=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#06B6D4","#84CC16","#F97316","#EC4899","#6366F1"],f=e=>{let{analysis:t}=e;const a=t.expenses.details.map((e,t)=>({name:e.account_name,value:e.amount,color:b[t%b.length]})),s=t.revenue.details.map((e,t)=>({name:e.account_name,value:e.amount,color:b[t%b.length]})),n=[{name:"V\xfdnosy",value:Math.max(0,t.revenue.total),color:"#10B981"},{name:"N\xe1klady",value:Math.max(0,t.expenses.total),color:"#EF4444"},{name:t.isProfit?"Zisk":"Strata",value:Math.max(0,Math.abs(t.profit)),color:t.isProfit?"#10B981":"#EF4444"}],r=t.expenses.details.sort((e,t)=>t.amount-e.amount).slice(0,5).map((e,t)=>({name:e.account_name,account:e.account,value:Math.max(0,e.amount),count:e.count,color:b[t%b.length]})),o=t.revenue.details.sort((e,t)=>t.amount-e.amount).slice(0,5).map((e,t)=>({name:e.account_name,account:e.account,value:Math.max(0,e.amount),count:e.count,color:b[t%b.length]})),c=e=>{let{active:t,payload:a,label:s}=e;if(t&&a&&a.length){const e=a[0].payload;return(0,j.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,j.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),e.account&&(0,j.jsxs)("p",{className:"text-sm text-gray-500",children:["\xda\u010det: ",e.account]}),(0,j.jsxs)("p",{className:"text-sm text-gray-600",children:["Suma: ",i(a[0].value)]}),e.count&&(0,j.jsxs)("p",{className:"text-sm text-gray-600",children:["Po\u010det: ",e.count]})]})}return null};return(0,j.jsxs)("div",{className:"space-y-8",children:[(0,j.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Porovnanie v\xfdnosov, n\xe1kladov a zisku/straty"}),(0,j.jsx)(l.u,{width:"100%",height:300,children:(0,j.jsxs)(d.E,{data:n,children:[(0,j.jsx)(m.d,{strokeDasharray:"3 3"}),(0,j.jsx)(x.W,{dataKey:"name"}),(0,j.jsx)(h.h,{domain:[0,"auto"]}),(0,j.jsx)(u.m,{content:(0,j.jsx)(c,{})}),(0,j.jsx)(g.y,{dataKey:"value",fill:"#8884d8",children:n.map((e,t)=>(0,j.jsx)(p.f,{fill:e.color},"cell-".concat(t)))})]})})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,j.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rozlo\u017eenie v\xfdnosov (\xfa\u010dty 6xx)"}),(0,j.jsx)(l.u,{width:"100%",height:400,children:(0,j.jsxs)(v.r,{children:[(0,j.jsx)(y.F,{data:s,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,fill:"#8884d8",dataKey:"value",children:s.map((e,t)=>(0,j.jsx)(p.f,{fill:e.color},"cell-".concat(t)))}),(0,j.jsx)(u.m,{content:(0,j.jsx)(c,{})})]})})]}),(0,j.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Rozlo\u017eenie n\xe1kladov (\xfa\u010dty 5xx)"}),(0,j.jsx)(l.u,{width:"100%",height:400,children:(0,j.jsxs)(v.r,{children:[(0,j.jsx)(y.F,{data:a,cx:"50%",cy:"50%",labelLine:!1,outerRadius:120,fill:"#8884d8",dataKey:"value",children:a.map((e,t)=>(0,j.jsx)(p.f,{fill:e.color},"cell-".concat(t)))}),(0,j.jsx)(u.m,{content:(0,j.jsx)(c,{})})]})})]})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,j.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top 5 v\xfdnosov"}),(0,j.jsx)(l.u,{width:"100%",height:300,children:(0,j.jsxs)(d.E,{data:o,children:[(0,j.jsx)(m.d,{strokeDasharray:"3 3"}),(0,j.jsx)(x.W,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:11},interval:0}),(0,j.jsx)(h.h,{domain:[0,"auto"]}),(0,j.jsx)(u.m,{content:(0,j.jsx)(c,{})}),(0,j.jsx)(g.y,{dataKey:"value",fill:"#10B981",children:o.map((e,t)=>(0,j.jsx)(p.f,{fill:e.color},"cell-".concat(t)))})]})})]}),(0,j.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top 5 n\xe1kladov"}),(0,j.jsx)(l.u,{width:"100%",height:300,children:(0,j.jsxs)(d.E,{data:r,children:[(0,j.jsx)(m.d,{strokeDasharray:"3 3"}),(0,j.jsx)(x.W,{dataKey:"name",angle:-45,textAnchor:"end",height:80,tick:{fontSize:11},interval:0}),(0,j.jsx)(h.h,{domain:[0,"auto"]}),(0,j.jsx)(u.m,{content:(0,j.jsx)(c,{})}),(0,j.jsx)(g.y,{dataKey:"value",fill:"#EF4444",children:r.map((e,t)=>(0,j.jsx)(p.f,{fill:e.color},"cell-".concat(t)))})]})})]})]}),t.revenue.total>0&&(0,j.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Ziskov\xe1 mar\u017ea"}),(0,j.jsx)("div",{className:"flex items-center justify-center",children:(0,j.jsxs)("div",{className:"relative",children:[(0,j.jsx)("div",{className:"w-32 h-32 rounded-full border-8 border-gray-200 flex items-center justify-center",children:(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsxs)("div",{className:"text-2xl font-bold ".concat(t.isProfit?"text-green-600":"text-red-600"),children:[(Math.abs(t.profit)/t.revenue.total*100).toFixed(1),"%"]}),(0,j.jsx)("div",{className:"text-sm text-gray-600",children:t.isProfit?"Zisk":"Strata"})]})}),(0,j.jsx)("div",{className:"absolute inset-0 rounded-full border-8 border-transparent ".concat(t.isProfit?"border-green-500":"border-red-500"),style:{clipPath:"polygon(50% 50%, 50% 0%, 100% 0%, 100% 100%, 50% 100%)",transform:"rotate(".concat(Math.min(Math.abs(t.profit)/t.revenue.total*180,180),"deg)")}})]})})]})]})},w=()=>{const{companyId:e}=(0,n.g)(),t=(0,n.Zp)(),[a,l]=(0,s.useState)(null),[d,m]=(0,s.useState)(!0),[x,h]=(0,s.useState)(null),[u,g]=(0,s.useState)(""),[p,v]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[w,N]=(0,s.useState)(!1),[k,S]=(0,s.useState)(null);(0,s.useEffect)(()=>{e&&(C(),P())},[e]);const C=async()=>{try{const t=await fetch("/api/companies/".concat(e));if(t.ok){const e=await t.json();S(e)}}catch(x){console.error("Chyba pri na\u010d\xedtan\xed inform\xe1ci\xed o firme:",x)}},P=async()=>{if(u&&p&&u>p)b('D\xe1tum "Do" nem\xf4\u017ee by\u0165 men\u0161\xed ako d\xe1tum "Od"');else{b("");try{m(!0),N(!0),h(null);const t=await c.B.getFinancialAnalysis(parseInt(e),u||void 0,p||void 0);l(t)}catch(t){console.error("Chyba pri na\u010d\xedtan\xed finan\u010dnej anal\xfdzy:",t),h("Chyba pri na\u010d\xedtan\xed finan\u010dnej anal\xfdzy")}finally{m(!1),N(!1)}}};return d?(0,j.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,j.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,j.jsxs)("div",{className:"animate-pulse",children:[(0,j.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,j.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(e=>(0,j.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,j.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),(0,j.jsx)("div",{className:"h-8 bg-gray-200 rounded w-3/4"})]},e))})]})})}):x?(0,j.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,j.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,j.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,j.jsxs)("div",{className:"flex",children:[(0,j.jsx)("div",{className:"flex-shrink-0",children:(0,j.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,j.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,j.jsxs)("div",{className:"ml-3",children:[(0,j.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Chyba"}),(0,j.jsx)("div",{className:"mt-2 text-sm text-red-700",children:x})]})]})})})}):a?(0,j.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,j.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,j.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsx)("div",{className:"flex items-center",children:(0,j.jsxs)("button",{onClick:()=>t("/accounting"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,j.jsx)(r.A,{className:"h-4 w-4 mr-2"}),"Sp\xe4\u0165 na \xfa\u010dtovn\xedctvo"]})}),(0,j.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Anal\xfdza hospod\xe1rskych v\xfdsledkov"}),k&&(0,j.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["Firma: ",k.name," (I\u010cO: ",k.ico,")"]})]}),(0,j.jsxs)("button",{onClick:P,disabled:w,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:[(0,j.jsx)(o.A,{className:"h-4 w-4 mr-2 ".concat(w?"animate-spin":"")}),"Obnovi\u0165"]})]})]}),(0,j.jsx)("p",{className:"text-gray-600 mt-2",children:"Podrobn\xe1 anal\xfdza n\xe1kladov, v\xfdnosov a zisku/straty"})]}),(0,j.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow mb-8",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Filtrovanie pod\u013ea obdobia"}),(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"dateFrom",className:"block text-sm font-medium text-gray-700 mb-1",children:"Od d\xe1tumu"}),(0,j.jsx)("input",{type:"date",id:"dateFrom",value:u,min:"1990-01-01",onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,j.jsxs)("div",{children:[(0,j.jsx)("label",{htmlFor:"dateTo",className:"block text-sm font-medium text-gray-700 mb-1",children:"Do d\xe1tumu"}),(0,j.jsx)("input",{type:"date",id:"dateTo",value:p,min:u||"1990-01-01",onChange:e=>v(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,j.jsxs)("div",{className:"flex items-end space-x-2",children:[(0,j.jsx)("button",{onClick:P,className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Aplikova\u0165 filtre"}),(0,j.jsx)("button",{onClick:()=>{g(""),v(""),b("")},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 transition-colors",children:"Vymaza\u0165 filtre"})]})]}),y&&(0,j.jsx)("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-md",children:(0,j.jsxs)("p",{className:"text-sm text-red-800",children:[(0,j.jsx)("strong",{children:"Chyba:"})," ",y]})}),(null===a||void 0===a?void 0:a.filters)&&(a.filters.dateFrom||a.filters.dateTo)&&(0,j.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:(0,j.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,j.jsx)("strong",{children:"Akt\xedvne filtre:"}),a.filters.dateFrom&&" Od: ".concat(a.filters.dateFrom),a.filters.dateTo&&" Do: ".concat(a.filters.dateTo)]})})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,j.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Celkov\xe9 v\xfdnosy"}),(0,j.jsx)("p",{className:"text-2xl font-bold text-green-600",children:i(a.revenue.total)}),(0,j.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[a.revenue.count," \xfa\u010dtov\xfdch skup\xedn"]})]}),(0,j.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,j.jsx)("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})]})}),(0,j.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Celkov\xe9 n\xe1klady"}),(0,j.jsx)("p",{className:"text-2xl font-bold text-red-600",children:i(a.expenses.total)}),(0,j.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[a.expenses.count," \xfa\u010dtov\xfdch skup\xedn"]})]}),(0,j.jsx)("div",{className:"bg-red-100 p-3 rounded-full",children:(0,j.jsx)("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})})]})}),(0,j.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,j.jsxs)("div",{className:"flex items-center justify-between",children:[(0,j.jsxs)("div",{children:[(0,j.jsx)("p",{className:"text-sm font-medium text-gray-600",children:a.isProfit?"Zisk":"Strata"}),(0,j.jsx)("p",{className:"text-2xl font-bold ".concat(a.isProfit?"text-green-600":"text-red-600"),children:i(Math.abs(a.profit))}),(0,j.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:a.isProfit?"Pozit\xedvny v\xfdsledok":"Negat\xedvny v\xfdsledok"})]}),(0,j.jsx)("div",{className:"p-3 rounded-full ".concat(a.isProfit?"bg-green-100":"bg-red-100"),children:(0,j.jsx)("svg",{className:"h-6 w-6 ".concat(a.isProfit?"text-green-600":"text-red-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.isProfit?(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"}):(0,j.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),(0,j.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,j.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,j.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"V\xfdnosy (\xfa\u010dty 6xx)"}),(0,j.jsxs)("p",{className:"text-sm text-gray-600",children:["Celkov\xe1 suma: ",i(a.revenue.total)]})]}),(0,j.jsx)("div",{className:"overflow-x-auto",children:(0,j.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,j.jsx)("thead",{className:"bg-gray-50",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xda\u010det"}),(0,j.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Suma"})]})}),(0,j.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.revenue.details.map((e,t)=>(0,j.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,j.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"font-semibold",children:e.account_name}),(0,j.jsx)("div",{className:"text-xs text-gray-500",children:e.account})]})}),(0,j.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-600 font-medium",children:i(e.amount)})]},t))})]})})]}),(0,j.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,j.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200",children:[(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"N\xe1klady (\xfa\u010dty 5xx)"}),(0,j.jsxs)("p",{className:"text-sm text-gray-600",children:["Celkov\xe1 suma: ",i(a.expenses.total)]})]}),(0,j.jsx)("div",{className:"overflow-x-auto",children:(0,j.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,j.jsx)("thead",{className:"bg-gray-50",children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\xda\u010det"}),(0,j.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Suma"})]})}),(0,j.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.expenses.details.map((e,t)=>(0,j.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,j.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:(0,j.jsxs)("div",{children:[(0,j.jsx)("div",{className:"font-semibold",children:e.account_name}),(0,j.jsx)("div",{className:"text-xs text-gray-500",children:e.account})]})}),(0,j.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-red-600 font-medium",children:i(e.amount)})]},t))})]})})]})]}),(0,j.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow",children:[(0,j.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,j.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"V\xfdsledok hospod\xe1renia"})}),(0,j.jsxs)("div",{className:"p-6",children:[(0,j.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"V\xfdnosy"}),(0,j.jsx)("p",{className:"text-2xl font-bold text-green-600",children:i(a.revenue.total)})]}),(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"N\xe1klady"}),(0,j.jsx)("p",{className:"text-2xl font-bold text-red-600",children:i(a.expenses.total)})]}),(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("p",{className:"text-sm font-medium text-gray-600",children:a.isProfit?"Zisk":"Strata"}),(0,j.jsxs)("p",{className:"text-2xl font-bold ".concat(a.isProfit?"text-green-600":"text-red-600"),children:[a.isProfit?"+":"-"," ",i(Math.abs(a.profit))]})]})]}),a.revenue.total>0&&(0,j.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,j.jsxs)("div",{className:"text-center",children:[(0,j.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Ziskov\xe1 mar\u017ea"}),(0,j.jsxs)("p",{className:"text-xl font-bold ".concat(a.isProfit?"text-green-600":"text-red-600"),children:[(Math.abs(a.profit)/a.revenue.total*100).toFixed(2),"%"]})]})})]})]}),(0,j.jsxs)("div",{className:"mt-8",children:[(0,j.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Grafick\xe1 anal\xfdza"}),(0,j.jsx)(f,{analysis:a})]})]})}):(0,j.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,j.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,j.jsx)("div",{className:"text-center text-gray-500",children:"\u017diadne d\xe1ta k zobrazeniu"})})})}}}]);